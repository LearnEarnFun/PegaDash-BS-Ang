/*! nxn-frontend 2019-03-13 */

function getDefaultPositionConfig(){return{data:{accounts:[{name:"ALL",code:"*"}],assetType:[{name:"ALL",code:"*"}],securityIdentifier:{name:"CUSIP/CINS",code:"CUS"},specificSecurities:null,staticLocation:[{name:"CLEARSTREAM BANKING FRANKFURT",code:"CBF"},{name:"DEPOSITORY TRUST CPNY",code:"DTC"},{name:"EUROCLEAR",code:"ECL"},{name:"FEDERAL RESERVE BK",code:"FRB"}],dynamicLocation:[{name:"ALL",code:"*"}],positionStatus:[{name:"ALL",code:"*"}]}}}function getDefaultTransactionConfig(){return{data:{accounts:[{name:"ALL",code:"*"}],assetType:[{name:"ALL",code:"*"}],clientRefNo:null,currency:null,dateRange:{name:"All History",code:"H"},dateType:{name:"Create Date",code:"0"},dateValueEnd:null,dateValueStart:null,dynamicLocation:[{name:"ALL",code:"*"}],relativeFromDateRange:null,relativeToDateRange:null,securityIdentifier:{name:"WPK",code:"WPK"},specificFromDateRange:"null",specificSecurities:null,specificToDateRange:"null",staticLocation:[{name:"CLEARSTREAM BANKING FRANKFURT",code:"CBF"},{name:"DEPOSITORY TRUST CPNY",code:"DTC"},{name:"EUROCLEAR",code:"ECL"},{name:"FEDERAL RESERVE BK",code:"FRB"}],transactionRefNo:null,transactionStatus:[{name:"ALL",code:"*"}],transactionType:[{name:"Other",code:"O"}]}}}function getDefaultCashAccountsConfig(){return{data:{accounts:[{name:"SPECIFIC",code:"S"}],displayType:{name:"Summary",code:"SUM"},viewBy:{name:"Status",code:"STA"},dateRanges:{name:"Real Time Today",code:"RT",dataField:"todayBusinessDate"}}}}function getErrorAccounts(a){return{data:{data:{availableAccounts:[]},error:a}}}function getErrorSummary(a){var b={};return b.errorMessage=a.errorMessage,b.data=[],b.pagination={offset:0,limit:0,totalResults:0,previousPageURI:"",nextPageURI:""},{data:b}}function nxnAccountsService(a,b,c,d){this.availableAccountTypes=[];var e,f,g,h=b("checkPermissions")(a.getNavbar()),i=!1,j=!1,k=!1,l=!1,m=!1,n=!1,o=[];for(e=0;e<h.length;e++){var p=h[e];if("ACCOUNTS"===p.name.toUpperCase()){var q=p.first_level;for(f=0;f<q.length;f++){if("CUSTODY ACCOUNTS"===q[f].name.toUpperCase())for(i=!0,g=0;g<q[f].second_level.length;g++)"DELIVERY INSTRUCTIONS"===q[f].second_level[g].name.toUpperCase()&&(k=!0),o.push(q[f].second_level[g].name);"LIQUIDITY AND COLLATERAL ACCOUNTS"===q[f].name.toUpperCase()&&(j=!0),"CURRENT ACCOUNTS"===q[f].name.toUpperCase()&&(l=!0),"BILLING ACCOUNTS"===q[f].name.toUpperCase()&&(m=!0),"ALTERNATE INVESTMENT ACCOUNTS"===q[f].name.toUpperCase()&&(n=!0)}}}d.enableTabs(o),i&&this.availableAccountTypes.push({key:"custodyAccounts",filterView:"custodyAccountsFilter",displayView:"custodyAccounts",stateName:"nxnAccounts.custody",name:"Custody Accounts",title:"Custody Accounts",isViewSpinner:!0}),j&&this.availableAccountTypes.push({key:"liquidityAccounts",filterView:"liquidityAccountsFilter",displayView:"liquidityAccounts",stateName:"nxnAccounts.liquidity",name:"Liquidity and Collateral Accounts",title:"Liquidity and Collateral Accounts",isViewSpinner:!0}),k?this.deliveryInstructionTabFlag=!0:this.deliveryInstructionTabFlag=!1,l&&this.availableAccountTypes.push({key:"currentAccounts",displayView:"currentAccounts",stateName:"nxnAccounts.current",name:"Current Accounts",title:"Current Accounts"}),m&&this.availableAccountTypes.push({key:"TriPartyDocuments",filterView:"TriPartyDocumentsFilter",displayView:"TriPartyDocuments",stateName:"nxnAccounts.triPartyRepo",name:"Billing Accounts",title:"Billing Accounts",isViewSpinner:!0}),n&&this.availableAccountTypes.push({key:"AisInvestmentRepo",filterView:"AisInvestmentRepoFilter",displayView:"AisInvestmentRepo",stateName:"nxnAccounts.aisAccounts",name:" Alternate Investment Accounts",title:" Alternate Investment Accounts",isViewSpinner:!0}),this.selectedAccountType={},this.selectedAccountType.value=this.availableAccountTypes[0],this.selectedTabRefs={},this.selectedTabRefs.custodyAccounts="nxnAccounts.custody.holdings",this.selectedTabRefs.liquidityAccounts="nxnAccounts.liquidity.summary",this.selectedTabRefs.cashAccounts="nxnAccounts.cash.summary",this.selectedTabRefs.currentAccounts="nxnAccounts.current.statements",this.selectedTabRefs.TriPartyDocuments="nxnAccounts.triPartyRepo.documents",this.selectedTabRefs.AisInvestmentRepo="nxnAccounts.aisAccounts.documents",this.statesVisited=[],this.statesToBeReset=[],this.markVisitedStatedForReset=function(){this.statesToBeReset=[];for(var a=0;a<this.statesVisited.length;a++)this.statesToBeReset.push(this.statesVisited[a]);this.statesVisited=[]},this.setSelectedAccountType=function(a){for(var b=0;b<this.availableAccountTypes.length;b++)if(a===this.availableAccountTypes[b].key)return void(this.selectedAccountType.value=this.availableAccountTypes[b])},this.setSelectedAccountsGroup=function(a){var b,c=[];switch(a){case"custodyAccounts":if("All Accounts"===this.selectedCustodyAccountsGroup.value.name){for(b=0;b<this.availableCustodyAccounts.length;b++)c.push(this.availableCustodyAccounts[b]);this.selectedCustodyAccounts.value=c}break;case"liquidityAccounts":if("All Accounts"===this.selectedLiquidityAccountsGroup.value.name){for(b=0;b<this.availableLiquidityAccounts.length;b++)c.push(this.availableLiquidityAccounts[b]);this.selectedLiquidityAccounts.value=c}break;case"cashAccounts":if("All Accounts"===this.selectedCashAccountsGroup.value.name){for(b=0;b<this.availableCashAccounts.length;b++)c.push(this.availableCashAccounts[b]);this.selectedCashAccounts.value=c}}}}function nxnCustodyAccountsService(a,b,c,d,e){this.showAliasErrorMessage=!1,this.aliasErrorMessage="",this.lobMnemonic="WB",this.lobName="Workbench",this.connectUrl="",this.availableAccountTypes=[{name:"All Accounts"},{name:"Specific Accounts"}],this.selectedAccountType={},this.availableAccounts=[],this.selectedAccounts={},this.selectedAccounts.value=[],this.selectedAccounts.parentSelectedAccounts=[],this.currencyAvailable=!1,this.accountControlData={},this.immsAccounts=[];var f=!1;this.validationMsg=!1,this.activeAccountsCheckBox=!0,this.nonZeroBalAccCheckBox=!0;var g={};g.value=!0;this.holdingsDataConfig=null,this.activityDataConfig=null,this.currencyDisplay=[],this.viewAdjAcct={},this.viewAdjAcct.account=[],this.viewAdjAcct.dateRange=[],this.tabs=[],this.isTabsEnabled=!1,this.enableTabs=function(a){this.isTabsEnabled||(a.indexOf("Holdings")!==-1&&this.tabs.push({title:"Holdings",sref:"nxnAccounts.custody.holdings({fromNav:'false'})",viewName:"custodyHoldingsTab",active:!1,activeOn:"nxnAccounts.custody.holdings",isTabSpinner:!0}),a.indexOf("Activity")!==-1&&this.tabs.push({title:"Activity",sref:"nxnAccounts.custody.activity({fromNav:'false'})",viewName:"custodyActivityTab",active:!1,activeOn:"nxnAccounts.custody.activity",isTabSpinner:!0}),a.indexOf("Documents")!==-1&&this.tabs.push({title:"Documents",sref:"nxnAccounts.custody.documents({fromNav:'false'})",viewName:"documentsTab",active:!0,activeOn:"nxnAccounts.custody.documents",isTabSpinner:!0}),this.tabs.push({title:"Delivery Instructions",sref:"nxnAccounts.custody.deliveryInstructions({fromNav:'false'})",viewName:"deliveryInstructionsTab",active:!1,activeOn:"nxnAccounts.custody.deliveryInstructions",isTabSpinner:!0}),a.indexOf("Delivery Instructions (pilot)")!==-1&&this.tabs.push({title:"Delivery Instructions (pilot)",sref:"nxnAccounts.custody.ssb({fromNav:'false'})",viewName:"ssbTab",active:!1,activeOn:"nxnAccounts.custody.ssb",isTabSpinner:!0}),this.isTabsEnabled=!0)},this.stopTabSpinner=function(a){for(var b=0;b<this.tabs.length;b++)if(this.tabs[b].viewName===a){this.tabs[b].isTabSpinner=!1;break}};var h={staticLocation:[{name:"ECL",code:"ECL",selected:!1},{name:"CBF",code:"CBF",selected:!1},{name:"FRB",code:"FRB",selected:!1},{name:"DTC",code:"DTC",selected:!1}],assetType:[{name:"All",code:"*"},{name:"CONTRACTS",code:"2300"},{name:"DEBT",code:"2100"},{name:"DEBT TBA ANNOUNCEMENTS",code:"TBA"},{name:"DEBT US TREASURIES",code:"TRE"},{name:"DEBT US AGENCY",code:"AGD"},{name:"DEBT US PASS-THROUGH MBS",code:"MBS"},{name:"EQUITIES",code:"2000"},{name:"MISCELLANEOUS",code:"1900"},{name:"MISCELLANEOUS DEBT",code:"2400"},{name:"MONEY MARKET INSTRUMENTS",code:"2500"},{name:"OTHER",code:"OTH"}],dynamicLocation:[{name:"All",code:"*"},{name:"BNYM ASSET SERVICING BV",code:"ASN"},{name:"HBMB MALAYSIA BERHAD",code:"BBB"},{name:"BANGKOK BANK",code:"BBK"},{name:"ING BELGIUM SA/NV",code:"BBL"},{name:"BCO BILB.VIZC.ARGENTARIA(BBVA)",code:"BBV"},{name:"INTESA SANPAOLO SPA",code:"BCI"},{name:"BHF-BANK",code:"BHF"},{name:"BK COM PORTUGUES",code:"BPP"},{name:"BNP PARIBAS SEC SVCES",code:"BPR"},{name:"CITIBANK NA BRAZIL EXEMPT LOC",code:"BRE"},{name:"BANK OF TOKYO-MITSUBISHI UFJ",code:"BTM"},{name:"CREST GILTS",code:"CGO"},{name:"CIBC MELLON GL.SEC.SERV.CO.",code:"CIB"},{name:"BNY LDN-CREST",code:"CRE"},{name:"BNY LDN IRISH-CREST",code:"CRI"},{name:"CREDIT SUISSE AG ZURICH",code:"CSZ"},{name:"DBS SINGAPORE",code:"DBS"},{name:"DNB BANK ASA",code:"DNC"},{name:"EUROCLEAR NETHERLANDS",code:"ECN"},{name:"FLOOR",code:"FLR"},{name:"HKK SHANGHAI BANK",code:"HKK"},{name:"HK SHANGHAI IND",code:"HKN"},{name:"HSBC MANILA PH",code:"HKP"},{name:"HSBC BANGKOK",code:"HSB"},{name:"HSBC TAIWAN",code:"HST"},{name:"NATL AUSTRALIA BK LTD",code:"NAB"},{name:"MIT NAD",code:"NAD"},{name:"ROYAL BANK OF CANADA",code:"RBC"},{name:"DEUTSCHE BANK INDONESIA",code:"RMI"},{name:"DEUTSCHE BK PH",code:"RMP"},{name:"STANDARD BANK SA",code:"SBB"},{name:"SCB TAIWAN LIMITED",code:"SBW"},{name:"SKANDINAVISKA EB",code:"SEB"},{name:"SEB FINLAND",code:"SEF"},{name:"SEB OSLO",code:"SEN"},{name:"NORDEA BANK FINLAND",code:"UBB"},{name:"UNCERTIFICATED STOCK",code:"UNC"},{name:"BNYM UK VAULT",code:"VLT"}],positionStatus:[{name:"All",code:"*"},{name:"At Registrar",code:"T"},{name:"Available",code:"B"},{name:"Blocked Proxy",code:"V"},{name:"Collateral",code:"E"},{name:"On Loan",code:"L"},{name:"Pledged",code:"P"},{name:"Restricted",code:"R"},{name:"Segregated",code:"D"},{name:"Third Party Loan",code:"A"},{name:"Other",code:"O"}],securityIdentifier:[{name:"ISIN",code:"ISN"},{name:"CUSIP/CINS",code:"CUS"},{name:"QUICK",code:"KWK"},{name:"SEDOL",code:"SED"},{name:"SICOVAM",code:"SIC"},{name:"TICKER",code:"TKR"},{name:"VALOREN",code:"VAL"},{name:"WPK",code:"WPK"}],transactionStatus:[{name:"All",code:"*"},{name:"Settled",code:"STL"},{name:"Pending",code:"PND"},{name:"Failing",code:"FAIL"},{name:"Cancelled",code:"CAN"},{name:"Unverified",code:"UNV"},{name:"Executed",code:"EXEC"},{name:"Opened",code:"OPEN"}],transactionType:[{name:"All",code:"*"},{name:"Buy",code:"B"},{name:"Cash Deposit",code:"CD"},{name:"Cash Withdrawal",code:"CW"},{name:"Corporate Actions",code:"CA"},{name:"Capital Stock",code:"CU"},{name:"Dividend",code:"DV"},{name:"Foreign Exchange",code:"FX"},{name:"Interest",code:"IT"},{name:"Internal Movement",code:"IM"},{name:"Maturity",code:"MT"},{name:"Other",code:"O"},{name:"Pay Down",code:"PD"},{name:"Pay Up",code:"PU"},{name:"Security Deposit",code:"SD"},{name:"Security Withdrawal",code:"SW"},{name:"Sell",code:"S"}],dateRange:[{name:"Real Time Today",code:"T"},{name:"Prior Weekday",code:"P"},{name:"All History",code:"H"},{name:"Specific Range",code:"S"}],dateType:[{name:"Create Date",code:"0"},{name:"Trade Date",code:"1"},{name:"Contractual Settle Date",code:"2"},{name:"Actual Settle Date",code:"3"},{name:"Alternate Delivery Date",code:"4"},{name:"Order Date",code:"5"},{name:"Cancel Date",code:"6"}],displayType:[{name:"Summary",code:"SUM"},{name:"Detail",code:"DET"}],viewBy:[{name:"Status",value:"status",code:"STA"},{name:"Transaction Type",value:"type",code:"TRA"}],dateRanges:[{name:"Real Time Today",code:"RT",dataField:"todayBusinessDate"},{name:"Previous Day",code:"PD",dataField:"previousBusinessDate"},{name:"Today+1 Weekday",code:"FD1",dataField:"firstProjectionDate"},{name:"Today+2 Weekday",code:"FD2",dataField:"secondProjectionDate"},{name:"Today+3 Weekday",code:"FD3",dataField:"thirdProjectiondate"},{name:"Today+4 Weekday",code:"FD4",dataField:"fourthProjectiondate"},{name:"Today+5 Weekday",code:"FD5",dataField:"fifthProjectiondate"}]},i={activity:{assetType:{name:"assetType",multiSelect:!0},transactionType:{name:"transactionType",multiSelect:!0},transactionStatus:{name:"transactionStatus",multiSelect:!0},specificSecurities:{name:"specificSecurities",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Securities with no spaces"},{name:"lengthRangeValidator",params:{minLength:11,maxLength:20,splitChar:","},errMessage:"The length of the specific Securities should be between 11-20"}]},accounts:{name:"accounts",multiSelect:!0},securityIdentifier:{name:"securityIdentifier",multiSelect:!1},staticLocation:{name:"staticLocation",multiSelect:!0},dateType:{name:"dateType",multiSelect:!1},dateRange:{name:"dateRange",multiSelect:!1},transactionRefNo:{name:"transactionRefNo",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Transaction Ref No. without spaces"}]},clientRefNo:{name:"clientRefNo",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Client Ref No. without spaces"}]},currency:{name:"currency",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Currency Codes without spaces"},{name:"lengthValidator",params:{length:3,splitChar:","},errMessage:"The length of the currency code is not valid"}]},dynamicLocation:{name:"dynamicLocation",multiSelect:!0},specificFromDateRange:{name:"specificFromDateRange",multiSelect:!1},specificToDateRange:{name:"specificToDateRange",multiSelect:!1}},holdings:{assetType:{name:"assetType",multiSelect:!0},positionStatus:{name:"positionStatus",multiSelect:!0},specificSecurities:{name:"specificSecurities",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Securities with no spaces"},{name:"lengthRangeValidator",params:{minLength:11,maxLength:20,splitChar:","},errMessage:"The length of the specific Securities should be between 11-20"}]},accounts:{name:"accounts",multiSelect:!0},securityIdentifier:{name:"securityIdentifier",multiSelect:!1},staticLocation:{name:"staticLocation",multiSelect:!0},dynamicLocation:{name:"dynamicLocation",multiSelect:!0}},cash:{accounts:{name:"accounts",multiSelect:!0},displayType:{name:"displayType",multiSelect:!1},viewBy:{name:"viewBy",multiSelect:!1},dateRanges:{name:"dateRanges",multiSelect:!1}}};this.validatorsMap={noSpaceValidator:function(a){if(angular.isDefined(a)&&null!=a)for(var b=0;b<a.length;b++){var c=a.charAt(b);if(" "===c)return!1}return!0},lengthValidator:function(a,b){if(angular.isDefined(a)&&null!=a)if(angular.isDefined(b.splitChar)){var c=a.split(b.splitChar);angular.forEach(c,function(a){if(a.length!==b.length)return!1})}else if(a.length!==length)return!1;return!0},lengthRangeValidator:function(a,b){if(angular.isDefined(a)&&null!==a)if(angular.isDefined(b.splitChar)){for(var c=a.split(b.splitChar),d=0;d<c.length;d++)if(c[d].length<b.minLength||c[d].length>b.maxLength)return!1}else if(a.length<b.minLength||a.length>b.maxLength)return!1;return!0}},this.getAvailableSearchCriteria=function(a){var b={};if(angular.isUndefined(i[a]))return b;var c=i[a];return angular.forEach(c,function(a){var c=a.name;b[c]=h[c]}),b},this.setSelectedAccountType=function(){"All Accounts"===this.selectedAccountType.value.name&&(this.selectedAccounts.value=[],f=!f)},this.getSelectedAccountType=function(){return this.selectedAccountType.value},this.setSelectedAccountsFromConfig=function(a){if(!this.isAccountConfigLoaded()&&!angular.isUndefined(a)){if(0===a.length)return this.selectedAccounts.value=[],void(this.selectedAccountType.value=this.availableAccountTypes[0]);if("ALL"===a[0].name.toUpperCase()&&"*"===a[0].code)return this.selectedAccounts.value=[],void(this.selectedAccountType.value=this.availableAccountTypes[0]);for(var b=[],c=0;c<this.availableAccounts.length;c++)for(var d=0;d<a.length;d++)if(a[d].code.trim()===this.availableAccounts[c].accountNumber.trim()){b.push(this.availableAccounts[c]);break}this.selectedAccounts.value=b,this.selectedAccountType.value=this.availableAccountTypes[1]}},this.isAccountConfigLoaded=function(){return!(!angular.isDefined(this.selectedAccounts.value)||!angular.isDefined(this.selectedAccountType.value))},this.isAccountsChangedByType=function(){return f},this.getSelectedAccounts=function(){return this.selectedAccounts.value},this.getAllAccounts=function(){return this.availableAccounts},this.getNewActivityConfig=function(){},this.getStaticLocationsCopy=function(){for(var a=[],b=0;b<h.staticLocation.length;b++){var c={};c.name=h.staticLocation[b].name+"",c.code=h.staticLocation[b].code+"",c.selected=h.staticLocation[b].selected,a.push(c)}return a},this.validate=function(a,b){var c={};if(!angular.isUndefined(i[a])){c=i[a];for(var d,e={},f=Object.keys(c),g=0;g<f.length;g++)if(d=c[f[g]],"dateGradient"===d.name){var h=b.dateRange.value;if(!angular.isUndefined(h)&&"S"===h.code){var j=b.specificFromDateRange.value,k=b.specificToDateRange.value,l="From date should be less than or equal to TO date";j>k&&this.populateErrorObject(e,d,l)}}else{if(angular.isUndefined(d.validators))continue;var m=b[d.name].value;if(angular.isUndefined(m)||null===m||""===m)continue;for(var n=d.validators,o=0;o<n.length;o++){var p=this.validatorsMap[n[o].name];if(!p.call(void 0,m,n[o].params)){this.populateErrorObject(e,d,n[o].errMessage);break}}}return e}},this.populateErrorObject=function(a,b,c){a[b.name]={},a[b.name].value={},a[b.name].value.exists=!0,a[b.name].value.message=c},this.getSelected=function(a,b,c){var d={};if(angular.isUndefined(i[a]))return d;var e=i[a];return angular.forEach(e,function(a){d[a.name]={},a.multiSelect&&(d[a.name].value=[])}),angular.forEach(e,function(a){var e,f=a.name;if(null!=c[f])if(c[f].constructor===Array){for(var g=0;g<c[f].length;g++)if(!angular.isUndefined(b[f]))for(e=0;e<b[f].length;e++)c[f][g].code===b[f][e].code&&d[f].value.push(b[f][e])}else if(!angular.isUndefined(b[f]))for(e=0;e<b[f].length;e++)if(c[f].code===b[f][e].code){d[f].value=b[f][e];break}}),d},this.formatDate=function(b){return a.format(b,"e","YYYY/MM/DD")},this.setSearch=function(a){g.value=a},this.getSearch=function(){return g},this.reset=function(){this.accountConfigLoaded=!1;for(var a=0;a<this.tabs.length;a++)this.tabs[a].isTabSpinner=!0},this.reload=function(){this.reload=!0},this.setActivityDataConfig=function(a){this.activityDataConfig=a},this.setHoldingsDataConfig=function(a){this.holdingsDataConfig=a},this.shouldReloadData=function(a){var b=[];if(!angular.isUndefined(this.getSelectedAccounts()))for(var c=0;c<this.getSelectedAccounts().length;c++)b.push({name:this.getSelectedAccounts()[c].accountName,code:this.getSelectedAccounts()[c].accountNumber});if("nxnAccounts.custody.holdings"===a){if(angular.isObject(this.holdingsDataConfig)&&JSON.stringify(this.holdingsDataConfig.accounts)!==JSON.stringify(b))return"refreshHoldings"}else if("nxnAccounts.custody.activity"===a&&angular.isObject(this.activityDataConfig)&&JSON.stringify(this.activityDataConfig.accounts)!==JSON.stringify(b))return"refreshActivity";return""},this.getCashProperties=function(){return{accounts:{name:"accounts",multiSelect:!0},displayType:{name:"displayType",multiSelect:!1},viewBy:{name:"viewBy",multiSelect:!1},dateRanges:{name:"dateRanges",multiSelect:!1}}},this.uniqueCurrencyFilter=function(a,c){var d=[],e=[],f=[];return angular.forEach(a,function(a){var b=c?a.accountType.substring(7):a.currency+" "+a.branchCode;if(null!==b&&void 0!==b){if(c){var g=b.split(" - ");a.currency=g[1],a.branchCode=g[0]}e.indexOf(b)===-1&&(e.push(b),"USD"===a.currency?f.push(a):d.push(a))}}),d=b("orderBy")(d,["currency","branchCode"]),f=b("orderBy")(f,["currency","branchCode"]),f.concat(d)},this.cashSummaryInfo=[],this.setCashSummaryInfo=function(a){this.cashSummaryInfo=a},this.getCustodyHoldingFilterDefault=function(){return{assetType:[{name:"All",code:"*"}],positionStatus:{name:"All",code:"*"},securityIdentifier:{name:"ISIN",code:"ISN"}}},this.fetchSelectedCustodyAccounts=function(){var a=[];if("All Accounts"===this.accountControlData.selectedAccountType.name)a.push("ALL");else if(this.accountControlData.selectedAccounts.value.length>0)for(var b=0;b<this.accountControlData.selectedAccounts.value.length;b++)a.push(this.accountControlData.selectedAccounts.value[b].accountNumber.trim());return a},this.fetchSelectedCustodyAccountGroups=function(){var a=[];if(this.accountControlData.selectedAccountGroups.value.length>0)for(var b=0;b<this.accountControlData.selectedAccountGroups.value.length;b++)a.push(this.accountControlData.selectedAccountGroups.value[b].accountGroupId.trim());return a},this.getHoldingProperties=function(){return{assetType:{name:"assetType",multiSelect:!0},staticLocation:{name:"staticLocation",multiSelect:!1},positionStatus:{name:"positionStatus",multiSelect:!1},securityIdentifier:{name:"securityIdentifier",multiSelect:!1},specificSecurities:{name:"specificSecurities"}}},this.loadCustodyAccountsAndFireDocumentSearch=function(a,b){var c=e.defer(),d=[],f=0,g=0,h=0,i=this,j=function(e,l,m,n){e.data.metadata.status===!0?(angular.forEach(e.data.data,function(a){d.push(a)}),h=e.data.pagination.total,g=e.data.pagination.limit,f+=g,f>=h?c.resolve({accountsListObj:d,errorObj:""}):i.getHikariAccountSearchResult(f,g,a,b).then(j,k)):c.resolve({errorObj:"failed"})},k=function(a,b,d,e){c.resolve({errorObj:"failed"})};return this.getHikariAccountSearchResult(f,g,a,b).then(j,k),c.promise},this.getHikariAccountSearchResult=function(a,b,e,f){var g=c.API_GATEWAY_SVC_URLS[e]+""+c.PATH_TO_HIKARI_ACCT_SEARCH,h={};return h.url=g,h.alias=f.alias,h.aliasToken=f.aliasToken,h.productCode=f.productCode,h.accountSources=f.accountType,h.accountGroupIds=f.accountGroupIds,d.getAccountsFromHikari(h,a,b)},this.loadCustodyAccountGroupAndFireDocumentSearch=function(a,b){var c=e.defer(),d=[],f=function(a,b,e,f){a.data.metadata.status===!0?(angular.forEach(a.data.data,function(a){d.push(a)}),c.resolve({accountGroupListObj:d})):(showLoader(!1),$scope.displayMessage=!0,$scope.changeMessage({type:"danger",msg:documentSearchConfigs.MESSAGE_CONSTANTS.ERR_MSG_GENERIC_SYSTEM_FAILURE}))},g=function(a,b,d,e){c.resolve({errorMsg:"failed"}),showLoader(!1),$scope.displayMessage=!0,$scope.changeMessage({type:"danger",msg:documentSearchConfigs.MESSAGE_CONSTANTS.ERR_MSG_GENERIC_SYSTEM_FAILURE})};return this.getHikariAccountGroupSearchResult(a,b).then(f,g),c.promise},this.getHikariAccountGroupSearchResult=function(a,b){var e=c.API_GATEWAY_SVC_URLS[a]+""+c.PATH_TO_HIKARI_ACCTGRP_SEARCH,f={};return f.url=e,f.aliasToken=b.aliasToken,f.alias=b.alias,f.productCode=b.productCode,f.accountGroupType=b.accountGroupType,d.getAccountGroupsFromHikari(f)}}function WbUrlConfig(a){this.getWBUrls=function(b){var c="",d=a.getEnvConfig();return"BROADRIDGE_URL"===b?c=d.broadridgeurl:"MARKETPROFILES_URL"===b?c=d.marketprofileurl:"MAINFRAME_SERVICES_URL"===b&&(c=d.mainframeserviceurl),c}}function AlertsV2ServiceProvider(){function a(a,d,e,f,g,h){function i(){var a={"X-client-key":R,"X-Requested-With":"XMLHttpRequest",SMUSER:O},b={headers:a,timeout:6e4};return b}function j(a,b,c){return h.processRequest("AlertsAndMessagingV2",a,i(),b,c)}function k(a,d){return d||(d=i()),g.getSysParam(b).then(function(b){return b!==c?j("get",a):e.get(P,Q,a,d)})}function l(a,d,f){return f||(f=i()),g.getSysParam(b).then(function(b){return b!==c?j("post",a,d):e.post(P,Q,a,d,f)})}function m(){return 1e3}function n(a,b,c,d){return a=moment(a).format("YYYY-MM-DD"),b=moment(b).format("YYYY-MM-DD"),O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts",{userId:O,fromDate:a,toDate:b,offset:d?d:0,limit:c?c:m()})}function o(a,b,c,d){return a=moment(a).format("YYYY-MM-DD"),b=moment(b).format("YYYY-MM-DD"),O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts",{userId:O,fromDate:a,toDate:b,limit:c?c:m(),offset:d?d:0})}function p(a,b){return O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts/acknowledge",{alertRecId:a,ackStatus:b})}function q(a,b,c,d,e){a=moment(a).format("YYYY-MM-DD"),b=moment(b).format("YYYY-MM-DD"),O=angular.isUndefined(O)?"NULL":O.toUpperCase();var f="?startDate="+a+"&endDate="+b+"&alertPriorities="+c+"&ackStatCodes="+d+"&alertTypes="+e;return k("/alerts/counts"+f)}function r(a,b,c,d,e,f,g){return a=moment(a).format("YYYY-MM-DD"),b=moment(b).format("YYYY-MM-DD"),O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts",{userId:O,alertTypes:g,alertPri:e,ackStatCodes:f,fromDate:a,toDate:b,limit:c?c:m(),offset:d?d:0})}function s(a){return l("/alerts/"+a+"/delete",{})}function t(){return k("/alerts/summary")}function u(){return l("/alerts/summary/delete",{})}function v(a){return O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts/summary/update",{userId:O,alertTypes:a.alertTypes,scheduledEmail:a.scheduledEmail,enable:a.enable,groupEmailAlertBy:a.groupEmailAlertBy,holdFromDate:a.holdFromDate,holdToDate:a.holdToDate,timeInterval:a.timeInterval})}function w(a){return O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts/device/trigger",{userId:O,client:a})}function x(a,b,c){return O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts/device/update/trigger",{userId:O,client:a,devices:b,server:c})}function y(){return k("/alerts/device")}function z(a,b,c,d,e){return O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts/device/update",{userId:O,deviceInfo:a,holdDate:c,toDate:d,enabled:e,provider:b})}function A(){var a="?summaryFlag=true";return k("/products"+a)}function B(a){var b="?alertCategory="+a;return k("/alerts/names"+b)}function C(a,b,c,d){return l("/entitlements",{userId:O,alertCategory:b,alertType:c,publication:a,filters:d})}function D(a,b){return l("/accounts/unravel",{accountParentIds:[b],publication:a})}function E(a,b){return b=b.map(function(a){return a.accountId}),l("/accounts/unravel",{accountParentIds:b,publication:a})}function F(a,b,c){return l("/alerts/names/delete",{alertCategory:a,alertType:b,alertName:c})}function G(a){return l("/alerts/subsc/delete",{alertType:a})}function H(a){var b=N[angular.uppercase(f.getEnvironment())]+"/ercuiWeb/reportcenter/documents/criteria/delete/"+a,c={};return d.put(b,c,i())}function I(a,b,c,d,e,f){O=angular.isUndefined(O)?"NULL":O.toUpperCase();var g={userId:O,alertCategory:c,alertType:a,parentAlert:b,publication:f,uiparamflag:!0};return"AM_GLSMMF"===c&&"AM_GLSMMRRATING"!==a&&(g.uiparamflag=!1),angular.isDefined(e)&&(g.alertSubscNames="AM_GLSMMF"===c?[e]:[e.label]),l("/subscriptions",g)}function J(){return k("/adminservices/report/ALRALL")}function K(a,b,c,d,e,f,g){return O=angular.isUndefined(O)?"NULL":O.toUpperCase(),l("/alerts/subsc",{acctGrpCount:0,acctListCount:null!==b?b.length:0,actionType:g?"UPDATE":"ADD",alertSubscInfo:{actionType:null,alertCategory:a.alertCategory,alertCategoryLabel:null,alertSubscCriteriaVo:f,alertType:a.alertType,alertTypeLabel:a.alertTypeLabel,multipleEvents:null,parentAlert:e,pubName:a.pubName,scheduleTime:null,selected:!1,subscNotifyFlag:!1,subscPriority:0,updateAlertCustId:null},parentAlert:e,productKey1:"***",productKey2:"***",productKey3:"***",selectedAccounts:c||{},summarySubcFlag:!1,userId:O,userType:d})}function L(a){return l("/emailDelivery",{emailId:a})}function M(a){return l("/smsDelivery",{emailId:a})}var N={DEV:"https://dev-ers2.bnymellon.com",QA:"https://uat-ers2.bnymellon.com",XAT:"https://xuat-ers2.bnymellon.com",PRODUCTION:"https://ers2.bnymellon.com",LOCAL:"",MOCK:""},O=f.getUser(),P="alerts_and_messaging",Q="v2",R=f.getClientKey();return{getAlertCountThreshhold:m,getRequestWithFallback:k,postRequestWithFallback:l,getAlerts:o,deleteAlertsByID:s,getCustomDateRange:n,getFilterAlert:r,getFilterCount:q,changeAckStatus:p,getSummaryBatchInfo:t,deleteSummarySubscription:u,updateSummaryBatchInfo:v,getAlertDevicesByAlert:w,updateAlertDevicesByAlert:x,getAlertDevices:y,updateAlertDevices:z,getSubscAlertTypes:A,getSubscDetails:I,updateSubscription:K,getSavedAlerts:B,deleteSubscription:F,deleteAllSubscriptions:G,deleteErsSubscription:H,getEntitlements:C,getAccountGroupList:D,getAccountGroupListAll:E,exportAlertSubscription:J,testEmail:L,testSms:M}}var b="api_gateway_fallback",c="N";return a.$inject=["nxn.pathJoin","nxn.Http","ApiGatewayService","PageContext","SysParamsService","RequestFailover"],{$get:a}}function NxnPathJoinService(){return function(){if(0===arguments.length)throw"pathJoin must be called with at least one argument";if(1===arguments.length)return arguments[0];var a=arguments[0];"/"!==a[a.length-1]&&(a+="/");for(var b=a,c=1;c<arguments.length;c++){for(a=arguments[c];"/"===a[0];)a=a.slice(1);0===a.length||"/"!==a[a.length-1]&&(a+="/"),b+=a}return b.length>1&&"/"===b[b.length-1]&&(b=b.slice(0,-1)),b}}function QqmService(a,b){this.availableAccountTypes=[{name:"All Accounts"},{name:"Specific Accounts"}],this.selectedAccountType={},this.availableAccounts=[],this.selectedAccounts={};var c=!1,d={};d.value=!0;var e,f,g=!1,h=!1,i={staticLocation:[{name:"ECL",code:"ECL",selected:!1},{name:"CBF",code:"CBF",selected:!1},{name:"FRB",code:"FRB",selected:!1},{name:"DTC",code:"DTC",selected:!1}],assetType:[{name:"All",code:"*"},{name:"CONTRACTS",code:"2300"},{name:"DEBT",code:"2100"},{name:"DEBT TBA ANNOUNCEMENTS",code:"TBA"},{name:"DEBT US TREASURIES",code:"TRE"},{name:"DEBT US AGENCY",code:"AGD"},{name:"DEBT US PASS-THROUGH MBS",code:"MBS"},{name:"EQUITIES",code:"2000"},{name:"MISCELLANEOUS",code:"1900"},{name:"MISCELLANEOUS DEBT",code:"2400"},{name:"MONEY MARKET INSTRUMENTS",code:"2500"},{name:"OTHER",code:"OTH"}],dynamicLocation:[{name:"All",code:"*"},{name:"BNYM ASSET SERVICING BV",code:"ASN"},{name:"HBMB MALAYSIA BERHAD",code:"BBB"},{name:"BANGKOK BANK",code:"BBK"},{name:"ING BELGIUM SA/NV",code:"BBL"},{name:"BCO BILB.VIZC.ARGENTARIA(BBVA)",code:"BBV"},{name:"INTESA SANPAOLO SPA",code:"BCI"},{name:"BHF-BANK",code:"BHF"},{name:"BK COM PORTUGUES",code:"BPP"},{name:"BNP PARIBAS SEC SVCES",code:"BPR"},{name:"CITIBANK NA BRAZIL EXEMPT LOC",code:"BRE"},{name:"BANK OF TOKYO-MITSUBISHI UFJ",code:"BTM"},{name:"CREST GILTS",code:"CGO"},{name:"CIBC MELLON GL.SEC.SERV.CO.",code:"CIB"},{name:"BNY LDN-CREST",code:"CRE"},{name:"BNY LDN IRISH-CREST",code:"CRI"},{name:"CREDIT SUISSE AG ZURICH",code:"CSZ"},{name:"DBS SINGAPORE",code:"DBS"},{name:"DNB BANK ASA",code:"DNC"},{name:"EUROCLEAR NETHERLANDS",code:"ECN"},{name:"FLOOR",code:"FLR"},{name:"HKK SHANGHAI BANK",code:"HKK"},{name:"HK SHANGHAI IND",code:"HKN"},{name:"HSBC MANILA PH",code:"HKP"},{name:"HSBC BANGKOK",code:"HSB"},{name:"HSBC TAIWAN",code:"HST"},{name:"NATL AUSTRALIA BK LTD",code:"NAB"},{name:"MIT NAD",code:"NAD"},{name:"ROYAL BANK OF CANADA",code:"RBC"},{name:"DEUTSCHE BANK INDONESIA",code:"RMI"},{name:"DEUTSCHE BK PH",code:"RMP"},{name:"STANDARD BANK SA",code:"SBB"},{name:"SCB TAIWAN LIMITED",code:"SBW"},{name:"SKANDINAVISKA EB",code:"SEB"},{name:"SEB FINLAND",code:"SEF"},{name:"SEB OSLO",code:"SEN"},{name:"NORDEA BANK FINLAND",code:"UBB"},{name:"UNCERTIFICATED STOCK",code:"UNC"},{name:"BNYM UK VAULT",code:"VLT"}],positionStatus:[{name:"All",code:"*"},{name:"At Registrar",code:"T"},{name:"Available",code:"B"},{name:"Blocked Proxy",code:"V"},{name:"Collateral",code:"E"},{name:"On Loan",code:"L"},{name:"Pledged",code:"P"},{name:"Restricted",code:"R"},{name:"Segregated",code:"D"},{name:"Third Party Loan",code:"A"},{name:"Other",code:"O"}],securityIdentifier:[{name:"ISIN",code:"ISN"},{name:"CUSIP/CINS",code:"CUS"},{name:"QUICK",code:"KWK"},{name:"SEDOL",code:"SED"},{name:"SICOVAM",code:"SIC"},{name:"TICKER",code:"TKR"},{name:"VALOREN",code:"VAL"},{name:"WPK",code:"WPK"}],transactionStatus:[{name:"All",code:"*"},{name:"Settled",code:"STL"},{name:"Pending",code:"PND"},{name:"Failing",code:"FAIL"},{name:"Cancelled",code:"CAN"},{name:"Unverified",code:"UNV"},{name:"Executed",code:"EXEC"},{name:"Opened",code:"OPEN"}],transactionType:[{name:"All",code:"*"},{name:"Buy",code:"B"},{name:"Cash Deposit",code:"CD"},{name:"Cash Withdrawal",code:"CW"},{name:"Corporate Actions",code:"CA"},{name:"Capital Stock",code:"CU"},{name:"Dividend",code:"DV"},{name:"Foreign Exchange",code:"FX"},{name:"Interest",code:"IT"},{name:"Internal Movement",code:"IM"},{name:"Maturity",code:"MT"},{name:"Other",code:"O"},{name:"Pay Down",code:"PD"
},{name:"Pay Up",code:"PU"},{name:"Security Deposit",code:"SD"},{name:"Security Withdrawal",code:"SW"},{name:"Sell",code:"S"}],dateRange:[{name:"Real Time Today",code:"T"},{name:"Prior Weekday",code:"P"},{name:"All History",code:"H"},{name:"Specific Range",code:"S"}],dateType:[{name:"Create Date",code:"0"},{name:"Trade Date",code:"1"},{name:"Contractual Settle Date",code:"2"},{name:"Actual Settle Date",code:"3"},{name:"Alternate Delivery Date",code:"4"},{name:"Order Date",code:"5"},{name:"Cancel Date",code:"6"}]},j={activity:{assetType:{name:"assetType",multiSelect:!0},transactionType:{name:"transactionType",multiSelect:!0},transactionStatus:{name:"transactionStatus",multiSelect:!0},specificSecurities:{name:"specificSecurities",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Securities with no spaces"},{name:"lengthRangeValidator",params:{minLength:11,maxLength:20,splitChar:","},errMessage:"The length of the specific Securities should be between 11-20"}]},accounts:{name:"accounts",multiSelect:!0},securityIdentifier:{name:"securityIdentifier",multiSelect:!1},staticLocation:{name:"staticLocation",multiSelect:!0},dateType:{name:"dateType",multiSelect:!1},dateRange:{name:"dateRange",multiSelect:!1},transactionRefNo:{name:"transactionRefNo",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Transaction Ref No. without spaces"}]},clientRefNo:{name:"clientRefNo",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Client Ref No. without spaces"}]},currency:{name:"currency",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Currency Codes without spaces"},{name:"lengthValidator",params:{length:3,splitChar:","},errMessage:"The length of the currency code is not valid"}]},dynamicLocation:{name:"dynamicLocation",multiSelect:!0},specificFromDateRange:{name:"specificFromDateRange",multiSelect:!1},specificToDateRange:{name:"specificToDateRange",multiSelect:!1}},holdings:{assetType:{name:"assetType",multiSelect:!0},positionStatus:{name:"positionStatus",multiSelect:!0},specificSecurities:{name:"specificSecurities",multiSelect:!1,validators:[{name:"noSpaceValidator",errMessage:"Please enter Securities with no spaces"},{name:"lengthRangeValidator",params:{minLength:11,maxLength:20,splitChar:","},errMessage:"The length of the specific Securities should be between 11-20"}]},accounts:{name:"accounts",multiSelect:!0},securityIdentifier:{name:"securityIdentifier",multiSelect:!1},staticLocation:{name:"staticLocation",multiSelect:!0},dynamicLocation:{name:"dynamicLocation",multiSelect:!0}}};this.validatorsMap={noSpaceValidator:function(a){if(angular.isDefined(a)&&null!==a)for(var b=0;b<a.length;b++){var c=a.charAt(b);if(" "===c)return!1}return!0},lengthValidator:function(a,b){if(angular.isDefined(a)&&null!==a)if(angular.isDefined(b.splitChar)){var c=a.split(b.splitChar);angular.forEach(c,function(a){if(a.length!==b.length)return!1})}else if(a.length!==length)return!1;return!0},lengthRangeValidator:function(a,b){if(angular.isDefined(a)&&null!=a)if(angular.isDefined(b.splitChar)){for(var c=a.split(b.splitChar),d=0;d<c.length;d++)if(c[d].length<b.minLength||c[d].length>b.maxLength)return!1}else if(a.length<b.minLength||a.length>b.maxLength)return!1;return!0}},this.getAvailableSearchCriteria=function(a){var b={};if(angular.isUndefined(j[a]))return b;var c=j[a];return angular.forEach(c,function(a){var c=a.name;b[c]=i[c]}),b},this.setSelectedAccountType=function(){if("All Accounts"===this.selectedAccountType.value.name){for(var a=[],b=0;b<this.availableAccounts.length;b++)a.push(this.availableAccounts[b]);this.selectedAccounts.value=a,c=!c}},this.setSelectedAccountsFromConfig=function(a){if(!g){for(var b=[],c=0,d=0;d<this.availableAccounts.length;d++)for(var e=0;e<a.length;e++)if(a[e].code===this.availableAccounts[d].accountNumber){c++,b.push(this.availableAccounts[d]);break}c===this.availableAccounts.length?this.selectedAccountType.value=this.availableAccountTypes[0]:this.selectedAccountType.value=this.availableAccountTypes[1],this.selectedAccounts.value=b,g=!0}},this.isAcccountConfigLoaded=function(){return g},this.isAccountsChangedByType=function(){return c},this.getSelectedAccounts=function(){return this.selectedAccounts.value},this.getNewActivityConfig=function(){},this.getStaticLocationsCopy=function(){for(var a=[],b=0;b<i.staticLocation.length;b++){var c={};c.name=i.staticLocation[b].name+"",c.code=i.staticLocation[b].code+"",c.selected=i.staticLocation[b].selected,a.push(c)}return a},this.validate=function(a,b){var c={};if(!angular.isUndefined(j[a])){c=j[a];for(var d,e={},f=Object.keys(c),g=0;g<f.length;g++)if(d=c[f[g]],"dateGradient"===d.name){var h=b.dateRange.value;if(!angular.isUndefined(h)&&"S"===h.code){var i=b.specificFromDateRange.value,k=b.specificToDateRange.value,l="From date should be less than or equal to TO date";i>k&&this.populateErrorObject(e,d,l)}}else{if(angular.isUndefined(d.validators))continue;var m=b[d.name].value;if(angular.isUndefined(m)||null===m||""===m)continue;for(var n=d.validators,o=0;o<n.length;o++){var p=this.validatorsMap[n[o].name];if(!p.call(void 0,m,n[o].params)){this.populateErrorObject(e,d,n[o].errMessage);break}}}return e}},this.populateErrorObject=function(a,b,c){a[b.name]={},a[b.name].value={},a[b.name].value.exists=!0,a[b.name].value.message=c},this.getSelected=function(a,b,c){var d={};if(angular.isUndefined(j[a]))return d;var e=j[a];return angular.forEach(e,function(a){d[a.name]={},a.multiSelect&&(d[a.name].value=[])}),angular.forEach(e,function(a){var e=a.name;if(angular.isDefined(c[e])&&null!==c[e]){var f;if(c[e].constructor===Array){for(var g=0;g<c[e].length;g++)if(!angular.isUndefined(b[e]))for(f=0;f<b[e].length;f++)c[e][g].code===b[e][f].code&&d[e].value.push(b[e][f])}else if(!angular.isUndefined(b[e]))for(f=0;f<b[e].length;f++)if(c[e].code===b[e][f].code){d[e].value=b[e][f];break}}}),d},this.formatDate=function(a){return b.format(a,"e","YYYY/MM/DD")},this.setSearch=function(a){d.value=a},this.getSearch=function(){return d},this.reset=function(){g=!1},this.reload=function(){h=!0},this.setActivityDataConfig=function(a){f=a},this.setHoldingsDataConfig=function(a){e=a},this.shouldReloadData=function(a){var b=[];if(!angular.isUndefined(this.getSelectedAccounts()))for(var c=0;c<this.getSelectedAccounts().length;c++)b.push({name:this.getSelectedAccounts()[c].accountName,code:this.getSelectedAccounts()[c].accountNumber});if("custody.holdings"===a){if(angular.isDefined(e)&&null!==e&&JSON.stringify(e.accounts)!==JSON.stringify(b))return"refreshHoldings"}else if("custody.activity"===a&&angular.isDefined(f)&&null!==f&&JSON.stringify(f.accounts)!==JSON.stringify(b))return"refreshActivity";return""}}function fixedHeader(a){function b(b,c,d,e){function f(){var a=h.querySelector("tbody tr:first-child td:first-child");return a&&!a.style.width}function g(){angular.element(h.querySelectorAll("thead, tbody, tfoot")).css("display",""),a(function(){angular.forEach(h.querySelectorAll("tr:first-child th"),function(a,b){var c=h.querySelector("tbody tr:first-child td:nth-child("+(b+1)+")");h.querySelector("tfoot tr:first-child td:nth-child("+(b+1)+")"),c?c.offsetWidth:a.offsetWidth}),angular.element(h.querySelectorAll("tbody")).css({overflow:"auto"});var a=h.querySelector("tbody"),b=a.offsetWidth-a.clientWidth;if(b>0){b-=2;var c=h.querySelector("tbody tr:first-child td:last-child");c.style.width=c.offsetWidth-b+"px"}})}var h=c[0];b.$watch(f,function(a){a&&g()})}return{restrict:"A",link:b}}function nxnAutofocus(a){return{restrict:"A",link:function(b,c){a(function(){c[0].focus()},0)}}}function NxnPersistentAnnouncemenetsComponentDirective(a,b,c){function d(a,b,c){a.persistentAnnouncementsErrorMessage="Announcements are unavailable at this time. Please try again later.",a.fetchAndSetAnnouncements=function(c,d){a.isPersistentAnnouncementsError=!1,c&&(a.isPersistentAnnouncementsSpinner=!0),b.getAnnouncements(a.persistentAnnouncementsTarget).then(function(b){a.isPersistentAnnouncementsSpinner=!1,a.announcements=b.data.messages},function(b){b&&0===b.status&&!d?a.fetchAndSetAnnouncements(!1,!0):(a.isPersistentAnnouncementsSpinner=!1,a.isPersistentAnnouncementsError=!0)})},a.showAnnouncementModal=function(b){a.selectedAnnouncement=b;var d={scope:a,size:"sm",templateUrl:"partials/common/nxnPersistentannouncements/announcement.modal.html"};a.persistentAnnouncementsModalInstance=c.showModal(d)},a.closeAnnouncementModal=function(){a.persistentAnnouncementsModalInstance.close()}}return d.$inject=["$scope","nxn.PersistentAnnouncementsService","ModalService"],{restrict:"E",controller:d,templateUrl:"partials/common/nxnPersistentannouncements/persistent.announcements.html",link:function(d){d.isMainApp=c.isMainApp(),d.displayPrivateContent=!1,d.shouldDisplayAnnouncements=!1,d.$watch(function(){return a.current.persistentAnnouncementsTarget},function(a){d.persistentAnnouncementsTarget=a,d.shouldDisplayAnnouncements=!!d.persistentAnnouncementsTarget,d.announcements=[],d.isPersistentAnnouncementsError=!1,d.persistentAnnouncementsTarget?(d.shouldDisplayAnnouncements=!0,d.fetchAndSetAnnouncements(!1,!1)):d.shouldDisplayAnnouncements=!1}),b.getContentStateSubject().subscribe(function(a){d.displayPrivateContent=a.displayPrivateContent})}}}function getJson(a){return{name:a.name,code:a.code}}function splitString(a){var b=[],c="";if("undefined"!=typeof a){for(var d=0;d<a.length;d++){var e=a.charAt(d);","===e?(b.push(c),c=""):c+=e}b.push(c)}return b}function getDeepCopyOfStaticLocations(a){for(var b=[],c=0;c<a.length;c++){var d={};d.name=a[c].name+"",d.code=a[c].code+"",d.selected=a[c].selected,b.push(d)}return b}function checkForAll(a){return"ALL"===a||"All"===a}function checkForSpace(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);if(" "===c)return!0}}function checkValidity(a,b){for(var c,d={},e=0;e<a.length;e++)if(c=a[e],"dateGradient"===c.name){var f=b.dateRange.value;if(!angular.isUndefined(f)&&"S"===f.code){var g=b.specificFromDateRange.value,h=b.specificToDateRange.value;g>h&&populateErrorObject(d,c,"From date should be less than or equal to TO date")}}else{var i=b[c.name].value;if(angular.isUndefined(i)||null==i||""===i)continue;if("specificSecurities"===c.name){if(checkForSpace(i))populateErrorObject(d,c,"Please enter Securities with no spaces");else for(var j=splitString(i),k=0;k<j.length;k++)if(j[k].length<11||j[k].length>20){populateErrorObject(d,c,"The length of the specific Securities should be between 11-20");break}}else if("transactionRefNo"===c.name)checkForSpace(i)&&populateErrorObject(d,c,"Please enter Transaction Ref No. without spaces");else if("clientRefNo"===c.name)checkForSpace(i)&&populateErrorObject(d,c,"Please enter Client Ref No. without spaces");else if("currency"===c.name)if(checkForSpace(i))populateErrorObject(d,c,"Please enter Currency Codes without spaces");else for(var l=splitString(i),m=0;m<l.length;m++)if(3!==l[m].length){populateErrorObject(d,c,"The length of the currency code is not valid");break}}return d}function populateErrorObject(a,b,c){a[b.name]={},a[b.name].value={},a[b.name].value.exists=!0,a[b.name].value.message=c}!function(){"use strict";angular.module("NexenCommon",["ngCookies","ui.router","ui.bootstrap","ngSanitize","angularjs-dropdown-multiselect","nxn.util","nxn.ui","nxn.http.throttle","nxn.ui.logo","nxn.navbar","nxn.common","nxn.legacylinks","nxn.supportLink","nxn.common.router","nxn.common.whiteLabel","nxn.whiteLabel"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$provide","NavBarProvider","NxnGatewayNavbar","NxnLogoProvider","NxnName",function(a,b,c,d,e,f,g,h){e.setAppNavBar(f.nxnNavBar),g.setDefaultLogoClass(""),g.setDefaultLogoTitle("");var i=h.nextName();g.setDefaultName(i),g.setDefaultMotto("putting the <b>"+i+"</b> in Financial Services"),g.setDefaultNameEntitlement("FUN")}]).config(["nxn.RouterProvider",function(a){a.state("usageStats",{url:"/usageStats",templateUrl:"partials/common/usageStats/usageStats.html",controller:"stateUsageStatsController",parentNavId:160})}]).config(["nxn.RouterProvider",function(a){a.state("httpUsageStats",{url:"/httpUsageStats",templateUrl:"partials/common/usageStats/httpUsageStats.html",controller:"httpUsageStatsController",parentNavId:160})}]).config(["nxn.RouterProvider",function(a){a.state("navExport",{url:"/navExport",templateUrl:"partials/common/navExport.html",controller:"navExportController",parentNavId:160})}])}(),function(){"use strict";angular.module("nxn.a2migration",[])}(),angular.module("nxn.Accounts",["NexenCommon","ngTable","ui.bootstrap","nxn.CustodyAccounts","NexenApp.ngTableParams","nxn.ui","nxn.common","nxn.nxnUserSettings","nxn.EDGDocuments"]).config(["nxn.RouterProvider",function(a){a.state("nxnAccounts",{abstract:!0,url:"/nxnAccounts",params:{fromNav:""},onEnter:[function(){}],onExit:["$rootScope","nxnCustodyAccountsService",function(a,b){b.reset()}],views:{"accountsTypeFilter@nxnAccounts":{templateUrl:"partials/accounts/accountType.html",controller:"NxnAccountTypeCtrl"},"@":{templateUrl:"partials/accounts/main.html",controller:"NxnAccountCtrl"}},stickyState:!0,deepStateRedirect:!0,parentNavId:150})}]),function(){"use strict";angular.module("nxn.broadcast",["NexenCommon","nxn.ui","NexenApp.ngTableParams"])}(),angular.module("nxn.CustodyAccounts",["NexenCommon","ngTable","ui.bootstrap","nxn.util","nxn.nxnUserSettings","WBCommon","WBAccountControl","workBenchAccountControlModule"]).config(["nxn.RouterProvider",function(a){a.state("nxnAccounts.custody",{abstract:!0,parent:"nxnAccounts",url:"/custody",onEnter:["nxnAccountsService",function(a){a.setSelectedAccountType("custodyAccounts")}],onExit:[function(){}],resolve:{promiseWBUserAlias:["$q","WBService",function(a,b){var c=a.defer();return b.getUserInfo().then(function(a){angular.isDefined(a.errorMessage)&&null!==a.errorMessage&&""!==a.errorMessage?c.resolve({alias:"",aliasToken:"",isInternal:"",errorMessage:a.errorMessage}):c.resolve({alias:a.alias,aliasToken:a.aliasToken,isInternal:a.isInternal,errorMessage:""})}),c.promise}]},views:{"custodyAccountsFilter@nxnAccounts":{templateUrl:"partials/accounts/custody_accounts/accounts_filter.html",controller:"NxnCustodyAccountsFilterCtrl"},"custodyAccounts@nxnAccounts":{templateUrl:"partials/accounts/custody_accounts/main.html",controller:"NxnCustodyAccountsCtrl"}},sticky:!0,deepStateRedirect:!0}),a.state("nxnAccounts.custody.deliveryInstructions",{parent:"nxnAccounts.custody",parentNavId:150,url:"/deliveryInstructions",startSpinner:!0,sticky:!0,onEnter:["nxnAccountsService","nxnCustodyAccountsService",function(a,b){a.selectedTabRefs.custodyAccounts="nxnAccounts.custody.deliveryInstructions({fromNav:'false'})",a.statesVisited.push("nxnAccounts.custody.deliveryInstructions"),b.setSearch(!0)}],onExit:["nxnCustodyAccountsService",function(a){a.reset()}],resolve:{promiseDISummary:["CustodyAccountsDataRetrieval","nxnCustodyAccountsService",function(a,b){var c=[],d="",e=b.accountControlData;if(angular.isUndefined(e.selectedAccountType)||"All Accounts"===e.selectedAccountType.name)c=[],d="ALL";else if(null!=e.selectedAccountGroups.value&&e.selectedAccountGroups.value.length>0)c=b.accountControlData.selectedAccountGroups.value,d="accountgroups";else{var f=b.accountControlData.selectedAccounts;if(!angular.isUndefined(f))for(var g=b.accountControlData.selectedAccounts.value,h=0;h<g.length;h++)c.push({accountName:g[h].accountName.trim(),accountNumber:g[h].accountNumber.trim()});d="accounts"}return a.getDISummary(c,"ALL",d)}],getCountryList:["CustodyAccountsDataRetrieval",function(a){return a.getCountryNames().then(function(a){return a})}]},views:{"deliveryInstructionsTab@nxnAccounts.custody":{templateUrl:"partials/accounts/custody_accounts/deliveryInstructions/deliveryInstructions.html",controller:"NxnCustodyAccountsDeliveryInstructionsCtrl"}}}),a.state("nxnAccounts.custody.documents",{parent:"nxnAccounts.custody",parentNavId:150,url:"/documents",startSpinner:!0,sticky:!0,onEnter:["nxnAccountsService","nxnCustodyAccountsService",function(a,b){a.selectedTabRefs.custodyAccounts="nxnAccounts.custody.documents({fromNav:'false'})",a.statesVisited.push("nxnAccounts.custody.documents"),b.setSearch(!0)}],onExit:["nxnCustodyAccountsService",function(a){a.setSearch(!0)}],views:{"documentsTab@nxnAccounts.custody":{templateUrl:"partials/accounts/edg_documents/edg-documents.html",controller:"nxnEDGDocumentsController"}}})}]).run(["NavBar","wbUrlConfig",function(a,b){a.registerInitCallback(function(){return{id:48,newWindow:!0,target:b.getWBUrls("MAINFRAME_SERVICES_URL")}}),a.registerInitCallback(function(){return{id:167,newWindow:!0,target:b.getWBUrls("BROADRIDGE_URL")}}),a.registerInitCallback(function(){return{id:385,newWindow:!0,target:b.getWBUrls("MARKETPROFILES_URL")}})}]),function(){"use strict";function a(a,b,c,d,e){var f=angular.uppercase(c.getEnvironment()),g=b.ERS_SVC_BASE_URLS[f]+""+b.PATH_TO_LOAD_ACCOUNTS_FROM_UPS+"?productId="+d.ACCOUNTS_RETRIEVAL_PROPS.PRODUCT_ID[e]+"&systemId=CNTSYS_ERS&isIndividualAccountOnly=true&isAllAccount=true&isAccountWithPagination=true";return a.getAllAccountsFromUPS(g).then(function(a){return{promiseStatus:"success",data:a.data}},function(a){return{promiseStatus:"error"}})}function b(a,b,c){var d=angular.uppercase(c.getEnvironment()),e=b.API_GATEWAY_SVC_URLS[d]+""+b.PATH_TO_LOAD_FUNDS_FOR_SECMOD;return a.getAllFundsForSecMod(e).then(function(a){return{promiseStatus:"success",data:a.data}},function(a){return{promiseStatus:"error"}})}angular.module("nxn.EDGDocuments",["NexenCommon","ngTable","ui.bootstrap"]).config(["nxn.RouterProvider","NxnDocumentsEntitlementProvider",function(c,d){c.state("nxnAccounts.triPartyRepo",{abstract:!0,parent:"nxnAccounts",url:"/triPartyRepo",parentNavId:150,onEnter:["nxnAccountsService",function(a){a.setSelectedAccountType("TriPartyDocuments")}],resolve:{promiseBDSAccountsList:["nxnEDGDocumentsDataService","documentSvcUrls","PageContext","documentSearchConfigs",function(b,c,d,e){return a(b,c,d,e,"TRIPARTYDOCUMENTS")}]},views:{"TriPartyDocumentsFilter@nxnAccounts":{templateUrl:"partials/accounts/edg_documents/edg-accounts-filter.html",controller:"nxnTripartyRepoController"},"TriPartyDocuments@nxnAccounts":{templateUrl:"partials/accounts/edg_documents/main.html",controller:"nxnTripartyRepoController"}},sticky:!0,deepStateRedirect:!0}),c.state("nxnAccounts.triPartyRepo.documents",{parent:"nxnAccounts.triPartyRepo",startSpinner:!0,url:"/documents",parentNavId:150,sticky:!0,onEnter:["nxnAccountsService",function(a){a.selectedTabRefs.TriPartyDocuments="nxnAccounts.triPartyRepo.documents({fromNav: 'false'})",a.statesVisited.push("nxnAccounts.triPartyRepo.documents")}],views:{"TriPartyRepoDocumentTab@nxnAccounts.triPartyRepo":{templateUrl:"partials/accounts/edg_documents/edg-documents.html",controller:"nxnEDGDocumentsController"}}}),c.state("reconciliation",{parentNavId:289,abstract:!0,url:"/reconciliation",resolve:{promiseERUReconAccountsList:["nxnEDGDocumentsDataService","documentSvcUrls","PageContext","documentSearchConfigs",function(b,c,d,e){return a(b,c,d,e,"ERURECONDOCUMENTS")}]},views:{"@":{templateUrl:"partials/accounts/edg_documents/riskAndCompliance/reconciliation/recon-documents-filters.html",controller:"nxnReconDocumentsFilterController"}},enable:d.hasERUReconDocumentsAccess}),c.state("reconciliation.documents",{parentNavId:289,startSpinner:!0,url:"/documents",views:{"reconDocuments@reconciliation":{templateUrl:"partials/accounts/edg_documents/edg-documents.html",controller:"nxnEDGDocumentsController"}},deepStateRedirect:!0,sticky:!0,enable:d.hasERUReconDocumentsAccess}),c.state("nxnAccounts.clientDocuments",{parentNavId:150,abstract:!0,url:"/clientDocuments",resolve:{promiseCBSAccountsList:["nxnEDGDocumentsDataService","documentSvcUrls","PageContext","documentSearchConfigs",function(b,c,d,e){return a(b,c,d,e,"CBSEFILES")}]},views:{"@":{templateUrl:"partials/accounts/edg_documents/cbs/cbs-accounts-filters.html",controller:"nxnCBSDocumentsFilterController"}},enable:d.hasCBSDocumentsAccess}),c.state("nxnAccounts.clientDocuments.efiles",{parentNavId:150,parent:"nxnAccounts.clientDocuments",startSpinner:!0,url:"/efiles",views:{"clientDocuments@nxnAccounts.clientDocuments":{templateUrl:"partials/accounts/edg_documents/edg-documents.html",controller:"nxnEDGDocumentsController"}},deepStateRedirect:!0,sticky:!0,enable:d.hasCBSDocumentsAccess}),c.state("secModReports",{parentNavId:289,abstract:!0,url:"/secModReports",resolve:{promiseSecModFundsList:["nxnEDGDocumentsDataService","documentSvcUrls","PageContext","documentSearchConfigs",function(a,c,d,e){return b(a,c,d)}]},views:{"@":{templateUrl:"partials/accounts/edg_documents/sec-mod/sec-mod-funds-filters.html",controller:"nxnSecModFundsFilterController"}},enable:d.hasSecModDocumentsAccess}),c.state("secModReports.documents",{parentNavId:289,startSpinner:!0,url:"/documents",views:{"secmodDocuments@secModReports":{templateUrl:"partials/accounts/edg_documents/edg-documents.html",controller:"nxnEDGDocumentsController"}},deepStateRedirect:!0,sticky:!0,enable:d.hasSecModDocumentsAccess})}]).run(["NavBar","NxnDocumentsEntitlementProvider",function(a,b){a.setNavbarItems([{id:"d28f87b4-54c6-4ae8-9367-ed7ceb0a8996",entitled:b.hasERUReconDocumentsAccess},{id:"c4eeef29-ba65-4f2e-ab71-e4f2e0ab2b08",state:"reconciliation.documents",entitled:b.hasERUReconDocumentsAccess},{id:"53bf7e04-0609-4cc8-8df1-e5cf6785fe30",entitled:b.hasCBSDocumentsAccess},{id:"0d27961e-b287-4c94-a4ab-0e9906dfa09c",state:"nxnAccounts.clientDocuments.efiles",entitled:b.hasCBSDocumentsAccess},{id:"e5207227-6c18-4fe7-a75e-b07b9a40558d",entitled:b.hasSecModDocumentsAccess},{id:"0c2de638-35b2-4362-b322-19586f399a7d",state:"secModReports.documents",entitled:b.hasSecModDocumentsAccess}])}])}(),function(){function a(a,c,e){e.registerServiceConfig("AlertsAndMessagingV2",a.v2),c.state("alertsDashboard",{abstract:!0,url:"/alertsDashboard",enable:d,errorMessage:"There was an error retrieving the alerts",views:{"":{templateUrl:"partials/alerts/alertsDashboard.html",controller:"nxn.AlertsMainController"}}}),c.state("alertsDashboard.alerts",{parent:"alertsDashboard",startSpinner:!0,url:"/alerts",enable:a.hasAlertsEntitlement,parentNavId:6,resolve:{promiseAlerts:["nxn.AlertsV2Service",function(a){var b=new Date,c=moment(b).format("YYYY-MM-DD");return a.getCustomDateRange(c,c).then(function(a){return{promiseStatus:"success",data:a}},function(a){return{promiseStatus:"error",errorMessage:"The system cannot process your request now. Please try again."}})}]},views:{"alerts@alertsDashboard":{templateUrl:"partials/alerts/alertsTab.html",controller:"nxn.AlertsController"}}}),c.state("alertsDashboard.manage",{parent:"alertsDashboard",startSpinner:!0,url:"/manage",enable:a.hasAlertsEntitlement,parentNavId:6,resolve:{promiseAlertDevices:["nxn.AlertsV2Service",b],promiseAlertSubscriptionCategories:["nxn.AlertsV2Service","nxn.AlertsSubscribeService",function(a,b){return a.getSubscAlertTypes().then(function(a){return b.setAlertSubscInfo(a.data.alertSubscInfo,a.data.summarySubcFlag),angular.isDefined(a.data.upsError)&&"ERROR_MAX_ACCOUNTS_REQUESTED"===a.data.upsError&&b.setMaxAccountsReached(!0),{promiseStatus:"success",data:a}},function(a){return{promiseStatus:"error"}})}]},views:{"alertsManageView@alertsDashboard":{templateUrl:"partials/alerts/subscWizViews/manageTab.html",controller:"nxn.AlertsManageController"}}}),c.state("alertsDashboard.distribute",{parent:"alertsDashboard",startSpinner:!0,url:"/distribute",enable:a.hasAlertsEntitlement,parentNavId:6,resolve:{promiseAlertDevices:["nxn.AlertsV2Service",b]},views:{"alertsDistributeView@alertsDashboard":{templateUrl:"partials/alerts/distributionViews/distributeTab.html",controller:"nxn.AlertsDistributeController"}}}),c.state("alertsDashboard.broadcasts",{parent:"alertsDashboard",startSpinner:!0,url:"/broadcasts",enable:d,parentNavId:6,userEmulationEnabled:!0,views:{"broadcasts@alertsDashboard":{templateUrl:"partials/alerts/broadcasts.html",controller:"nxn.BroadcastController"}}})}function b(a){return a.getAlertDevices().then(function(a,b,c,d){return angular.isDefined(a.data.errorMessage)?{promiseStatus:"success",errorMessage:a.data.errorMessage}:{promiseStatus:"success",data:a.data}},function(a,b,c,d){return{promiseStatus:"error"}})}function c(a,b){b.setNavbarItems([{id:115,entitled:a.hasAlertsEntitlement},{id:"236dc7ba-52e4-413f-8a28-ccc097d6d1da",entitled:a.hasAlertsEntitlement},{id:"e91091a4-5d80-11e6-8b77-86f30ca893d3",entitled:a.hasAlertsEntitlement},{id:383,entitled:d}])}function d(a){return a.hasEntitlement("EVERYONE")}angular.module("nxn.Alerts",["NexenCommon","ngTable","ui.bootstrap","nxn.ui","nxn.apigateway","nxn.common.sysParams","daterangepicker","nxn.datePicker","angularjs-dropdown-multiselect","nxn.util.a2migration","nxn.failover"]).config(a).run(c),a.$inject=["AlertsServiceConfig","nxn.RouterProvider","RequestFailoverProvider"],c.$inject=["AlertsServiceConfig","NavBar"]}(),function(){"use strict";angular.module("nxn.changepwd",["nxn.common","nxn.ui"])}(),function(){"use strict";function a(a){a.state("pluginStateMap",{parentNavId:160,url:"/pluginStateMap",templateUrl:"partials/common/pluginStateMap/pluginStateMap.html",enable:c,controller:"pluginStateMapController"})}function b(a){a.setNavbarItems([{id:"6427e1e5-8551-44c1-a345-2fe43befb27d",name:"Plugin State Mapping",state:"pluginStateMap",entitled:c}])}function c(a){return angular.isDefined(a.hasExactEntitlement)&&a.hasExactEntitlement("PLUGIN_STATE_VIEW")}angular.module("pluginStateMapModule",["NexenCommon","nxn.ui"]).config(a).run(b),a.$inject=["nxn.RouterProvider"],b.$inject=["NavBar"]}(),angular.module("nxn.legacylinks",["nxn.common","nxn.ui","nxn.supportLink","nxn.nxnUserSettings"]),function(){"use strict";function a(a){a.decorator("ngTableDirective",["$delegate","$compile",function(a,b){var c=a[0],d=c.compile;return c.compile=function(a,c,e){var f=d.apply(this,arguments);return function(a,c,d){if(a.top_templates={pagination:d.toppagination?d.toppagination:"ng-table/pager.html"},"suppress"!==d.toppagination){var e=angular.element(document.createElement("div")).attr({class:"top-pagination","ng-table-pagination":"params","template-url":"top_templates.pagination"});c.before(e),b(e)(a)}f.apply(this,arguments)}},a}]),a.decorator("ngTablePaginationDirective",["$delegate","$compile",function(a,b){var c=a[0],d=c.compile;return c.compile=function(a,b,c){var e=d.apply(this,arguments);return function(a,b,c){a.params.settings().$scope.$on("ngTableAfterReloadData",function(){a.params.getTotalPages&&(a.selectedPage={},a.totalPages=a.params.getTotalPages(),a.selectedPage.value=a.totalPages[a.params.getSelectedPageNum()-1],a.selectedCount={},a.availableCounts=a.params.getAvailableCounts(),a.displayCounts=a.availableCounts.length>0,angular.forEach(a.availableCounts,function(b){b.value===a.params.count()&&(a.selectedCount.value=b)}),a.columns=a.params.getColumns())},!0),e.apply(this,arguments)}},a}])}angular.module("NexenApp.ngTableParams",["ngTable"]).config(a),a.$inject=["$provide"]}(),function(){"use strict";angular.module("nxn.persistentAnnouncements",[])}(),function(){"use strict";function a(a,b){a.state("pluginTeamAdmin",{url:"/pluginTeamConfig",enable:b,templateUrl:"partials/pluginAdmin/pluginAdmin.html",controller:"PluginAdminController",controllerAs:"pluginConfig",parentNavId:160})}function b(a,b){a.setNavbarItems([{id:"f705756f-9ddc-4099-b0b9-d53000134620",entitled:b}])}function c(a){return angular.isDefined(a.hasExactEntitlement)&&a.hasExactEntitlement("PLUGIN_TEAM_ADMIN")}angular.module("nxn.pluginAdmin",["NexenCommon"]).constant("NavPluginAdminEntitledFn",c).config(a).run(b),a.$inject=["nxn.RouterProvider","NavPluginAdminEntitledFn"],b.$inject=["NavBar","NavPluginAdminEntitledFn"]}(),function(){"use strict";function a(a,b){a.state("pluginConfig",{url:"/pluginConfig",enable:b,templateUrl:"partials/pluginConfig/pluginConfig.html",controller:"PluginConfigController",controllerAs:"pluginConfig",parentNavId:160})}function b(a,b){a.setNavbarItems([{id:"4b4048b4-76eb-4c7e-93f1-aca8c0d6478e",entitled:b}])}function c(a){return angular.isDefined(a.hasExactEntitlement)&&(a.hasExactEntitlement("PLUGIN_ADMIN")||a.hasExactEntitlement("PLUGIN_PREVIEW"))}angular.module("nxn.pluginConfig",["NexenCommon"]).constant("NavPluginEntitledFn",c).config(a).run(b),a.$inject=["nxn.RouterProvider","NavPluginEntitledFn"],b.$inject=["NavBar","NavPluginEntitledFn"]}(),angular.module("nxn.supportLink",["nxn.ui","nxn.common.whiteLabel","nxn.whiteLabel"]),angular.module("nxn.userGuides",["NexenCommon"]).config(["nxn.RouterProvider",function(a){a.state("userGuide",{url:"/userGuide",templateUrl:"partials/common/userGuide/userGuide.html",parentNavId:4,controller:"UserGuideController"})}]),function(){function a(a){a.state("videoTutorials",{url:"/videoTutorials",templateUrl:"partials/common/videoTutorials.html",parentNavId:4,controller:"videoTutorialsController",enable:c})}function b(a){a.setNavbarItems([{id:"1d391670-8a86-11e8-9a94-a6cf71072f73",entitled:c}])}function c(a,b){var c=b.get("NxnWhiteLabelService");return a.hasEntitlement("EVERYONE")&&c.isMainApp()}angular.module("nxn.videoTutorials",["NexenCommon"]).config(a).run(b),a.$inject=["nxn.RouterProvider"],b.$inject=["NavBar"]}(),function(){"use strict";angular.module("nxn.content",["nxn.common","nxn.nxnReportIssue","nxn.ui"])}(),function(){"use strict";function a(a){a.state("efi",{parentNavId:"3",url:"/efi",params:{filter:"",type:""},templateUrl:"partials/view/efi.fedInbox.html",enable:c,resolve:{nxnSbpForms:["$ocLazyLoad","ThirdPartyLibURLs",function(a,b){return a.load(b.nxnSbpForms)}]}})}function b(a,b){a.setNavbarItems([{id:"53271fa7-8df8-4b1f-b1c0-d28ab9204b0c",entitled:c},{id:"53580eee-2ea9-405a-89dc-3a856149fd4e",entitled:c},{id:"862aa968-4d5c-414f-8475-b9dda7e7f2bd",entitled:c},{id:"a3b21000-aaff-49a4-b347-a4ecf1820151",entitled:c},{id:"aed66676-f15d-46f9-a142-65e3b548eaa5",entitled:c},{id:"cf5d9adc-9eed-41ec-b118-d7fe4aeb197e",entitled:c},{id:"55ca189d-f597-4d80-be4d-a168cf025b4b",entitled:c},{id:"6b271a78-aa4b-43b2-be51-e87b4c5f7ef0",entitled:d}]),b.push({id:131,name:"Tasks",class:"fa fa-sitemap fa-2x",description:"Task Flow - EFI",state:"efi",entitled:c})}function c(a,b){return a.hasExactEntitlement("EVERYONE")&&b.get("NxnWhiteLabelService").isMainApp()}function d(a){return a.hasEntitlement("EFITXNSVC")}var e=angular.module("efi.EFITaskFlow",["nxn.ui","nxn.common","NexenCommon","fedInboxApp"]);e.config(a),e.run(b),a.$inject=["nxn.RouterProvider"],b.$inject=["NavBar","NxnQuickAccessNav"]}(),angular.module("nxn.emulation",["ndb.common"]),angular.module("nxn.emulation").config(["nxn.RouterProvider",function(a){a.state("useremulate",{url:"/useremulate",params:{fromNav:""},errorMessage:"",views:{"@":{templateUrl:"partials/emulation/useremulate.html",controller:"NxnEmulationControl"}},resolve:{dashboard:["ndbDashboardService",function(a){a.getAll()}]}})}]),function(){"use strict";function a(a){a.state("svcFailoverAdmin",{parentNavId:160,url:"/svcFailoverAdmin",templateUrl:"partials/failover/admin.html",controller:"FailoverAdminController"})}angular.module("nxn.failover",["NexenCommon"]).config(a),a.$inject=["nxn.RouterProvider"]}(),function(){"use strict";function a(a,b){b.register("FileTransfer","FileTransferAuthService"),a.state("fileTransfer",{parentNavId:4,url:"/fileTransfer",templateUrl:"partials/fileTransfer/fileTransferMain.html",controller:"fileTransferController",params:{openUploadModal:null,uploadType:null,payload:null}})}angular.module("nxn.fileTransfer",["angularFileUpload","daterangepicker","NexenCommon","nxn.auth","nxn.datePicker","nxn.whiteLabel","ui.select","nxn.a2migration"]),angular.module("nxn.fileTransfer").config(a),a.$inject=["nxn.RouterProvider","StepupRegistryProvider"]}(),function(){"use strict";function a(a){a.state("fps",{enableWhenNotLoggedIn:!0,template:"<nxn-fps-main></nxn-fps-main>",url:"/fps"})}angular.module("nxn.fps",["NexenCommon","nxn.ui","nxn.supportLink","nxn.smagent"]),angular.module("nxn.fps").config(a),
a.$inject=["$stateProvider"]}(),angular.module("nxn.Highcharts",["NexenCommon","ui.bootstrap"]),function(){"use strict";function a(a){a.state("login",{url:"/login?SMQUERYDATA&SMUSRMSG",templateUrl:"partials/login/login.html",controller:"LoginCtrl",controllerAs:"login",onEnter:["$stateParams","$window","$location","nxn.getCurrentEnvironment",function(a,b,c,d){"MOCK"===d.getCurrentEnv(c.host()).toUpperCase()||a.SMQUERYDATA||(b.location.href="/")}]}),a.state("outage",{url:"/sorry",templateUrl:"partials/login/login.html",controller:"LoginCtrl",controllerAs:"login"}),a.state("logout",{url:"/logout",userEmulationEnabled:!0,template:"<nxn-logout-form></nxn-logout-form>",resolve:{logoutResponse:["LogoutService",function(a){return a.logout()}]}})}angular.module("nxn.login",["ngCookies","ui.bootstrap.alert","NexenCommon","nxn.auth","nxn.common","nxn.common.whiteLabel","nxn.content","nxn.supportLink","nxn.util","nxn.whiteLabel"]).config(a),a.$inject=["$stateProvider"]}(),function(){function a(a){a.state("manageUserAccess",{url:"/manageUserAccess",parentNavId:160,templateUrl:"partials/manageUserAccess/nxnManageUserAccess.html",controller:"manageUserAccessController",resolve:{loadSwf:["$ocLazyLoad",function(a){return a.load("third_party/lib/swfobject/swfobject/swfobject.js")}]}})}angular.module("NxnManageUserAccess",["NexenCommon"]).config(a),a.$inject=["nxn.RouterProvider"]}(),function(){"use strict";angular.module("nxn.auth",[])}(),angular.module("nxn.Trading",["NexenCommon","ui.bootstrap","ngTable","NexenApp.ngTableParams"]),function(){"use strict";function a(a){a.state("public",{url:"/public",templateUrl:"partials/public/public_container.html",abstract:!0}),a.state("public.termsOfUse",{url:"/termsOfUse",views:{detail:{template:"<nxn-terms-ofuse></nxn-terms-ofuse>"}}}),a.state("public.privacyStatement",{url:"/privacyStatement",views:{detail:{templateUrl:"partials/public/privacyStatement.html",controller:function(){this.title="Privacy Statement"},controllerAs:"header"}}}),a.state("public.tour",{url:"/tour/{id:int}",views:{detail:{templateUrl:"partials/public/tour.html",controller:"TourCtrl"}}}),a.state("public.cookiePolicy",{url:"/cookiePolicy",views:{detail:{template:"<nxn-cookie-policy></nxn-cookie-policy>"}}}),a.state("public.systemRequirements",{url:"/systemRequirements",views:{detail:{templateUrl:"partials/public/systemRequirements.html",controller:"SysReqCtrl"}}}),a.state("public.requestAccess",{url:"/requestAccess",views:{detail:{templateUrl:"partials/public/requestAccess.html",controller:function(){this.title="REQUEST ACCESS"},controllerAs:"header"}}})}angular.module("nxn.public",["ngCookies","ui.bootstrap.alert","nxn.common"]).config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a){a.state("selfRegistration",{url:"/selfRegistration",templateUrl:"partials/selfRegistration/selfRegistration.main.html",controller:"nxn.selfRegistrationController as vm"}),a.state("public.aisElectronicAccessAgreement",{url:"/aisElectronicAccessAgreement",views:{detail:{templateUrl:"partials/public/aisElectronicAccessAgreement.html"}}})}angular.module("nxn.selfRegistration",["NexenCommon","nxn.ui","nxn.NxnAutoScrollbar","ui.bootstrap","vcRecaptcha","mgo-angular-wizard"]).config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";angular.module("nxn.smagent",["nxn.ui","nxn.common.whiteLabel"])}(),function(){"use strict";function a(a){a.register("TokenOnly","TokenOnlyAuthService")}angular.module("nxn.stepup",["nxn.auth","nxn.common","nxn.ui","nxn.util","NexenCommon"]).config(a),a.$inject=["StepupRegistryProvider"]}(),function(){"use strict";function a(a){a.state("sysParamsConfig",{parentNavId:371,url:"/sysParamsConfig",templateUrl:"partials/sysParams/sysParamsConfig.html",enable:c,controller:"sysParamsConfig",controllerAs:"vm"})}function b(a,b){b.setNavbarItems([{id:"6969a5f6-57fa-4516-a6f7-321078c9993e",name:"System Parameters Admin",state:"sysParamsConfig",entitled:c}])}function c(a){return angular.isDefined(a.hasExactEntitlement)&&a.hasExactEntitlement("SYS_ADMIN")}angular.module("nxn.sysParamsConfig",["NexenCommon","nxn.ui","ngTable","nxn.common.sysParams"]).config(a).run(b),a.$inject=["nxn.RouterProvider"],b.$inject=["$log","NavBar"]}(),function(){"use strict";function a(a){a.state("testDowngradedA2Components",{name:"testDowngradedA2Components",url:"/testDowngradedA2Components",template:"<test-downgraded-components></test-downgraded-components>",enable:function(a){var b=a.getEnvironment();return b=b&&b.toUpperCase(),"MOCK"===b||"DEV"===b||"QA"===b},resolve:{downgrade:["materialDemoA1StateService",function(a){return a.loadState()}]}})}angular.module("nxn.testDowngradedA2Components",["nxn.a2migration","nxn.a2migration.common","nxn.a2migration.ui","nxn.a2migration.util","nxn.util.a2migration","nxn.common.router"]).config(a),a.$inject=["nxn.RouterProvider"]}(),angular.module("NxnUserAdmin",["NexenCommon","nxn.util.a2migration"]).config(["nxn.RouterProvider",function(a){a.state("userEntitlements&Lobs",{url:"/userLobEntitlements",templateUrl:"partials/userAdmin/EntitlementsLob.html",controller:"userEntitlementsLobController",parentNavId:160}),a.state("userLookup",{url:"/userLookup",templateUrl:"partials/userAdmin/userLookup.html",controller:"userLookupController",parentNavId:160})}]),function(){"use strict";function a(a){a.state("userEmulation",{url:"/userEmulation",templateUrl:"partials/user-settings/nxnUserEmulation.html",controller:"nxn.userEmulationController"})}angular.module("nxn.userEmulation",[]),angular.module("nxn.userEmulation").config(a),a.$inject=["$stateProvider"]}(),angular.module("nxn.nxnUserSettings",["NexenCommon","nxn.common","ui.bootstrap","nxn.smagent"]),function(){"use strict";angular.module("workBenchAccountControlModule",[])}(),angular.module("WBAccountControl",[]).directive("accountControl",["$compile",function(a){var b=function(a,b,c){},c=function(a,b,c,d,e,f,g,h,i,j){function k(b,c){b.then(function(b){""===b.errorMessage?("NXN_CA"===n.productCode.value?n.aliasToken.value=b.viewAliasToken:n.aliasToken.value=b.aliasToken,"account"===c?l(a.currentAccount,50,"newAliasTokenCall"):"accountGroup"===c&&m(a.currentAccountGroup,50,"newAliasTokenCall")):e.show("ERROR",b.errorMessage)})}function l(b,d,g){n.isDataLoaded=!0;var h={alias:n.alias.value,accountSource:n.accountType.value,productCode:n.productCode.value,aliasToken:n.aliasToken.value,searchText:b.trim(),limit:d,offset:0};p=b.trim(),c.getAccountControlAccountsDetails(h,"autoComplete").then(function(b){var d=b.data;if(angular.isUndefined(d.error))if(0===d.data.length)n.availableAccounts=[];else{var h=d.data;n.availableAccounts=f("removeDuplicateFilter")(n.getSpecificAcctData(h),n.selectedAccounts.value,"accountNumber")}else d.error.code===a.aliasTokenExpireErrorCode&&"elasticSearchCall"===g?k(c.generateAliasToken(n),"account"):e.show("ERROR",d.error.code+" : "+d.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){n.isDataLoaded=!1})}function m(b,d,g){n.isDataLoaded=!0;var h={alias:n.alias.value,productCode:n.productCode.value,aliasToken:n.aliasToken.value,searchText:b.trim(),limit:d,offset:0};q=b.trim(),c.getAccountControlAccountGroupsDetails(h,"autoComplete").then(function(b){var d=b.data;if(angular.isUndefined(d.error))if(0===d.data.length)n.availableAccountGroups=[];else{var h=d.data;n.availableAccountGroups=f("removeDuplicateFilter")(n.getSpecificAcctGroupData(h),n.selectedAccountGroup.value,"accountGroupId")}else d.error.code===a.aliasTokenExpireErrorCode&&"elasticSearchCall"===g?k(c.generateAliasToken(n),"accountGroup"):e.show("ERROR",d.error.code+" : "+d.error.description);n.isDataLoaded=!1}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){n.isAccountGroupsLoaded=!1})}var n=a.accountControl;a.WBAccountControlService=a.accountControl,a.accountControlData=n.getAccountControlData(),n.availableAccounts=[],n.availableAccountGroups=[],a.availableAccountTypes=[];for(var o=0;o<n.availableAccountTypes.length;o++)n.showAccountGroup.value===!0?a.availableAccountTypes.push(n.availableAccountTypes[o]):"Specific Account Groups"!==n.availableAccountTypes[o]&&a.availableAccountTypes.push(n.availableAccountTypes[o]);n.selectedAccountType.name=a.availableAccountTypes[0],n.availableAccounts=[],n.availableAccountGroups=[];var p="",q="";if(a.aliasTokenExpireErrorCode="CIWAU014",a.onAccountSelect=function(a){a.itemMoved=!0,n.selectedAccounts.value.push(a),n.selectedAccounts.value.length>5?(n.parentSelectedAccounts=" ",n.accValidationMsg=!0):(n.parentSelectedAccounts=n.selectedAccounts.value,n.accValidationMsg=!1)},a.onAccountRemove=function(a){a.itemMoved=!1;for(var b=n.selectedAccounts.value.length-1;b>=0;b--)n.selectedAccounts.value[b].accountNumber===a.accountNumber&&n.selectedAccounts.value.splice(b,1)},a.onAccountGroupSelect=function(a){n.selectedAccountGroup.value.push(a),n.selectedAccountGroup.value.length>4?(n.parentSelectedAccountGroups=" ",n.accGrpValidationMsg=!0):(n.parentSelectedAccountGroups=n.selectedAccountGroup.value,n.accGrpValidationMsg=!1)},a.onAccountGroupRemove=function(a){for(var b=n.selectedAccountGroup.value.length-1;b>=0;b--)n.selectedAccountGroup.value[b].accountGroupId===a.accountGroupId&&n.selectedAccountGroup.value.splice(b,1)},a.onAccountChange=function(b){""!==b.trim()&&b.trim().length>2&&(a.currentAccount=b,l(b,50,"elasticSearchCall"))},a.onAccountGroupChange=function(b){""!==b.trim()&&b.trim().length>2&&(a.currentAccountGroup=b,m(b,50,"elasticSearchCall"))},a.showModal=function(){var b={},c={controller:"NxnAccountsControlModalCtrl",backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/wb-common/account-control/accountsControlModal.html",resolve:{accountControl:function(){return{value:n,callbackFunction:a.onAccountControlSelectionCallback}}}};g.showModal(c,b)},a.nonModal="nonModal"in b,a.nonModal){var r={};r.value=n,r.callbackFunction=a.onAccountControlSelectionCallback,n.selectedAccountType.name=a.availableAccountTypes[1],j.modalCtrlConstructor(a,r)}};return c.$inject=["$scope","$attrs","WBAccountControlDataRetrieval","$timeout","nxnAlertService","$filter","ModalService","nxnNgTableParams","ExportService","WBAccountControlService"],{restrict:"E",link:b,scope:{accountControl:"=nxnAccountControl",onAccountControlSelectionCallback:"&nxnOnAccountControlSelection"},controller:c,templateUrl:function(a,b){return"nonModal"in b?"partials/wb-common/account-control/accountsControlModal.html":"partials/wb-common/account-control/accountsControlFilter.html"}}}]),angular.module("web.workbench",["NexenCommon","ngTable","ui.bootstrap","nxn.util"]).config(["nxn.RouterProvider",function(a){function b(a){return a.hasEntitlement("EWB_ETF")}a.state("wbReferencePage",{url:"/wbReferencePage",parentNavId:4,templateUrl:"partials/common/iframe/iframe.html",controller:"nxn.IframeController",resolve:{iframeUrls:function(){return{DEV:"https://workbench.test.bnymellon.com/reference/wb_reference.jsp?appName=NXN",UAT:"https://workbench.test.bnymellon.com/reference/wb_reference.jsp?appName=NXN",QA:"https://workbench.qa.bnymellon.com/reference/wb_reference.jsp?appName=NXN",DCAT:"https://workbench.qa.bnymellon.com/reference/wb_reference.jsp?appName=NXN",XAT:"https://workbench.qa.bnymellon.com/reference/wb_reference.jsp?appName=NXN",PRODUCTION:"https://workbench.bnymellon.com/reference/wb_reference.jsp?appName=NXN",LOCAL:"img/wbReferencePage.png",MOCK:"img/wbReferencePage.png"}}}}),a.state("wbETFServices",{url:"/wbETFServices",requiresStepup:"ALL",parentNavId:3,startSpinner:!0,enable:b,templateUrl:"partials/common/iframe/iframe.html",controller:"nxn.IframeController",resolve:{iframeUrls:function(){return{DEV:"https://dev-etf.bnymellon.com/etf?portal=NEXEN",UAT:"https://qa-etf.bnymellon.com/etf?portal=NEXEN",QA:"https://qa-etf.bnymellon.com/etf?portal=NEXEN",DCAT:"https://qa-etf.bnymellon.com/etf?portal=NEXEN",XAT:"https://qa-etf.bnymellon.com/etf?portal=NEXEN",PRODUCTION:"https://etf1.bnymellon.com/etf?portal=NEXEN",LOCAL:"img/etfPage.png",MOCK:"img/etfPage.png"}}}})}]),function(){"use strict";angular.module("nxn.whiteLabel",["nxn.ui"])}(),angular.module("qqm.workbench",["NexenCommon","ngTable","ui.bootstrap"]).filter("emptyOrNull",function(){return function(a){return null===a||""===a?"-":a}}).filter("nullToString",function(){return function(a){return null===a?"":a}}).config(["nxn.RouterProvider",function(a){a.state("custody",{abstract:!0,url:"/custody",parentNavId:150,resolve:{promiseAccounts:function(){return[{accountName:"ABVPS WEALTH APP STR-BRZ EX 100878",accountNumber:"100881",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"RBS CITIZENS N.A. BANK RHODE ISLAND",accountNumber:"101400",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"RBS CITIZENS N.A. GLB MANAGED USD",accountNumber:"101429",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF OMNIB-MULTIPLE CLTS NO TAX",accountNumber:"104020",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"NOMURA KAG",accountNumber:"104033",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF NOMURA ASIA PACIFIC",accountNumber:"104047",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF AC AGI PV1",accountNumber:"104074",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF A FT S-A A-EEE T BRZ EX104037",accountNumber:"104101",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF ALLIANZ VGI 1 FONDS",accountNumber:"104299",accountStatus:null,accountType:null,accountingStatus:null}]}},views:{"accountsFilter@custody":{templateUrl:"partials/qqm-workbench/custodyAccountsFilter.html",controller:"CustodyAccountCtrl"},"":{templateUrl:"partials/qqm-workbench/custody.html",controller:"CustodyHomeCtrl"}}}),a.state("custody.holdings",{parent:"custody",parentNavId:150,startSpinner:!0,errorMessage:"There was an error retrieving the position preferred search config",url:"/holdings",sticky:!0,onEnter:["$rootScope","qqmService",function(a,b){b.setSearch(!0)}],onExit:["$rootScope","qqmService",function(a,b){b.reset()}],resolve:{promisePositionSummary:["QQMWorkbench",function(a){return a.getPostionSummary().then(function(a,b,c,d){return{promiseStatus:"success",data:a.data}},function(a,b,c,d){return{promiseStatus:"error"}})}],promisePositionPreferedConfig:["QQMWorkbench",function(a){return a.getPreferedConfig().then(function(a,b,c,d){return{data:a.data}},function(a,b,c,d){return{data:{accounts:[],assetType:[{name:"ALL",code:"*"}],securityIdentifier:{name:"CUSIP/CINS",code:"CUS"},specificSecurities:null,staticLocation:[{name:"CLEARSTREAM BANKING FRANKFURT",code:"CBF"},{name:"DEPOSITORY TRUST CPNY",code:"DTC"},{name:"EUROCLEAR",code:"ECL"},{name:"FEDERAL RESERVE BK",code:"FRB"}],dynamicLocation:[{name:"ALL",code:"*"}],positionStatus:[{name:"ALL",code:"*"}]}}})}]},views:{"holdingsTab@custody":{templateUrl:"partials/qqm-workbench/holdings.html",controller:"CustodyAccountsHoldingsCtrl"}}}),a.state("custody.holdings.detail",{parent:"custody.holdings",parentNavId:150,url:"/detail?positionId&recordId",onEnter:["$rootScope","qqmService",function(a,b){b.setSearch(!1)}],onExit:["$rootScope","qqmService",function(a,b){b.setSearch(!0)}],views:{"holdingsDetail@custody.holdings":{templateUrl:"partials/qqm-workbench/holdingDetail.html",controller:"custodyHoldingsDetailCtrl"}}}),a.state("custody.activity",{parent:"custody",parentNavId:150,startSpinner:!0,errorMessage:"There was an error retrieving the transaction preferred search config",url:"/activity",sticky:!0,onEnter:["$rootScope","qqmService",function(a,b){b.setSearch(!0)}],onExit:["$rootScope","qqmService",function(a,b){b.reset()}],resolve:{promiseActivityPreferedConfig:["QQMWorkbench",function(a){return a.getPreferedTransaction().then(function(a,b,c,d){return{data:a.data}},function(a,b,c,d){return{data:{accounts:[],assetType:[{name:"ALL",code:"*"}],clientRefNo:null,currency:null,dateRange:{name:"All History",code:"H"},dateType:{name:"Create Date",code:"0"},dateValueEnd:null,dateValueStart:null,dynamicLocation:[{name:"ALL",code:"*"}],relativeFromDateRange:null,relativeToDateRange:null,securityIdentifier:{name:"WPK",code:"WPK"},specificFromDateRange:"null",specificSecurities:null,specificToDateRange:"null",staticLocation:[{name:"CLEARSTREAM BANKING FRANKFURT",code:"CBF"},{name:"DEPOSITORY TRUST CPNY",code:"DTC"},{name:"EUROCLEAR",code:"ECL"},{name:"FEDERAL RESERVE BK",code:"FRB"}],transactionRefNo:null,transactionStatus:[{name:"ALL",code:"*"}],transactionType:[{name:"Other",code:"O"}]}}})}],promiseTransactionSummary:["QQMWorkbench",function(a){return a.getTransactionSummary().then(function(a,b,c,d){return{promiseStatus:"success",data:a.data}},function(a,b,c,d){return{promiseStatus:"error"}})}]},views:{"activityTab@custody":{templateUrl:"partials/qqm-workbench/activity.html",controller:"CustodyAccountsActivityCtrl"}}}),a.state("custody.activity.detail",{url:"/detail?transactionId&recordId",parentNavId:150,onEnter:["$rootScope","qqmService",function(a,b){b.setSearch(!1)}],onExit:["$rootScope","qqmService",function(a,b){b.setSearch(!0)}],views:{"activityDetail@custody.activity":{templateUrl:"partials/qqm-workbench/activityDetail.html",controller:"custodyActivityDetailCtrl"}}})}]),nxnAccountsService.$inject=["NavBar","$filter","nxnAppConfig","nxnCustodyAccountsService"],angular.module("nxn.Accounts").service("nxnAccountsService",nxnAccountsService),angular.module("nxn.Accounts").service("nxnAccountsCommon",["nxn.moment.dateFormat",function(a){}]),function(){"use strict";function a(a,b){function c(c,e){if(!c)throw"Invalid Data Url";return c=d[angular.uppercase(b.getEnvironment())]+c,a.get(c,e).then(function(a){return a.data})}var d={DEFAULT:"",MOCK:"/liquidity/api/v1",LOCAL:"/liquidity/api/v1",DEV:"https://apigateway.dev.bnymellon.com/glsapp/v1",UAT:"https://apigateway.test.bnymellon.com/glsapp/v1",QA:"https://apigateway.test.bnymellon.com/glsapp/v1",XAT:"https://apigateway.qa.bnymellon.com/glsapp/v1",PRODUCTION:"https://apigateway.bnymellon.com/glsapp/v1"};return{getEarlyFundClosings:c}}angular.module("nxn.broadcast").factory("nxn.BroadcastEarlyFundClosingService",a),a.$inject=["$http","PageContext"]}(),function(){"use strict";function a(a,b){var c={DEV:"https://apigateway.dev.bnymellon.com/nxncontent/v1",UAT:"https://apigateway.test.bnymellon.com/nxncontent/v1",QA:"https://apigateway.test.bnymellon.com/nxncontent/v1",PRODUCTION:"https://apigateway.bnymellon.com/nxncontent/v1",XAT:"https://apigateway.qa.bnymellon.com/nxncontent/v1",DCAT:"https://apigateway.qa.bnymellon.com/nxncontent/v1",MOCK:"/nxncontent/v1",LOCAL:"/nxncontent/v1"},d={getAlertBroadcasts:function(){var c={headers:{"X-client-key":b.getClientKey()},timeout:3e4,withCredentials:!0},d=this.getAlertBroadcastAPIEndpoint(b.getEnvironment().toUpperCase());return a.get(d,c).then(function(a){return a.data})},getAlertBroadcastAPIEndpoint:function(a){return c[a.toUpperCase()]+"/nexen/broadcasts?mcompat=true"}};return d}angular.module("nxn.broadcast").factory("nxn.BroadcastService",a),a.$inject=["$http","PageContext"]}(),angular.module("nxn.CustodyAccounts").service("nxnCustodyAccountsService",nxnCustodyAccountsService).service("wbUrlConfig",WbUrlConfig),nxnCustodyAccountsService.$inject=["nxn.moment.dateFormat","$filter","CustodyDocumentsAccountsRetrievalUrls","nxnCustodyDocumentsAccountsRetrievalSvc","$q"],WbUrlConfig.$inject=["nxnAppConfig"],function(){"use strict";function a(a,b){function c(a){var c=b.getClientKey(),d={"X-client-key":c,"NEXEN-CIW-AliasToken":a.aliasToken},e={headers:d,timeout:18e5};return e}this.getAccountsFromHikari=function(b,d,e){var f=c(b),g=b.url+"?alias="+b.alias+"&productCode="+b.productCode+"&accountSources="+b.accountSources+"&offset="+d+"&limit="+e;return null!==b.accountGroupIds&&(g=g+"&accountGroupIds="+b.accountGroupIds),a.get(g,f)},this.getAccountGroupsFromHikari=function(b){var d=c(b),e=b.url+"?alias="+b.alias+"&productCode="+b.productCode+"&accountGroupType="+b.accountGroupType;return a.get(e,d)}}angular.module("nxn.CustodyAccounts").service("nxnCustodyDocumentsAccountsRetrievalSvc",a).value("CustodyDocumentsAccountsRetrievalUrls",{API_GATEWAY_SVC_URLS:{DEV:"https://apigateway.dev.bnymellon.com",QA:"https://apigateway.test.bnymellon.com",XAT:"https://apigateway.qa.bnymellon.com",PRODUCTION:"https://apigateway.bnymellon.com",LOCAL:"",MOCK:""},PATH_TO_HIKARI_ACCT_SEARCH:"/aslookup/v1/accounts",PATH_TO_HIKARI_ACCTGRP_SEARCH:"/aslookup/v1/accountgroups"}),a.$inject=["nxn.Http","PageContext"]}(),angular.module("nxn.CustodyAccounts").provider("CustodyAccountsDataRetrieval",[function(){function a(a,b){var d=a.getEnvConfig();return angular.isUndefined(d[b])?c[b]:d[b]}function b(a){return a.custody.alias}var c={qqmGetTimeout:1e4,qqmPostTimeout:1e4,qqmGetDetailTimeout:1e4,qqmExportTimeout:15e3,qqmAccountsTimeout:15e3,qqmPositionSummaryTimeout:15e3,qqmTransactionSummaryTimeout:15e3};return{$get:["nxn.Http","$http","$rootScope","nxnAppConfig","nxnGuidFactory","NxnUser","PageContext",function(c,d,e,f,g,h,i){function j(){return h.getCurrentUser().nxnUser}return{getAlias:function(){var a={"Content-Type":"application/json"},b={headers:a,timeout:6e4,method:"POST"},c={metadata:{serviceName:"/webZTFPlatformServices/users/v1/userinfo",version:"0-1-0",requestTimestamp:moment().locale("e").format("YYYY-MM-DD HH:mm:ss"),requestId:g.getGuid()},parameter:{userId:j(e)}};return d.post("/webZTFPlatformServices/users/v1/userinfo",c,b)},getPositionAccounts:function(){return c.get("/qqm-workbench/qqmservices/v1/position/accounts/allowedvalues")},getPositionAccountGroups:function(){return c.get("/qqm-workbench/qqmservices/v1/position/accountgroups/allowedvalues")},getAccountsWithSource:function(d,h){var i={alias:b(e),"Content-Type":"application/json"},k={headers:i,timeout:a(f,"qqmAccountsTimeout"),method:"POST"},l={metadata:{serviceName:"/accountcontrol/accounts",version:"1.0",requestTimestamp:d,requestId:g.getGuid()},parameter:{alias:b(e),user:j(e),accountSource:h}};return c.post("/astcommon/accountcontrol/v2/accounts",l,k)},getExportPDF:function(d,g){var h={alias:b(e),"Content-Type":"application/pdf"},i={headers:h,timeout:a(f,"qqmExportTimeout"),method:"GET"};return"positionEnquiry"===g?c.get("/qqm-workbench/qqmservices/api/v1.1/positions/detail/pdf/"+d,i):"transactionEnquiry"===g?c.get("/qqm-workbench/qqmservices/api/v1.1/transactions/detail/pdf/"+d,i):void 0},getExportExcel:function(d,g){var h={alias:b(e),"Content-Type":"application/vnd.ms-excel"},i={headers:h,timeout:a(f,"qqmExportTimeout"),method:"GET"};return"positionEnquiry"===g?c.get("/qqm-workbench/qqmservices/api/v1.1/positions/detail/excel/"+d,i):"transactionEnquiry"===g?c.get("/qqm-workbench/qqmservices/api/v1.1/transactions/detail/excel/"+d,i):void 0},getPreferedConfigPosition:function(){var d={alias:b(e),"Content-Type":"application/json"},g={headers:d,timeout:a(f,"qqmGetTimeout"),method:"GET"};return c.get("/qqm-workbench/qqmservices/api/v1.1/positions/preferredconfig",g)},getPreferedConfigTransaction:function(){var d={alias:b(e),"Content-Type":"application/json"},g={headers:d,timeout:a(f,"qqmGetTimeout"),method:"GET"};return c.get("/qqm-workbench/qqmservices/api/v1.1/transactions/preferredconfig",g)},setPreferredConfigPosition:function(d){var g={alias:b(e),"Content-Type":"application/json"},h={headers:g,timeout:a(f,"qqmPostTimeout"),method:"POST"};return c.post("/qqm-workbench/qqmservices/api/v1.1/positions/setpreferredconfig",d,h)},setPreferredConfigTransaction:function(d){var g={alias:b(e),"Content-Type":"application/json"},h={headers:g,timeout:a(f,"qqmPostTimeout"),method:"POST"};return c.post("/qqm-workbench/qqmservices/api/v1.1/transactions/setpreferredconfig",d,h)},getPositionSummary:function(g){function h(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}var i={alias:b(e),"Content-Type":"application/json"},j={headers:i,timeout:a(f,"qqmPositionSummaryTimeout"),method:"GET",transformResponse:h(d.defaults.transformResponse,function(a){if(angular.isUndefined(a)||!angular.isObject(a)||angular.isUndefined(a.data)||!angular.isObject(a.data)||0===a.data.length)return a;var b;for(b=0;b<a.data.length;b++){var c=a.data[b].detailUri;!angular.isUndefined(c)&&c.length>0&&(a.data[b].detailUriPath=c.substring(c.indexOf("/qqmservices")))}return a})};return c.get("/qqm-workbench/qqmservices/api/v1.1/positions/summary?offset="+g+"&limit=100",j)},getTransactionSummary:function(g){function h(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}var i={alias:b(e),"Content-Type":"application/json"},j={headers:i,timeout:a(f,"qqmTransactionSummaryTimeout"),method:"GET",transformResponse:h(d.defaults.transformResponse,function(a){if(angular.isUndefined(a)||!angular.isObject(a)||angular.isUndefined(a.data)||!angular.isObject(a.data)||0===a.data.length)return a;var b;for(b=0;b<a.data.length;b++){var c=a.data[b].detailUri;!angular.isUndefined(c)&&c.length>0&&(a.data[b].detailUriPath=c.substring(c.indexOf("/qqmservices")))}return a})};return c.get("/qqm-workbench/qqmservices/api/v1.1/transactions/summary?offset="+g+"&limit=100",j)},getPositionSummaryByPath:function(g){function h(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}var i={alias:b(e),"Content-Type":"application/json"},j={headers:i,timeout:a(f,"qqmPositionSummaryTimeout"),method:"GET",transformResponse:h(d.defaults.transformResponse,function(a){if(angular.isUndefined(a)||!angular.isObject(a)||angular.isUndefined(a.data)||!angular.isObject(a.data)||0===a.data.length)return a;var b;for(b=0;b<a.data.length;b++){var c=a.data[b].detailUri;!angular.isUndefined(c)&&c.length>0&&(a.data[b].detailUriPath=c.substring(c.indexOf("/qqmservices")))}return a})};return c.get("/qqm-workbench/"+g,j)},getTransactionSummaryByPath:function(g){function h(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}var i={alias:b(e),"Content-Type":"application/json"},j={headers:i,timeout:a(f,"qqmTransactionSummaryTimeout"),method:"GET",transformResponse:h(d.defaults.transformResponse,function(a){if(angular.isUndefined(a)||!angular.isObject(a)||angular.isUndefined(a.data)||!angular.isObject(a.data)||0===a.data.length)return a;var b;for(b=0;b<a.data.length;b++){var c=a.data[b].detailUri;!angular.isUndefined(c)&&c.length>0&&(a.data[b].detailUriPath=c.substring(c.indexOf("/qqmservices")))}return a})};return c.get("/qqm-workbench/"+g,j)},getPositionDetail:function(d){var g={alias:b(e),"Content-Type":"application/json"},h={headers:g,timeout:a(f,"qqmGetDetailTimeout"),method:"GET"};return c.get("/qqm-workbench"+d,h)},getTransactionDetail:function(d){var g={alias:b(e),"Content-Type":"application/json"},h={headers:g,timeout:a(f,"qqmGetDetailTimeout"),method:"GET"};return c.get("/qqm-workbench"+d,h)},getCountryNames:function(){var a={"Content-Type":"application/json"},b={headers:a,timeout:6e4,method:"POST"},c={metadata:{serviceName:"instructions/v1/countries",version:"1.0",requestTimestamp:moment().locale("e").format("YYYY-MM-DD HH:mm:ss"),requestId:g.getGuid()},parameter:{}};return d.post("/webZTFPlatformServices/instructions/v1/countries",c,b).then(function(a){return a.data.data.country})},getDISummary:function(a,b,c){var f={"Content-Type":"application/json"},h={headers:f,timeout:18e4,method:"POST"},i={metadata:{serviceName:"globaltaxratelookup/getTaxRate",version:"0-1-0",requestTimestamp:moment().locale("e").format("YYYY-MM-DD HH:mm:ss"),requestId:g.getGuid()},parameter:{userId:j(e),accounts:a,countries:b}};return d.post("/webZTFPlatformServices/instructions/v1/deliveryinstructionlookup?requestType="+c,i,h)},getDepositoryInfo:function(a){var b={"Content-Type":"application/json"},c={headers:b,timeout:6e4,method:"POST"},e={metadata:{serviceName:"instructions/v1/countries",version:"1.0",requestTimestamp:moment().locale("e").format("YYYY-MM-DD HH:mm:ss"),requestId:g.getGuid()},parameter:{country:a}};return d.post("/webZTFPlatformServices/instructions/v1/depository",e,c)}}}]}}]),function(){"use strict";function a(a,b){function c(){var a=b.getClientKey(),c={"X-client-key":a},d={headers:c,timeout:18e5};return d}function d(b){var d=c();return a.get(b,d)}function e(b,d){var e=c();return a.post(b,d,e)}function f(b,d){var e=c();return a.post(b,d,e)}function g(b){var d=c();return a.get(b,d)}function h(b,d){var e=c();return a.post(b,d,e)}function i(b){var d=c();return a.get(b,d)}function j(b,d){var e=c();return a.post(b,d,e)}function k(b,d){var e=c();return a.post(b,d,e)}function l(b,d){var e=c();return a.post(b,d,e)}function m(b,d){var e=c();return a.post(b,d,e)}function n(b){var d=c();return a.get(b,d)}function o(b,d){var e=c();return a.post(b,d,e)}function p(b,d){var e=c();return a.post(b,d,e)}function q(b){var d=c();return a.post(b,{},d)}function r(b,d){var e=c();return a.post(b,d,e)}function s(b){var d=c();return a.get(b,d)}function t(b){var d=c();return a.get(b,d)}var u={getElasticSearchResult:e,downloadDocument:f,getDocumentStatus:g,distributeDocument:h,getDashboardRecentDocs:j,getSavedSchDistributions:i,saveNewReportConfig:k,createWSASchedule:l,performSavedRptTasks:m,getSavedRptConfig:n,updateRptConfig:o,saveSearchInHikari:p,removeSearchInHikari:q,pauseSchedule:r,getAllAccountsFromUPS:d,getAllFundsForSecMod:s,getSrcDocMetaData:t};return u}angular.module("nxn.EDGDocuments").factory("nxnEDGDocumentsDataService",a).value("documentSvcUrls",{API_GATEWAY_SVC_URLS:{DEV:"https://apigateway.dev.bnymellon.com",QA:"https://apigateway.test.bnymellon.com",XAT:"https://apigateway.qa.bnymellon.com",PRODUCTION:"https://apigateway.bnymellon.com",LOCAL:"",MOCK:""},ERS_SVC_BASE_URLS:{DEV:"https://dev-ers2.bnymellon.com",QA:"https://uat-ers2.bnymellon.com",XAT:"https://xuat-ers2.bnymellon.com",PRODUCTION:"https://ers2.bnymellon.com",LOCAL:"",MOCK:""},PATH_TO_HIKARI_ADVANCED_SEARCH:"/hikari/v1/advancedsearch",PATH_TO_DOWNLOAD_DOCUMENT:"/enterpriseArchiveService/service/v1/documents",PATH_TO_GET_DOCUMENT_DOWNLOAD_STATUS:"/enterpriseArchiveService/service/v1/documents/status",PATH_TO_ADHOC_DISTRIBUTION:"/ercuiWeb/reportcenter/v2/report-tasks",PATH_TO_DISTRIBUTION_POPUP:"/ercuiWeb/newui/distributionProfileList?pageId=edgDocuments&portal=NEXEN&profileId=",PATH_TO_LOAD_SAVED_SCH_DISTRIBUTIONS:"/ercuiWeb/reportcenter/v2/saved-reports",PATH_TO_SAVE_RPT_CONFIGURATION:"/ercuiWeb/reportcenter/v2/report-parameters",PATH_TO_PERFORM_SCHEDULE_TASKS:"/webScheduleService/service/v1/schedules",PATH_TO_SAVED_CONFIG_TASKS:"/ercuiWeb/reportcenter/v2/saved-reports-tasks",PATH_TO_GET_SAVED_RPT_CONFIGURATION:"/ercuiWeb/reportcenter/v2/report-parameters",PATH_TO_UPDATE_RPT_CONFIGURATION:"/ercuiWeb/reportcenter/v2/report-parameters",PATH_TO_SAVE_SEARCH_IN_HIKARI:"/ercuiWeb/reportcenter/hikari/searches/add",PATH_TO_REMOVE_SEARCH_IN_HIKARI:"/ercuiWeb/reportcenter/hikari/searches/delete/{searchName}",PATH_TO_HIKARI_ACCT_SEARCH:"/aslookup/v1/accounts",PATH_TO_HIKARI_ACCTGRP_SEARCH:"/aslookup/v1/accountgroups",PATH_TO_LOAD_ACCOUNTS_FROM_UPS:"/ercuiWeb/reportcenter/v2/accounts",PATH_TO_LOAD_FUNDS_FOR_SECMOD:"/complexreporting/v1/forms/fund-list",PATH_TO_GET_DOC_META_DATA:"/ercuiWeb/reportcenter/documents/types/"}),a.$inject=["nxn.Http","PageContext"]}(),function(){function a(a,b,c,d,e,f){function g(){var a=9e5,g=1e3;this.currPollingCount=0,this.timerSubmit=null,this.totalPollingCount=a/g,this.getRequest=function(a,b){var c={};c.documentId=a.src_sys_doc_type_name,c.documentSource=a.source_system_mnemonic,c.documentSourceKey=d.NAMESPACE_TOKEN.namespaceId,c.indexName=a.document_item_type_class,c.optionalFields=[{attributeKey:"dispositionType",attributeValue:b?b:""}];var e=d.REQUEST_ATTRIBUTE_MAPPING_FOR_DOCUMENTS,f=null;d.SRC_DOCUMENT_META_DEF.hasOwnProperty(a.src_sys_doc_type_name.toUpperCase())&&(f=d.SRC_DOCUMENT_META_DEF[a.src_sys_doc_type_name.toUpperCase()]);var g={shellId:""};for(var h in e)if(e.hasOwnProperty(h)){var i=e[h];g[h]=a[i]}return null!==f&&angular.isDefined(f)&&(g.shellId=f.shellId),c.standardFields=g,c},this.getDocumentStatus=function(a,h){
var i=angular.uppercase(c.getEnvironment()),j=e.ERS_SVC_BASE_URLS[i]+""+e.PATH_TO_GET_DOCUMENT_DOWNLOAD_STATUS+"/"+h,k=f.getDocumentStatus(j),l=this,m={statusCode:"",errorCode:"",errorMessage:""};k.then(function(c,e,f,h){"00"===c.data.errorCode&&l.currPollingCount<l.totalPollingCount?"CMP"===c.data.statusCode?(b.cancel(l.timerSubmit),a.resolve(c.data)):"FLD"===c.data.statusCode?(b.cancel(l.timerSubmit),m.errorCode=c.data.errorCode,m.statusCode=c.data.statusCode,m.errorMessage=d.MESSAGE_CONSTANTS.ERR_MSG_DOWNLOAD_FAILURE,a.resolve(m)):(l.currPollingCount=l.currPollingCount+1,l.timerSubmit=b(function(){l.getDocumentStatus(a,c.data.requestId)},g)):l.currPollingCount>=l.totalPollingCount?(b.cancel(l.timerSubmit),m.errorCode=c.data.errorCode,m.statusCode="FLD",m.errorMessage=d.MESSAGE_CONSTANTS.ERR_MSG_DOWNLOAD_TIMEOUT,a.resolve(m)):(b.cancel(l.timerSubmit),m.errorCode=c.data.errorCode,m.statusCode=c.data.statusCode,m.errorMessage=d.MESSAGE_CONSTANTS.ERR_MSG_DOWNLOAD_FAILURE,a.resolve(m))},function(c,e,f,g){b.cancel(l.timerSubmit),m.errorCode="09",m.statusCode="FLD",m.errorMessage=d.MESSAGE_CONSTANTS.ERR_MSG_GENERIC_SYSTEM_FAILURE,a.resolve(m)})}}return g.prototype.download=function(b,g){for(var h=a.defer(),i=[],j=0;j<b.length;j++){var k=this.getRequest(b[j],g);i.push(k)}var l=angular.uppercase(c.getEnvironment()),m=e.ERS_SVC_BASE_URLS[l]+""+e.PATH_TO_DOWNLOAD_DOCUMENT,n=f.downloadDocument(m,i),o=this,p={statusCode:"",errorCode:"",errorMessage:""};return n.then(function(a,b,c,e){"00"===a.data.errorCode?(o.currPollingCount=0,o.getDocumentStatus(h,a.data.requestId)):(p.errorCode=a.data.errorCode,p.statusCode=a.data.statusCode,p.errorMessage=d.MESSAGE_CONSTANTS.ERR_MSG_DOWNLOAD_FAILURE,h.resolve(p))},function(a,b,c,e){p.errorCode="09",p.statusCode="FLD",p.errorMessage=d.MESSAGE_CONSTANTS.ERR_MSG_GENERIC_SYSTEM_FAILURE,h.resolve(p)}),h.promise},g}angular.module("nxn.EDGDocuments").factory("nxnEDGDocumentsDownloadService",a),a.$inject=["$q","$timeout","PageContext","documentSearchConfigs","documentSvcUrls","nxnEDGDocumentsDataService"]}(),function(){function a(a,b,c,d,e,f,g,h){var i=null,j=null,k="",l=null,m=null,n=null,o=[],p={};this.aisThirdPartyAccepted=!1,this.tabs=[],this.availableAccounts=[],this.availableAccountGroups=[],this.selectedAccounts=[],this.selectedAccountGroups=[],this.resolvedAccountsFromAccGrps=[],this.eventArgs={},this.eventAction="",this.eventMultiActions="",this.selectedItemSize=0,this.downloadProgress={widget:!1,mainPage:!1},this.showAnpNotification=!1,this.documentsWidgetSelectedSubCategory={category:{},additionalFilters:null},this.getSchDistParamSelectionLimit=function(){return p&&!p.hasOwnProperty("accounts")&&(p=a.SOL_VIEW_SPECIFIC_META_CONFIGS[this.getSelectedSolView()].SCH_DIST_PARAMETER_SELECTION_LIMIT),p},this.getScheduledDistrLabel=function(){var a=this.getSearchProperties();return null!==a&&(this.isAisView()&&(a=a[a.length-1]),a.hasOwnProperty("supplements")&&a.supplements.entityCompTitle&&""!==a.supplements.entityCompTitle)?a.supplements.entityCompTitle:"Accounts"},this.setSchDistParamSelectionLimit=function(a){p=a},this.setAccountControlProperties=function(a){n=a},this.getAccountControlProperties=function(){return n},this.setAccountMappingField=function(a){i=a},this.getAccountMappingField=function(){var b=this.getSearchProperties(),c=null;return c=this.isAisView()&&b?angular.isArray(b)?b[b.length-1].accountMappingField:b.accountMappingField:angular.isDefined(b)&&null!==b&&b.hasOwnProperty("accountMappingField")?b.accountMappingField:angular.isDefined(i)&&null!==i?i:a.SOL_VIEW_SPECIFIC_META_CONFIGS[this.getSelectedSolView()].ACCOUNTS_MAPPING_FIELD},this.setSearchProperties=function(a){j=a},this.getSearchProperties=function(){return j},this.setSelectedSolView=function(a){k=a,a&&(this.documentsWidgetSelectedSubCategory.category.viewName=a.toUpperCase())},this.getSelectedSolView=function(){return k.toUpperCase()},this.setCurrEnv=function(a){this.currEnv=a},this.getCurrEnv=function(){return angular.isUndefined(this.currEnv)&&(this.currEnv=angular.uppercase(g.getEnvironment())),this.currEnv},this.setTabList=function(a){this.tabs=a},this.getTabList=function(){return this.tabs},this.resetDefAttributes=function(){l=null,m=null,this.selectedItemSize=0,this.downloadProgress={widget:!1,mainPage:!1},this.isAisView()||(j=null,this.showAnpNotification=!1)},this.setSelectedDocTypes=function(a){o=a},this.getSelectedDocTypes=function(){return o},this.resetAccounts=function(){this.availableAccounts=[],this.selectedAccounts=[],this.selectedAccountGroups=[],this.availableAccountGroups=[],this.resolvedAccountsFromAccGrps=[]},this.resetSelectedLists=function(){this.selectedAccounts=[],this.selectedAccountGroups=[],this.resolvedAccountsFromAccGrps=[]},this.setResolvedAccountsFromAccGrps=function(a){this.resolvedAccountsFromAccGrps=a},this.getResolvedAccountsFromAccGrps=function(){return this.resolvedAccountsFromAccGrps},this.setSelectedAccountGroups=function(a){this.selectedAccountGroups=a},this.getSelectedAccountGroups=function(){return this.selectedAccountGroups},this.getAllAccounts=function(){return this.availableAccounts},this.getAllAccountGroups=function(){return this.availableAccountGroups},this.getSelectedAccounts=function(){return this.selectedAccountGroups.length>0?this.getResolvedAccountsFromAccGrps():0===this.selectedAccounts.length?this.getAllAccounts():this.selectedAccounts},this.setAvailableAccounts=function(a){this.availableAccounts=a},this.setAvailableAccountGroups=function(a){this.availableAccountGroups=a},this.setSelectedAccounts=function(a){this.selectedAccounts=a},this.getSelectedAccountNumbers=function(){var a=this.getSelectedAccounts(),b=[],c=this.getAccountMappingField();return angular.forEach(a,function(a){a[c.keyField]&&b.push(a[c.keyField].trim())}),b},this.getAisSelectedAccountNumbers=function(a){var b=a.selectedAccounts,c=[],d=a.accountMappingField;return angular.forEach(b,function(a){a[d.keyField]&&c.push(a[d.keyField].trim())}),c},this.getSelectedAccountGroupsList=function(){if(0===this.selectedAccountGroups.length)return null;for(var a="",b=0;b<this.selectedAccountGroups.length;b++)a+=""===a?this.selectedAccountGroups[b]:","+this.selectedAccountGroups[b];return a},this.reset=function(){for(var a=this.getTabList(),b=0;b<a.length;b++)a[b].isTabSpinner=!0},this.stopTabSpinner=function(a){for(var b=this.getTabList(),c=0;c<b.length;c++)if("DOCUMENTS"===angular.uppercase(b[c].title)){b[c].isTabSpinner=!1;break}},this.getCompositeAccountsMap=function(){var a=this.getAccountMappingField();if(l)return l;l={};for(var b=this.getAllAccounts(),c=0;c<b.length;c++)l[b[c][a.keyField].trim()]=b[c];return l},this.getCompositeAccountGroupsMap=function(){if(m)return m;m={};for(var a=this.getAllAccountGroups(),b=0;b<a.length;b++)m[a[b].accountGroupId.trim()]=a[b];return m},this.formatValueAsStacked=function(a,b){var c="";return a?c=b?a+" - </br>"+b:a:b&&(c=b),c},this.getValue=function(a){return a?a:""},this.formatValueInSingleRow=function(a,b){var c="";return a?c=b?a+" - "+b:a:b&&(c=b),c},this.formatDocDate=function(a){return a?e("userPrefDateTimeFormat")(a,"DATE"):""},this.formatAisDocDate=function(a){return a?moment.utc(a).format("DD-MMM-YYYY"):""},this.formatDateByUserSelectedTz=function(a){return a?e("regionalDateTime")(a):""},this.buildSimpleQuery=function(a,b){var c="";if(angular.isDefined(a)&&null!=a&&a.length>0)for(var d=0;d<a.length;d++){var e=this.formatExactMatchQuery(a[d].docTypeName.toUpperCase(),b);c=""===c?e:c+" OR "+e}return c},this.formatSubQuery=function(a,b,c){for(var d="",e=a.split(" "),f=0;f<e.length;f++){var g=e[f];g=c?this.escapeSpecialChars(g):"'"+g+"'",""===d?d="("+b+":"+g:d+=b+":"+g,d+=f===e.length-1?")":" AND "}return d},this.formatExactMatchQuery=function(a,b){var c="";return c=a.replace(/[^a-z0-9]+/gi,function(a){var b="";if(a.length>1)for(var c=0;c<a.length;c++)b+="\\"+a[c];else b=a.replace(a,"\\"+a);return b}),c="("+b+":"+c+")"},this.formatFreeSearchText=function(a){for(var b=/^[a-zA-Z0-9]*$/,c=a.replace(/ {2,}/g," ").split(" "),d=0;d<c.length;d++){var e=c[d].replace("'","''");b.test(e)?c[d]="*"+e+"*":c[d]='"'+e+'"'}return c.join(" AND ")},this.escapeSpecialChars=function(a){var b=/^[a-zA-Z0-9 ]*$/;return a=b.test(a)?"'"+a+"'":'"'+a+'"'},this.formatSimpleQuery=function(a,b,c){var d="";c||(c="accountNumber");for(var e=0;e<a.length;e++)""===d?d=b+":'"+a[e][c]+"'":d+=" OR "+b+":'"+a[e][c]+"'";return d},this.openViewDocumentPopup=function(a,b){var d={currRecord:a,title:b},e={templateUrl:"partials/accounts/edg_documents/modal/view-document.html",controller:"nxnDocsViewDocumentController",resolve:{modalData:function(){return d}}};c.showModal(e)},this.getDocumentURL=function(a){var c=a.docUriList,e="";if(c&&c.length>0){var f=b.ERS_SVC_BASE_URLS[this.getCurrEnv()]+"/"+c[0].attributeValue;e=d.trustAsResourceUrl(f)}return e},this.getHikariFieldFilters=function(){var b=this.getSearchProperties();return null!==b&&b.hasOwnProperty("hikariFieldFilter")?b.hikariFieldFilter:a.SOL_VIEW_SPECIFIC_META_CONFIGS[this.getSelectedSolView()].HIKARI_SEARCH_FIELD},this.getAisHikariFieldFilters=function(b){var c=b;return null!==c&&c.hasOwnProperty("hikariFieldFilter")?c.hikariFieldFilter:a.SOL_VIEW_SPECIFIC_META_CONFIGS[this.getSelectedSolView()].HIKARI_SEARCH_FIELD},this.broadcastActionItem=function(a,b){this.eventAction=a,this.eventArgs=b,f.$broadcast("ERS_EDG_SINGLE_ROW_ACTION",this.eventArgs)},this.broadcastMultipleActions=function(a){this.eventMultiActions=a,f.$broadcast("ERS_EDG_MULTIPLE_ROWS_ACTION")},this.broadcastSchDistItem=function(a,b){this.eventAction=a,this.eventArgs=b,f.$broadcast("ERS_EDG_SCH_DIST",this.eventArgs)},this.broadcastNotificationItem=function(a,b){this.eventAction=a,this.eventArgs=b,f.$broadcast("AIS_NOTIFICATION_ACTION",this.eventArgs)},this.isAisView=function(){return"AISINVESTMENTREPO"===this.getSelectedSolView()||"CLIENTSDOCUMENTS"===this.getSelectedSolView()||"FUNDSDOCUMENTS"===this.getSelectedSolView()||"PROPERTIESDOCUMENTS"===this.getSelectedSolView()},this.broadcastMultipleAlertSettingsActions=function(a){this.eventMultiActions=a,f.$broadcast("AIS_MULTIPLE_ROWS_ALERTSETTINGS_ACTION")},this.setAisThirdPartyAccepted=function(){this.aisThirdPartyAccepted=!0},this.getAisThirdPartyAccepted=function(){return this.aisThirdPartyAccepted}}angular.module("nxn.EDGDocuments").service("nxnEDGDocumentsService",a),a.$inject=["documentSearchConfigs","documentSvcUrls","ModalService","$sce","$filter","$rootScope","PageContext","nxnEDGDocumentsDataService"]}(),function(){function a(a){var b=1,c=2,d=3,e=4,f=5,g=6,h=11,i=12,j=13,k=14,l=15,m=864e5,n=function(a){if(""===a||null===a)return"";var b={},c=a.split(",");return 5!==c.length?"":(b.prefix=c[0],b.typeCode=c[1],b.yearOffset=c[2],b.monthOffset=c[3],b.dayOffset=c[4],b)},o=function(a,b){var d=0;d=0!==parseInt(b.dayOffset)?parseInt(b.dayOffset)>0?1:-1:a.getTime()>(new Date).getTime()?1:-1;var g=parseInt(a.getFullYear())+parseInt(b.yearOffset),i=parseInt(a.getMonth())+parseInt(b.monthOffset),l=null;if(l=parseInt(b.typeCode)!==e&&parseInt(b.typeCode)!==f&&parseInt(b.typeCode)!==j&&parseInt(b.typeCode)!==k||0===parseInt(b.yearOffset)&&0===parseInt(b.monthOffset)?new Date(g,i,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()):new Date(g,i+1,0,a.getHours(),a.getMinutes(),a.getSeconds()),0!==parseInt(b.dayOffset))for(var n=Math.abs(parseInt(b.dayOffset)),o=0;o<n;o++)if(l=new Date(l.getTime()+m*parseInt(d)),parseInt(b.typeCode)===c||parseInt(b.typeCode)===h)for(;0===l.getDay()||6===l.getDay();)l=new Date(l.getTime()+parseInt(m)*parseInt(d));if(parseInt(b.typeCode)===c||parseInt(b.typeCode)===h)for(;0===l.getDay()||6===l.getDay();)l=new Date(l.getTime()-parseInt(m));return l},p=function(a){for(var b=new Date(a.getTime()-parseInt(m));0===b.getDay()||6===b.getDay();)b=new Date(b.getTime()-parseInt(m));return b},q=function(a){for(var b=new Date(a.getTime()-parseInt(m));5!==b.getDay();)b=new Date(b.getTime()-parseInt(m));return b},r=function(a){var b=new Date(a.getFullYear(),a.getMonth(),0,a.getHours(),a.getMinutes(),a.getSeconds());return b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds())},s=function(a){var b,c=a.getMonth()+1;return c>0&&c<=3?b=new Date(a.getFullYear()-1,11,31,a.getHours(),a.getMinutes(),a.getSeconds()):c>3&&c<=6?b=new Date(a.getFullYear(),2,31,a.getHours(),a.getMinutes(),a.getSeconds()):c>6&&c<=9?b=new Date(a.getFullYear(),5,30,a.getHours(),a.getMinutes(),a.getSeconds()):c>9&&c<=12&&(b=new Date(a.getFullYear(),8,30,a.getHours(),a.getMinutes(),a.getSeconds())),b},t=function(a){var b=new Date(a.getFullYear()-1,11,31,a.getHours(),a.getMinutes(),a.getSeconds());return b};this.calculateRelativeDate=function(a){var m=n(a),u="";if(m){var v=new Date,w="",x=m.typeCode;switch(parseInt(x)){case c:case h:w=p(v);break;case d:case i:w=q(v);break;case e:case j:w=r(v);break;case f:case k:w=s(v);break;case g:case l:w=t(v);break;case b:w=v;break;default:w=v}u=o(w,m)}return u},this.formatToRelDate=function(a){return this.calculateRelativeDate(a)},this.getFirstDateOfMonth=function(a){var b=new Date(a.getUTCFullYear(),a.getUTCMonth(),1,a.getHours(),a.getMinutes(),a.getSeconds());return b}}angular.module("nxn.EDGDocuments").service("nxnDocumentsRelativeDateService",a),a.$inject=["$filter"]}(),angular.module("nxn.Alerts").provider("nxn.AlertsV2Service",AlertsV2ServiceProvider),function(){"use strict";function a(){function a(){return O}function b(a,b){O=a,P=[],e(b)}function c(){return P}function d(a){return a.alertCategory.indexOf("AM_GLS")>-1||a.alertCategory.indexOf("AM_LOAN")>-1||a.alertCategory.indexOf("AM_FT")>-1||a.alertCategory.indexOf("AM_AIS")>-1||a.alertCategory.indexOf("AM_ICO")>-1}function e(a){if(P=[],angular.isDefined(O)&&O.length>0){var b=-1;angular.forEach(O.filter(d),function(a){b++;var c=this.map(function(a){return a.alertCategoryLabel}).indexOf(a.alertCategoryLabel),d={};if(d.type=a.alertType,d.label=a.alertTypeLabel,d.savedAlerts=[],d.hasGroupRows=d.savedAlerts.length>0,d.expandGroup=d.savedAlerts.length>0,c===-1){var e={};e.alertSubscInfoIndex=b,e.alertCategoryLabel=a.alertCategoryLabel,e.alertCategory=a.alertCategory,e.isSummaryAlert=!1,e.allowAdditionalAlerts=!0,e.types=[],e.labelName=[],e.types.push(d),this.push(e)}else this[c].types.push(d)},P);var c={};c.alertSubscInfoIndex=++b,c.alertCategoryLabel="Summary Alerts",c.isSummaryAlert=!0,c.allowAdditionalAlerts=!a,c.types=[],c.labelName=[],c.types.push({label:"Summary Alerts",hasGroupRows:a,expandGroup:a}),P.push(c)}}function f(a,b){if(angular.isDefined(b)&&angular.isDefined(b.data)&&(angular.forEach(P,function(c){c===a&&angular.forEach(b.data,function(a){var b=c.types.map(function(a){return a.type}).indexOf(a.alertType);b>-1&&angular.forEach(a.alertNames,function(a){var d={};d.label=a,c.types[b].savedAlerts.push(d),c.types[b].hasGroupRows=c.types[b].savedAlerts.length>0,c.types[b].expandGroup=c.types[b].savedAlerts.length>0})})}),"AM_GLSMMF"===a.alertCategory)){for(var c=[],d=0;d<a.types.length;d++)for(var e=0;e<a.types[d].savedAlerts.length;e++)c.indexOf(a.types[d].savedAlerts[e].label)===-1&&c.push(a.types[d].savedAlerts[e].label);angular.forEach(P,function(a){"AM_GLSMMF"===a.alertCategory&&(a.labelName=c,a.labelName.sort())})}}function g(){angular.forEach(P,function(a){a.isSummaryAlert&&(a.allowAdditionalAlerts=!1,a.types[0].hasGroupRows=!a.allowAdditionalAlerts,a.types[0].expandGroup=!a.allowAdditionalAlerts)})}function h(a,b,c){angular.forEach(P,function(d){if(d.alertCategory===a){var e=d.types.map(function(a){return a.type}).indexOf(b),f={};f.label=c,d.types[e].savedAlerts.push(f),d.types[e].hasGroupRows=d.types[e].savedAlerts.length>0,d.types[e].expandGroup=d.types[e].savedAlerts.length>0}})}function i(a){Q=a,m(),l()}function j(){return Q}function k(){Q={}}function l(){angular.isDefined(Q)&&(Q.groupEmailAlertsByValue="A",angular.isDefined(Q.groupEmailAlertBy)&&angular.forEach(Q.groupEmailAlertBy,function(a){a.selected&&(Q.groupEmailAlertsByValue=a.valueLabel)}))}function m(){if(R=[],angular.isDefined(Q)){var a=0;angular.forEach(Q.alertTypes,function(b){a++;var c=this.map(function(a){return a.displayLabelCat}).indexOf(b.displayLabelCat),d={};if(c===-1){var e={};e.alertTypeIndex=a,e.displayLabelCat=b.displayLabelCat,e.valueLabelCat=b.valueLabelCat,e.alertTypeLabels=[],d.displayLabelAlrt=b.displayLabelAlrt,d.valueLabelAlrt=b.valueLabelAlrt,d.enable=b.enable,e.alertTypeLabels.push(d),this.push(e)}else d.displayLabelAlrt=b.displayLabelAlrt,d.valueLabelAlrt=b.valueLabelAlrt,d.enable=b.enable,this[c].alertTypeLabels.push(d)},R)}}function n(){return R}function o(a,b,c){var d=[];if(angular.isDefined(a))return angular.forEach(a,function(a){var e={};e.displayLabelCat=a.displayLabelCat,e.valueLabelCat=a.valueLabelCat,e.holdFromDate=b,e.holdToDate=c,angular.forEach(a.alertTypeLabels,function(a){var b=angular.copy(e);b.displayLabelAlrt=a.displayLabelAlrt,b.valueLabelAlrt=a.valueLabelAlrt,b.enable=a.enable,this.push(b)},d)}),d}function p(){S={}}function q(){return S}function r(a,b){S=a.data.alertSubscInfo[0];for(var c,d={Status:-1,Instruction:-1,AlertRule:-1},e=S.subscriptionList,f=0;f<S.uiParams.uifield.length;f++)c=S.uiParams.uifield[f],"checkbox"===c.type&&"instructionTypes"!==c.name&&(d.Status=f),"checkbox"===c.type&&"instructionTypes"===c.name&&(d.Instruction=f),"alertRule"===c.type&&(d.AlertRule=f);angular.isDefined(e)&&angular.isDefined(e[0])&&angular.isDefined(e[0].alertNamespace)&&angular.isDefined(e[0].alertNamespace.confVal)&&angular.isDefined(e[0].alertNamespace.confVal.account)&&(b.selectedAccount=e[0].alertNamespace.confVal.account,b.mutilGridAcctEdit=angular.copy(b.selectedAccount)),t(d.Status,S,b),v(d.Instruction,S,b),y(d.AlertRule,S,b),s(b,S)}function s(a,b){angular.isDefined(a.statusCheckboxGroup)?"AM_FTFDOCLIB"===b.alertType?a.fieldsInfo=[{dataField:"name",headerName:"Group Name"},{dataField:"number",headerName:"Group ID"}]:a.fieldsInfo=[{dataField:"name",headerName:"Account Name"},{dataField:"number",headerName:"Account Number"}]:a.fieldsInfo=[{dataField:"name",headerName:"Deal Name"}]}function t(a,b,c){var d=[];if(a>-1){var e=b.uiParams.uifield[a].items;if(c.subscriptionName){angular.forEach(b.subscriptionList,function(a){if(a.alertName===c.subscriptionName){var b=a.alertNamespace.confVal.status;angular.forEach(e,function(a){b.indexOf(a.inputValue.toUpperCase())>-1?a.checked=!0:a.checked=!1})}});var f=e;angular.forEach(f,function(a){a.checked&&d.push(a.inputValue)})}else angular.forEach(e,function(a){a.checked=!1});c.statusCheckboxGroup=e,c.oldStatusArray=d}}function u(a){var b=[],c=a.statusCheckboxGroup;return angular.forEach(c,function(a){a.checked&&b.push(a.inputValue)}),b}function v(a,b,c){if(a>-1){if(b.uiParams.uifield[a].name.indexOf("instruction")===-1)return;var d=[],e=b.uiParams.uifield[a].items;if(c.subscriptionName){angular.forEach(b.subscriptionList,function(a){if(a.alertName===c.subscriptionName){var b=a.alertNamespace.confVal.instructionTypes;angular.isDefined(b)&&null!==b&&angular.forEach(e,function(a){b.indexOf(a.inputValue.toUpperCase())>-1?a.checked=!0:a.checked=!1})}});var f=e;angular.forEach(f,function(a){a.checked&&d.push(a.inputValue)})}else angular.forEach(e,function(a){a.checked=!1});c.instructionCheckboxGroup=e,c.oldInstructionArray=d}}function w(a){var b=[],c=a.instructionCheckboxGroup;return angular.forEach(c,function(a){a.checked&&b.push(a.inputValue)}),b}function x(a){var b=[];return angular.isDefined(a.alertName)&&a.alertName.length>0&&("AM_LOANDEAL"===a.alertName?b.push("DAILY"):"AM_LOANPOSTED"===a.alertName&&b.push("POSTED")),b}function y(a,b,c){var d={},e={},f={},g=[];if(a>-1&&(g=b.uiParams.uifield[a].items,angular.forEach(g,function(a){"Greater than or equal to"===a.boxLabel?(d.exprName=a.dataField,d.exprType="NUMBER",d.exprOperator="GE"):"Less than or equal to"===a.boxLabel?(e.exprName=a.dataField,e.exprType="NUMBER",e.exprOperator="LE"):"ORDERTYPE"===a.dataField&&(f.exprName=a.dataField,f.exprType=a.dataType,f.exprOperator="EQ",f.exprValue=a.inputValue,c.orderTypeList=f)}),c.geExprList=d,c.leExprList=e),angular.isDefined(b.subscriptionList)&&b.subscriptionList.length>0&&angular.isDefined(b.subscriptionList[0].alertRule)&&null!==b.subscriptionList[0].alertRule){var h=b.subscriptionList[0].alertRule;g=h.exprList,angular.forEach(g,function(a){"GE"===a.exprOperator?d.exprValue=parseFloat(a.exprValue):"LE"===a.exprOperator&&(e.exprValue=parseFloat(a.exprValue))}),c.alertRuleObj=h,c.geExprList=d,c.leExprList=e}}function z(a){var b={};if(b.exprList=[],a.geExprList&&!a.geExprList.exprValue&&("AM_GLSTRDRED"===a.alertName?a.geExprList.exprValue=.001:a.geExprList.exprValue=.01),b.exprList.push(a.geExprList),a.leExprList&&!a.leExprList.exprValue&&("AM_GLSTRDRED"===a.alertName?a.leExprList.exprValue=9999999999.999:a.leExprList.exprValue=9999999999.99),b.exprList.push(a.leExprList),angular.isDefined(a.alertRuleObj)&&angular.isDefined(a.alertRuleObj.exprList)){var c=a.alertRuleObj.exprList.map(function(a){return a.exprName}).indexOf("ORDERTYPE");c>-1&&b.exprList.push(a.alertRuleObj.exprList[c])}else angular.isDefined(a.orderTypeList)&&b.exprList.push(a.orderTypeList);return angular.isUndefined(a.alertRuleObj)?b.ruleOperator="AND":(b.ruleDesc=a.alertRuleObj.ruleDesc,b.ruleId=a.alertRuleObj.ruleId,b.ruleOperator=a.alertRuleObj.ruleOperator),b}function A(a,b,c){var d=b,e=[],f=[];angular.forEach(d,function(a){a.groupAccountFlag?e.push(a):f.push(a)}),c.isLargeAccounts?(c.mutilGridAcct=f,c.mutilGridAcctGrp=e):angular.isUndefined(c.subscriptionName)?(c.mutilGridAcct=f,c.mutilGridAcctGrp=e,c.mutilGridAcctEdit=[],c.mutilGridAcctGrpEdit=[]):(c.mutilGridAcct=f,D(c),c.mutilGridAcctGrp=e,c.selectedAccountGrp=[],E(c))}function B(a){var b=[];return angular.forEach(a.mutilGridAcctEdit,function(a){b.push(a.number.trim())}),angular.forEach(a.mutilGridAcctGrpEdit,function(a){b.push(a.number.trim())}),b}function C(a,b){var c=[],d={};return angular.forEach(a.mutilGridAcctEdit,function(a){var d={};d.name=a.name,d.eventName=b,d.number=a.number.trim(),c.push(d)}),d[b]=c,d}function D(a){var b=[],c=[],d=[];angular.forEach(a.selectedAccount,function(a){b.push(a.number.trim())});for(var e=0;e<a.mutilGridAcct.length;e++)b.indexOf(a.mutilGridAcct[e].number.trim())===-1?c.push(a.mutilGridAcct[e]):d.push(a.mutilGridAcct[e]);a.mutilGridAcct=c,a.mutilGridAcctEdit=d}function E(a){var b=[],c=[],d=[];angular.forEach(a.selectedAccountGrp,function(a){b.push(a)});for(var e=0;e<a.mutilGridAcctGrp.length;e++)b.indexOf(a.mutilGridAcctGrp[e].number.trim())===-1?c.push(a.mutilGridAcctGrp[e]):d.push(a.mutilGridAcctGrp[e]);a.mutilGridAcctGrp=c,a.mutilGridAcctGrpEdit=d}function F(a,b){T=a.server,angular.isDefined(b)&&angular.isDefined(b.alertCategory)&&T.push(b),U=[],angular.forEach(a.devices,function(a){angular.isDefined(a.deviceCode)&&null!==a.deviceCode&&this.push(a)},U)}function G(a,b){a.alertSubscription===b?a.visible=!0:"~NEW~"===a.alertSubscription&&(a.visible=!0),a.editableDevices=angular.copy(U),angular.forEach(a.editableDevices,function(b){var c=a.devices.map(function(a){return a.deviceCode}).indexOf(b.deviceCode);c>-1?b.checked=!0:b.checked=!1})}function H(a){var b=angular.copy(T);return b.sort(function(b,c){return"~NEW~"===b.alertSubscription||b.alertSubscription===a?-1:"~NEW~"===c.alertSubscription||c.alertSubscription===a?1:b.alertSubscription<c.alertSubscription?-1:b.alertSubscription>c.alertSubscription?1:0}),"AM_GLSMMF"!==b[0].alertCategory?angular.forEach(b,function(b){G(b,a)}):angular.forEach(b,function(b){null!==b.devices&&G(b,a)}),b}function I(a,b){var c=angular.copy(a);return angular.forEach(c,function(a){"~NEW~"===a.alertSubscription&&(a.alertSubscription=b),a.devices=[],angular.forEach(a.editableDevices,function(b){b.checked&&(delete b.checked,a.devices.push(b))}),delete a.editableDevices,delete a.visible}),c}function J(){return T}function K(){return U}function L(a){V=a}function M(){return V}function N(a,b,c,d,e,f,g,h,i,j,k){var l=null;return l=angular.isDefined(b.exprList[0]&&b.exprList[1])?{alertRule:b,alertSubscName:a,deviceInfo:null,namespace:{client:{accountName:c,status:e},server:{accountName:d,instructionTypes:null,status:f}}}:0!==g.length?{alertSubscName:a,deviceInfo:null,namespace:{client:{accountName:c,instructionTypes:g,status:e},server:{accountName:d,instructionTypes:i,status:f}}}:0===e.length?{alertSubscName:a,deviceInfo:null,namespace:{client:{accountName:c,instructionTypes:h,status:[j]},server:{accountName:d,status:[j]}}}:k?{alertSubscName:a,deviceInfo:null,namespace:{client:{accountName:c,status:e},server:{accountName:d,status:f}}}:{alertSubscName:a,deviceInfo:null,namespace:{client:{accountName:[j],status:e},server:{accountName:[j],instructionTypes:null,status:f}}}}var O=[],P=[],Q={},R=[],S={},T=[],U=[],V=!1,W={setAlertSubscInfo:b,getAlertSubscInfo:a,alertSubscInfoFilter:d,getCategoryLabels:c,setCategoryLabels:e,setSavedAlerts:f,addSavedAlert:h,setSavedSummaryAlert:g,resetSummaryAlertBatchInfo:k,setSummaryAlertBatchInfo:i,getSummaryAlertBatchInfo:j,setSummaryAlertAlertTypes:m,getSummaryAlertAlertTypes:n,populateSummaryAlertTypes:o,setSubscriptionDetails:r,getSubscriptionDetails:q,resetSubscriptionDetails:p,getStatusCheckboxes:u,getInstructionCheckboxes:w,getInstructionType:x,getAccountBalances:z,getAccounts:B,getSelectedAccountsForEdit:C,setSubscriptionDeviceDetails:F,getSubscriptionDevicesFromServer:J,getSubscriptionDevices:K,getSubscriptionDeviceDetails:H,getSubscriptionDeviceClient:I,setMaxAccountsReached:L,getMaxAccountsReached:M,getAlertSubscCriteriaVo:N,setEntitlements:A};return W}a.$inject=[],angular.module("nxn.Alerts").service("nxn.AlertsSubscribeService",a)}(),function(){"use strict";function a(a,b,c){function d(){return c.get("/nxn-service/endpoints").then(function(a){return a.data.endpoints},function(b){return a.reject("Unable to retrieve endpoints from nxn-service: "+b.status+": "+b.data)})}function e(a,c,d){return f(a,c).then(function(a){var c=b(a,d);return c})}function f(c,d){var e=b(c,d);return h.then(function(b){return b.hasOwnProperty(e)?b[e]:a.reject("Unable to find an api gateway entry for serviceName="+c+" and version="+d)})}function g(){return h.then(function(a){return a})}var h=d().then(function(a){for(var c={},d=0;d<a.length;d++){var e=b(a[d].name,a[d].version);if(h.hasOwnProperty(e))throw"duplicate entry within endpoints: "+e;c[e]=a[d].gatewayUrl}return c}),i={get:function(a,b,d,f){var g=e(a,b,d);return g.then(function(a){return f?c.get(a,f):c.get(a)})},put:function(a,b,d,f,g){var h=e(a,b,d);return h.then(function(a){return g?c.put(a,f,g):c.put(a,f)})},post:function(a,b,d,f,g){var h=e(a,b,d);return h.then(function(a){return g?c.post(a,f,g):c.post(a,f)})},_getApiUrl:e,_getApiUrlMap:g};return i}angular.module("nxn.apigateway",["NexenCommon"]).factory("ApiGatewayService",["$q","nxn.pathJoin","nxn.Http",a])}(),function(){"use strict";function a(a,b,c,d){function e(){return n=[],f(),n}function f(){c.getEntitledPluginNames().forEach(function(a){m.set(a.replace(/-/g,""),{pluginName:a})}),d.getPluginsInfo().then(function(a){angular.forEach(a.data,function(a){var b=a.pluginName.replace(/-/g,""),c=m.get(b);c&&(c.appMnemonic=a.appMnemonic,c.clientFacing=a.clientFacing,c.contactEmail=a.contactEmail,c.lineOfBusiness=a.lineOfBusiness)}),j(),g()})}function g(){var b=a.getUnfilteredNavbar();angular.forEach(b,function(a){var b=a.name,c=a.id;a.first_level&&angular.forEach(a.first_level,function(a){if(a.second_level)i(a,b,c);else{var d=angular.copy(a);d.parentNavItem=b,d.parentNavId=c,d.secondLevelId="",d.secondLevelItem="",d.state=a.state,d.firstLevelItem=a.name,d.firstLevelId=a.id,o.push(d)}})}),h(),angular.forEach(n,function(b){b.parentNavId="-",b.parentNavItem="-",b.firstLevelId="-",b.firstLevelItem="-",b.secondLevelId="-",b.secondLevelItem="-",b.isStepUpRequired=a.isStepUpRequired?"Yes":"No",b.columnId="-",b.columnTitle="-",angular.forEach(o,function(a){a.state===b.state&&(b.parentNavId=a.parentNavId?a.parentNavId:"-",b.parentNavItem=a.parentNavItem?a.parentNavItem:"-",b.firstLevelId=a.firstLevelId?a.firstLevelId:"-",b.firstLevelItem=a.firstLevelItem?a.firstLevelItem:"-",b.secondLevelId=a.secondLevelId?a.secondLevelId:"-",b.secondLevelItem=a.secondLevelItem?a.secondLevelItem:"-",b.isStepUpRequired=a.isStepUpRequired?"Yes":"No",b.columnId=a.columnId?a.columnId:"-",b.columnTitle=a.columnTitle?a.columnTitle:"-")})})}function h(){var a=b.getStatesWithStepupRequired();angular.forEach(o,function(b){angular.forEach(a,function(a,c){angular.isDefined(b.state)&&b.state===c&&""!==a&&(b.isStepUpRequired=!0)})})}function i(a,b,c){angular.forEach(a.second_level,function(d){d.parentNavItem=b,d.parentNavId=c,d.firstLevelItem=a.name,d.firstLevelId=a.id,d.columns?angular.forEach(d.columns,function(a){d.columnTitle=a.title,d.columnId=a.id;for(var b=0;b<a.items.length;b++){var c=a.items[b],e=angular.copy(d);e.secondLevelId=c.id,e.secondLevelItem=c.name,e.state=c.state,o.push(e)}}):o.push(d)})}function j(){var a=b.getNavbarState();Object.values(a).forEach(function(b,c){if(b.hasOwnProperty("templateUrl")){var d=/partials\/(.+?)\//.exec(b.templateUrl)[1];m.get(d)&&k(b,d,b.url,b.hasOwnProperty("name")?b.name:Object.keys(a)[c])}else b.hasOwnProperty("views")?Object.values(b.views).forEach(function(d){if(d.hasOwnProperty("templateUrl")){var e=/partials\/(.+?)\//.exec(d.templateUrl)[1];m.get(e)&&k(b,e,b.url,b.hasOwnProperty("name")?b.name:Object.keys(a)[c])}else e=Object.keys(a)[c].split(".")[0],k(b,e,b.url,b.hasOwnProperty("name")?b.name:Object.keys(a)[c])}):!b.hasOwnProperty("template")&&b.hasOwnProperty("templateUrl")||(d=Object.keys(a)[c].split(".")[0],k(b,d,b.url,b.hasOwnProperty("name")?b.name:Object.keys(a)[c]))})}function k(a,b,c,d){var e={};e.pluginName=m.get(b)&&m.get(b).pluginName?m.get(b).pluginName:"Cannot Be Determined",e.url=c?c:"Not Defined",e.state=d,e.appMnemonic=m.get(b)&&m.get(b).appMnemonic?m.get(b).appMnemonic:"Not Defined",e.clientFacing=m.get(b)&&m.get(b).clientFacing?m.get(b).clientFacing:"Not Defined",e.contactEmail=m.get(b)&&m.get(b).contactEmail?m.get(b).contactEmail:"Not Defined",e.lob=m.get(b)&&m.get(b).lineOfBusiness?m.get(b).lineOfBusiness:"Not Defined",n.push(e)}function l(){return{enableNxnGridHeaderRefresh:!0,rowHeight:40,columnDefs:[{name:"state",enableCellEdit:!0,displayName:"State",cellTemplate:"<div>{{ COL_FIELD}}</div>"},{name:"url",enableCellEdit:!0,displayName:"URL",cellTemplate:"<div>{{ COL_FIELD}}</div>"},{name:"pluginName",enableCellEdit:!0,displayName:"Plugin Name",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"parentNavId",enableCellEdit:!0,visible:!1,displayName:"Parent ID",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"parentNavItem",enableCellEdit:!0,displayName:"Parent Nav Item",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"firstLevelId",enableCellEdit:!0,visible:!1,displayName:"First Level ID",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"firstLevelItem",enableCellEdit:!0,displayName:"First Level Nav Item",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"secondLevelId",enableCellEdit:!0,visible:!1,displayName:"Second Level ID",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"secondLevelItem",enableCellEdit:!0,displayName:"Second Level Nav Item",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"isStepUpRequired",enableCellEdit:!0,visible:!1,displayName:"StepUp Required?",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"columnId",enableCellEdit:!0,visible:!1,displayName:"Column ID",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"columnTitle",enableCellEdit:!0,displayName:"Column Title",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"lob",enableCellEdit:!0,displayName:"Line Of Business",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"contactEmail",enableCellEdit:!0,displayName:"Email",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"clientFacing",enableCellEdit:!0,visible:!1,displayName:"Client Facing",cellTemplate:"<div>{{ COL_FIELD }}</div>"},{name:"appMnemonic",enableCellEdit:!0,displayName:"App Mnemonic",cellTemplate:"<div>{{ COL_FIELD }}</div>"}],enableNxnGridHeaderExport:!0,saveGridSettings:!0}}var m=new Map,n=[],o=[];
return{getGridData:e,setGridColumn:l}}angular.module("pluginStateMapModule").factory("PluginStateMapService",["NavBar","nxn.Router","PluginEntitlements","PluginService",a])}(),angular.module("NexenCommon").value("nxn.dpConstants",{unknownValue:"UNKNOWN"}).factory("nxnUtil",function(){function a(a){if(a){for(var b=a.split("-"),c=0;c<b.length;c++)b[c]=parseInt(b[c],10);return b[0]=b[0]-1900,b}}function b(a,b){for(var c,d=0;d<a.length&&(c=a[d]-b[d],0===c);d++);return c}function c(a){if(angular.isUndefined(a)||""===a)return[];for(var b,c=[],d=[],e="",f=0;f<a.length;f++)b=a.charAt(f),","===b?(c.push(e),e=""):"\n"===b?(c.push(e),d.push(c),e="",c=[]):e=e.concat(b);return e>""&&c.push(e),c.length>0&&d.push(c),d}function d(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0}function e(a){var b,c=moment.tz("US/Eastern").isDST();b=c?4:5;var d=a.getTime()-6e4*a.getTimezoneOffset(),e=new Date(d+36e5*b);return e}function f(a,b,c,d){return new a({page:1,count:d},{total:1,getData:function(a,d){var e,f=c;e=b instanceof Function?b():b,a.resolve(e.slice((d.page()-1)*d.count(),d.page()*d.count())),f(d,e.length)}})}function g(a){var b={},c={};return c.addNode=function(c){var e=b;if(d(e))b=c;else{var f=e;if(0===a.compare(f,c))return;for(;!angular.isUndefined(f.next)&&null!=f.next;)if(f=f.next,0===a.compare(f,c))return;f.next=c}},c.removeNode=function(c){var d=b;if(0===a.compare(d,c))b=angular.isDefined(d.next)?d.next:{};else for(var e,f=d;!angular.isUndefined(f.next)&&null!=f.next;)if(e=f,f=f.next,0===a.compare(f,c))return void(e.next=f.next)},c.containsNode=function(c){for(var d=b;d;){if(0===a.compare(d,c))return!0;d=d.next}return!1},c.getHead=function(){return b},c.emptyLinkedList=function(){b={}},c}return String.prototype.avoidUndefinedConcat=function(a){return a?this+a:this},{isEmptyObject:d,convertToLocalTime:e,linkedlist:g,initializeNgTableParams:f,parseCSV:c,compareDatesFromDayMonthAndYearPerspective:b,getDateComponentsLiq:a}}).service("ExportService",["$filter","nxn.moment.dateFormat","nxn.CurrencySymbolService","nxnUtil",function(a,b,c,d){this.getExportFunction=function(e,f,g,h){angular.isUndefined(h)&&(h=function(a){return a});var i=function(i,j){var k;"pdf"===f?k="pdfId":"xls"===f&&(k="xlsId");var l,m,n=e,o=h;i=o(i);for(var p=0;p<n.length;p++)if(l=n[p].dataField,null==i[l]||angular.isUndefined(i[l]))j.push("");else if(n[p][k]){if(m=g[n[p][k]],"NUMBER"===n[p].dataType){var q=parseFloat(i[l]);q=a("nexenCurrency")(q,c.getSymbol(i.currency)),j.push({value:q,align:m.align})}else if("DATE"===n[p].dataType){var r=i[l];if(angular.isUndefined(r)||null==r||""===r)return"";r instanceof Date||(r=moment(r).toDate()),m.convertTolocalTime&&(r=d.convertToLocalTime(r)),j.push(b.format(r,"e",m.dateFormat))}}else j.push(i[l])};return i}}]).factory("nxnAlertService",["$rootScope","ModalService","$modal",function(a,b,c){var d={},e=[{errorType:"INFO",actionButton:"",closeButton:"OK",headerText:"Information",message:""},{errorType:"WARN",actionButton:"YES",closeButton:"NO",headerText:"Warning",message:""},{errorType:"CONFIRM",actionButton:"YES",closeButton:"NO",headerText:"Confirmation",message:""},{errorType:"ERROR",actionButton:"",closeButton:"OK",headerText:"Error",message:""}];return d.show=function(a,b){angular.forEach(e,function(c){c.errorType===a&&(c.message=b,d.alertObj=c,d.showModal(c,b))})},d.showModal=function(a,c){var d={},e={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/alert-window.html",controller:"alertWindowController",resolve:{}};b.showModal(e,d).result.then(function(a){})},d}]).factory("ApiStoreRequestInterceptor",["$injector","$log",function(a,b){return{request:function(b){if(b.url.indexOf("apigateway")>-1){b.withCredentials="undefined"==typeof b.withCredentials||b.withCredentials;var c=a.get("PageContext");b.headers["X-client-key"]="undefined"==typeof b.headers["X-client-key"]?c.getClientKey():b.headers["X-client-key"]}return b}}}]).factory("emulationHeaderTracker",["$q","nxn.userEmulationService",function(a,b){return{request:function(c){return c.isStats===!0&&b.isEmulationMode()?a.reject(c):(b.isEmulationMode()&&(c.headers["emulation-user-id"]=b.getEmulatedUserId()),c)}}}]).factory("sessionTimeoutInterceptor",["$window","$q","$injector","$log",function(a,b,c,d){return{response:function(a){var e=c.get("PageContext"),f=c.get("$state"),g=c.get("$http"),h="/nxn-service/pageContext/extendSession",i='<body id="appRootElement"';return angular.isString(a.data)&&_.includes(a.data,i)&&e.loggedIn()&&!e.isError()?(g.get(h,{timeout:5e3}).then(function(a){_.includes(a.data,i)&&(d.log("Request returned login page, logging out ..."),f.go("logout"))}).catch(function(a){d.log("Error processing request, logging out ..."),f.go("logout")}),b.reject(a)):a}}}]).factory("qqmInterceptor",["$q",function(a){return{response:function(a){return 0===a.config.url.indexOf("/qqm-workbench/qqmservices/")&&a.config.url.indexOf("summary")>-1&&(a.data.errorMessage="",null===a.data.pagination&&null===a.data.data&&"No Records found for this Summary Execution"===a.data.metadata.description&&(a.data.errorMessage="No match found. Change the search criteria and try again.",a.data.data=[],a.data.pagination={offset:0,limit:0,totalResults:0,previousPageURI:"",nextPageURI:""})),a},responseError:function(b){return 0===b.config.url.indexOf("/qqm-workbench/qqmservices/")&&b.config.url.indexOf("summary")>-1?0===b.status?(b.headers=function(a){if("Content-Type"===a)return"application/json"},b.data={errorMessage:"Request timed out while retrieving data. Please contact NEXEN support team.",data:[],pagination:{offset:0,limit:0,totalResults:0,previousPageURI:"",nextPageURI:""}},b):413===b.status?(b.data={errorMessage:"The search results are too large to display. Change the search criteria and try again.",data:[],pagination:{offset:0,limit:0,totalResults:0,previousPageURI:"",nextPageURI:""}},b):angular.isDefined(b.data)&&angular.isDefined(b.data.errors)&&angular.isDefined(b.data.errors.message)?(b.data.errorMessage=b.data.errors.message,b.data.data=[],b.data.pagination={offset:0,limit:0,totalResults:0,previousPageURI:"",nextPageURI:""},b):(b.data={errorMessage:"Service threw an error while retrieving data. Please contact NEXEN Administrator",data:[],pagination:{offset:0,limit:0,totalResults:0,previousPageURI:"",nextPageURI:""}},b):a.reject(b)}}}]).factory("httpUsageStatsTracker",["$window","$q","httpUsageStats","$injector","ResponseStatusModifierService","nxn.dpConstants","nxnGuidFactory",function(a,b,c,d,e,f,g){return{request:function(a){return a.requestTimestamp=(new Date).getTime(),a.requestGuid=g.getGuid(),0!==a.url.indexOf("/nxn-service/httpUsageStatus/store")&&0!==a.url.indexOf("/nxn-service/stateUsageStatus/store")&&0!==a.url.indexOf("/DPMonitor/rest/events")&&0!==a.url.indexOf("/nxn-service/public/logDpStats")||(a.isStats=!0),a},response:function(b){if(b.config.url){var e=!1;if(b.headers()["content-type"]&&b.headers()["content-type"].indexOf("json")>-1?e=!0:0===b.config.url.indexOf("/nxn-service/logout")?e=!1:0===b.config.url.indexOf("/nxn-service")&&angular.isUndefined(b.config.isStats)&&(e=!0),e){var g=d.get("$state"),h=(new Date).getTime(),i=b.config.url.split("?")[0],j=g.href(g.current.name,{});g.nxnFutureState&&(j=g.href(g.nxnFutureState.name,{})),j||(j="unavailable"),j=j.replace("#/","/");var k=d.get("PageContext");k.get(function(d){var e={userId:k.getUser()?k.getUser():f.unknownValue,requestUri:i,acceptHeader:b.config.headers.Accept,methodType:b.config.method,state:j,httpStatus:b.status,userAgent:a.navigator.userAgent,screenResolution:a.innerWidth+"x"+a.innerHeight,timeElapsed:h-b.config.requestTimestamp,requestGuid:b.config.requestGuid};c.store(e)})}}return b},responseError:function(g){if(g.config.isStats)return b.reject(g);if(g.config.url&&g.config.url.indexOf("httpUsageStatus")===-1){var h=d.get("$state"),i=(new Date).getTime(),j=g.config.url.split("?")[0],k=h.href(h.current.name,{});h.nxnFutureState&&(k=h.href(h.nxnFutureState.name,{})),k||(k="unavailable"),k=k.replace("#/","/");var l=d.get("PageContext");l.get(function(b){var d=i-g.config.requestTimestamp,h={userId:l.getUser()?l.getUser():f.unknownValue,requestUri:j,acceptHeader:g.config.headers.Accept,methodType:g.config.method,state:k,httpStatus:e.getResponseStatusforTimeout(g.status,d,g.config.timeout),userAgent:a.navigator.userAgent,screenResolution:a.innerWidth+"x"+a.innerHeight,timeElapsed:d,requestGuid:g.config.requestGuid};c.store(h)})}return b.reject(g)}}}]).factory("dpStatsTracker",["$window","$q","$injector","getServiceName","ResponseStatusModifierService","nxn.getCurrentEnvironment","nxn.dpConstants","nxnGuidFactory","dpFailureStats","CookieService","nxnStoreService",function(a,b,c,d,e,f,g,h,i,j,k){var l=function(){a.performance.clearResourceTimings()},m=!1;if(angular.isDefined(a.performance)&&angular.isDefined(a.performance.getEntriesByName)&&"function"==typeof a.performance.getEntriesByName&&angular.isDefined(a.performance.onresourcetimingbufferfull)&&angular.isDefined(a.performance.clearResourceTimings)&&"function"==typeof a.performance.clearResourceTimings&&angular.isDefined(a.performance.setResourceTimingBufferSize)&&"function"==typeof a.performance.setResourceTimingBufferSize){var n=500;m=!0,a.performance.setResourceTimingBufferSize(n),a.performance.onresourcetimingbufferfull=l}var o=[{env:"MOCK",isEnable:!0,postToEnv:["MOCK"]},{env:"DEV",isEnable:!0,postToEnv:["DEV"]},{env:"QA",isEnable:!0,postToEnv:["XAT"]},{env:"XAT",isEnable:!0,postToEnv:["XAT"]},{env:"PRODUCTION",isEnable:!0,postToEnv:["PRODUCTION"]}],p=function(b){var c={},d=a.performance.getEntriesByName(b,"resource");if(angular.isDefined(d)&&null!==d&&d.length>0){var e=d[d.length-1];c.url=b,c.duration=e.duration,c.startTime=e.startTime,c.redirectStart=e.redirectStart,c.redirectEnd=e.redirectEnd,c.fetchStart=e.fetchStart,c.domainLookupStart=e.domainLookupStart,c.domainLookupEnd=e.domainLookupEnd,c.connectStart=e.connectStart,c.secureConnectionStart=e.secureConnectionStart,c.connectEnd=e.connectEnd,c.requestStart=e.requestStart,c.responseStart=e.responseStart,c.responseEnd=e.responseEnd}return c},q=function(b,h){var i=c.get("$state"),l=(new Date).getTime(),n=new Date,q=b.config.url.split("?")[0],r="";i.nxnCurrentState&&(r=i.href(i.nxnCurrentState.name,{})),r||(r="unavailable"),"/apps/ng-modern"===r&&(r="/apps"+k.getState().routerUrl.fromUrl);var s=i.href(i.current.name,{});i.nxnFutureState&&(s=i.href(i.nxnFutureState.name,{})),s||(s="unavailable"),s=s.replace("#/","/"),r=r.replace("#/","/");var t=c.get("PageContext"),u=l-b.config.requestTimestamp,v=a.location.host,w="",x=-1;if(m){var y="",z="https://";b.config.url.startsWith("http")||(b.config.url.startsWith("/")||(y+="/"),v.startsWith("localhost")&&(z="http://"),y=z+v+y),y+=b.config.url;var A=p(y);angular.isDefined(A.duration)&&0!==A.duration?x=A.duration:angular.isDefined(A.responseEnd)&&angular.isDefined(A.startTime)&&0!==A.startTime&&0!==A.responseEnd&&(x=A.responseEnd-A.startTime),w=JSON.stringify(A)}else w="Resource Timing API not supported";var B=j.getCookie("wlCookie");t.get(function(i){var j=1e3,k={businessProcessCode:B,payloadType:"Non-Process",portalName:"NEXEN PORTAL",payloadMetric:"NEXEN STATS",postAppMnemonic:"NXN",enterpriseStatusCode:"D",lob:"Client Experience Delivery",currentTimeStamp:n,accurateElapsedTime:x===-1?x:Math.round(x*j)/j,networkStats:w,elapsedTime:l-b.config.requestTimestamp,toState:s,fromState:r,status:h,httpStatus:e.getResponseStatusforTimeout(b.status,u,b.config.timeout),userAgent:a.navigator.userAgent,screenResolution:a.innerWidth+"x"+a.innerHeight,serviceUrl:q,serviceName:d.setServiceName(q),method:b.config.method,acceptHeader:b.config.headers.Accept,headers:b.headers(),currentEnv:t.getEnvironment()?t.getEnvironment():f.getCurrentEnv(v),userId:t.getUser()?t.getUser():g.unknownValue,enterpriseContextGuid:b.config.requestGuid,clientId:angular.isDefined(t.getUserInfo())&&angular.isDefined(t.getUserInfo().clientId)?t.getUserInfo().clientId:" "},m=angular.extend({},k,{envDPInfo:o}),p=c.get("nxn.dp.payload.service");p.sendHttpStats(m)})};return{request:function(a){return a.requestTimestamp||(a.requestTimestamp=(new Date).getTime()),a.url.indexOf("/DigitalPulseV2RESTEndpoint/json")===-1&&a.url.indexOf("/DPMonitor/rest/events")===-1||(a.isStats=!0,a.isDpStats=!0),a},response:function(a){if(a.config.url){var b=!1;a.headers()["content-type"]&&a.headers()["content-type"].indexOf("json")>-1?b=!0:0===a.config.url.indexOf("/nxn-service/logout")?b=!1:0!==a.config.url.indexOf("/DigitalPulseV2RESTEndpoint/json")&&0!==a.config.url.indexOf("/DPMonitor/rest/events")||"POST"!==a.config.method&&(b=!0),b&&q(a,"Success")}return a},responseError:function(a){if(a.config.isStats){if(a.config.isDpStats){var c={},d=(new Date).getTime(),f=d-a.config.requestTimestamp;c.url=a.config.url,c.status=e.getResponseStatusforTimeout(a.status,f,a.config.timeout),c.statusText=a.statusText,c.timeElapsed=f,a.config.data.hasOwnProperty("LogActivityRecord")?c.data=a.config.data.LogActivityRecord:c.data=a.config.data,i.log(c)}}else q(a,"Failure");return b.reject(a)}}}]).service("nxnStickyStateRefresher",["$stickyState",function(a){this.stateResetManager={nxnAccounts:["nxnAccounts","nxnAccounts.custody","nxnAccounts.liquidity","nxnAccounts.custody.holdings","nxnAccounts.custody.activity","nxnAccounts.custody.holdings.detail","nxnAccounts.custody.activity.detail","nxnAccounts.custody.deliveryInstructions","nxnAccounts.custody.ssb","nxnAccounts.liquidity.summary","nxnAccounts.liquidity.holdings","nxnAccounts.liquidity.holdings.moneyFunds","nxnAccounts.liquidity.holdings.securities","nxnAccounts.liquidity.activity","nxnAccounts.liquidity.activity.trades","nxnAccounts.liquidity.activity.wires","nxnAccounts.liquidity.activity.drawdowns","nxnAccounts.liquidity.activity.preadvices","nxnAccounts.liquidity.activity.terminations","nxnAccounts.liquidity.activity.exclusiveControls"]},this.resetStatesFor=function(a){for(var b=Object.keys(this.stateResetManager),c=0;c<b.length;c++)if(angular.isDefined(a)&&0===a.indexOf(b[c]))return this.stateResetManager[b[c]];return[a]},this.resetState=function(b){return a.reset(b,{}),!0}}]).service("getServiceName",function(){this.setServiceName=function(a){var b="";if(!angular.isUndefined(a)){var c=a.split("/")[0];switch(""===c?c=a.split("/")[1]:0===c.indexOf("http")&&(c=a.split("/")[3]),c){case"nxn-service":b="NEXEN";break;case"liquidity":case"dev-stiservices.bnymellon.com":case"uat-stiservices.bnymellon.com":case"xat-stiservices.bnymellon.com":case"glsapp":case"stiservices.bnymellon.com":b="Liquidity DIRECT";break;case"nxncontent":b="Liquidity Broadcast";break;case"qqm-workbench":case"nvm-qqm-workbench":b="Legacy Workbench";break;case"webZTFPlatformServices":a.indexOf("globaltaxratelookup")>0?b="Global Tax Rate Look Up":(a.indexOf("deliveryinstructionlookup")>0||a.indexOf("/instructions/v1/countries")>0)&&(b="Delivery Instruction");break;case"wbentitlements":case"ca-entitlements":b="WB Entitlement Service";break;case"profileservices":case"profile-services":b="User Profile Service";break;case"alerts":case"ssAlertsMessaging":b="A&M";break;case"digitalpulse":b="Digital Pulse";break;case"dp-report":case"dp-metadata":b="Digital Pulse 2.0";break;case"efi":case"fedInbox":case"fedinbox":b="EFI";break;case"TrantorAccessService":b="Trantor-TAS";break;case"TrantorManagementService":b="Trantor-TMS";break;case"ercuiWeb":case"ers2":b="ERS";break;case"slm":b="SLM";break;case"instncap":case"instruction-summaries":case"instruction-summary-entitlements":case"dev-iic.bnymellon.com":case"uat-iic.bnymellon.com":case"xat-iic.bnymellon.com":case"iic.bnymellon.com":b="ICO";break;case"fx-rates":b="Global Market Fx Rate";break;case"holdingsinquiry":b="Custody Holdings Inquiry";break;case"file-transfer":b="File Transfer";break;case"crds":b="ERI";break;case"corporateactions":b="Corporate Actions";break;case"cashinquiry":b=" Cash Inquiry";break;case"activitiesinquiry":b="Custody Activity Inquiry";break;case"aslookup":b="Custody Account Service";break;case"hikari":b="Hikari";break;case"gpscaservices":b="PSS";break;case"fx-calendars":b="Global Markets Calendar";break;default:b="-"}}return b}}).service("ResponseStatusModifierService",function(){this.getResponseStatusforTimeout=function(a,b,c){return 0===a&&angular.isDefined(c)&&b>c&&(a=1),a}}),angular.module("NexenCommon").service("stateUsageStats",["$http","$log","NxnHttpThrottle","nxn.userEmulationService",function(a,b,c,d){this.store=function(a){if(!d.isEmulationMode()){var b={method:"POST",url:"/nxn-service/stateUsageStatus/store",data:a,timeout:6e3};c.addRequest(b)}},this.getUsersByDate=function(b,c){return a.get("/nxn-service/stateUsageStatus/usersByDate?fromDate="+b.toISOString()+"&toDate="+c.toISOString()).then(function(a){return a.data})},this.getStateDetailByUser=function(b,c,d){return a.get("/nxn-service/stateUsageStatus/stateDetailsByUser?fromDate="+b.toISOString()+"&toDate="+c.toISOString()+"&userId="+d).then(function(a){return a.data})}}]).service("dpStateUsageStats",["$injector",function(a){var b,c,d=function(b){var c=a.get("getServiceName");return angular.forEach(b,function(a){a.requestUri&&(a.service=c.setServiceName(a.requestUri))}),b},e=function(a){angular.forEach(a,function(a){var b=0,c=0,d=0,e=0;a.requestCount>0&&(b=a.timeElapsed/a.requestCount,c=100*a.requestCount/a.totalRequestCount),a.failedRequestCount>0&&(d=a.failedTimeElapsed/a.failedRequestCount,e=100*a.failedRequestCount/a.totalRequestCount),a.successAvgTime=b,a.successPercent=c,a.failureAvgTime=d,a.failurePercent=e})};this.getDPUsersByDate=function(b,c,d){var e=a.get("nxn.StateStats.report");return e.stateStatsByDate(b.toISOString(),c.toISOString(),d,2e3).then(function(a){return a})},this.getDPStateDetailByUser=function(b,c,d){var e=a.get("nxn.StateStats.report");return e.stateStatsByUser(b.toISOString(),c.toISOString(),d,0,2e3).then(function(a){return a})},this.getDPAvgTimeElasedByDate=function(b,c,f){var g=a.get("nxn.HttpStats.report");return g.avgHttpStatsByDate(b.toISOString(),c.toISOString(),f,2e3).then(function(a){return d(a),e(a),a})},this.getDPAvgStateTimeElasedByDate=function(b,c,f){var g=a.get("nxn.HttpStats.report");return g.avgStateHttpStatsByDate(b.toISOString(),c.toISOString(),f,2e3).then(function(a){return d(a),e(a),a})},this.getDPRequestDetails=function(b,c,d,e,f){var g=a.get("nxn.HttpStats.report");return e?g.stateStatsByRequest(b.toISOString(),c.toISOString(),d,e,f,0,2e3).then(function(a){return a}):g.httpStatsByRequest(b.toISOString(),c.toISOString(),d,f,0,2e3).then(function(a){return a})},this.getDPHttpRequestAvgByDay=function(b,c,d,e){var f=a.get("nxn.HttpStats.report");return e?f.avgStateHttpStatsByDayByRequest(b.toISOString(),c.toISOString(),d,e).then(function(a){return a}):f.avgHttpStatsByDayByRequest(b.toISOString(),c.toISOString(),d).then(function(a){return a})},this.setFromDate=function(a){b=a},this.setToDate=function(a){c=a},this.getFromDate=function(){return b},this.getToDate=function(){return c}}]).service("httpUsageStats",["$injector","nxn.userEmulationService",function(a,b){var c,d;this.store=function(c){if(!b.isEmulationMode()){var d=a.get("NxnHttpThrottle"),e={method:"POST",url:"/nxn-service/httpUsageStatus/store",data:c,timeout:6e3};d.addRequest(e)}},this.getAvgTimeElasedByDate=function(b,c){var d=a.get("$http");return d.get("/nxn-service/httpUsageStatus/avgByDate?fromDate="+b.toISOString()+"&toDate="+c.toISOString()).then(function(a){var b=a.data.chttpUsageStatsTimeElapsedAverageList,c=a.data.phttpUsageStatsTimeElapsedAverageList;return e(b),f(b,c),b})},this.getAvgStateTimeElasedByDate=function(b,c){var d=a.get("$http");return d.get("/nxn-service/httpUsageStatus/avgStateByDate?fromDate="+b.toISOString()+"&toDate="+c.toISOString()).then(function(a){var b=a.data.chttpUsageStatsStateTimeElapsedAverageList,c=a.data.phttpUsageStatsStateTimeElapsedAverageList;return e(b),f(b,c),b})},this.getRequestDetails=function(b,c,d,e,f){var g=a.get("$http");return e?g.get("/nxn-service/httpUsageStatus/stateStatsByRequest?fromDate="+b.toISOString()+"&toDate="+c.toISOString()+"&requestUri="+d+"&state="+e+"&isSuccess="+f):g.get("/nxn-service/httpUsageStatus/statsByRequest?fromDate="+b.toISOString()+"&toDate="+c.toISOString()+"&requestUri="+d+"&isSuccess="+f)},this.getHttpRequestAvgByDay=function(b,c,d,e){var f=a.get("$http");return e?f.get("/nxn-service/httpUsageStatus/avgStateByRequestByDay?fromDate="+b.toISOString()+"&toDate="+c.toISOString()+"&requestUri="+d+"&state="+e):f.get("/nxn-service/httpUsageStatus/avgByRequestByDay?fromDate="+b.toISOString()+"&toDate="+c.toISOString()+"&requestUri="+d)},this.setFromDate=function(a){c=a},this.setToDate=function(a){d=a},this.getFromDate=function(){return c},this.getToDate=function(){return d};var e=function(b){var c=a.get("getServiceName");return angular.forEach(b,function(a){a.requestUri&&(a.service=c.setServiceName(a.requestUri))}),b},f=function(a,b){angular.forEach(a,function(a){var c=0,d=0,e=0,f=0;a.requestCount>0&&(c=a.timeElapsed/a.requestCount,d=100*a.requestCount/a.totalRequestCount),a.failedRequestCount>0&&(e=a.failedTimeElapsed/a.failedRequestCount,f=100*a.failedRequestCount/a.totalRequestCount),a.successAvgTime=c,a.successPercent=d,a.failureAvgTime=e,a.failurePercent=f,a.successTrend="N/A",a.failureTrend="N/A",angular.forEach(b,function(b){var d;if(d=angular.isUndefined(a.state)?a.requestUri===b.requestUri:a.requestUri===b.requestUri&&a.state===b.state){var e=c/1e3;if(b.requestCount>0){var g=b.timeElapsed/b.requestCount,h=g/1e3;e>h?(a.successTrend="Down",a.sMeasure=e-h):e<h?(a.successTrend="Up",a.sMeasure=h-e):a.successTrend="Neutral"}else a.requestCount>0&&(a.successTrend="Up",a.sMeasure=e);if(a.sMeasure<1&&(a.successTrend="Neutral"),b.failedRequestCount>0){var i=100*b.failedRequestCount/b.totalRequestCount;f>i?(a.failureTrend="Down",a.fMeasure=f-i):f<i?(a.failureTrend="Up",a.fMeasure=i-f):a.failureTrend="Neutral"}else a.failedRequestCount>0&&(a.failureTrend="Down",a.fMeasure=f);a.fMeasure<1&&(a.failureTrend="Neutral")}})})}}]).service("dpFailureStats",["$injector",function(a){this.log=function(b){var c=a.get("NxnHttpThrottle"),d={method:"POST",url:"/nxn-service/public/logDpStats",data:b,timeout:6e3};c.addRequest(d)}}]).service("timeElapsed",[function(){var a,b;this.init=function(){return a=new Date},this.done=function(){return b=new Date},this.totalTime=function(){return b-a}}]),angular.module("NexenCommon").value("currencySymbolsMap",{Default:"¤",AED:"¤",ARS:"$",AUD:"$",BDT:"৳",BGN:"лв",BMD:"$",BRL:"R$",BWP:"P",CAD:"$",CHF:"CHF",CLP:"$",CNY:"¥",COP:"$",CYP:"£",CZK:"Kč",DKK:"kr",EEK:"kr",EGP:"£",EUR:"€",GBP:"£",GHC:"₵",GHS:"₵",HKD:"$",HRK:"kn",HUF:"Ft",IDR:"Rp",ILS:"₪",INR:"₹",ISK:"kr",JOD:"¤",JPY:"¥",KES:"KSh",KRW:"₩",KZT:"₸",LKR:"\u2028",LTL:"Lt",LVL:"Ls",MAD:"¤",MUR:"₨",MXN:"$",MYR:"RM",NGN:"₦",NOK:"kr",NZD:"$",PEN:"S/.",PHP:"₱",PKR:"₨",PLN:"zł",RON:"lei",RSD:"Дин.",RUB:"₽",SAR:"﷼",SEK:"kr",SGD:"$",SIT:"¤",SKK:"¤",SZL:"L",THB:"฿",TND:"DT",TRY:"₤",TTD:"TT$",TWD:"NT$",UAH:"₴",USD:"$",UYU:"$U",VEB:"Bs.F.",ZAR:"R",ZMK:"ZMK",ZWD:"Z$"}).filter("orderObjectByAverage",function(){return function(a,b,c){if(!angular.isObject(a))return a;var d=[];for(var e in a)a.hasOwnProperty(e)&&d.push(a[e]);return d.sort(function(a,d){return a=a[b]/a[c],d=d[b]/d[c],d-a}),d}}).factory("nxn.pathJoin",NxnPathJoinService).factory("NxnStringUtils",function(){function a(a){return angular.isString(a)?a.replace(/\s*(\n\s*?){3,20}\s*$/,"\n\n"):a}return{trimTrailingNewlines:a}}).filter("range",function(){return function(a,b){b=parseInt(b);for(var c=0;c<=b;c++)a.push(c);return a}}),function(){"use strict";function a(a){function b(a){a&&a.opened.then(function(){a.dismiss("cancel")})}function c(c,d,e){f&&b(f);var g={body:c,deferred:e},h={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:d,controller:"DisclaimerController",size:"sm"};return f=a.showModal(h,g)}function d(){b(f),f=null}function e(){return f}var f=null;return{showModal:c,closeModal:d,getModalInstance:e}}angular.module("NexenCommon").factory("DisclaimerService",a),a.$inject=["ModalService"]}(),angular.module("NexenCommon").value("nxn.formats",{1:{align:"right",currency:!0,pattern:"$#,##0.00",precision:2,dataType:"NUMBER"},2:{dateFormat:"DD MMM,YYYY",dataType:"DATE"},3:{dateFormat:"ddd MMM DD HH:mm:ss YYYY",dataType:"DATE"},4:{currency:!1,precision:2,dataType:"NUMBER"},5:{dateFormat:"ddd MMM DD HH:mm:ss YYYY",convertTolocalTime:!0,dataType:"DATE"},6:{dateFormat:"ddd MMM DD HH:mm:ss YYYY",dataType:"TIMESTAMP"},7:{dateFormat:"DD-MMM-YYYY",dataType:"DATE"},8:{dateFormat:"dd-MMM-yyyy HH:mm:ss",dataType:"TIMESTAMP"},9:{align:"right",currency:!0,pattern:"$#,##0",dataType:"NUMBER"},10:{dateFormat:"MM/DD/YYYY",dataType:"DATE"},11:{align:"right",currency:!0,pattern:"$#,##0.0000",precision:4,dataType:"NUMBER"},12:{align:"right",currency:!1,pattern:"$#,##0.00",precision:2,dataType:"NUMBER"},13:{align:"right",currency:!1,pattern:"$#,##0.000",precision:3,dataType:"NUMBER"},14:{currency:!1,precision:4,dataType:"NUMBER"},15:{dateFormat:"DD MMM YYYY",dataType:"DATE"},PrecisionThreeWithOutComma:{align:"right",currency:!1,precision:3,dataType:"NUMBER"},LocalTimeZone:{dateFormat:"DD-MMM-YYYY HH:mm:ss",convertTolocalTime:!0,dataType:"DATE"},TimestampFormat:{dateFormat:"DD MMM YYYY HH:mm:ss",dataType:"DATE"},DateWithTimeZone:{dateFormat:"DD MMM YYYY hh:mm:ss A",convertToLocalTimezoneName:!0,dataType:"DATE"},DateWithTimeZone1:{dateFormat:"A",dataType:"DATE"},DateWithTimeZone2:{dateFormat:"DD-MMM-YY",dataType:"DATE"},currencyPrecisionZero:{currency:!0,pattern:"[0-9]+([.,][0-9]+)*",precision:0,dataType:"NUMBER"},PrecisionZero:{currency:!1,pattern:"[0-9]+([.,][0-9]+)*",precision:0,dataType:"NUMBER"},CURRENCY:{align:"right",currency:!0,precision:2},CurrencyAlignLeft:{align:"left",currency:!0,pattern:"$#,##0.00",precision:2,dataType:"NUMBER"},Percentage:{percentage:!0,precision:2,dataType:"NUMBER"},PercentageNoPrecision:{percentage:!0,precision:0,dataType:"NUMBER"}}).service("nxn.formatData",["nxn.moment.dateFormat","nxn.CurrencySymbolService","nxn.formats","$filter","nxnUtil","nxn.timezoneName",function(a,b,c,d,e,f){var g=this;this.format=function(a,b,c){if(angular.isUndefined(a)||angular.isUndefined(b))return"";var d,e;b.viewId&&(d=b.viewId);var f=b.dataField,h=a[f];return angular.isUndefined(h)||null==h||""===h?"":(angular.isUndefined(c)&&(c=a.currency),b.dataType&&(e=b.dataType),g.formatValue(h,d,c))},this.formatValue=function(g,h,i,j){if(""===g)return g;if(angular.isUndefined(j)&&(j=!0),angular.isUndefined(g)||null===g)return"";if(!angular.isDefined(h))return g;if(h=c[h],angular.isUndefined(h))return g;var k;k=h.dataType;var l=g;if(k&&"NUMBER"===k){var m=parseFloat(g),n=m;if(isNaN(m))return"";if(angular.isDefined(h.precision)&&j&&(m=m.toFixed(h.precision)),h.pattern){var o=m.toString().split(".");m=o[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+(o[1]?"."+o[1]:"")}return h.currency&&angular.isDefined(i)&&null!==i&&""!==i&&(m=n>=0?b.getSymbol(i)+" "+m:"("+b.getSymbol(i)+" "+m.substring(1)+")"),h.percentage&&(m+=" %"),m}if(k&&"DATE"===k){if("string"==typeof l&&('"'===l.charAt(0)&&(l=l.substring(1)),'"'===l.charAt(l.length-1)&&(l=l.substring(0,l.length-1)),l=moment(l).toDate()),h.convertToLocalTimezoneName){var p=f.getTimezone();return a.format(l,"en",h.dateFormat)+" "+p}return h.convertTolocalTime&&angular.isDate(l)&&(l=e.convertToLocalTime(l)),a.format(l,"en",h.dateFormat)}return k&&"TIMESTAMP"===k?l=h.dateFormat?d("date")(g,h.dateFormat):d("date")(g,"EEE MMM dd HH:mm:ss yyyy"):g}}]),angular.module("NexenCommon").filter("signNumber",function(){return function(a,b){var c=2;if(isNaN(a))return a;angular.isDefined(b)&&b>=0&&b<6&&(c=b);var d=Math.pow(10,c),e=(Math.floor(d*Math.abs(a))/d).toFixed(c);return a<0?"("+e+")":e}}).filter("percentage",function(){return function(a){return a&&(a+="%"),a}}),function(){"use strict";function a(a){function b(){var b=a.getSync();if(!angular.isArray(b.lobs)||0===b.lobs.length)return"";if(1===b.lobs.length)for(var c=b.lobs[0],e=0;e<d.length;e++){var f=d[e];if(c===f.mnemonic)return f.name}return"Connect Links"}function c(){var b=a.getSync(),c=b.env?b.env:a.getEnvironment();if(c){if("dev"===c.toLowerCase())return"https://connect-dev.bnymellon.com/ConnectLogin/flow/nexenFlow.htm";if("qa"===c.toLowerCase())return"https://connect-uat.bnymellon.com/ConnectLogin/flow/nexenFlow.htm";if("dcat"===c.toLowerCase())return"https://connect-dcat.bnymellon.com/ConnectLogin/flow/nexenFlow.htm";if("xat"===c.toLowerCase())return"https://connect-dcat.bnymellon.com/ConnectLogin/flow/nexenFlow.htm";if("production"===c.toLowerCase())return"https://connect.bnymellon.com/ConnectLogin/flow/nexenFlow.htm"}return"https://connect-dev.bnymellon.com/ConnectLogin/flow/nexenFlow.htm"}var d=[{mnemonic:"MFD",name:" Liquidity DIRECT",description:" Provides access to a wide range of money market funds, direct investment in individual money market securities and capabilities to safekeep margin balances."},{mnemonic:"ADR",name:"ADR INFORM ",description:"A web-based reporting and analytics platform for our Depository Receipt issuer clients."},{mnemonic:"AIS",name:" Alternative Investment Services ",description:" Accounting information, reports and downloadable extract files of company and investor data."},{mnemonic:"TE",name:" TreasuryEdge",description:"Internet electronic banking solution that offers a full range of transactions to manage available cash."},{mnemonic:"CT",name:" Corporate Trust",description:"Consolidated platform for our debt servicing products and services."},{mnemonic:"GMW",name:"Global Markets",description:"Provides access to trading and reporting services, as well as our latest market commentary and capital flow analyses."},{mnemonic:"WB",name:"Workbench",description:"Provides access to worldwide data and custody-related information, enabling you to measure, monitor, and evaluate daily activity and results."},{mnemonic:"DFG",name:"Global Payment Disclosure",description:"The BNY Mellon Global Payment Disclosure application discloses all fee and other remittance charges made against consumer payments initiated from U.S. based institutions and settled internationally."},{mnemonic:"EPH",name:"Enterprise Payment Hub",description:" The BNY Mellon Enterprise Payment Hub application is capable of processing any payment and collection instrument on a single platform, irrespective of payment initiation method, value, currency, client or clearing and settlement mechanism."},{mnemonic:"QTR",name:"Inquiry Management",description:"Provides a common approach to receiving, routing/tracking, responding to, and reporting client inquiries across BNY Mellon."},{mnemonic:"GCA",name:"BNY Mellon Collateral Universe",description:"The aggregator platform allows the user to view all their BNY Mellon based assets and collateral in one place and to easily identify various characteristics of their holdings."},{mnemonic:"EFM",name:"Enterprise Financial Messaging",description:"Enterprise Financial Messaging (EFM) Technology is the centralized financial messaging solution provider for BNY Mellon supporting critical systems transmitting payment instruction messages in standard or customized format to business partners and financial network providers around the world."},{mnemonic:"CNT",name:"Reconciliation",description:"Fund Accounting Reconciliation Workflow"},{mnemonic:"GTP",name:"Global Trade Portal",description:"Provides solutions to help streamline your trade processing workflow."},{mnemonic:"IMO",name:"MyOnCore",description:"The MyOnCore Oversight Dashboard is a powerful tool which provides you, the client, a lens into how we are performing as an outsourcer."},{mnemonic:"NXN",name:"",description:"Provides access to integrated business solutions, capabilities and data from BNY Mellon, third-parties and clients across all devices."}];return{getConnectLinkName:b,getEnvSpecificConnectUrl:c}}angular.module("nxn.legacylinks").factory("LegacyService",a),a.$inject=["PageContext"]}(),function(){"use strict";function a(a){function b(b,c,e,f,g,h){var i={};
angular.forEach(b,function(a){var b=angular.isFunction(c)?c(a):a[c];i[b]=i[b]||{groupName:"",groupRows:[],expandGroup:!1,hasGroupRows:!1},i[b].groupName=b,i[b].groupRows.push(a)});var j=[];for(var k in i)i.hasOwnProperty(k)&&(i[k].hasGroupRows=i[k].groupRows.length>0,i[k].expandGroup=!1,i[k].groupRows=a("orderBy")(i[k].groupRows,f,h),j.push(i[k]));return j=d(j,e,g)}function c(b,c,d){return angular.forEach(b,function(b,e){b.groupRows=a("orderBy")(b.groupRows,c,d)}),b}function d(b,c,d){return a("orderBy")(b,c,d)}function e(b,c,d){if(""===c)return b;var e=c.toLowerCase(),f=[];return angular.forEach(b,function(b,c){if(b.groupName.toLowerCase().indexOf(e)>-1)f.push(b);else{for(var g=null,h=0;h<d.length;h++){var i=d[h],j={};if(j[i]=e,g=a("filter")(b.groupRows,j),g.length>0)break}if(g.length>0){var k={};k.groupName=b.groupName,k.hasGroupRows=!0,k.expandGroup=b.expandGroup,k.groupRows=g,f.push(k)}}}),f}function f(b,c,d){if(""===c)return b;var e=c.toLowerCase(),f=a("filter")(b,function(a){for(var b=0;b<d.length;b++)if(angular.isDefined(a[d[b]])&&null!==a[d[b]]&&a[d[b]].toLowerCase().indexOf(e)>-1)return!0;return!1});return f}var g={groupData:b,sortGroupRows:c,sortGroups:d,filterGroups:e,filterData:f};return g}angular.module("NexenCommon").service("NxnDataGroupService",a),a.$inject=["$filter"]}(),function(){"use strict";function a(a){function b(b){return angular.extend({},b,a)}return{applyDefaultNXNParameters:b}}angular.module("NexenCommon").service("nxnDPUtility",a),a.inject=["nxnDPDefaultParams"],a.$inject=["nxnDPDefaultParams"]}(),function(){"use strict";function a(a,b,c){var d="/nxncontent/v1",e={getAnnouncements:function(c){var d={headers:{"X-client-key":b.getClientKey()},timeout:15e3},e=this.getAnnouncementsAPIEndpoint(b.getEnvironment(),c);return a.get(e,d).then(function(a){return a.data})},getAnnouncementsAPIEndpoint:function(a,b){a=a.toUpperCase();var e="MOCK"===a?"":c[a];return e+d+"/"+b+"/announcements?sortBy=-date"}};return e}angular.module("nxn.persistentAnnouncements").factory("nxn.PersistentAnnouncementsService",a),a.$inject=["nxn.Http","PageContext","ApiGatewayBaseURLs"]}(),function(){"use strict";function a(){function a(){var a=Math.floor(Math.random()*b.length);return b[a]}var b=["Tools","Inspire","Inspiration","Optimal","Optimize","Authorize","Authority","Elevate","Lift","Handle","Leverage","Engine","Fuel","Transfer","Incorporate","Muscle","Fist","Shooting Star","Celsius","Supra 360","360 Pro","Proficiency","Pro","Go Pro","Go Plus","Focus","Navigator","Compass","Nuclear","Beacon","Lighthouse","Sun","Solar","Delegate","Stoke","Drive","Steering","Pilot","Transport","Teleport","Achieve","Universe","Unify","Alliance","Exchange","Spectrum","Homing","360","Horizon","Equator","Stargate","Steelgate","Engine Block","Fact Street","Bull","Waves","Edge","Perspective"];return{nextName:a}}angular.module("NexenCommon").constant("NxnName",a())}(),function(){"use strict";function a(a,b,c,d){function e(){var b=a.defer();return c.get(function(a){i.perms=angular.extend({},a.quickAccessNavbar||{},i.perms),b.resolve(j)}),b.promise}function f(){return j}function g(a){var b=h(a);if(b)angular.extend(b,a);else{var c=j.push(a);angular.isUndefined(a.id)&&(a.id=k+c.toString(16)),b=a}var d={};d[b.id]={id:b.id,enabled:b.entitled};var e=i.perms[b.id];angular.isDefined(e)&&angular.isUndefined(b.entitled)&&(d[b.id].enabled=e),i.perms=angular.extend({},i.perms,d)}function h(a){for(var b=0;b<j.length;b++){var c=j[b];if(a&&a.id===c.id)return c}return null}var i={getItem:h,get:f,init:e,perms:{},push:g},j=b.nxnQuickAccessNavBar,k="000";return e(),d.$on("pageReloaded",function(){e()}),i}function b(a,b,c,d){return function(e){return a("filter")(e,function(a){var e=c.perms[a.id];return e&&angular.isFunction(e.enabled)?e.enabled(d,b):e&&e.enabled})}}angular.module("NexenCommon").factory("NxnQuickAccessNav",a).filter("QuickAccessNavPermFilter",b),a.$inject=["$q","NxnGatewayNavbar","PageContext","$rootScope"],b.$inject=["$filter","$injector","NxnQuickAccessNav","PageContext"]}(),angular.module("NexenCommon").service("userGuideService",["nxn.Http","PageContext",function(a,b){var c={MOCK:"/nexencontentapi/nexen/guides",DEV:"https://apigateway.dev.bnymellon.com/nxncontent/v1/sites/guides/guidedata",QA:"https://apigateway.test.bnymellon.com/nxncontent/v1/sites/guides/guidedata",XAT:"https://apigateway.qa.bnymellon.com/nxncontent/v1/sites/guides/guidedata",PRODUCTION:"https://apigateway.bnymellon.com/nxncontent/v1/sites/guides/guidedata"},d=c[angular.uppercase(b.getEnvironment())];this.getUserGuideData=function(){return a.get(d).then(function(a){return a.data&&angular.isArray(a.data.data.guides)?{data:a.data,count:a.data.data.guides.length}:{displayError:!0,errorMessage:"There is no user guides assigned to you."}},function(){return{displayError:!0,errorMessage:"Sorry for the inconvenience, Please try again later."}})}}]),angular.module("NexenCommon").constant("MT_TYPES",{PRICE_TYPE:{minValue:1e-4,maxValue:9999999999.9999,JPYMinValue:10,JPYMaxValue:9999999990,formatter:"11"},WIRE_TYPE:{minValue:.01,maxValue:9999999999.99,JPYMinValue:1,JPYMaxValue:9999999999,formatter:"1"},DD_TYPE:{minValue:.01,maxValue:999999999999.99,JPYMinValue:1,JPYMaxValue:999999999999,formatter:"1"},PREADV_TYPE:{minValue:.01,maxValue:9999999999.99,JPYMinValue:1,JPYMaxValue:9999999999,formatter:"1"}}).constant("INV_TYPES",{FUND_SIZE_TYPE:{minValue:1,maxValue:99999999,formatter:"currencyPrecisionZero"},MMR_FUND_ASSETS_SIZE_TYPE:{minValue:1,maxValue:99999999.99,formatter:"1"}}).constant("SWEEP_TYPE",{PEG_BAL_SIZE:{minValue:0,maxValue:9999999999.99,JPYMinValue:0,JPYMaxValue:9999999999,formatter:"1"},CAP_AMT_SIZE:{minValue:.01,maxValue:9999999999.99,JPYMinValue:1,JPYMaxValue:9999999999,formatter:"1"}}).constant("ERROR_MSG_VALUES",{SHARE_LIMIT:{minValue:.001,maxValue:9999999999.999,fmt_maxValue:"9,999,999,999.999"},AMOUNT_LIMIT:{minValue:.01,maxValue:9999999999.99,fmt_maxValue:"9,999,999,999.99"}}).service("nxn.validations",["nxn.CurrencySymbolService","nxn.formatData","nxn.formats","ERROR_MSG_VALUES",function(a,b,c,d){this.ERROR_MSG_VALUES=d,this.validateTradeAmount=function(b,c,d,e){var f,g,h;if("3"===d?(f=this.ERROR_MSG_VALUES.SHARE_LIMIT.minValue,g=this.ERROR_MSG_VALUES.SHARE_LIMIT.maxValue,h=this.ERROR_MSG_VALUES.SHARE_LIMIT.fmt_maxValue):(f=this.ERROR_MSG_VALUES.AMOUNT_LIMIT.minValue,g=this.ERROR_MSG_VALUES.AMOUNT_LIMIT.maxValue,h=this.ERROR_MSG_VALUES.AMOUNT_LIMIT.fmt_maxValue),angular.isUndefined(b)||null==b||""===b)return{error:"Please enter amount"};if("string"!=typeof b)return{data:b};var i,j=this.checkIfStringIsNumber(b,c,d);if("string"==typeof j){b=j;var k=b.charAt(b.length-1)+b.charAt(b.length-2);if("mm"===k||"MM"===k){for(var l="",m=0;m<b.length-2;m++){var n=b.charAt(m);l=l.concat(n)}return i=parseFloat(l),isNaN(i)?(i="",{data:i}):(i*=1e6,i>g?{error:" Expected value<br>"+f+"-"+h}:{data:i.toFixed(2)})}if(i=parseFloat(b),"JPY"===c||"JPY"===e){if(i<10||i>9999999990||i%10!==0)return{error:"Expected value<br>"+a.getSymbol(c)+" 10 - "+a.getSymbol(c)+" 9999999990 and multiple of 10"}}else if(i<f||i>g)return{error:" Expected value<br>"+a.getSymbol(c)+" "+f+" - "+a.getSymbol(c)+" "+h};return{data:b}}return{error:"Invalid Amount"}},this.validateAmount=function(a,d,e){if(angular.isUndefined(a)||null==a||""===a)return{error:"Please enter amount"};if("string"!=typeof a)return{data:a};var f,g,h;if("JPY"===d&&angular.isDefined(e.JPYMinValue)?(f=e.JPYMinValue,g=e.JPYMaxValue,h=e.formatter):(f=e.minValue,g=e.maxValue,h=e.formatter),!this.isValidAmount(a,d,h))return{error:"Invalid Amount"};var i=this.toAmount(a,c[h]);return i<f||i>g?{error:" Expected value<br>"+b.formatValue(f,h,d)+"-"+b.formatValue(g,h,d)}:{data:i}},this.isValidAmount=function(b,c,d){var e;switch(d){case"currencyPrecisionZero":e=/(?=.)^([^0-9 ]+ {1})?(?=.)([0-9,]+)?((\.[0]{1,6}(?=(mm|MM){1}))|(\.[0]{1,2}))?((mm|MM){1})?$/;break;case"11":e=/(?=.)^([^0-9 ]+ {1})?(?=.)([0-9,]+)?((\.[0-9]{1,6}(?=(mm|MM){1}))|(\.[0-9]{1,4}))?((mm|MM){1})?$/;break;default:e=/(?=.)^([^0-9 ]+ {1})?(?=.)([0-9,]+)?((\.[0-9]{1,6}(?=(mm|MM){1}))|(\.[0-9]{1,2}))?((mm|MM){1})?$/}if(!e.test(b))return!1;if(/^((m|M){1,2})/.test(b))return!1;if(angular.isDefined(c)){var f=b.match(/^([^0-9 ]+ {1})/);if(null!=f&&f.length>0){$.trim(f[0]);if($.trim(f[0])!==$.trim(a.getSymbol(c)))return!1}}return!0},this.toAmount=function(a,b){var c=this.replaceSpecailChars(a);return b.precision?c.toFixed(b.precision):c},this.replaceSpecailChars=function(a){var b=/[mM]{2}/.test(a),c=a.replace(/[^0-9. ]/g,"").replace(/. /,""),d=parseFloat(c);return b&&(d*=1e6),d},this.checkIfStringIsNumber=function(b,c,d){var e,f=0,g=0,h=0,i="";angular.isUndefined(d)&&(d=2);for(var j=!1,k=b.length-1;k>=0;k--){if(e=b.charAt(k),"0"===e||"1"===e||"2"===e||"3"===e||"4"===e||"5"===e||"6"===e||"7"===e||"8"===e||"9"===e)h+=1,i=i.concat(e);else if("."===e){if(1===f)return!1;if(f+=1,0===h||0===g&&h>d||2===g&&h>6||2===g&&"JPY"===c&&h>5)return!1;i=i.concat(e),h=0}else if(","===e)h=0;else if(angular.isDefined(c)&&e===$.trim(a.getSymbol(c))){if(0!==k)return!1;if(j){if(2===b.length)return!1;j=!1}else if(1===b.length)return!1}else if(" "===e){if(1!==k)return!1;j=!0}else{if("M"!==e&&"m"!==e)return!1;if(k===b.length-1)g=1,i=i.concat(e);else{if(k!==b.length-2)return!1;if(0===g)return!1;i=i.concat(e),g+=1}}if((k===b.length-2||1===g&&1===b.length)&&1===g)return!1}if(j)return!1;for(var l="",m=i.length;m>=0;m--)l+=i.charAt(m);return l},this.validateUserId=function(a){var b=["<",">","(",")","'","\\","/",",",'"',"*","?","script","(?i)script","[\\\"\\'][s]*javascript:(.*)[\\\"\\']","eval((.*))"];if(angular.isUndefined(a)||null===a||""===a)return{data:a};for(var c=0;c<b.length;c++)if(a.indexOf(b[c])>=0)return{error:"Please enter valid userId"};return{data:a}},this.validatePassword=function(a){return angular.isUndefined(a)||null===a||""===a?{data:a}:a.length<8?{error:"Password too short"}:{data:a}},this.validateEmail=function(a){var b=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return b.test(a)?{data:a}:{error:"Input must be an email address."}},this.validateCurrency=function(a){var b=/^[0-9]+(\.[0-9]{1,2})?$/;return b.test(a)?{data:a}:{error:"Input must be a positive numeric value with a maximum of two decimal places."}},this.validateCurrencyRedemption=function(a){var b=/^[0-9]+(\.[0-9]{1,3})?$/;return b.test(a)?{data:a}:{error:"Input must be a positive numeric value with a maximum of three decimal places."}},this.validatePhoneNumber=function(a){var b=/[^0-9\-]+/g;if(a.replace(b,""),3===a.indexOf("-")){var c=a.split("-"),d=c[0],e=c[1];return d.length<3?{error:"Please enter valid country code.Example format:001-1234567890"}:e.length<10?{error:"Please enter valid phone number(should be 10 digits and no alphabets).Example format:001-1234567890"}:{data:a}}return{error:"Please enter valid phone number.Example format:001-1234567890"}},this.validateNewLoginId=function(a){return a.length<7?{error:"Commit Id should have 7 digits.Eg:XBBJTNC"}:{data:a}},this.validatePercentage=function(a){if(angular.isUndefined(a)||null==a||""===a)return{error:"Please enter percentage"};if("string"!=typeof a)return{data:a};var b,c=this.checkIfStringIsNumber(a);if("string"==typeof c){a=c;a.charAt(a.length-1)+a.charAt(a.length-2);return b=parseFloat(a),b<.01||b>99.99?{error:" Expected value<br>0.01-99.99"}:{data:a}}return{error:"Invalid Percentage"}},this.validateAccountGroupName=function(a){if(angular.isUndefined(a)||null==a||""===a)return{error:"Group name is required.",validityName:"accountGroupName"};var b=/^[ -~]{1,50}$/,c=/^[0-9a-zA-Z]/;return b.test(a)?c.test(a)?{data:a}:{error:"The first character of a group name cannot be a special character.",validityName:"accountGroupNameFirstChar"}:{error:"Invalid Account Group Name",validityName:"accountGroupName"}}}]),function(){"use strict";function a(a,b,c,d,e){function f(){return v}function g(){return!u&&(q()||!o()||o()&&d.isTokenVerified()&&!q())}function h(){return!o()&&p()}function i(){return o()&&d.isTokenVerified()&&!q()}function j(){return!u&&(o()&&d.isTokenVerified()&&!q())}function k(){return!o()||q()}function l(){return!u&&(!o()||q())}function m(){return!u&&(o()&&!d.isTokenVerified()&&!q())}function n(){return t}function o(){var a=d.loggedIn();return!!angular.isDefined(a)&&a}function p(){return 0===a.url().indexOf("/login")}function q(){return 0===a.url().indexOf("/public/")}function r(){var a=angular.extend({},v.getValue(),{displayFooter:g(),displayLoginPageContent:h(),displayPrivateContent:i(),displayPrivateHeader:j(),displayPublicContent:k(),displayPublicHeader:l(),displayTokenHeader:m(),isEmbedded:n()});v.next(a)}var s={displayFooter:!0,displayLoginPageContent:!1,displayLegacyContent:!0,displayPrivateContent:!1,displayPrivateHeader:!1,displayPublicContent:!0,displayPublicHeader:!0,displayTokenHeader:!1,isEmbedded:!1},t=!1,u=!1,v=new Rx.BehaviorSubject(angular.extend({},s));return c.events$.filter(function(a){return"LEGACY_SUCCESS"===a.type||"RESOLVE_END"===a.type}).subscribe(function(a){var b=angular.extend({},v.getValue());b.displayLegacyContent=a.isLegacy,v.next(b)}),b.$watch(d.loggedIn,function(a,b){a&&a!==b&&r()}),b.$watch(d.isTokenVerified,function(a,b){a&&a!==b&&r()}),b.$on("$locationChangeStart",function(b,c,d){for(var f=a.search(),g=Object.keys(f),h=0;h<g.length;h++){var i=g[h].trim(),j=i.toLowerCase(),k=f[g[h]];k=angular.isString(k)?k.toLowerCase().trim():"","embeddedPortal"===i&&"true"===k&&(t=!0,u=!0),"framed"===j&&("true"===k?u=!0:"false"===k&&(u=!1)),"emulationuserid"===j&&e.setIframeEmulationMode(!0)}r()}),b.$on("$locationChangeSuccess",function(a,b,c){r()}),b.$on("$stateChangeSuccess",function(a,b,c){r()}),{getContentStateSubject:f}}angular.module("nxn.content").service("ContentContextService",a),a.$inject=["$location","$rootScope","CoreRouterEventsService","PageContext","nxn.userEmulationService"]}(),function(){function a(a){function b(a,b,c){for(var d,e,f=0;f<a.length;f++){if(e=a[f].applications,d=!1,e&&e.length>0)for(var g=0;g<e.length;g++)if(e[g].id&&b.indexOf(e[g].id)>=0){d=!0;break}d?c.indexOf(a[f].id)<0&&c.push(a[f].id):(a.splice(f,1),f-=1)}}function c(b){return a.post("/nxn-service/useremulate",b)}this.isOriginal=!0,this.userType=null,this.EFI_ID=131,this.filterPortlets=b,this.getPermissions=c}angular.module("nxn.emulation").service("nxn.emulationService",a),a.$inject=["nxn.Http"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a){s=e.getFailoverStatus();for(var b in q)if(q.hasOwnProperty(b)){var c=r[b];s.indexOf(b)===-1?c.serviceUrl=c.primaryUrl:c.supportsFailover?c.serviceUrl=c.secondaryUrl:c.serviceUrl=c.primaryUrl,b===a&&(c.startTest&&j(b,"stop"),c.serviceFailedOver=!0)}}function g(a){var b;a?(b=e.getEnvironment(),s=e.getFailoverStatus()):(b=p,s=[]);for(var c in q)q.hasOwnProperty(c)&&h(c,b,q[c])}function h(a,b,c){var d={},e=c[angular.uppercase(b)];if(d.supportsFailover=!1,d.primaryUrl="",d.secondaryUrl="",d.envServiceConfig={serviceCallOrder:[""]},angular.isObject(e)&&angular.isArray(e.serviceCallOrder)&&(d.supportsFailover=e.serviceCallOrder.length>1,d.primaryUrl=e[e.serviceCallOrder[0]],d.secondaryUrl=d.supportsFailover?e[e.serviceCallOrder[1]]:"",d.envServiceConfig=e),d.supportsFailover){d.startTest=!1,d.statusChangeMessage="";for(var f=!0,g=0;g<s.length;g++)if(s[g]===a){f=!1;break}f?d.serviceUrl=d.primaryUrl:d.serviceUrl=d.secondaryUrl}else d.serviceUrl=d.primaryUrl;r[a]=d}function i(a){k(a,"start")}function j(a){k(a,"stop")}function k(a,b){var c=r[a];if(c.supportsFailover){"start"===b?c.startTest=!0:"stop"===b&&(c.startTest=!1);for(var d=!0,e=0;e<s.length;e++)if(s[e]===a){d=!1;break}switch(b){case"start":d?c.serviceUrl=c.secondaryUrl:c.serviceUrl=c.primaryUrl;break;case"stop":d?c.serviceUrl=c.primaryUrl:c.serviceUrl=c.secondaryUrl}}}function l(a){return r[a]}function m(a,b,c,e,f){var g="";try{var h=r[a];g=h.serviceUrl}catch(a){}return g+=e,"get"===b.toLowerCase()?d.get(g,c):"post"===b.toLowerCase()?d.post(g,f,c):null}function n(){var a=[];return angular.forEach(r,function(b,c){b.supportsFailover&&a.push({serviceName:c,startTest:b.startTest,serviceFailedOver:b.serviceFailedOver})}),a}function o(a,c){if(!angular.isString(a))return void b.log("expected a string as service name");if(!q.hasOwnProperty(a)){q[a]=c;var d=e.loggedIn()?e.getEnvironment():p;h(a,d,q[a])}}var p="DEFAULT",q=a,r={},s=[],t={getEnvServiceConfig:l,getServicesWithFailoverSupport:n,processRequest:m,processUrls:f,registerService:o,startTestServiceFailover:i,stopTestServiceFailover:j};return null!==e&&g(e.loggedIn()),c.$watch(e.loggedIn,function(a){null!=a&&g(e.loggedIn())}),c.$on("pageReloaded",function(){g(e.loggedIn())}),t}function b(){var b={},c=null;return{registerServiceConfig:function(a,d){return!!angular.isString(a)&&(b[a]=d,null!==c&&c.registerService(a,d),!0)},$get:["$log","$rootScope","nxn.Http","PageContext",function(d,e,f,g){return c=new a(angular.copy(b),d,e,f,g)}]}}angular.module("nxn.failover").provider("RequestFailover",b)}(),function(){"use strict";function a(a,b,c,d){function e(b){if(null!==k&&k.resolve("cancel"),!angular.isNumber(b))throw new Error("Invalid instruction type");k=a.defer();var d=k,e=angular.extend({timeout:k.promise},l),f=c.get(g()+"/accounts?instructionType="+b,e);return f.finally(function(){d=null}),f}function f(){return c.get(g()+"/instruction-types",l)}function g(){return j}var h={getAccounts:e,getInstructionTypes:f,getURL:g},i=angular.uppercase(d.getEnvironment()),j=b[i],k=null;if(!angular.isString(j))throw new Error("Undefined Instruction Service URL");var l={headers:{"X-client-key":d.getClientKey()}};return h}angular.module("nxn.fileTransfer").factory("nxn.fileTransfer.instruction.service",a),a.$inject=["$q","nxn.fileTransfer.instruction.environments","nxn.Http","PageContext"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){return a.get(n()+"/entitlements",x)}function g(a,b,c,d){var e=angular.isObject(s.getFiles.parameters)&&h(a,s.getFiles.parameters.fromDate)&&h(b,s.getFiles.parameters.toDate)&&c===s.getFiles.parameters.productCode&&angular.equals(d,s.getFiles.parameters.userGroupsId);return angular.isObject(s.getFiles.promise)&&e||(s.getFiles.promise=i(a,b,c,d)),s.getFiles.promise.then(function(a){j(a.data)}),s.getFiles.promise}function h(a,b){return a===b||angular.isDate(a)&&angular.isDate(b)&&a.getTime()===b.getTime()}function i(b,c,d,e){var f=k(b,c,d,e),g=a.get(n()+f,x);return s.getFiles.parameters={fromDate:b,toDate:c,productCode:d,userGroupsId:e},s.getFiles.promise=g,g.then(function(a){j(a.data)}),g}function j(a){angular.forEach(a.jobs,function(a){var b=angular.isString(a.uploadProductType)?a.uploadProductType.toLowerCase():null;"sftp"===b&&(a.uploadProductType="Instructions - SFTP")}),a.files=[],a.typeCount={},angular.forEach(a.jobs,function(b){angular.isNumber(a.typeCount[b.uploadProductType])||(a.typeCount[b.uploadProductType]=0),angular.forEach(b.files,function(c){c.jobId=b.jobId,c.uploadProductType=b.uploadProductType,a.files.push(c),a.typeCount[b.uploadProductType]++,angular.equals(c.statusDescription,"Accepted")||angular.equals(c.statusDescription,"Deleted")||angular.equals(c.statusDescription,"SUC")?c.category="Success":angular.equals(c.statusDescription,"Upload Completed")?c.category="In Progress":c.category=c.statusDescription})})}function k(a,b,c,d){if(!angular.isDate(a))throw new Error("fromDate must be a Date");if(!angular.isDate(b))throw new Error("toDate must be a Date");var e="?fromDate="+a.toISOString()+"&toDate="+b.toISOString();return angular.isString(c)&&(e+="&productCode="+encodeURI(c)),angular.isArray(d)&&d.forEach(function(a){e+="&userGroupsId="+encodeURI(a)}),"/files"+e}function l(a){if(!angular.isString(a)||""===a.trim())throw new Error("fileId expected");return w+"/"+encodeURI(a.trim())}function m(){return x.headers}function n(){return u}function o(a){return a?v:u}function p(b){return a.post(n()+"/files",b,x)}function q(b){return a.delete(n()+"/files/"+b,x)}var r={getCachedFiles:g,getEntitlements:f,getFiles:i,getFilesPath:k,getFileURL:l,getHeaders:m,getScansURL:o,getURL:n,postFiles:p,removeFile:q},s={getEntitlements:{},getFiles:{}},t=angular.uppercase(b.getEnvironment()),u=c[t],v=d[t],w=e[t];if(!angular.isString(u))throw new Error("Undefined File Transfer Service URL");if(!angular.isString(v))throw new Error("Undefined File Transfer Service Scans URL");angular.isString(w)||console.error("File Transfer Service's file download URL is misconfigured.");var x={headers:{"X-client-key":b.getClientKey()}};return r}angular.module("nxn.fileTransfer").factory("nxn.fileTransferService",a),a.$inject=["nxn.Http","PageContext","nxn.fileTransfer.environments","nxn.fileTransfer.ie9.scans","nxn.fileTransfer.downloadBaseURLs"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){return angular.equals(a.getUserInfo().userType.toLowerCase(),"external")}function g(){return f()&&u(["CCGSECHFXFTD","CCGCTFOR","CCGCTUNFOR"])}function h(a){var c=b.getType(a);return c?c.directive:null}function i(a){return b.getType(a).name}function j(a){return b.getType(a).customData}function k(a){return b.getType(a).needsStepupAccess}function l(){var a=[];return angular.forEach(D,function(b){b.showUnShareOption&&b.allFilesViewEntitlements&&u(b.allFilesViewEntitlements)&&a.push(b.name)}),a}function m(){return b.getUploadProductTypeList()}function n(a){var c=b.getType(a);return angular.isObject(c)&&c.disableInFileTransferState===!0}function o(){for(var a=[],b=Object.keys(D),c=0;c<b.length;c++){var d=b[c],f=D[b[c]],g=u(f.uploadEntitlements),h=C(d)&&e.isEntitledForPlugin(z(d));g&&(h||t(f.requiredProviders))&&a.push(b[c])}return a}function p(){for(var a=Object.keys(D),b=0;b<a.length;b++){var c=D[a[b]];if(c.allFilesViewEntitlements&&u(c.allFilesViewEntitlements))return!0}return!1}function q(){var a=[];return angular.forEach(D,function(b){b.allFilesDownloadEntitlements&&u(b.allFilesDownloadEntitlements)&&a.push(b.name)}),a}function r(a){var b;return b=a<1024?a+" Bytes":a<1048576?(a/1024).toFixed(2)+" KB":(a/1048576).toFixed(2)+" MB"}function s(){for(var a=[],b=o(),c=0;c<b.length;c++)!n(b[c])&&v(D[b[c]])&&a.push(b[c]);return a}function t(a){if(angular.isUndefined(a))return!0;for(var b=0;b<a.length;b++)if(!c.has(a[b]))return!1;return!0}function u(b){for(var c=0;c<b.length;c++)if(a.hasExactEntitlement(b[c]))return!0;return!1}function v(a){return angular.isString(a.directive)}function w(){var a={};return angular.forEach(D,function(b){angular.isArray(b.downloadEntitlements)&&(a[b.serviceName]=!u(b.downloadEntitlements))}),a}function x(){return a.getUser()}function y(a){angular.isObject(a)||(a={});var b={backdrop:!0,keyboard:!0,modalFade:!0,size:"sm",controller:"fileTransferModalController",controllerAs:"fileTransferModalController",templateUrl:"partials/fileTransfer/modal/fileTransferModal.html",resolve:{modalOptionsObj:function(){return a}}};return function(c){a.uploadType=c,d.showModal(b,a)}}function z(a){var c=b.getType(a);return B(a)?c.loadAngularPlugin:c.loadA1Plugin}function A(){return b.getStatusOptions()}function B(a){return angular.isDefined(b.getType(a).loadAngularPlugin)}function C(a){return!B(a)&&angular.isDefined(b.getType(a).loadA1Plugin)}var D=b.getConfiguration(),E={getDownloadAccessForAllFiles:q,getEntitledUploadTypes:o,getFileBytes:r,getFTStateUploadTypes:s,getPlugin:z,getRestrictDownloadAccessMap:w,getShowModalFn:y,getStatusOptions:A,getUnshareAccessList:l,getUploadDirectiveName:h,getUploadProductTypeList:m,getUploadTypeCustomData:j,getUploadTypeName:i,getUserId:x,hasEntitlement:u,isDisabledInFileTransferState:n,isEntitledForAllFiles:p,isExternalUser:f,isLazyLoadedA1:C,isLazyLoadedAngular:B,isSFTPUser:g,needsStepupAccess:k};return E}angular.module("nxn.fileTransfer").factory("nxn.fileTransferUtils",a),a.$inject=["PageContext","downgradedFileTransferStateService","$injector","ModalService","PluginEntitlements"]}(),function(){"use strict";function a(a){function b(b){return a.post("/nxn-service/public/fps/statuses",b,g)}function c(b){return a.post("/nxn-service/public/fps/emails",b,g)}function d(b){return a.post("/nxn-service/public/fps/validations",b,g)}function e(a){var b=angular.isObject(a),c=b&&angular.isObject(a.data),d={};return d.isStartOver=c&&"START_OVER"===a.data.code,d.isSuccess=b&&2===parseInt(a.status/100),d.isValidKey=c&&angular.isString(a.data.transactionKey)&&a.data.transactionKey.length>0,d.isValidQuestions=c&&angular.isArray(a.data.questions)&&3===a.data.questions.length,d.message=c?a.data.message:null,d}var f={getSecurityQuestions:b,processResponse:e,sendEmail:c,validate:d},g={};return f}angular.module("nxn.fps").factory("nxn.fpsService",a),a.$inject=["nxn.Http"]}(),angular.module("nxn.Highcharts").factory("nxn.HighchartsService",["$rootScope",function(a){var b={};b.defaultDoughnutPieConfig=function(a,b,c){var d={options:{chart:{type:"pie"},tooltip:{enabled:!0,formatter:function(){return"<b>"+this.point.name+"</b>: "+this.y}},credits:{enabled:!1},subtitle:{text:"",style:{fontSize:"10px",fontWeight:"bold"},verticalAlign:"middle",align:"center",y:20},yAxis:{title:{text:"",style:{display:"none"}}},plotOptions:{pie:{shadow:!1}}},series:[{name:a,data:b,size:"100%",innerSize:"75%",showInLegend:!!c,dataLabels:{enabled:!1}}],title:{text:"",style:{font:"bold 40px Arial, Arial, sans-serif",fontWeight:"bold"},verticalAlign:"middle",align:"center",y:6},loading:!1,size:{width:200,height:200}};return d},b.defaultPieConfig=function(a,b,c){var d={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,spacingBottom:15,spacingTop:10},tooltip:{pointFormatter:function(){return"<b>"+this.percentage.toFixed(1)+"%, "+this.series.name+" "+Number(this.y).toLocaleString("en")+"</b>"}},credits:{enabled:!1},legend:{layout:"vertical",align:"right",verticalAlign:"top",y:30,navigation:{activeColor:"#3E576F",animation:!0,arrowSize:12,inactiveColor:"#CCC",style:{fontWeight:"bold",color:"#333",fontSize:"10px"}}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}}},title:{text:""},series:[{name:c,data:b,size:"100%",innerSize:"35%",type:"pie",showInLegend:!0}]};return d},b.defaultSPLineConfig=function(a,b){var c={options:{chart:{type:"spline",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,spacingBottom:15,spacingTop:10,zoomType:"x"},title:{text:"",x:-100},credits:{enabled:!1},legend:{enabled:!0},plotOptions:{spline:{marker:{enabled:!1}}}},series:b};return c},b.lineConfig=function(a,b){var c={options:{changeData:0,chart:{type:"line",height:600,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,spacingBottom:15,spacingTop:10,events:{click:""},resetZoomButton:{relativeTo:"chart"}},credits:{enabled:!1},plotOptions:{line:{stickyTracking:!1,marker:{enabled:!1}},series:{allowPointSelect:!0,connectNulls:!1,point:{events:{click:""}}}},title:{text:a,x:-20},xAxis:{type:"datetime",labels:{format:"{value:%b %d}"}},yAxis:{tickInterval:5,title:{text:""}},tooltip:{borderColor:"#000000",followPointer:!0,enabled:!0,shared:!0,useHTML:!0},legend:{layout:"vertical",align:"left",verticalAlign:"top",enabled:!0,y:50}},series:b,turboThreshold:1e4};return c},b.columnChrtConfig=function(a,b){var c={options:{chart:{type:"column",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,spacingBottom:15,spacingTop:10,zoomType:"x"},tooltip:{enabled:!0,crosshairs:!1,headerFormat:""},title:{text:"",x:-100},credits:{enabled:!1},legend:{enabled:!0},plotOptions:{column:{pointPadding:0,borderWidth:0,pointWidth:3}}},series:b};return c},b.multiTypChrtConfig=function(a,b){var c={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,spacingBottom:15,spacingTop:10,zoomType:"x"},tooltip:{enabled:!0,crosshairs:!0,headerFormat:""},title:{text:"",x:-100},credits:{enabled:!1},legend:{enabled:!0},plotOptions:{column:{pointPadding:0,borderWidth:0,pointWidth:3},spline:{marker:{enabled:!1}}}},series:b};return c},b.heatmapConfig=function(a,b,c,d,e,f){var g={options:{changeData:0,chart:{type:"heatmap",marginTop:40,marginBottom:60,plotBorderWidth:1,height:f},colorAxis:{min:0,minColor:"#FFFFFF",maxColor:Highcharts.getOptions().colors[0],gridLineColor:"#a8a8a8",minorGridLineColor:"#a8a8a8",labels:{format:"{value:.0f}"}},tooltip:{enabled:!0},legend:{align:"right",layout:"vertical",margin:0,verticalAlign:"top",y:25,symbolHeight:280},credits:{enabled:!1}},title:{text:b},xAxis:{categories:d,labels:{autoRotation:!1,rotation:-25}},yAxis:{categories:e,title:null},series:[{name:a,turboThreshold:1e5,borderWidth:.7,data:c,dataLabels:{enabled:!0,color:"#000000",allowOverlap:!0},options:{color:"#FFFFFF"}}]};return g},b.setSubtitle=function(a,b){if(!b)return void(a.options.subtitle.text="");a.options.subtitle.text=b;for(var c=a.series[0].data,d=0;d<c.length;d++)if(c[d].name!==b)c[d].color="#CACAB1";else if(c[d].name===b){var e=c[d].defaultColor;c[d].color=e,a.options.subtitle.style={font:"bold 10px Arial, Arial, sans-serif",fontWeight:"bold",color:e},a.title.style={font:"bold 40px Arial, Arial, sans-serif",fontWeight:"bold",color:e}}},b.genericChartCenterModification=function(a,b){return b?void(a.title.text=b.point.y):void(a.title.text="")},b.setDefaultColors=function(){Highcharts.setOptions({colors:["#F9DE85","#D0C7AF","#F4BD0C","#E05526","#215AA9","#008C95","#CFDD28","#A29060","#99E2F4","#72C45F","#F4BA9B","#BDBFC1"],lang:{thousandsSep:","}})};var c=["#68D2DF","#43B02A","#E35205","#90ACD4","#DAE0E1","#148E97","#A7A9AC","#00B2EF","#F9D991","#EEA294","#F0057B8","#F4BD0C","#D9E45E","#79C680","#B3E4EC","#90ACD4","#F8DD8C","#ECF1AE","#BCE2BF","#B3E4EC","#BCCDE5","#FBEBBA","#F4F7CE","#D7EED9","#E8F7F9","#4682B4","#E52B50","#FFBF00","#8DB600","#007FFF","#FC8EAC","#848482","#89CFF0","#FF7F50","#66FF00","#08E8DE","#BDB76B","#BD33A4","#ED872D","#E30022"];return b.defaultColumnConfigAgg=function(a,b,d,e,f,g){var h;if(h="undefined"!=typeof b[0].data.length?b[0].data.length:0,null!==f&&void 0!==f||(f=!1),!f&&!g)for(var i=0,j=0;j<b.length;j++)b[j].color=c[i],i++,i>c.length-1&&(i=0);var k={options:{chart:{type:"column",zoomType:h>1?"x":"",panning:h>1,panKey:h>1?"shift":"",backgroundColor:"#ffffff"},exporting:{enabled:!1,fallbackToExportServer:!1},credits:{enabled:!1},tooltip:{enabled:!0,followPointer:!0},xAxis:{categories:d,labels:{rotation:-20,style:{color:"#000000"}},minRange:h>1?1:"",tickLength:10},yAxis:{allowDecimals:!1,title:{enabled:!0,text:e,style:{fontWeight:"normal"}},labels:{style:{color:"#000000"}}},plotOptions:{series:{cursor:"pointer",dataLabels:{formatter:function(){if(0!==this.y)return this.y}},colorByPoint:f}},legend:{layout:"vertical",align:"right",verticalAlign:"middle",enabled:!0,navigation:{activeColor:"#3E576F",animation:!0,arrowSize:12,inactiveColor:"#CCC",style:{fontWeight:"bold",color:"#333",fontSize:"10px"}},itemStyle:{color:"#000000",fontWeight:"normal",fontSize:"9px"},labelFormatter:function(){return this.name},itemHoverStyle:{fontWeight:"normal",fontSize:"12px"}}},title:{text:a},series:b};return k},b.scatterPlotConfig=function(a){var b={options:{changeData:0,chart:{type:"scatter",zoomType:"xy"},subtitle:{text:""},tooltip:{enabled:!0,crosshairs:[!0,!0]},title:{text:""},xAxis:{title:{enabled:!0},labels:{formatter:function(){return this.value}},min:0,max:100,format:"{value} %",tickInterval:10,startOnTick:!0,endOnTick:!0,showLastLabel:!0,gridLineWidth:1},credits:{enabled:!1},yAxis:{title:{enabled:!0},labels:{formatter:function(){return this.value}},min:0,softMax:.5,tickInterval:.05,visible:!0,gridLineWidth:1},legend:{layout:"vertical",align:"left",verticalAlign:"top",enabled:!0,y:50},plotOptions:{scatter:{marker:{radius:5,symbol:"circle",states:{hover:{enabled:!0,lineColor:"rgb(100,100,100)"}}},states:{hover:{marker:{enabled:!1}}}},series:{events:{legendItemClick:""}}}},series:a};return b},b.disableLegend=function(a){return a.options.legend.enabled=!1,a.options.plotOptions.series.colorByPoint=!0,a},b}]),angular.module("NexenCommon").service("nxn.moment.dateFormat",[function(){this.format=function(a,b,c){return angular.isDefined(b)||(b="e"),angular.isDefined(c)||(c="MMM DD, YYYY hh:mm:ss A zz"),
angular.isDefined(a)&&null!=a?moment(a).locale(b).format(c):moment().locale(b).format(c)}}]),angular.module("NexenCommon").service("nxn.CurrencySymbolService",["currencySymbolsMap",function(a){this.getSymbol=function(b){return angular.isDefined(a[b])?a[b]:""},this.getCurrencyCodes=function(){return Object.getOwnPropertyNames(a).sort()}}]),angular.module("NexenCommon").service("nxnDateService",[function(){this.getCurrentDate=function(){return new Date},this.getCurrentTime=function(){return(new Date).getTime()}}]).service("nxnDateService",[function(){this.getCurrentDate=function(){return new Date},this.getCurrentTime=function(){return(new Date).getTime()}}]),angular.module("NexenCommon").service("nxn.timezoneName",function(){this.getTimezone=function(){var a,b=jstz.determine(),c=b.name();return a="America/Bogota"===c||"America/New_York"===c||"America/Havana"===c?"EST":"Asia/Kolkata"===c?"IST":"EST"}}),function(){"use strict";function a(a,b){function c(){var b=a.getCurrentDate();return moment(b).isBefore(f,"day")?"Please upgrade your browser to IE 11 or later by <b>31 December 2017</b>. This website will end support for IE 10 and older browser versions on <b>31 December 2017</b>. <a href='https://www.microsoft.com/en-us/WindowsForBusiness/End-of-IE-support' target='_blank'><u>Click here to learn more</u></a>":moment(b).isSame(g,"day")||moment(b).isAfter(g,"day")?"Please upgrade your browser to Internet Explorer (IE) 11 or higher to access this web portal.":"You are using an unsupported browser. Please upgrade your browser to Internet Explorer 11. <a target='_blank' href='https://www.microsoft.com/en-us/WindowsForBusiness/End-of-IE-support'><u>Click here to learn more</u></a>"}function d(a){return angular.isDefined(a)&&"IE"===a.name&&parseInt(a.version)<=10}function e(a){d(a)&&b.showModal({templateUrl:"partials/login/browser-support-message.html"})}var f=moment("2018-01-01","YYYY-MM-DD"),g=moment("2018-04-01","YYYY-MM-DD");return{getWarningMessage:c,isOutOfDateBrowser:d,warnDeprecatedBrowser:e}}angular.module("nxn.login").service("nxnBrowserOutOfDateService",a),a.$inject=["nxnDateService","ModalService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(a,b,d,e,i){if(h.isTokenVerified()?j.cancelInProgressStepup(p):"home"!==d.name&&j.closeModals(p),l(d))return!0;if(!h.ready())return a.preventDefault(),!1;var k=g.isEmulationMode(),m=d.userEmulationEnabled;if(g.getErrorMessage()&&"userEmulation"!==d.name)return a.preventDefault(),void c.go("userEmulation");if(k&&!m&&"emulationDisabled"!==d.name)return a.preventDefault(),void c.go("emulationDisabled");if(!k&&"emulationDisabled"===d.name)return a.preventDefault(),void c.go("home");var q=h.isError&&h.isError();if(q&&h.isFPSRedirect()){if("userSettings"!==d.name)return a.preventDefault(),c.go("userSettings"),!1;if("userSettings"===d.name)return!0}if(h.loggedIn()&&q&&!h.isFPSRedirect()){if(0!==d.name.indexOf("public.tour"))return a.preventDefault(),c.go("public.tour",{id:1}),!1;if(0===d.name.indexOf("public.tour"))return!0}if(q&&"outage"!==b.name){if("outage"!==d.name&&"login"!==d.name)return a.preventDefault(),c.go("outage"),!1;if("outage"===d.name||"login"===d.name)return!0}if(!h.loggedIn()){if("login"!==d.name&&"outage"!==d.name&&"fps"!==d.name)return a.preventDefault(),c.go("login"),!1;if("login"===d.name||"outage"===d.name||"fps"===d.name)return!0}if("home"===d.name&&h.isFPSRegistered()===!1)return a.preventDefault(),!1;if(h.loggedIn()&&"login"===d.name&&!q&&(!h.isTokenUser()||h.isTokenVerified()))return a.preventDefault(),void c.go("home");if(f.showDisclaimer(d.name)&&"true"!==i.disclaimerAccepted)return a.preventDefault(),n(d,i,b,e),!1;var r=f.requiresStepup(d.name);return""===r||!o(r,d,b)||i.stepupVerified!==!1||(a.preventDefault(),j.stepupUser().then(function(){var a={};a=angular.copy(i,a),a.stepupVerified=!0,c.go(d,a)},function(){""===b.name&&c.go("home")}),!1)}function l(a){return 0===a.name.indexOf("public")||0===a.name.indexOf("selfRegistration")||"logout"===a.name}function m(a){return a.indexOf("/public/")!==-1||a.indexOf("/selfRegistration")!==-1||a.indexOf("/logout")!==-1}function n(a){var f=b.defer(),g=f.promise;g.then(function(b){if(a.data.newWindow){var e=a.data.getUrl.call(null,h);d.open(e,"_blank")}else c.go(a.name,{disclaimerAccepted:"true"})}),e.showModal(a.data.disclaimerMsg,a.data.templateUrl,f)}function o(b,c,d){try{var e=i.getAuthService(b);return angular.isDefined(e.stateNeedsStepupAccess)&&e.stateNeedsStepupAccess(c,d)}catch(b){return a.warn("Exception in getting authService in stepupAccessRequired. "),!0}}var p="STATE-CHANGE";return{checkAccess:k,isPublicState:l,isPublicUrl:m}}angular.module("nxn.login").factory("nxnCheckAccess",a),a.$inject=["$log","$q","$state","$window","DisclaimerService","nxn.Router","nxn.userEmulationService","PageContext","StepupRegistry","StepupService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){if(g.loggedIn())return f.cancelFuture(!0),f.cancelAll(),h.stopEmulation(),a.get("/nxn-service/logout").then(function(b){return a.get("/login/logout.html").then(function(a){return c.$broadcast("LOGGED_OUT"),g.logOut(),"MOCK"!==g.getEnvironment()?e.setCookie("mClnt","",-100,".bnymellon.com"):e.setCookie("mClnt","",-100),b})},function(a){d.location.href="/app/logout"});var i=b.defer();return i.resolve({}),i.promise}var j={logout:i};return j}angular.module("nxn.login").factory("LogoutService",a),a.$inject=["$http","$q","$rootScope","$window","CookieService","nxnHttpTrackerService","PageContext","PluginPreviewService"]}(),function(){function a(a,b,c){this.getManageUserAccess=function(){return a.get("/nxn-service/manageUserAccess").then(function(a){return a.data})},this.getSWFURL=function(){var a=angular.uppercase(b.getEnvironment());return c[a]}}angular.module("NxnManageUserAccess").value("envSWFUrl",{MOCK:"https://connectapp-dev.bnymellon.com/UserAdmin/swf/UserAdminStandalone.swf",LOCAL:"https://connectapp-dev.bnymellon.com/UserAdmin/swf/UserAdminStandalone.swf",DEV:"/UserAdmin/swf/UserAdminStandalone.swf",QA:"/UserAdmin/swf/UserAdminStandalone.swf",XAT:"/UserAdmin/swf/UserAdminStandalone.swf",PRODUCTION:"/UserAdmin/swf/UserAdminStandalone.swf"}).service("manageUserAccessService",a),a.$inject=["nxn.Http","PageContext","envSWFUrl"]}(),angular.module("NexenCommon").service("nexenRegisterService",["$http",function(a){this.register=function(b){return a.post("/nxn-service/public/register/createProfile",b)},this.checkAvailability=function(b){return a.get("/nxn-service/public/register/checkUser?userId="+b)}}]),function(){"use strict";function a(a,b){function c(a){var c=b.getCurrentEnv(a);return j.hasOwnProperty(c)?j[c]:j["NON-PROD"]}function d(a){i=a}function e(a){h=a}function f(){return h}function g(){a.reload(i),h=null}var h=null,i=null,j={MOCK:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI","NON-PROD":"6Lc6eQwUAAAAAKUYpwhPnvr29NYWVmPXPpVB4kXK",PRODUCTION:"6Lc3uA4UAAAAAPmj2rAYWHNoYYLVEUzPjGhA35k7"};this.getSiteKey=c,this.setWidgetId=d,this.setCaptchaToken=e,this.getCaptchaToken=f,this.onCaptchaExpiredHandler=g}angular.module("nxn.selfRegistration").service("nxn.selfRegistrationCaptchaService",a),a.$inject=["vcRecaptchaService","nxn.getCurrentEnvironment"]}(),function(){"use strict";function a(a){function b(a){return m[a].form}function c(a,b){m[a].form=b}function d(a){return m[a].wizard}function e(a,b){m[a].wizard=b}function f(){m.verification.wizard=!1,m.newUser.wizard=!1,m.contactInfo.wizard=!1,m.securityQuestions.wizard=!1}function g(){return l===a.getWizardBaseSteps().DEFAULT_STEP}function h(){return l===a.getWizardBaseSteps().CONFIRM_STEP}function i(){return!g()&&!h()}function j(a){l=a}function k(){return l}var l=a.getWizardBaseSteps().DEFAULT_STEP,m={verification:{wizard:!1,form:!1},newUser:{wizard:!1,form:!1},contactInfo:{wizard:!1,form:!1},securityQuestions:{wizard:!1,form:!1}};this.getCurrentStep=k,this.getFormStatus=b,this.getStepStatus=d,this.isLandingPage=g,this.isPrintConfirmPage=h,this.resetStepStatus=f,this.setCurrentStep=j,this.setFormStatus=c,this.setStepStatus=e,this.showWizard=i,this.steps={VERIFICATION:"verification",NEW_USER:"newUser",CONTACT_INFO:"contactInfo",SECURITY_QUESTIONS:"securityQuestions"}}angular.module("nxn.selfRegistration").service("nxn.selfRegistrationControllersService",a),a.$inject=["nxn.selfRegistrationValues"]}(),function(){"use strict";function a(a,b,c,d,e){function f(b){return a.post(n+"/registration-details",b).then(function(a){var b=a.data;return b.metadata&&b.metadata.success?"SUCCESS"===b.data.validationStatus?{status:!0}:"FAILED"===b.data.validationStatus?{status:!1,error:d.selfRegMsg.VERIFICATION_FAILED}:{status:!1,error:d.selfRegMsg.VERIFICATION_INVALID}:k},function(a){return k})}function g(b){return a.get(n+"/users/"+b).then(function(a){var b=a.data;return b.metadata&&b.metadata.success?b.data.isUserExists?{status:!1,error:d.selfRegMsg.USER_ID_EXISTS}:{status:!0,data:b.data}:k},function(a){return k})}function h(b){return a.post(n+"/users",b).then(function(a){var b=a.data;return b.data&&b.data.isUserExists?{status:!0,userExists:!0,error:d.selfRegMsg.USER_ID_EXISTS}:b.metadata&&b.metadata.success?{status:!0,userExists:!1}:k},function(a){return k})}function i(b){return a.get(n+"/registration-details/"+b).then(function(a){var b=a.data;return b.metadata&&b.metadata.success?{status:!0,data:b.data}:k},function(a){return k})}var j={verifyRegistration:f,getUserContactInfo:i,checkUserIdAndGetSecQuestions:g,createProfile:h},k={status:!1,error:d.selfRegMsg.GENERIC_COMM_FAILURE},l=c.location.host,m=e.getCurrentEnv(l),n=d.selfRegBaseURLs[m];return j}angular.module("nxn.selfRegistration").service("nxn.selfRegistrationDataService",a),a.$inject=["$http","$q","$window","nxn.selfRegistrationConstants","nxn.getCurrentEnvironment"]}(),function(){"use strict";function a(a,b){function c(){x()}function d(){return A}function e(){return B}function f(a){B=a}function g(){return C.contactInfo}function h(){return C.legal}function i(){return C.verification}function j(){return C.newUser}function k(a,b){b&&a.forEach(function(a){a.answer=""}),A=a}function l(a){z(a);var b=_.find(a.profileFields,function(a){return"state"===a.field}),c=_.find(a.profileFields,function(a){return"country"===a.field}),d=C.contactInfo;angular.forEach(a.profileFields,function(a){"firstName"===a.field?(d.firstName.value=a.fieldValue,d.firstName.disabled=!a.editable):"middleName"===a.field?(d.middleName.value=a.fieldValue,d.middleName.disabled=!a.editable):"lastName"===a.field?(d.lastName.value=a.fieldValue,d.lastName.disabled=!a.editable):"address1"===a.field?(d.address1.value=a.fieldValue,d.address1.disabled=!a.editable):"address2"===a.field?(d.address2.value=a.fieldValue,d.address2.disabled=!a.editable):"address3"===a.field?(d.address3.value=a.fieldValue,d.address3.disabled=!a.editable):"city"===a.field?(d.city.value=a.fieldValue,d.city.disabled=!a.editable):"zip"===a.field?(d.zipCode.value=a.fieldValue,d.zipCode.disabled=!a.editable):"email"===a.field?(d.email.value=a.fieldValue,d.email.disabled=!a.editable):a.field.toLowerCase().indexOf("phone")!==-1?n(a,d,c):"country"===a.field&&""!==a.fieldValue&&m(a,b,d)}),d.hasOwnProperty("phoneType1")&&(d.phoneType1.value=""),angular.forEach(d,function(a,b){angular.isString(a.value)&&""===a.value.trim()&&a.mandatory&&(a.disabled=!1)})}function m(b,c,d){var e=b.fieldValue.toLowerCase();"usa"!==e&&"us"!==e||(e="united states");var f=_.find(a.getCountryCodes(),function(a){var b=a.countryName.substring(0,a.countryName.indexOf(" ("));return b.toLowerCase()===e});f?(d.country.value=f,d.state.value=c.fieldValue):d.state.value=c.fieldValue}function n(b,c,d){var e="",f=null;if(b.fieldValue&&""!==b.fieldValue){var g=b.fieldValue.indexOf("-");if(g!==-1){var h=b.fieldValue.split("-");f=a.getCountry(h[0],d.fieldValue),e=h[1].replace(/\D/g,"")}f||(f="",e=b.fieldValue.replace(/\D/g,""))}b.field.toLowerCase().indexOf("business")!==-1?(c.phoneNumber1.value=e,c.phoneNumber1.disabled=!b.editable,c.countryCode1.value=f,c.phoneType1.value=a.getPhoneTypes()[2]):(c.phoneNumber2.value=e,c.phoneNumber2.disabled=!b.editable,c.countryCode2.value=f,b.field.toLowerCase().indexOf("home")!==-1?c.phoneType2.value=a.getPhoneTypes()[1]:c.phoneType2.value=a.getPhoneTypes()[0])}function o(){w();var a=C.contactInfo.country.value.countryName.indexOf(" ("),b={};return b.registrationId=C.verification.registrationId.value,b.securityQuestions=q(),b.user={},b.user.address1=C.contactInfo.address1.value,b.user.address2=C.contactInfo.address2.value,b.user.address3=C.contactInfo.address3.value,b.user.businessPhone=p("Business",C.contactInfo),b.user.city=C.contactInfo.city.value,b.user.country=C.contactInfo.country.value.countryName.substring(0,a),b.user.email=C.contactInfo.email.value,b.user.firstName=C.contactInfo.firstName.value,b.user.homePhone=p("Home",C.contactInfo),b.user.lastName=C.contactInfo.lastName.value,b.user.middleName=C.contactInfo.middleName.value,b.user.mobilePhone=p("Mobile",C.contactInfo),b.user.password=C.newUser.password.value,b.user.state=C.contactInfo.state.value,b.user.userId=C.newUser.userId.value,b.user.zip=C.contactInfo.zipCode.value,b}function p(a,b){if(!b)return"";var c=_.property("phoneType1.value.typeCode")(b)||"",d=_.property("phoneType2.value.typeCode")(b)||"",e=_.property("countryCode1.value.countryCode")(b)||"",f=_.property("countryCode2.value.countryCode")(b)||"",g=_.property("phoneNumber1.value")(b)||"",h=_.property("phoneNumber2.value")(b)||"";if("Business"===a){if("Business"===c&&""!==g)return e+"-"+g;if("Business"===d&&""!==h)return f+"-"+h;if("Business"!==c&&"Business"!==d){if("Home"===c)return e+"-"+g;if("Home"===d)return f+"-"+h}if("Business"!==c&&(""===d||angular.isUndefined(d)))return e+"-"+g}if("Home"===a){if("Home"===c&&""!==g)return e+"-"+g;if("Home"===d&&""!==h)return f+"-"+h}if("Mobile"===a){if("Mobile"===c&&""!==g)return e+"-"+g;if("Mobile"===d&&""!==h)return f+"-"+h}return""}function q(){for(var a=[],b=0;b<A.length;b++)if(""!==A[b].answer){var c={};c.questionId=A[b].questionId,c.questionText=A[b].questionText,c.answer=A[b].answer,a.push(c)}return a}function r(a){return _.repeat("*",a.length)}function s(a){return _.remove(_.values(C[a]).map(function(a){if(angular.isDefined(a.label)&&""!==a.value)return{label:a.label,value:a.isPassword?r(a.value):a.value}}),void 0)}function t(){return s("newUser")}function u(){var a=C.contactInfo,b=[];return b.push({key:"Name",value:a.firstName.value+" "+a.middleName.value+" "+a.lastName.value}),b.push({key:"Address",value:a.address1.value+" "+a.address2.value+" "+a.address3.value+" "+a.city.value+", "+a.state.value+" "+a.zipCode.value}),b.push({key:"Country",value:a.country.value.countryName.substring(0,a.country.value.countryName.indexOf(" ("))}),b.push({key:(a.phoneType1.value.typeCode||"")+" Phone",value:(a.countryCode1.value.countryCode||"")+" "+a.phoneNumber1.value}),""!==a.phoneNumber2.value&&b.push({key:(a.phoneType2.value.typeCode||"")+" Phone",value:(a.countryCode2.value.countryCode||"")+" "+a.phoneNumber2.value}),b.push({key:"Email",value:a.email.value}),b}function v(){return A.map(function(a){return{label:a.questionText,value:a.answer}})}function w(){""===C.contactInfo.phoneNumber2.value&&(C.contactInfo.phoneType2.value="",C.contactInfo.countryCode2.value="")}function x(){C=a.getInitialFormData()}function y(a){var c=a.$parent;c.fpsQAList||(b.setCurrentScope(c),c.answersPristine=[],c.isEmpty=b.isEmpty,c.setFieldPristine=b.setFieldPristine,c.fpsQAList=d(),b.initAnswersPristine(c.fpsQAList,c.answersPristine))}function z(a){var b=_.find(a.profileFields,function(a){return"state"===a.field}),c=_.find(a.profileFields,function(a){return"country"===a.field});b||a.profileFields.push({field:"state",fieldValue:"",editable:!0}),c||a.profileFields.push({field:"country",editable:!0}),angular.forEach(a.profileFields,function(a){a.fieldValue||(a.fieldValue="")})}var A=[],B=!1,C=a.getInitialFormData();this.beginRegistration=c,this.cancelRegistration=x,this.getContactForm=g,this.getContactInfoForReview=u,this.getLegalForm=h,this.getLoginInformation=t,this.getSecurityQuestions=d,this.getSecurityQuestionsAndAnswers=v,this.getUserForm=j,this.getUserAlreadyExists=e,this.getVerificationForm=i,this.initSecurityQuestions=y,this.setInitialContactDetails=l,this.setProfileData=o,this.setSecurityQuestions=k,this.setUserAlreadyExists=f}angular.module("nxn.selfRegistration").service("nxn.selfRegistrationFormsService",a),a.$inject=["nxn.selfRegistrationValues","nxn.selfRegSecQHelper"]}(),function(){"use strict";function a(){function a(a){j=a}function b(a){return"1234567890"===a&&(a=""),!a||0===a.length}function c(a,b){for(var c=0;c<a.length;c++)b.push({isPristine:!0,answer:a[c].answer,questionId:a[c].questionId})}function d(a,b,c){var d=j.answersPristine;if(a===!1)for(var e=0;e<d.length;e++)parseInt(c)===d[e].questionId&&(d[e].answer=b,d[e].isPristine=!1);return d}function e(a,b,c,d){var e=a.map(function(a){return a.answer.toLowerCase().trim()});return h(e,a)?"SAME_ANSWER_ERROR":g(e,a,b,c,d)?"NOTALLOWED_ANSWER_ERROR":f(e,a)?"REPEATING_ANSWER_ERROR":""}function f(a,b){for(var c=!1,d=0;d<a.length;d++)a[d].match(/(.)\1\1/g)&&(b[d].answer="",c=!0);return c}function g(a,b,c,d,e){for(var f=!1,g=0;g<a.length;g++)a[g]!==c.toLowerCase()&&a[g]!==d.toLowerCase()&&a[g]!==e.toLowerCase()||(b[g].answer="",f=!0);return f}function h(a,b){for(var c=!1,d=0;d<a.length-1;d++)for(var e=d+1;e<a.length;e++)a[e]===a[d]&&(b[e].answer="",b[d].answer="",c=!0);return c}var i={isEmpty:b,initAnswersPristine:c,setCurrentScope:a,setFieldPristine:d,validateAnswers:e,MASKED_ANSWER:"*************"},j=null;return i}angular.module("nxn.selfRegistration").service("nxn.selfRegSecQHelper",a),a.$inject=[]}(),angular.module("nxn.selfRegistration").constant("nxn.selfRegValidationMessages",{PASSWORD_NO_MATCH:"Confirm Password does not match Password field",PASSWORD_REQUIRED:"Password is required",PASSWORD_SHORT:"Password too short",PASSWORD_NO_NUM:"Include at least one numeric character",PASSWORD_NO_UPPERCASE:"Include at least one alphabetic uppercase character",PASSWORD_NO_LOWERCASE:"Include at least one alphabetic lowercase character",USER_ID_LENGTH:"User ID must contain 6-30 characters",USER_ID_BAD_CHAR:"User ID contains characters that are not allowed",INVALID_ZIP:"Please enter a valid ZIP code",INVALID_PHONE_NO:"Please enter digits only. Example format: 1234567890",PASSWORD_NO_SPEC_CHAR:"Include at least one special character"}).service("nxn.selfRegValidationService",["nxn.formatData","nxn.formats","nxn.selfRegValidationMessages",function(a,b,c){this.validateSelfRegPassword=function(a){var b=/[0-9]+/g,d=/[A-Z]+/g,e=/[a-z]+/g,f=/[-!"$%^&*()_+|~=`{}[:;<>?',.@#\]]/g;return a?a.length<8?{error:c.PASSWORD_SHORT,validityName:"passMinLength"}:b.test(a)?d.test(a)?e.test(a)?f.test(a)?{data:a}:{error:c.PASSWORD_NO_SPEC_CHAR,validityName:"passSpecChar"}:{error:c.PASSWORD_NO_LOWERCASE,validityName:"passAsLowerChar"}:{error:c.PASSWORD_NO_UPPERCASE,validityName:"passAsUpperChar"}:{error:c.PASSWORD_NO_NUM,validityName:"passNumChar"}:{error:c.PASSWORD_REQUIRED,validityName:"passRequired"}},this.validatePasswordMatch=function(a,b){return a!==b?{error:c.PASSWORD_NO_MATCH,validityName:"passwordMatch"}:{data:a}},this.validateSelfRegUserID=function(a){var b=6,d=30,e=/^[\w_.\-]+$/;return a.length<b||a.length>d?{error:c.USER_ID_LENGTH,validityName:"userIDRequiredLength"}:e.test(a)?{data:a}:{error:c.USER_ID_BAD_CHAR,validityName:"userIDSpecialChars"}},this.validateSelfRegUsZipCode=function(a){var b=/(^\d{5}(-\d{4})?$)/;return b.test(a)?{data:a}:{error:c.INVALID_ZIP}},this.validateSelfRegPhoneNumber=function(a){var b=/^\d+$/;return b.test(a)?{data:a}:{error:c.INVALID_PHONE_NO}}}]),function(){"use strict";function a(a,b,c){function d(){var d=a.isMainApp()?atob(g):atob(h);return"QA"===c.getCurrentEnv(b.url()).toUpperCase()&&(d=a.isMainApp()?atob(i):atob(j)),d}var e="/pw/forms/smpwservices.fcc",f="/apps/home",g="bnhuLW5leGVuLmJueW1lbGxvbi5jb21fYWdlbnQ=",h="bnhuLWFjY2Vzc3BvcnRhbHMuY29tX2FnZW50",i="bnhuLW5leGVuLmJueW1lbGxvbi5jb21fYWdlbnQtbnI=",j="bnhuLWFjY2Vzc3BvcnRhbHMuY29tX2FnZW50LW5y";this.getSMPasswordUrl=function(a){var b=f;a&&angular.isString(a)&&a.trim()&&(b=a);var c=["SMAUTHREASON=34","TARGET="+encodeURIComponent(b),"smagentname="+d()];return e+"?"+c.join("&")}}angular.module("nxn.smagent").service("nxnSMAgentService",a),a.$inject=["NxnWhiteLabelService","$location","nxn.getCurrentEnvironment"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(a){null!==W&&(S=a,T=!0,m(a))}function m(b){return angular.isDefined(b)&&!angular.isString(b)?void a.log("incorrect parameter type: string type expected"):(o(b),q(b),void p())}function n(){return null!==W?W.promise:(w(B),W=c.defer(),W.promise.finally(function(){y()}),x(),W.promise)}function o(b){return angular.isDefined(b)&&!angular.isString(b)?void a.log("incorrect parameter type: string type expected"):void(null!==U&&U.opened.then(function(){U.dismiss(b),U=null}))}function p(){null!==V&&V.opened.then(function(){V.dismiss(),V=null})}function q(b){return angular.isDefined(b)&&!angular.isString(b)?void a.log("incorrect parameter type: string type expected"):void(null!==X&&X.opened.then(function(){X.dismiss(b),X=null}))}function r(){o(),U=e.showModal(M,N),w(A),T&&U.dismiss(S),U.result.then(function(){W.reject(Q)},function(a){W.reject(a||Q)}).finally(function(){w(z),U=null})}function s(){p(),V=e.showModal(O,{})}function t(){q(),X=b.open(P),w(D),T&&X.dismiss(S),X.result.then(function(){w(E),W.resolve(R)},function(a){w(C),W.reject(a||Q)}).finally(function(){X=null})}function u(){return s(),j.getAuthLevel().then(function(a){return w(G),H===a.data.authLevel?H:I===a.data.authLevel?I:J},function(){return w(F),J}).finally(function(){p()})}function v(a,b){var c=k.getCookie("wlCookie"),e={action:a,businessProcessCode:c,currentEnv:h.getEnvironment(),enterpriseStatusCode:"D",envDPInfo:L,eventDate:new Date,lob:"Client Experience Delivery",payloadType:"Non-Process",portalName:"NEXEN PORTAL",postAppMnemonic:"NXN",stateUrl:angular.isDefined(d)&&angular.isDefined(d.current)?d.current.url:"",userId:h.getUser(),usrTok:g.getUsrToken()};return e.browserName=b.browserInfo.name,e.browserVersion=b.browserInfo.version,e.osName=b.osInfo.name,e.osVersion=b.osInfo.version,e}function w(b){return f?void f.sendSessionStats(v(b,K)):void a.warn("nxnDPPayloadService must be defined before calling 'logStats(...)'")}function x(){if(T)return void W.reject(S);var a=u();a.then(function(a){return T?void W.reject(S):void(H===a?W.resolve(R):J===a?r():t())})}function y(){S=null,T=!1,W=null}var z="step up error modal closed",A="step up error modal displayed",B="step up authentication started",C="step up modal dismissed",D="step up modal displayed",E="step up successful",F="step up auth level could not be retrieved",G="step up auth level retrieved successfully",H="15",I="10",J="-1",K={browserInfo:{name:"",version:""},deviceInfo:{model:"",type:"",vendor:""},osInfo:{name:"",version:""}};i.clientInfo$.subscribe(function(a){K=a});var L=[{env:"MOCK",isEnable:!0,postToEnv:["DEV"]},{env:"DEV",isEnable:!0,postToEnv:["DEV"]},{env:"QA",isEnable:!0,postToEnv:["XAT"]},{env:"XAT",isEnable:!0,postToEnv:["XAT"]},{env:"PRODUCTION",isEnable:!0,postToEnv:["PRODUCTION"]}],M={controller:"StepupErrorModalCtrl",size:"sm",templateUrl:"partials/stepup/stepup-error.html"},N={actionButtonText:"OK",body:"The system cannot process your request now. Please try later.",headerText:"Error"},O={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal-spinner.html"},P={backdrop:"static",controller:"StepupModalCtrl",keyboard:!1,templateUrl:"partials/stepup/step-up-flow.html",windowClass:"app-modal-window"},Q="user not stepped up",R="user stepped up",S=null,T=!1,U=null,V=null,W=null,X=null;return{cancelInProgressStepup:l,closeModals:m,stepupUser:n}}angular.module("nxn.stepup").service("StepupService",a),a.$inject=["$log","$modal","$q","$state","ModalService","nxn.dp.payload.service","nxn.UserTokenService","PageContext","nxnClientInfoService","UserAuthService","CookieService"]}(),function(){"use strict";function a(a){function b(){return!a.isTokenVerified()}function c(){return!a.isTokenVerified()}return{directiveNeedsStepupAccess:c,stateNeedsStepupAccess:b}}angular.module("NexenCommon").factory("TokenOnlyAuthService",a),a.$inject=["PageContext"]}(),angular.module("NxnUserAdmin").service("userEntitlementsService",["$state","$window","$http","$rootScope","PageContext",function(a,b,c,d,e){this.updateAdminEntitlements=function(d,f){return c.post("/nxn-service/adminEntitlement/update?userId="+d,f).then(function(c){return e.get(function(c){if(d.toUpperCase()===c.user.toUpperCase()&&angular.isDefined(c.entitlements)){for(var e=0;e<f.length;e++){for(var g=f[e].active,h=c.entitlements.length-1;h>=0;h--)f[e].entitlementId===c.entitlements[h]&&(g=!1,f[e].active||c.entitlements.splice(h,1));g&&c.entitlements.push(f[e].entitlementId)}c.user.ignoreCase===d.ignoreCase&&(a.go("home"),b.location.reload())}}),c})},this.getUserAdminEntitlements=function(a){return c.get("/nxn-service/adminEntitlement/getEntitlements?userId="+a).then(function(a){return a.data})},this.getUserPluginEntitlements=function(a){return c.get("/nxn-service/adminEntitlement/getEntitledPlugins?userId="+a).then(function(a){return a.data.entitledPlugins})},this.getUserEntitlements=function(a){return c.get("/nxn-service/getUserEntitlementsAndLOBs/getEntitlementsAndLOBs?userId="+a).then(function(a){return a.data.userDetails})}}]),function(){"use strict";function a(a){function b(b){return a.get("/nxn-service/adminLookup/getLOBs?userIds="+b.join(",")).then(function(a){return a.data})}return{getUserEntitlements:b}}angular.module("NxnUserAdmin").service("userLookupService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a){function b(a){a.loggedIn&&(e.firstName=a.firstName,e.lastName=a.lastName,e.nxnUser=a.user,e.nxnDevUser=e.nxnUser?e.nxnUser.replace(/ext_/i,""):"",e.isExternal=d(a),angular.isUndefined(a.env)||"MOCK"===a.env.toUpperCase()||e.isExternal&&"PRODUCTION"===a.env.toUpperCase()?e.url="img/generic_avatar.png":e.url="https://mysourcesocial.bnymellon.net/people/"+e.nxnDevUser+"/avatar",a.userSettings&&(e.userSettings={dateFormat:a.userSettings["GEN.REG.DATEFRMT"],timeFormat:a.userSettings["GEN.REG.TIMEDIS"],timeZone:a.userSettings["GEN.REG.TIMEZONE"]}))}function c(){return e}function d(a){return!!angular.isUndefined(a.userType)||"external"===a.userType.toLowerCase()}var e={};return a.get(b),{init:b,getCurrentUser:c}}angular.module("nxn.nxnUserSettings").factory("NxnUser",a),a.$inject=["PageContext"]}(),angular.module("nxn.nxnUserSettings").service("nxnUserPreferencesServiceUtil",["nxnUserDateTimePreference","nxnUserNumberPreference",function(a,b){this.setUserPreference=function(c){angular.isDefined(c)&&(angular.isDefined(c.prflDtFmt)&&(c.prflDtFmt=c.prflDtFmt.replace(/d/g,"D"),c.prflDtFmt=c.prflDtFmt.replace(/y/g,"Y"),angular.isDefined(c.prflDtSprtr)&&"/"!==c.prflDtSprtr&&(c.prflDtFmt=c.prflDtFmt.replace(/\//g,c.prflDtSprtr))),angular.isDefined(c.prflTmFmt)&&(c.prfl24HrFmt?c.prflTmFmt=c.prflTmFmt.replace(/h/g,"H"):(c.prflTmFmt=c.prflTmFmt.replace(/H/g,"h"),c.prflTmFmt+=" A")),a.setUserPreferences({preferredDateFormat:c.prflDtFmt,preferredTimeFormat:c.prflTmFmt,preferredTimeZone:c.prflTmZn}),b.setUserPreferences({preferredLeadZeroOption:c.prflNmZeroDis,preferredNegativeNumberOption:c.prflNmNgtveFmt,preferredDecGroupingOption:c.prflNmDecGrpng}))}}]),angular.module("nxn.nxnUserSettings").value("userSettings.serviceUrls",{serviceUrl:{MOCK:"/profileservices",LOCAL:"/profileservices",DEV:"https://apigateway.dev.bnymellon.com/profile-services/v1",UAT:"https://apigateway.test.bnymellon.com/profile-services/v1",QA:"https://apigateway.test.bnymellon.com/profile-services/v1",DCAT:"https://apigateway.qa.bnymellon.com/profile-services/v1",XAT:"https://apigateway.qa.bnymellon.com/profile-services/v1",PRODUCTION:"https://apigateway.bnymellon.com/profile-services/v1"},logoServiceUrl:{MOCK:"/profileservices",LOCAL:"/profileservices",DEV:"https://apigateway.dev.bnymellon.com/logoservices/v1",UAT:"https://apigateway.test.bnymellon.com/logoservices/v1",QA:"https://apigateway.test.bnymellon.com/logoservices/v1",DCAT:"https://apigateway.qa.bnymellon.com/logoservices/v1",XAT:"https://apigateway.qa.bnymellon.com/logoservices/v1",PRODUCTION:"https://apigateway.bnymellon.com/logoservices/v1"}}).service("nxn.UserSettingsService",["nxn.Http","$q","PageContext","SysParamsService","userSettings.serviceUrls","nxn.nxnUserSettingValue",function(a,b,c,d,e,f){function g(b){var c=a.post(t()+"/profiles",b);return c.then(function(a){return a.data.metadata.status.success&&angular.copy(b,y.userProfileSettingsOriginal.reporting),a.data},function(a){return a.data}),c}function h(a){var b={};return angular.forEach(y.timeZoneArray,function(c){c.timeZone===a&&(b.timeZone=c.timeZone,b.label=c.label)}),b}function i(a){var b={};return b.format=a,b}function j(a){if(angular.isUndefined(a.regionalups)||angular.equals(a.regionalups,null)||angular.equals(a.regionalups,{}))return null;var b={};return b.dateFormat={},b.dateFormat.style=a.regionalups.dateSet.dateStyle,b.dateSeperator={},b.dateSeperator.style=a.regionalups.dateSet.dateSeparator,b.nNumber={},b.nNumber.format=a.regionalups.decimalSet.negativeFormat,b.timeFormat={},b.timeFormat.style=angular.lowercase(a.regionalups.timeSet.timeStyle),b.timeZone=h(a.regionalups.timezone.tzID),b.lZero={},b.lZero.format=a.regionalups.decimalSet.leadZero,b.idCLock=a.regionalups.timeSet.military,b.gmtOffset=a.regionalups.timezone.showGMTOffset,b.dGroup=i(a.regionalups.decimalSet.decimalSystem),b}function k(a){var b={};return angular.forEach(f.reportingLanguages,function(c){c.code===a&&(b.code=c.code,b.label=c.label)}),b}function l(a){var b={},c=a.reportingProfile.generalReporting.generalLogoName;return""===c?angular.forEach(y.reportLogo,function(c){"N"===a.reportingProfile.generalReporting.generalReportLogo?"No Logo"===c.logoLabel&&(b.rLogo=c):"Standard"===c.logoLabel&&(b.rLogo=c)}):angular.forEach(y.reportLogo,function(a){a.logoName===c&&(b.rLogo=a)}),angular.isDefined(b.rLogo)||angular.forEach(y.reportLogo,function(a){"Standard"===a.logoLabel&&(b.rLogo=a)}),b.rptLanguage=k(a.reportingProfile.generalReporting.generalReportLanguage),b.ersReportingWorkFlow=a.reportingProfile.ersNexenReporting.ersReportingWorkFlow,b.subtitle=a.reportingProfile.generalReporting.subtitle,b}function m(a,b){if(angular.isArray(a))for(var c=0;c<a.length;c++){var d=a[c].answer;angular.isUndefined(d)||(b?null===d||""!==d&&d===x||(a[c].answer=x):a[c].answer=x)}return a}function n(){if(angular.isDefined(y.userProfileSettingsOriginal.forgotPasswordArray))for(var a=0;a<y.userProfileSettingsOriginal.forgotPasswordArray.length;a++){var b=y.userProfileSettingsOriginal.forgotPasswordArray[a].answer;if(null===b||angular.isUndefined(b))return!0}return!1}function o(a){var b={subtitle:a.subtitle?"Y":"N",generalLogoName:a.rLogo.logoName,generalReportLanguage:a.rptLanguage.code};"custom"===a.rLogo.logoType?b.generalReportLogo="C":"No Logo"===a.rLogo.logoLabel?b.generalReportLogo="N":b.generalReportLogo="Y";var c={};c.ersReportingWorkFlow=a.ersReportingWorkFlow;var d={generalReporting:b,ersNexenReporting:c},e={reportingProfile:d,profileType:"reporting"};return e}function p(){return a.get(u()+"/logos").then(function(a){return angular.isDefined(a.data.data)&&a.data.metadata.status.success!==!1?angular.isDefined(a.data.data.logos)&&(y.reportLogo=a.data.data.logos):y.reportLogo=[],y.reportLogo},function(a){return b.reject(a.data)})}function q(){return a.get(t()+"/profiles?profileType=reporting").then(function(a){return a},function(a){return a.data})}function r(){return a.get(t()+"/profiles?profileType=regionalups,reporting").then(function(a){return a},function(a){return b.reject(a.data)})}function s(){return a.get("/nxn-service/users/getUserSettings").then(function(a){return a},function(a){return b.reject(a.data)})}function t(){var a=angular.uppercase(c.getEnvironment());return e.serviceUrl[a];
}function u(){var a=angular.uppercase(c.getEnvironment());return e.logoServiceUrl[a]}function v(){var a=b.defer();return c.get(function(b){a.resolve(b)},function(b){a.reject(b)}),a.promise}function w(){return b.all([p(),r(),s()]).then(function(a){var b=a[1].data,c=a[2].data;if(angular.isDefined(c.userProfile))return y.userProfileSettingsOriginal={},y.userProfileSettingsOriginal.userProfile=J(c),y.userProfileSettingsOriginal.forgotPasswordArray=m(c.userProfile.fpsObjects,!0),y.securityQuestionsRequired=n(),y.countriesList=c.countryOfResidences,!angular.isUndefined(b)&&b&&b.data&&!angular.isUndefined(b.data)?(A=!0,y.userProfileSettingsOriginal.regional=j(b.data),y.userProfileSettingsOriginal.reporting=l(b.data)):A=!1,y.userProfileSettingsEditable={},angular.copy(y.userProfileSettingsOriginal,y.userProfileSettingsEditable),E=!0,F.resolve(y.userProfileSettingsEditable),H.resolve(y.userProfileSettingsOriginal),y.userProfileSettingsEditable},function(a){return b.reject(null)})}var x="*************",y=this;y.userProfileSettingsEditable={},y.userProfileSettingsOriginal={},y.countriesList=[],y.securityQuestionsRequired=!1,y.isPhoneNumberPresent=!1,y.selectedLogo="";var z=!1,A=!0,B="use_FPS_rest_service_fallback",C="N",D="Y",E=!1,F=b.defer(),G=F.promise,H=b.defer(),I=H.promise;y.MASKED_ANSWER=x,y.setSecurityQuestionsRequired=function(a){y.securityQuestionsRequired=a},y.getEditableProfileSettings=function(){return G},y.getOriginalProfileSettings=function(){return I},y.isRegionalDataAvailable=function(){return A},y.isPhoneNumberAvailable=function(){return z},y.getUserSettings=function(){return v().then(w)},y.updateUserProfile=function(b){return a.post("/nxn-service/users/updateUserProfile",b).then(function(a){return"SUCCESS"===a.data.status&&(angular.copy(b.user,y.userProfileSettingsOriginal.userProfile),y.securityQuestionsRequired=n()),a.data},function(a){return a.data})},y.updateUserPreferences=function(b,c){return a.post(t()+"/profiles",b).then(function(a){return a.data.metadata.status.success&&angular.copy(c,y.userProfileSettingsOriginal.regional),a.data},function(a){return a.data})},y.updateForgotPasswordQA=function(b,c,d){return d?a.post("/nxn-service/users/updateForgotPasswordQA",b).then(function(a){for(var d=0;d<c.length;d++)parseInt(c[d].questionId)===b.fpsObject[d].questionId&&0===b.fpsObject[d].answer.length&&(b.fpsObject[d].answer=c[d].answer);return"SUCCESS"===a.data.status&&angular.copy(b.fpsObject,y.userProfileSettingsOriginal.forgotPasswordArray),a.data},function(a){return a.data}):a.post("/nxn-service/fps/updateForgotPasswordQA",b).then(function(a){for(var d=0;d<c.length;d++)parseInt(c[d].questionId)===b.userQaResponse[d].questionSequenceId&&0===b.userQaResponse[d].answer.length&&(b.userQaResponse[d].answer=c[d].answer);return a.data},function(a){return a.data})},y.getFPSFallback=function(){return d.getSysParam(B).then(function(a){return C===a?C:D},function(a){return a.data})},y.fetchReportingProfile=function(){return q()},y.updateERSReportingOptions=function(a){var b={profileData:{profileType:"reporting",reportingProfile:{ersNexenReporting:{ersReportingWorkFlow:a}}}};return g(b)},y.updateReportingPreferences=function(a){var b={};return b.profileData=o(a),g(b)},y.clearUserSettingsCache=function(b){var c="/nxn-service/users/purgeCache?commaSeparatedScopes="+b+"&shouldRefresh=true",d=a.get(c).then(function(a){return a.data},function(a){return a.data});return d},y.resetSecurity=function(){return angular.copy(y.userProfileSettingsOriginal.forgotPasswordArray,y.userProfileSettingsEditable.forgotPasswordArray)},y.resetProfile=function(){return angular.copy(y.userProfileSettingsOriginal.userProfile,y.userProfileSettingsEditable.userProfile)},y.resetUserPreferences=function(){return angular.copy(y.userProfileSettingsOriginal.regional,y.userProfileSettingsEditable.regional)},y.resetReportingPreferences=function(){return angular.copy(y.userProfileSettingsOriginal.reporting,y.userProfileSettingsEditable.reporting)},y.isEmpty=function(a){return"1234567890"===a&&(a=""),!a||0===a.length},y.isDuplicateAnswers=function(a){var b=!1;return angular.forEach(a,function(c){angular.equals(c.answer,x)||angular.forEach(a,function(a){!angular.equals(c.questionId,a.questionId)&&angular.equals(c.answer,a.answer)&&(b=!0)})}),b},y.setAnswerPristine=function(a,b,c,d){if(a===!1)for(var e=0;e<d.length;e++)parseInt(c)===d[e].questionId&&(d[e].answer=b,d[e].isPristine=!1);return d},y.countryCodesLookUpInfo=function(){return f.countryCodes},y.timeZoneArray=f.timeZones,y.timeFormat=f.timeFormat,y.dateStyle=f.dateStyle,y.dateSeperator=f.dateSeperator,y.negativeCash=f.negativeCash,y.leadingZero=f.leadingZero,y.dGrouping=f.dGrouping,y.reportLogo=f.reportLogo,y.isoLangs=f.languageCodes,y.currencyArray=f.currencyArray,y.logoSelection=f.logoSelection,y.clientType=f.clientType;var J=function(a){var b={};b.isExternalUser=a.isExternalUser,b.email=a.userProfile.user.email,b.businessPhone=a.userProfile.user.businessPhone,b.firstName=a.userProfile.user.firstName,b.lastName=a.userProfile.user.lastName,b.idField=a.userProfile.user.loginId,b.groupIdField=a.userProfile.userRole.userRoleId;var c=a.userDisplayLanguage,d=a.displayLanguageList,e=!1;if(angular.forEach(d,function(a){e||angular.lowercase(a.localeCode)===c&&(b.lang=a.languageDesc,e=!0)}),angular.isDefined(b.businessPhone)){if(b.businessPhone.indexOf("-")>0){var f=b.businessPhone.split("-");b.countryCode=f[0],angular.forEach(y.countryCodesLookUpInfo(),function(a){a.countryCode===b.countryCode&&(b.countryAndCodeObject=a)}),b.bPhone=f[1]}else b.bPhone=b.businessPhone;z=null!=b.bPhone&&!angular.isUndefined(b.bPhone)&&""!==b.bPhone&&"1234567890"!==b.bPhone}else z=!1;return angular.isUndefined(a.accountAliasInfo)||null===a.accountAliasInfo||(b.alias=a.accountAliasInfo.genUserIdAlias,b.gslId=a.accountAliasInfo.gslAliasId,b.subFundId=a.accountAliasInfo.subFundAlias),b.lang="English",b};return y}]),function(){"use strict";function a(a,b,c,d,e,f){function g(a,b,c){b.allAccounts===!0?a.selectedAccountType.name=f.ALL_ACCOUNTS:c===f.ACCOUNT?a.selectedAccountType.name=f.SPECIFIC_ACCOUNTS:a.selectedAccountType.name=f.SPECIFIC_ACCOUNT_GROUPS}function h(a,b){return a.sort(function(a,c){return a[b]>c[b]?1:c[b]>a[b]?-1:0})}this.fieldsInfo=[{dataField:"displayAccountNumber",headerName:"Account Number"},{dataField:"accountName",headerName:"Account Name"}],this.IMMSFieldsInfo=[{dataField:"displayAccountNumber",headerName:"Account Number"},{dataField:"accountType",headerName:"Type"},{dataField:"accountName",headerName:"Account Name"}],this.accountsGroupFieldsInfo=[{dataField:"accountGroupName",headerName:"Account Group"}],this.columnFields=[{title:"Action",dataField:"action",fixed:!0,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Name",dataField:"accountGroupName",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Type",dataField:"accountGroupType",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Accounts",dataField:"accountsCount",fixed:!1,default:!0,isSelected:!0,class:"text-center",visible:!0},{title:"Owner",dataField:"creatorName",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0,isDate:!1},{title:"Created",dataField:"createdTime",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0,isDate:!0},{title:"Last Updated",dataField:"lastUpdatedTime",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0,isDate:!0},{title:"Read Only",dataField:"readOnly",default:!0,isSelected:!0,class:"text-left",visible:!0,isDate:!1}],this.accountListColumnFields=[{title:"Account Number",dataField:"displayAccountNumber",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Account Name",dataField:"accountName",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Account Status",dataField:"accountStatus",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Account Type",dataField:"accountType",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0}],this.getExternalDataSourceHeaderDetail=function(a){for(var b=[],c=0;c<a.length;c++){var d={};d.dataField=a[c].columnKey,d.headerName=a[c].columnName,b.push(d)}return b},this.getAccountsObject=function(a){var b=[];if(a.length>0)for(var c=0;c<a.length;c++)"IMMS"===a[c].accountSource?b.push({accountName:a[c].accountName+"=IMMS",accountNumber:a[c].accountType.split("-")[1].trim()+a[c].accountNumber}):b.push({accountName:a[c].accountName,accountNumber:a[c].accountNumber});return b},this.getFilteredAccountGroupsByCreatorId=function(a,b){var c=[];if("*"===b)c=a;else if(a.length>0)for(var d=0;d<a.length;d++)b===a[d].creatorId.toLowerCase()&&c.push({accountGroupName:a[d].accountGroupName,accountGroupId:a[d].accountGroupId});return h(c,"accountGroupName")},this.getFilteredAccountByStatus=function(a,b){var c=[],d=a.externalDataSourceData.value.data;if(""===b)return this.getSpecificAcctData(d,a);if(d.length>0)for(var e=0;e<d.length;e++)if(b===d[e][a.externalDataSourceData.value.accountStatusKey].toLowerCase()){for(var f={},g=0;g<a.externalDataSourceData.value.columnDetails.length;g++){var h=a.externalDataSourceData.value.columnDetails[g].columnKey;f[h]=d[e][h]}c.push(f)}return c},this.getSpecificAcctData=function(a,b){var c=[];if(b.isExternalDataSource.value===!0)for(var d=0;d<a.length;d++){for(var e={},f=0;f<b.externalDataSourceData.value.columnDetails.length;f++){var g=b.externalDataSourceData.value.columnDetails[f].columnKey;e[g]=a[d][g]}c.push(e)}else if("IMMS"===b.accountType.value)for(var h=0;h<a.length;h++)c.push({accountNumber:a[h].accountNumber,accountName:a[h].accountName,accountSource:a[h].accountSource,accountType:a[h].accountType,itemMoved:!1,displayAccountNumber:a[h].displayAccountNumber});else for(var i=0;i<a.length;i++)c.push({accountNumber:a[i].accountNumber,accountName:a[i].accountName,accountSource:a[i].accountSource,itemMoved:!1,displayAccountNumber:a[i].displayAccountNumber});return c},this.getSpecificAcctGroupData=function(a){for(var b=[],c=0;c<a.length;c++)b.push({accountGroupName:a[c].accountGroupName,accountGroupId:a[c].accountGroupId});return b},this.setItemMovedData=function(a){for(var b=0;b<a.length;b++)a[b].itemMoved=!0;return a},this.getAccountGroupCreatorList=function(a,b,c){for(var d=[],e=0;e<b.data.data.length;e++)d.push(b.data.data[e].creatorId.toLowerCase());var f=d.filter(function(a,b,c){return c.indexOf(a)===b});for(d=[],e=0;e<f.length;e++)for(var g=0;g<b.data.data.length;g++)if(f[e]===b.data.data[g].creatorId.toLowerCase()&&c.toLowerCase()!==f[e].toLowerCase()){d.push({creatorId:f[e],creatorName:b.data.data[g].creatorName,creatorNameLowerCase:b.data.data[g].creatorName.toLowerCase()});break}return a.concat(d.sort(function(a,b){return a.creatorNameLowerCase>b.creatorNameLowerCase?1:b.creatorNameLowerCase>a.creatorNameLowerCase?-1:0}))},this.validateAccountGroupName=function(a,b,c){var d=/^[a-z\d\-_().\s]+$/i,e=/[A-Za-z0-9]/;return a.length<2&&!b?f.VALIDATION_MSG_TWO_ACCOUNTS_ERR_MSG:a.length>0&&b?f.VALIDATION_MSG_ACC_ALLACC_NOT_ALLOWED_ERR_MSG:""===c.trim()?f.VALIDATION_MSG_ACCOUNT_GROUP_EMPTY_ERR_MSG:e.test(c)?d.test(c)?"":f.VALIDATION_MSG_ACCOUNT_GROUP_ALLOWED_SYMBOLS_ERR_MSG:f.VALIDATION_MSG_ACCOUNT_GROUP_ALPHA_NUMERIC_ERR_MSG},this.validateCAAdminSelection=function(a,b,c){return a.length>0&&b.length>0?f.VALIDATION_MSG_CA_ADMIN_SINGLE_ACC_ACCGRP_ERR_MSG:a.length>1||b.length>1?f.VALIDATION_MSG_CA_ADMIN_MORE_ACC_ACCGRP_ERR_MSG:a.length>0&&c.allAccounts===!0?f.VALIDATION_MSG_CA_ADMIN_ACC_ALLACC_NOT_ALLOWED_ERR_MSG:b.length>0&&c.allAccounts===!0?f.VALIDATION_MSG_CA_ADMIN_ACCGRP_ALLACC_NOT_ALLOWED_ERR_MSG:""},this.setAccountControlData=function(a,b,c,d,e){a.selectedAccounts.value=b,a.showAccountGroup.value!==!0&&a.showAccountGroupOnly.value!==!0||(a.selectedAccountGroup.value=this.setItemMovedData(c)),d===f.ACCOUNT?(g(a,e,d),angular.copy(a.selectedAccounts.value,a.availableAccountControlItems)):(g(a,e,d),angular.copy(a.selectedAccountGroup.value,a.availableAccountControlItems)),a.selectedAccountControlItems=this.getAccountControlSelectedValue(a)},this.setAccountControlItemOnSelect=function(a,b){b.selectedAccountType.name!==f.SPECIFIC_ACCOUNTS||d("checkAlreadyExistsWithBranchCode")(b.selectedAccounts.value,a,"accountNumber")?b.selectedAccountType.name!==f.SPECIFIC_ACCOUNT_GROUPS||d("checkAlreadyExists")(b.selectedAccountGroup.value,a,"accountGroupId")||(b.selectedAccountGroup.value.push(a),a.itemMoved=!0):(b.selectedAccounts.value.push(a),a.itemMoved=!0),b.selectedAccountControlItems=this.getAccountControlSelectedValue(b)},this.removeAccountControlItemOnDeselect=function(a,b){var c;if(b.selectedAccountType.name===f.SPECIFIC_ACCOUNTS){for(c=b.selectedAccounts.value.length-1;c>=0;c--)if("IMMS"===a.accountSource.toUpperCase()){if(b.selectedAccounts.value[c].accountNumber===a.accountNumber&&a.accountType===b.selectedAccounts.value[c].accountType){b.selectedAccounts.value.splice(c,1),a.itemMoved=!1;break}}else if(b.selectedAccounts.value[c].accountNumber===a.accountNumber){b.selectedAccounts.value.splice(c,1),a.itemMoved=!1;break}}else for(c=b.selectedAccountGroup.value.length-1;c>=0;c--)if(b.selectedAccountGroup.value[c].accountGroupId===a.accountGroupId){b.selectedAccountGroup.value.splice(c,1),a.itemMoved=!1;break}b.selectedAccountControlItems=this.getAccountControlSelectedValue(b)},this.addAlreadySelectedAccountControlItems=function(a,b,c){if(b.length>0)for(var d=a.length-1;d>=0;d--)for(var e=0;e<b.length;e++)a[d][c]===b[e][c]&&a.splice(d,1);return b.concat(a)},this.getAccountControlSelectedValue=function(a){return a.showAccountGroup.value?a.selectedAccounts.value.length+" account(s) and "+a.selectedAccountGroup.value.length+" account group(s) selected":a.selectedAccounts.value.length+" account(s) selected"},this.openAdvanceAccountControl=function(a){var b={},c={controller:"workBenchAccountControlServiceController",backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/wb-common/account-control-v2/accountsControlModal.html",resolve:{accountControl:function(){return a}}};return e.showModal(c,b)},this.shift=function(a,b,c){var d,e=[],f=[];if(c){for(var g=a.length-1;g>=0;g--)d=a[g],d.$selected&&!d.itemMoved&&(d.itemMoved=!0,d.$selected=!1,e.push(d));for(var h=e.length-1;h>=0;h--)b.push(e[h]);return angular.copy(e,f),f}for(var i=a.length-1;i>=0;i--)d=a[i],d.$selected&&(a.splice(i,1),d.itemMoved=!1,d.$selected=!1,e.push(d));angular.copy(e,f);for(var j=b.length-1;j>=0;j--)for(var k=e.length-1;k>=0;k--)if(e[k].accountNumber===b[j].accountNumber){b[j].itemMoved=!1,e.splice(k,1);break}return f},this.shiftAll=function(a,b,c){var d,e=[];if("right"===c){for(var f=a.length-1;f>=0;f--)d=a[f],d.itemMoved||(d.itemMoved=!0,d.$selected=!1,e.push(d));for(var g=e.length-1;g>=0;g--)b.push(e[g])}else{for(var h=a.length-1;h>=0;h--)d=a[h],d.itemMoved&&(d.itemMoved=!1,a.splice(h,1),d.$selected=!1,e.push(d));for(var i=b.length-1;i>=0;i--)d=b[i],d.itemMoved&&(d.itemMoved=!1,d.$selected=!1)}},this.getPaginationRange=function(a){return a.getCurrentRange().start+" - "+a.getCurrentRange().end+" of "+a.getTotalLength()},this.handleErrorMessage=function(a,b){return angular.isUndefined(b)?""!==a.errorMessage&&(c.show("ERROR",a.errorMessage),!0):(c.show("ERROR",b),!0)}}angular.module("workBenchAccountControlModule").service("WBAccountControlUtilService",a),a.$inject=["nxn.Http","$window","nxnAlertService","$filter","ModalService","WBAC_CONSTANTS"]}(),function(){"use strict";function a(a,b,c,d,e,f){this.modalCtrlConstructor=function(c,g,h){function i(){return c.accountStatus.open&&c.accountStatus.closed?"":c.accountStatus.closed?"closed":"open"}function j(a){var b={alias:r.alias.value,productCode:r.productCode.value,accountSource:r.accountType.value,aliasToken:r.aliasToken.value,accountStatus:i(),searchText:"",limit:50,offset:0};d.getAccountControlAccountsDetails(b,"").then(function(b){var g=b.data;if(angular.isUndefined(g.error))if(0===g.data.length)s.data=g;else{s.data=g;var h=[];c.allAccountsData=[],angular.extend(h,r.getSpecificAcctData(s.data.data)),angular.extend(c.allAccountsData,r.getSpecificAcctData(s.data.data)),c.selectedAccount.value=r.selectedAccounts.value,c.selectAcctGrid.value=f("removeDuplicateFilter")(h,r.selectedAccounts.value,"accountNumber")}else g.error.code===c.aliasTokenExpireErrorCode&&"elasticSearchCall"===a?n(d.generateAliasToken(r),"account"):e.show("ERROR",g.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){c.accountDataLoaded=!0,r.isDataLoaded=!1})}function k(a){var b={alias:r.alias.value,aliasToken:r.aliasToken.value,productCode:r.productCode.value};d.getAccountControlAccountGroupsDetails(b,"entireAlias").then(function(b){var g=b.data;if(angular.isUndefined(g.error))if(0===g.data.length)t.data=g;else{t.data=g;var h=[];if(t.data.data.length>0)for(var i=0;i<t.data.data.length;i++)h.push(t.data.data[i].creatorId.toLowerCase());var j=h.filter(function(a,b,c){return c.indexOf(a)===b});if(h=[],t.data.data.length>0)for(i=0;i<j.length;i++)for(var k=0;k<t.data.data.length;k++)if(j[i]===t.data.data[k].creatorId.toLowerCase()&&c.wbUserId.toLowerCase()!==j[i].toLowerCase()){h.push({creatorId:j[i],creatorName:t.data.data[k].creatorName,creatorNameLowerCase:t.data.data[k].creatorName.toLowerCase()});break}c.groupBelongsTo=c.groupBelongsTo.concat(h.sort(function(a,b){return a.creatorNameLowerCase>b.creatorNameLowerCase?1:b.creatorNameLowerCase>a.creatorNameLowerCase?-1:0}));var l=[];c.allAccountGroupData=[],angular.extend(l,p(t.data.data,c.groupBelongsTo[0].creatorId)),angular.extend(c.allAccountGroupData,r.getSpecificAcctGroupData(t.data.data)),c.selectedAccountGroup.value=r.selectedAccountGroup.value,c.selectAcctGroupGrid.value=f("removeDuplicateFilter")(l,r.selectedAccountGroup.value,"accountGroupId"),c.accountsControlTableParams.setCurrentData(t.data.data,moment().format(),0,1)}else g.error.code===c.aliasTokenExpireErrorCode&&"elasticSearchCall"===a?n(d.generateAliasToken(r),"accountGroup"):e.show("ERROR",g.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){c.accountGroupsDataLoaded=!0,r.isDataLoaded=!1})}function l(a,b){d.createAccountGroup(a,r.aliasToken.value).then(function(a){var f=a.data;angular.isUndefined(f.error)?e.show("INFO","Account Group is created successfully."):f.error.code===c.aliasTokenExpireErrorCode&&"createAccountGroupCall"===b?n(d.generateAliasToken(r),"createAccountGroup"):e.show("ERROR",f.error.description),c.accGroupObj.accountsGroupName=" ",c.accGroupObj.readOnly=!1}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){r.isDataLoaded=!1})}function m(){d.deleteAccountGroup(c.deleteAccountGroupParams,r.aliasToken.value).then(function(a){var b=a.data;angular.isUndefined(b.error)?e.show("INFO","Account Group is deleted successfully."):b.error.code===c.aliasTokenExpireErrorCode?n(d.generateAliasToken(r),"deleteAccountGroup"):e.show("ERROR",b.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){r.isDataLoaded=!1})}function n(a,b){a.then(function(a){if(""===a.errorMessage)switch("NXN_CA"===r.productCode.value?r.aliasToken.value=a.viewAliasToken:r.aliasToken.value=a.aliasToken,b){case"account":j("newAliasTokenCall");break;case"accountGroup":k("newAliasTokenCall");break;case"showAccountGroup":c.showAccountGroup(c.currentShowItem,"newAliasTokenCall");break;case"showEditAccountGroup":c.showEditAccountGroup(c.currentEditItem,"newAliasTokenCall");break;case"createAccountGroup":c.createAccountGroup("newAliasTokenCall");break;case"editAccountGroup":c.editAccountGroup("newAliasTokenCall");break;case"deleteAccountGroup":m()}else e.show("ERROR",a.errorMessage)})}function o(a){var b=[];if(a.length>0)for(var c=0;c<a.length;c++)"IMMS"===a[c].accountSource?b.push({accountName:a[c].accountName+"=IMMS",accountNumber:a[c].accountType.split("-")[1].trim()+a[c].accountNumber}):b.push({accountName:a[c].accountName,accountNumber:a[c].accountNumber});return b}function p(a,b){var d=[];if("*"===b)return c.allAccountGroupData;if(a.length>0){for(var e=0;e<a.length;e++)b===a[e].creatorId.toLowerCase()&&d.push({accountGroupName:a[e].accountGroupName,accountGroupId:a[e].accountGroupId});return d}return d}function q(a,b){var d=[];if(c.accountStatus.open&&c.accountStatus.closed)return c.allAccountsData;if(a.length>0){for(var e=0;e<a.length;e++){var f=c.accountStatus.closed?"closed":"open";f===a[e].accountStatus.toLowerCase()&&("IMMS"===r.accountType.value?d.push({accountNumber:a[e].accountNumber,accountName:a[e].accountName,accountType:a[e].accountType,displayAccountNumber:a[e].displayAccountNumber}):d.push({accountNumber:a[e].accountNumber,accountName:a[e].accountName,displayAccountNumber:a[e].displayAccountNumber}))}return d}return d}var r=g.value;c.WBAccountControlService=r,c.modalOkCallBack=g.callbackFunction,c.reset={},c.accountsFilterObj={},c.reset.leftSearchBox="",c.reset.rightSearchBox="",c.accountsFilterObj.makeServiceCall=!1,c.accountsFilterObj.accountStatus="open",r.isDataLoaded=!0;var s={data:{data:[]}},t={data:{data:[]}};return c.accountDataLoaded=!1,c.accountGroupsDataLoaded=!1,c.tabs={},c.tabs.showAccountGroup=r.showAccountGroup.value,c.accGroupObj={},c.accGroupObj.accountsGroupName="",c.accGroupObj.editAccountsGroupName="",c.accGroupObj.readOnly=!1,c.accGroupObj.editReadOnly=!1,c.showManageAccountFlag=!0,c.validationFlag=!1,c.validationMsg="",c.accountStatus={open:!0,closed:!1},c.accountStatusValidation=!1,c.wbUserId=d.getWBUserId(),c.accountGroupBelongsTo={},c.groupBelongsTo=[{creatorId:c.wbUserId.toLowerCase(),creatorName:"Only Mine"},{creatorId:"*",creatorName:"ALL"}],c.accountGroupBelongsTo.selected=c.groupBelongsTo[0],c.currentAccountGroupName="",c.currentAccountGroupCreatedBy="",c.currentAccountGroupId="",c.selectedAccount={},c.selectedAccount.value=[],c.selectAcctGrid={},c.selectAcctGrid.value=[],c.selectedAccountGroup={},c.selectedAccountGroup.value=[],c.selectAcctGroupGrid={},c.selectAcctGroupGrid.value=[],c.selectedEditAccount={},c.selectedEditAccount.value=[],c.selectEditAcctGrid={},c.selectEditAcctGrid.value=[],c.saveObject={},c.saveObject.allAccounts=!1,c.saveObject.saveAccountGroup=!1,c.currentTab="Specific Accounts"===r.selectedAccountType.name?"account":"accountGroups",c.showCurrentTab="Specific Accounts"===r.selectedAccountType.name,c.showAccountGroupEditFlag=!1,c.aliasTokenExpireErrorCode="CIWAU014",c.setAccountGroup=function(a){c.saveObject.saveAccountGroup=a},c.setAllAccount=function(a){a||(c.saveObject.allAccounts=a)},c.columnFields=[{title:"Action",dataField:"action",fixed:!0,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Name",dataField:"accountGroupName",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Type",dataField:"accountGroupType",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Accounts",dataField:"accountsCount",fixed:!1,default:!0,isSelected:!0,class:"text-center",visible:!0},{title:"Owner",dataField:"creatorName",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0,isDate:!1},{title:"Created",dataField:"createdTime",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0,isDate:!0},{title:"Last Updated",dataField:"lastUpdatedTime",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0,isDate:!0},{title:"Read Only",dataField:"readOnly",default:!0,isSelected:!0,class:"text-left",visible:!0,isDate:!1}],c.$watch("accountsControlTableParams.searchText",function(a,b){a!==b&&(c.accountsControlTableParams.filter(c.accountsControlTableParams.searchText),c.accountsControlTableParams.reload())}),c.accountsControlTableParams=b.get({sorting:{securityId:"asc"}},{},!1,[],moment().format(),c.minOffsetLimit),c.accountsControlTableParams.setColumns(c.columnFields),c.accountsControlTableParams.setExportAvailable(!1),c.selectedAccount.value=r.selectedAccounts.value,c.selectedAccountGroup.value=r.selectedAccountGroup.value,c.initialSelectedAccount=[],c.initialSelectedAccountGroup=[],angular.extend(c.initialSelectedAccount,r.selectedAccounts.value),angular.extend(c.initialSelectedAccountGroup,r.selectedAccountGroup.value),"account"===c.currentTab?r.isDataLoaded=!1:"accountGroups"===c.currentTab?k("elasticSearchCall"):r.isDataLoaded=!1,c.showTab=function(a){c.validationFlag=!1,c.currentTab=a,r.isDataLoaded=!0,"account"===a&&c.accountDataLoaded===!1?j("elasticSearchCall"):"accountGroups"===a&&c.accountGroupsDataLoaded===!1?k("elasticSearchCall"):"manageGroups"===a&&c.accountGroupsDataLoaded===!1?k("elasticSearchCall"):r.isDataLoaded=!1},"IMMS"===r.accountType.value?c.fieldsInfo=[{dataField:"displayAccountNumber",headerName:"Account Number"},{dataField:"accountType",headerName:"Type"},{dataField:"accountName",headerName:"Account Name"}]:c.fieldsInfo=[{dataField:"displayAccountNumber",headerName:"Account Number"},{dataField:"accountName",headerName:"Account Name"}],c.accountsGroupFieldsInfo=[{dataField:"accountGroupName",headerName:"Account Group"}],c.isHeaderSortable=!0,c.dataPerPage=50,c.close=function(){var a=r.setItemMovedData(c.initialSelectedAccount);r.selectedAccounts.value=a,a.length>5?(r.parentSelectedAccounts=" ",r.accValidationMsg=!0):(r.parentSelectedAccounts=a,r.accValidationMsg=!1),r.showAccountGroup.value===!0&&(r.selectedAccountGroup.value=c.initialSelectedAccountGroup,c.initialSelectedAccountGroup.length>5?(r.parentSelectedAccountGroups=" ",r.accGrpValidationMsg=!0):(r.parentSelectedAccountGroups=c.initialSelectedAccountGroup,r.accGrpValidationMsg=!1)),h.dismiss("cancel")},c.sendSelectedAccounts=function(){c.selectedAccount.value.length<=1e3&&(c.selectedAccount.value.length>5?(r.selectedAccounts.value=c.selectedAccount.value,r.parentSelectedAccounts=" ",r.accValidationMsg=!0):(r.selectedAccounts.value=c.selectedAccount.value,r.parentSelectedAccounts=c.selectedAccount.value,r.accValidationMsg=!1),r.showAccountGroup.value===!0&&(c.selectedAccountGroup.value.length>5?(r.selectedAccountGroup.value=c.selectedAccountGroup.value,r.parentSelectedAccountGroups=" ",r.accGrpValidationMsg=!0):(r.selectedAccountGroup.value=c.selectedAccountGroup.value,r.parentSelectedAccountGroups=c.selectedAccountGroup.value,r.accGrpValidationMsg=!1)),c.accountControlData=r.getAccountControlData(),"account"===c.currentTab?r.selectedAccountType.name="Specific Accounts":r.selectedAccountType.name="Specific Account Groups",h.dismiss("cancel"))},c.resetAccCont=function(){c.accountStatus={open:!0,closed:!1};var a=[];if(angular.extend(a,q(s.data.data,c.accountStatus)),c.selectAcctGrid.value=a,c.selectedAccount.value=[],r.selectedAccounts.value=[],c.reset.leftSearchBox="",c.reset.rightSearchBox="",r.showAccountGroup.value===!0){c.accountGroupBelongsTo.selected=c.groupBelongsTo[1];var b=[];angular.extend(b,p(t.data.data,c.groupBelongsTo[0].creatorId)),c.selectAcctGroupGrid.value=b,c.selectedAccountGroup.value=[],r.selectedAccountGroup.value=[]}},c.applyFiltersSelectedAcct=function(){c.accountStatusValidation=!1,c.accountStatus.open||c.accountStatus.closed?(r.isDataLoaded=!0,c.accountsFilterObj.makeServiceCall=!0,c.accountsFilterObj.accountStatus=i(),r.isDataLoaded=!1):c.accountStatusValidation=!0},c.applyFiltersSelectedAcctGrp=function(){r.isDataLoaded=!0,c.selectAcctGroupGrid.value=f("removeDuplicateFilter")(p(t.data.data,c.accountGroupBelongsTo.selected.creatorId),c.selectedAccountGroup.value,"accountGroupId"),r.isDataLoaded=!1},c.showEditAccGroup=function(a){c.showCurrentModal=a},c.accountListColumnFields=[{title:"Account Number",dataField:"displayAccountNumber",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Account Name",dataField:"accountName",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Account Status",dataField:"accountStatus",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Account Type",dataField:"accountType",fixed:!1,default:!0,isSelected:!0,class:"text-left",visible:!0}],c.$watch("accountsListTableParams.searchText",function(a,b){a!==b&&(c.accountsListTableParams.filter(c.accountsListTableParams.searchText),c.accountsListTableParams.reload())}),c.accountsListTableParams=b.get({sorting:{securityId:"asc"}},{},!1,[],moment().format(),c.minOffsetLimit),c.accountsListTableParams.setColumns(c.accountListColumnFields),c.accountsListTableParams.setExportAvailable(!1),c.showAccountGroup=function(a,b){c.currentShowItem=a,r.isDataLoaded=!0;var f={alias:r.alias.value,accountSource:r.accountType.value,aliasToken:r.aliasToken.value,accountGroupId:a.accountGroupId,productCode:r.productCode.value};d.getAccountControlAccountsDetails(f,"accountList").then(function(f){var g=f.data;angular.isUndefined(g.error)?0===g.data.length?e.show("ERROR","No Records found for your search criteria!"):(c.accountsListTableParams.setCurrentData(g.data,moment().format(),0,1),c.currentAccountGroupName=a.accountGroupName,c.showAccountListFlag=!0,c.showManageAccountFlag=!1):g.error.code===c.aliasTokenExpireErrorCode&&"showAccountGroupCall"===b?n(d.generateAliasToken(r),"showAccountGroup"):e.show("ERROR",g.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){r.isDataLoaded=!1})},c.showEditAccountGroup=function(a,b){c.validationFlag=!1,c.validationMsg="",c.currentEditItem=a,r.isDataLoaded=!0;var g={alias:r.alias.value,accountGroupId:a.accountGroupId,aliasToken:r.aliasToken.value,productCode:r.productCode.value};d.getAccountControlAccountsDetails(g,"accountList").then(function(g){var h=g.data;if(angular.isUndefined(h.error))if(0===h.data.length)c.selectedEditAccount.value=[],c.selectEditAcctGrid.value=[],e.show("ERROR","No Records found for your search criteria!");else if(c.accountDataLoaded===!1){c.selectedEditAccount.value=h.data;var i={alias:r.alias.value,productCode:r.productCode.value,aliasToken:r.aliasToken.value,accountSource:r.accountType.value};d.getAccountControlAccountsDetails(i,"entireAlias").then(function(b){var d=b.data;if(angular.isUndefined(d.error))if(0===d.data.length)s.data=d;else{s.data=d;var g=[];angular.extend(g,s.data.data),c.selectEditAcctGrid.value=f("removeDuplicateFilter")(g,c.selectedEditAccount.value,"accountNumber"),c.currentAccountGroupName=a.accountGroupName,c.currentAccountGroupCreatedBy=a.creatorId,c.accGroupObj.editAccountsGroupName=a.accountGroupName,c.currentAccountGroupId=a.accountGroupId,c.editAccountsGroupName=a.accountGroupName,c.showAccountListFlag=!1,c.showManageAccountFlag=!1,c.showAccountGroupEditFlag=!0;var h=[];c.allAccountsData=[],angular.extend(h,r.getSpecificAcctData(s.data.data)),angular.extend(c.allAccountsData,r.getSpecificAcctData(s.data.data)),c.selectedAccount.value=r.selectedAccounts.value,c.selectAcctGrid.value=f("removeDuplicateFilter")(h,r.selectedAccounts.value,"accountNumber")}else e.show("ERROR",d.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){c.accountDataLoaded=!0,r.isDataLoaded=!1})}else{var j=[];c.selectedEditAccount.value=h.data,angular.extend(j,s.data.data),c.selectEditAcctGrid.value=f("removeDuplicateFilter")(j,h.data,"accountNumber"),c.currentAccountGroupName=a.accountGroupName,c.currentAccountGroupCreatedBy=a.creatorId,c.accGroupObj.editAccountsGroupName=a.accountGroupName,c.currentAccountGroupId=a.accountGroupId,c.editAccountsGroupName=a.accountGroupName,c.showAccountListFlag=!1,c.showManageAccountFlag=!1,c.showAccountGroupEditFlag=!0}else h.error.code===c.aliasTokenExpireErrorCode&&"showEditAccountGroupSearchCall"===b?n(d.generateAliasToken(r),"showEditAccountGroup"):e.show("ERROR",h.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){r.isDataLoaded=!1})},c.goBackToManage=function(){c.showAccountListFlag=!1,
c.showAccountGroupEditFlag=!1,c.showManageAccountFlag=!0},c.createAccountGroup=function(a){var b=/^[a-z\d\-_().\s]+$/i,f=/[A-Za-z0-9]/;if(c.selectedAccount.value.length<2&&!c.saveObject.allAccounts)c.validationMsg="Select at least two accounts to create account group.",c.validationFlag=!0;else if(""===c.accGroupObj.accountsGroupName.trim())c.validationMsg="Account group name cannot be empty.",c.validationFlag=!0;else if(f.test(c.accGroupObj.accountsGroupName)||f.test(c.accGroupObj.accountsGroupName))if(b.test(c.accGroupObj.accountsGroupName)){c.validationFlag=!1,r.isDataLoaded=!0;var g=[];if(c.saveObject.allAccounts){var h={alias:r.alias.value,productCode:r.productCode.value,aliasToken:r.aliasToken.value,accountSource:r.accountType.value,accountStatus:i(),searchText:"",limit:5e3,offset:0};d.getAccountControlAccountsDetails(h,"").then(function(b){var f=b.data;angular.isUndefined(f.error)?0===f.data.length?s.data=f:(s.data=f,g=g.concat(f.data),f.pagination.total>5e3?d.getAllAccountDetails(f.pagination.total,h).then(function(b){g=g.concat(b),c.createAccountGroupParams={accountGroupName:c.accGroupObj.accountsGroupName,createUser:d.getWBUserId().toUpperCase(),accountGroupType:"0",accountGroupSubType:"0",productCode:r.productCode.value,context:"C/A",readOnly:c.accGroupObj.readOnly,alias:r.alias.value,selectedAccounts:o(g)},l(c.createAccountGroupParams,a)}).catch(function(a){e.show("ERROR","An error occurred when contacting the backend service."+a.data),r.isDataLoaded=!1}):(c.createAccountGroupParams={accountGroupName:c.accGroupObj.accountsGroupName,createUser:d.getWBUserId().toUpperCase(),accountGroupType:"0",accountGroupSubType:"0",productCode:r.productCode.value,context:"C/A",readOnly:c.accGroupObj.readOnly,alias:r.alias.value,selectedAccounts:o(g)},l(c.createAccountGroupParams,a))):f.error.code===c.aliasTokenExpireErrorCode&&"createAccountGroupCall"===a?n(d.generateAliasToken(r),"createAccountGroup"):e.show("ERROR",f.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){c.accountDataLoaded=!0,r.isDataLoaded=!1})}else c.createAccountGroupParams={accountGroupName:c.accGroupObj.accountsGroupName,createUser:d.getWBUserId().toUpperCase(),accountGroupType:"0",accountGroupSubType:"0",productCode:r.productCode.value,context:"C/A",readOnly:c.accGroupObj.readOnly,alias:r.alias.value,selectedAccounts:o(c.selectedAccount.value)},l(c.createAccountGroupParams,a)}else c.validationMsg="Only Underscore,Dash,Parentheses,Period and Spaces are allowed.",c.validationFlag=!0;else c.validationMsg="Account Group must contain at least one alphanumeric character.",c.validationFlag=!0},c.editAccountGroup=function(a){var b={accountGroupName:c.accGroupObj.editAccountsGroupName,readOnly:c.accGroupObj.editReadOnly,alias:r.alias.value,productCode:r.productCode.value,selectedAccounts:o(c.selectedEditAccount.value)};c.selectedEditAccount.value.length<2&&!c.saveObject.allAccounts?(c.validationMsg="Select at least two accounts to create or update account group.",c.validationFlag=!0):c.currentAccountGroupName===c.accGroupObj.editAccountsGroupName?(c.validationFlag=!1,c.validationMsg="",r.isDataLoaded=!0,d.updateAccountGroup(b,c.currentAccountGroupId,r.aliasToken.value).then(function(b){var f=b.data;angular.isUndefined(f.error)?e.show("INFO","Account Group is updated successfully"):f.error.code===c.aliasTokenExpireErrorCode&&"editAccountGroupCall"===a?n(d.generateAliasToken(r),"editAccountGroup"):e.show("ERROR",f.error.description),c.accGroupObj.editReadOnly=!1}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){r.isDataLoaded=!1})):(c.validationFlag=!1,c.validationMsg="",r.isDataLoaded=!0,c.createAccountGroupParams={accountGroupName:c.accGroupObj.editAccountsGroupName,createUser:d.getWBUserId().toUpperCase(),accountGroupType:"0",accountGroupSubType:"0",productCode:r.productCode.value,context:"C/A",readOnly:c.accGroupObj.editReadOnly,alias:r.alias.value,selectedAccounts:o(c.selectedEditAccount.value)},d.createAccountGroup(c.createAccountGroupParams,r.aliasToken.value).then(function(b){var f=b.data;angular.isUndefined(f.error)?e.show("INFO","Account Group is created successfully."):f.error.code===c.aliasTokenExpireErrorCode&&"editAccountGroupCall"===a?n(d.generateAliasToken(r),"editAccountGroup"):e.show("ERROR",f.error.description),c.accGroupObj.accountsGroupName=" ",c.accGroupObj.readOnly=!1}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){r.isDataLoaded=!1}))},c.showDeleteWarningPrompt=function(b,f){c.currentDeleteItem=b;var g={};g.bodyUrl="partials/wb-common/submitWarningPopUp.html",g.headerText="Confirmation",g.closeButtonText="No",g.actionButtonText="Yes",g.modalContentText="Are you sure want to delete account group : "+b.accountGroupName,g.hideHeaderClose=!0;var h={backdrop:!1,keyboard:!1,size:"sm"};a.showModal(h,g).result.then(function(a){a&&(r.isDataLoaded=!0,c.deleteAccountGroupParams={accountGroupId:b.accountGroupId,alias:r.alias.value,productCode:r.productCode.value},d.deleteAccountGroup(c.deleteAccountGroupParams,r.aliasToken.value).then(function(a){var b=a.data;angular.isUndefined(b.error)?e.show("INFO","Account Group is deleted successfully."):b.error.code===c.aliasTokenExpireErrorCode&&"deleteAccountGroupCall"===f?n(d.generateAliasToken(r),"deleteAccountGroup"):e.show("ERROR",b.error.description)}).catch(function(a){var b="";e.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){r.isDataLoaded=!1}))})},c}}var b=angular.module("WBAccountControl");a.$inject=["ModalService","nxnNgTableParams","ExportService","WBAccountControlDataRetrieval","nxnAlertService","$filter"],b.service("WBAccountControlService",a)}(),angular.module("web.workbench").factory("WebWorkbench",["$http","$log","nxnGuidFactory",function(a,b,c){return{getCountryNames:function(){return a.post("/wbi-delivery/webZTFPlatformServices/instructions/v1/countries").then(function(a){return a.data.result.country})},getAccounts:function(){var b="BNYM_DELINSTR_STD_COMBINED",c="TIMW005",d="ADCXNZX";return a.post("/diWBIAccounts/webZTFReportingServices/accountcontrol/v1/account?alias="+c+"&user="+d+"&acctControlName="+b).then(function(a){return a})},getDILookup:function(b,c){var d="ADCXNZX";return a.get("/wbi-delivery/webZTFPlatformServices/instructions/v1/deliveryinstructionlookup?countries="+b+"&accounts="+c+"&userId="+d).then(function(a){return a})}}}]),function(){"use strict";function a(){function a(a){return!!angular.isString(a)&&(a=a.toLowerCase(),null!==a.match(c)||null!==a.match(d)||null!==a.match(e)||null!==a.match(f))}function b(a){return angular.isString(a)?(a=a.toLowerCase(),null!==a.match(c)||null!==a.match(f)?a:null!==a.match(d)?a.replace(d,"whitelabel$1.$2.accessportals.com"):null!==a.match(e)?a.replace(e,"whitelabel.$1.accessportals.com").replace("uat","test"):a):a}var c=/^localhost$/i,d=/^nexen(\d{1,3})\.(dev|test)\.bnymellon\.com$/i,e=/^(dev|uat)-nexen\.bnymellon\.com$/i,f=/^whitelabel(\d{1,3})?\.(dev|test)\.accessportals\.com$/i;return{isTestingEnv:a,getWhiteLabelDomain:b}}angular.module("nxn.whiteLabel").service("NxnDomainService",a),a.$inject=[]}(),function(){"use strict";function a(a,b,c){function d(d){if(b.isTestingEnv(d))return a.get("/nxn-service/public/wlTestUrls").then(function(a){return angular.isDefined(a.data)?a.data:f},function(a){return f});var e=c.defer();return e.resolve(f),e.promise}function e(a,c){if(a=angular.isString(a)?a:"",angular.isArray(c))for(var d,e=b.getWhiteLabelDomain(a),f=""===e||"localhost"===e,g=0;g<c.length;g++){d=c[g].plWLMap;for(var h=0;h<d.length;h++)d[h].wlHref=f?"/"+d[h].wlKey:"https://"+e+"/"+d[h].wlKey}return c}var f=[];return{getWhiteLabelTestUrls:d,modifyWhiteLabelTestUrls:e}}angular.module("nxn.whiteLabel").service("NxnWhiteLabelTestService",a),a.$inject=["nxn.Http","NxnDomainService","$q"]}(),function(){"use strict";function a(a,b,c){function d(){return a.get("/nxn-service/wl/plList").then(function(a){return angular.isDefined(a.data)?a.data:e},function(a){return e})}var e=[];return{getUsersWLPLCodes:d}}angular.module("nxn.whiteLabel").service("NxnWLDefaultContentService",a),a.$inject=["nxn.Http","NxnDomainService","$q"]}(),angular.module("qqm.workbench").provider("QQMWorkbench",[function(a){return{$get:["nxn.Http","$http",function(a,b){return{getPositionDetail:function(b,c){var d={alias:"TIM8MAB","Content-Type":"application/json"},e={headers:d,timeout:6e4,method:"GET"};return a.get("/qqm-workbench/qqmservices/v1/position/detail/"+b+"?recordid="+c,e)},getPreferedTransaction:function(){var b={alias:"TIM8MAB","Content-Type":"application/json"},c={headers:b,timeout:6e4,method:"GET"};return a.get("/qqm-workbench/qqmservices/v1/transaction/preferredconfig",c)},getTransactionDetail:function(b,c){var d={alias:"TIM8MAB","Content-Type":"application/json"},e={headers:d,timeout:6e4,method:"GET"};return a.get("/qqm-workbench/qqmservices/v1/transaction/detail/"+b+"?recordid="+c,e)},getPostionAccounts:function(){return a.get("/qqm-workbench/qqmservices/v1/position/accounts/allowedvalues")},getPostionAccountGroups:function(){return a.get("/qqm-workbench/qqmservices/v1/position/accountgroups/allowedvalues")},getExportPDF:function(b,c){var d={alias:"TIM8MAB","Content-Type":"application/pdf"},e={headers:d,timeout:6e4,method:"GET"};return"positionEnquiry"===c?a.get("/qqm-workbench/qqmservices/v1/position/detail/pdf/"+b,e):"transactionEnquiry"===c?a.get("/qqm-workbench/qqmservices/v1/transaction/detail/pdf/"+b,e):void 0},getExportExcel:function(b,c){var d={alias:"TIM8MAB","Content-Type":"application/vnd.ms-excel"},e={headers:d,timeout:6e4,method:"GET"};return"positionEnquiry"===c?a.get("/qqm-workbench/qqmservices/v1/position/detail/excel/"+b,e):"transactionEnquiry"===c?a.get("/qqm-workbench/qqmservices/v1/transaction/detail/excel/"+b,e):void 0},getPostionSummary:function(){function c(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}var d={alias:"TIM8MAB","Content-Type":"application/json"},e={headers:d,timeout:3e4,method:"GET",transformResponse:c(b.defaults.transformResponse,function(a){if(angular.isDefined(a)&&null!==a&&angular.isDefined(a.rows))for(var b=0;b<a.rows.length;b++){var c=a.rows[b].detailUri;if(!angular.isUndefined(c)&&c.length>0){a.rows[b].recordId=c.substring(c.lastIndexOf("=")+1,c.length);var d=c.substring(c.lastIndexOf("/")+1,c.length);null!==d&&(a.rows[b].positionId=d.substring(0,d.indexOf("?")))}}else angular.isDefined(a)&&null!==a&&angular.isDefined(a.errors)&&"No records found for the set parameters."===a.errors.message&&(a.rows=[]);return a})};return a.get("/qqm-workbench/qqmservices/v1/position/summary?offset=0&limit=100",e)},getPreferedConfig:function(){var b={alias:"TIM8MAB","Content-Type":"application/json"},c={headers:b,timeout:6e4,method:"GET"};return a.get("/qqm-workbench/qqmservices/v1/position/preferredconfig",c)},postSetPreferredConfig:function(b){var c={alias:"TIM8MAB","Content-Type":"application/json"},d={headers:c,timeout:6e4,method:"POST"};return a.post("/qqm-workbench/qqmservices/v1/position/setpreferredconfig",b,d)},setPreferredConfigTransaction:function(b){var c={alias:"TIM8MAB","Content-Type":"application/json"},d={headers:c,timeout:6e4,method:"POST"};return a.post("/qqm-workbench/qqmservices/v1/transaction/setpreferredconfig",b,d)},getTransactionSummary:function(){function c(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}var d={alias:"TIM8MAB","Content-Type":"application/json"},e={headers:d,timeout:3e4,method:"GET",transformResponse:c(b.defaults.transformResponse,function(a){if(angular.isDefined(a)&&null!==a&&angular.isDefined(a.rows))for(var b=0;b<a.rows.length;b++){var c=a.rows[b].detailUri;if(!angular.isUndefined(c)&&c.length>0){a.rows[b].recordId=c.substring(c.lastIndexOf("=")+1,c.length);var d=c.substring(c.lastIndexOf("/")+1,c.length);null!==d&&(a.rows[b].transactionId=d.substring(0,d.indexOf("?")))}}else angular.isDefined(a)&&null!==a&&angular.isDefined(a.errors)&&"No records found for the set parameters."===a.errors.message&&(a.rows=[]);return a})};return a.get("/qqm-workbench/qqmservices/v1/transaction/summary?offset=0&limit=100",e)}}}]}}]),angular.module("qqm.workbench").service("qqm.searchParamValues",[function(){this.values={staticLocation:[{name:"ECL",code:"ECL",selected:!1},{name:"CBF",code:"CBF",selected:!1},{name:"FRB",code:"FRB",selected:!1},{name:"DTC",code:"DTC",selected:!1}],assetType:[{name:"All",code:"*"},{name:"CONTRACTS",code:"2300"},{name:"DEBT",code:"2100"},{name:"DEBT TBA ANNOUNCEMENTS",code:"TBA"},{name:"DEBT US TREASURIES",code:"TRE"},{name:"DEBT US AGENCY",code:"AGD"},{name:"DEBT US PASS-THROUGH MBS",code:"MBS"},{name:"EQUITIES",code:"2000"},{name:"MISCELLANEOUS",code:"1900"},{name:"MISCELLANEOUS DEBT",code:"2400"},{name:"MONEY MARKET INSTRUMENTS",code:"2500"},{name:"OTHER",code:"OTH"}],dynamicLocation:[{name:"All",code:"*"},{name:"BNYM ASSET SERVICING BV",code:"ASN"},{name:"HBMB MALAYSIA BERHAD",code:"BBB"},{name:"BANGKOK BANK",code:"BBK"},{name:"ING BELGIUM SA/NV",code:"BBL"},{name:"BCO BILB.VIZC.ARGENTARIA(BBVA)",code:"BBV"},{name:"INTESA SANPAOLO SPA",code:"BCI"},{name:"BHF-BANK",code:"BHF"},{name:"BK COM PORTUGUES",code:"BPP"},{name:"BNP PARIBAS SEC SVCES",code:"BPR"},{name:"CITIBANK NA BRAZIL EXEMPT LOC",code:"BRE"},{name:"BANK OF TOKYO-MITSUBISHI UFJ",code:"BTM"},{name:"CREST GILTS",code:"CGO"},{name:"CIBC MELLON GL.SEC.SERV.CO.",code:"CIB"},{name:"BNY LDN-CREST",code:"CRE"},{name:"BNY LDN IRISH-CREST",code:"CRI"},{name:"CREDIT SUISSE AG ZURICH",code:"CSZ"},{name:"DBS SINGAPORE",code:"DBS"},{name:"DNB BANK ASA",code:"DNC"},{name:"EUROCLEAR NETHERLANDS",code:"ECN"},{name:"FLOOR",code:"FLR"},{name:"HKK SHANGHAI BANK",code:"HKK"},{name:"HK SHANGHAI IND",code:"HKN"},{name:"HSBC MANILA PH",code:"HKP"},{name:"HSBC BANGKOK",code:"HSB"},{name:"HSBC TAIWAN",code:"HST"},{name:"NATL AUSTRALIA BK LTD",code:"NAB"},{name:"MIT NAD",code:"NAD"},{name:"ROYAL BANK OF CANADA",code:"RBC"},{name:"DEUTSCHE BANK INDONESIA",code:"RMI"},{name:"DEUTSCHE BK PH",code:"RMP"},{name:"STANDARD BANK SA",code:"SBB"},{name:"SCB TAIWAN LIMITED",code:"SBW"},{name:"SKANDINAVISKA EB",code:"SEB"},{name:"SEB FINLAND",code:"SEF"},{name:"SEB OSLO",code:"SEN"},{name:"NORDEA BANK FINLAND",code:"UBB"},{name:"UNCERTIFICATED STOCK",code:"UNC"},{name:"BNYM UK VAULT",code:"VLT"}],positionStatus:[{name:"All",code:"*"},{name:"At Registrar",code:"T"},{name:"Available",code:"B"},{name:"Blocked Proxy",code:"V"},{name:"Collateral",code:"E"},{name:"On Loan",code:"L"},{name:"Pledged",code:"P"},{name:"Restricted",code:"R"},{name:"Segregated",code:"D"},{name:"Third Party Loan",code:"A"},{name:"Other",code:"O"}],securityIdentifier:[{name:"ISIN",code:"ISN"},{name:"CUSIP/CINS",code:"CUS"},{name:"QUICK",code:"KWK"},{name:"SEDOL",code:"SED"},{name:"SICOVAM",code:"SIC"},{name:"TICKER",code:"TKR"},{name:"VALOREN",code:"VAL"},{name:"WPK",code:"WPK"}],transactionStatus:[{name:"All",code:"*"},{name:"Settled",code:"STL"},{name:"Pending",code:"PND"},{name:"Failing",code:"FAIL"},{name:"Cancelled",code:"CAN"},{name:"Unverified",code:"UNV"},{name:"Executed",code:"EXEC"},{name:"Opened",code:"OPEN"}],transactionType:[{name:"All",code:"*"},{name:"Buy",code:"B"},{name:"Cash Deposit",code:"CD"},{name:"Cash Withdrawal",code:"CW"},{name:"Corporate Actions",code:"CA"},{name:"Capital Stock",code:"CU"},{name:"Dividend",code:"DV"},{name:"Foreign Exchange",code:"FX"},{name:"Interest",code:"IT"},{name:"Internal Movement",code:"IM"},{name:"Maturity",code:"MT"},{name:"Other",code:"O"},{name:"Pay Down",code:"PD"},{name:"Pay Up",code:"PU"},{name:"Security Deposit",code:"SD"},{name:"Security Withdrawal",code:"SW"},{name:"Sell",code:"S"}],dateRange:[{name:"Real Time Today",code:"T"},{name:"Prior Weekday",code:"P"},{name:"All History",code:"H"},{name:"Specific Range",code:"S"}],dateType:[{name:"Create Date",code:"0"},{name:"Trade Date",code:"1"},{name:"Contractual Settle Date",code:"2"},{name:"Actual Settle Date",code:"3"},{name:"Alternate Delivery Date",code:"4"},{name:"Order Date",code:"5"},{name:"Cancel Date",code:"6"}]}}]),angular.module("qqm.workbench").service("qqm.selectedAccounts",[function(){return{setSelectedAccounts:function(a){this.selectedAccounts=a},getSelectedAccounts:function(){return this.selectedAccounts}}}]),angular.module("qqm.workbench").service("qqm.Holdings",[function(){return{getProperties:function(){return{assetType:{name:"assetType",multiSelect:!0},positionStatus:{name:"positionStatus",multiSelect:!0},specificSecurities:{name:"specificSecurities",multiSelect:!1},accounts:{name:"accounts",multiSelect:!0},securityIdentifier:{name:"securityIdentifier",multiSelect:!1},staticLocation:{name:"staticLocation",multiSelect:!0},dynamicLocation:{name:"dynamicLocation",multiSelect:!0}}}}}]),angular.module("qqm.workbench").service("qqm.Activity",[function(){return{getProperties:function(){return{assetType:{name:"assetType",multiSelect:!0},transactionType:{name:"transactionType",multiSelect:!0},transactionStatus:{name:"transactionStatus",multiSelect:!0},specificSecurities:{name:"specificSecurities",multiSelect:!1},accounts:{name:"accounts",multiSelect:!0},securityIdentifier:{name:"securityIdentifier",multiSelect:!1},staticLocation:{name:"staticLocation",multiSelect:!0},dateType:{name:"dateType",multiSelect:!1},dateRange:{name:"dateRange",multiSelect:!1},transactionRefNo:{name:"transactionRefNo",multiSelect:!1},clientRefNo:{name:"clientRefNo",multiSelect:!1},currency:{name:"currency",multiSelect:!1},dynamicLocation:{name:"dynamicLocation",multiSelect:!0},specificFromDateRange:{name:"specificFromDateRange",multiSelect:!1},specificToDateRange:{name:"specificToDateRange",multiSelect:!1}}}}}]),QqmService.$inject=["$http","nxn.moment.dateFormat"],angular.module("qqm.workbench").service("qqmService",QqmService),angular.module("nxn.Accounts").controller("NxnAccountTypeCtrl",["$scope","$state","nxnAccountsService",function(a,b,c){a.nxnAccountsService=c,a.changeState=function(a,d){var e=a.key;a.isViewSpinner=!0;var f=c.selectedTabRefs[e];f.indexOf("(")>-1&&(f=f.substring(0,f.indexOf("("))),b.go(f,{fromNav:"false"},{})}}]).controller("NxnAccountCtrl",["$scope","nxnAccountsService","$state","NavBar","$filter",function(a,b,c,d,e){a.nxnAccountsService=b,a.accounts=b.availableAccountTypes,a.deliveryInstructionTabFlag=b.deliveryInstructionTabFlag,a.$state=c,a.setActiveView=function(b){for(var c=0;c<a.accounts.length;c++)a.accounts[c].displayView===b&&(a.accounts[c].isViewSpinner=!1)}}]),function(){"use strict";angular.module("nxn.broadcast").filter("nxnBroadcastPriorityTitleCase",[function(){return function(a){return angular.isDefined(a)&&a.length>0?_.startCase(a.toLowerCase()):a}}])}(),function(){"use strict";angular.module("nxn.broadcast").directive("nxnAlertBroadcastGrid",["$log","ModalService",function(a,b){return{restrict:"A",scope:{id:"@",data:"=",refresh:"&"},templateUrl:"partials/common/broadcast/broadcast-grid.html",link:function(c,d,e){c.gridOptions={enableRowHeaderSelection:!1,enableRowSelection:!0,multiSelect:!1,saveGridSettings:!0,columnDefs:[{name:"priority",field:"priority",width:"*",displayName:"Priority",cellTemplate:"partials/common/broadcast/priority-grid-cell.html"},{name:"business",field:"getFormattedBusiness()",width:"*",displayName:"Business"},{name:"service",field:"service",width:"*",displayName:"Service"},{name:"notification",field:"notification",width:"*",displayName:"Notification"},{name:"msgTitle",field:"msgTitle",width:"*",displayName:"Message"},{name:"msgDate",field:"getFormattedDate()",width:"*",displayName:"Date",type:"date",sort:{direction:"desc"}}],nxnRefreshDataFn:function(){c.refresh()},paginationPageSizes:[10,50,100],paginationPageSize:10,rowHeight:28,onRegisterApi:function(a){a.selection.on.rowSelectionChanged(c,function(a){c.openPopup(a.entity)})}},c.$watch("data",function(b,d){b&&(a.log("[nxn-alert-broadcast-grid] Grid data changed"),c.gridOptions.data=b)}),c.openPopup=function(a){"INCLUDE EARLY CLOSINGS"===a.msgType&&(a.componentExpandedViewDirective="nxn-broadcast-early-fund-closings");var d={printModalHeader:!0,headerText:"Print Preview",printButton:!0},e={backdrop:!0,keyboard:!0,modalFade:!0,controller:"BroadcastExpandController",scope:c,templateUrl:"partials/common/broadcast/expand/componentExpandedView.html",size:"lg",resolve:{broadcastMessage:function(){return angular.copy(a)}}};c.modalInstance=b.showModal(e,d)}}}}])}(),function(){"use strict";function a(a){function b(a,b,e,f,g,h,i){f.$watch("broadcastTable.searchText",function(a,b){a!==b&&f.filterCallback()});var j=function(a,b){var c=b.offset?b.offset:0;h.getAlertBroadcasts().then(function(b){f.broadcastMessages=b.data.messages,f.filterCallback(),f.broadcastRefreshDate=new Date,a.resolve({data:f.filteredBroadcastMessages,time:f.broadcastRefreshDate,offset:c})})};f.broadcastRefreshDate=new Date,f.sortingFlag=!1,angular.isDefined(f.dashboardComponent)&&f.dashboardComponent?f.broadcastTable=i.get({count:10},{},!1,f.broadcastMessages,moment().format()):f.broadcastTable=i.get({},{},!1,f.broadcastMessages,moment().format()),f.filterCallback=function(){f.filteredBroadcastMessages=a("datefilter")(f.broadcastMessages,f.bcastDateSelectFilter.startDate,f.bcastDateSelectFilter.endDate),f.filteredBroadcastMessages=a("filter")(f.filteredBroadcastMessages,f.broadcastTable.searchText),f.broadcastTable.settings().$scope&&(f.broadcastTable.setCurrentData(f.filteredBroadcastMessages),f.broadcastTable.reload())},f.broadcastTable.setExportAvailable(!1),f.broadcastTable.setServerDataFn(j),h.getAlertBroadcasts().then(function(a){f.broadcastMessages=a.data.messages,f.filterCallback()}),f.bcastDateSelectFilter={dateSelected:"all"},f.broadcastMessageFields=[{title:"Priority",visible:!0,dataField:"msgType",sortable:!0,sortDir:"-",sortField:"priority"},{title:"Business",visible:!0,dataField:"targetLabel",sortable:!0,sortDir:"+",sortField:"targetLabel"},{title:"Message",visible:!0,dataField:"msgTitle",sortable:!1}],f.displayOrder=function(){if(!f.sortingFlag)return"msgDate"},f.customPriority=function(a){for(var b,c=[],d=a.length,e=0;e<d;e++){switch(b=a[e].msgType){case"URGENT":a[e].priority=1;break;case"INCLUDE EARLY CLOSINGS":a[e].priority=2;break;case"INFORMATIONAL":a[e].priority=3;break;default:a[e].priority=4}c.push(a[e])}return c},f.getPriority=function(a){return"INCLUDE EARLY CLOSINGS"===a||"URGENT"===a?c.URGENT:"INFORMATIONAL"===a?c.MEDIUM:c.LOW},f.getBusiness=function(a){return"wb"===a?d.WB:"ais"===a?d.AIS:"gateway"===a?d.GATEWAY:"liquidity"===a?d.LIQUIDITY:"gfa"===a?d.GFA:"corporatetrust"===a?d.CORPORATETRUST:void 0},f.sortBroadcastMessage=function(a,b){f.sortingFlag=!0;var c={};f.broadcastTable.setCurrentData(f.customPriority(f.filteredBroadcastMessages));for(var d=f.broadcastMessageFields.length,e=0;e<d;e++)f.broadcastMessageFields[e].dataField===a&&(f.broadcastMessageFields[e].sortable===!0&&(f.broadcastMessageFields[e].sortDir="+"===f.broadcastMessageFields[e].sortDir?"-":"+"),c[b]="+"===f.broadcastMessageFields[e].sortDir?"asc":"desc",f.broadcastTable.sorting(c));f.broadcastTable.reload()},f.showBroadcastMessage=function(a){f.broadcastMessage=a,"INCLUDE EARLY CLOSINGS"===a.msgType&&(a.componentExpandedViewDirective="nxn-broadcast-early-fund-closings");var b={headerText:"Printing Modal Preview",printButton:!0,printModalHeader:!0},c={backdrop:!0,keyboard:!0,modalFade:!0,controller:"BroadcastExpandController",scope:f,templateUrl:"partials/common/broadcast/expand/componentExpandedView.html",size:"lg",resolve:{broadcastMessage:function(){return angular.copy(f.broadcastMessage)}}};f.modalInstance=g.showModal(c,b)},f.formatDate=function(a){return a.split(" ",1).toString()}}return b.$inject=["$filter","$interval","$log","$scope","ModalService","nxn.BroadcastService","nxnNgTableParams"],{scope:!0,templateUrl:"partials/common/broadcast/broadcast.html",controller:b}}var b=angular.module("nxn.broadcast");b.directive("nxnBroadcast",a);var c={URGENT:"Urgent",MEDIUM:"Medium",LOW:"Low"},d={WB:"AS",AIS:"AIS",GATEWAY:"NXN",LIQUIDITY:"GLS",GFA:"GFA",CORPORATETRUST:"CT"};a.$inject=["$compile"],b.filter("datefilter",function(){return function(a,b,c){if(!angular.isDefined(a))return a;if(null==b||null==c)return a;b=moment(b),c=moment(c);for(var d=[],e=0;e<a.length;e++){var f=moment(a[e].msgDate);(f.isAfter(b)&&f.isBefore(c)||f.isSame(b,"day")||f.isSame(c,"day"))&&d.push(a[e])}return d}})}(),function(){"use strict";function a(a){function b(a,b,c,d,e){function f(c){function d(a){var c=b("date")(a,"dd MMM yyyy"),d="Cut Off Time "+c,e=o[0];return c!==p&&(d="Early "+d,e=o[1]),{value:d,align:"left",proportion:e}}var e=[],f=[],g=[],h="YYYY-MM-DD",i=moment().startOf("day"),j=0,k=c.allECF.earlyCutOffDates;e.push({value:"Fund Name",proportion:"0.5"}),e.push({value:"Fund Number",proportion:"0.35"});for(var l=0;l<k.length;l++){var m=moment(k[l].earlyCutOffDate,h),n=m.diff(i,"days");if(n>=0&&(f.push({lookup:k[l].timeLookupVal,date:m.valueOf(),isToday:0===n}),++j>=4))break}for(var o=[["0.07","0.07"],["0.08","0.118"],["0.09","0.128"],["0.1","0.15"]][f.length-1],p=b("date")(new Date,"dd MMM yyyy"),q=0;q<f.length;q++)g[q]=f[q].lookup,e.push(d(f[q].date));return a.exportCol=e,a.exportDataCol=g,f}var g={headers:{"X-client-key":e.getClientKey()},timeout:3e4,withCredentials:!0};angular.isDefined(a.broadcastMessage.dataUrl)&&c.getEarlyFundClosings(a.broadcastMessage.dataUrl,g).then(function(b,c,d,e){if(!(angular.isDefined(b.data)&&angular.isDefined(b.data.allECF)&&angular.isDefined(b.data.allECF.earlyCutOffTime)&&angular.isDefined(b.data.allECF.earlyCutOffDates)))return void(a.errorMessage="No Early Fund Closing data.");a.efcData=b.data,a.funds=a.efcData.allECF.earlyCutOffTime,a.timeColumns=f(a.efcData),a.hasEarlyFundClosing=!1;var g=function(b,c){c.push(void 0===b.fundName?"":b.fundName),c.push(void 0===b.fundNo?"":b.fundNo);for(var d=0;d<a.exportDataCol.length;d++)c.push(void 0===b[a.exportDataCol[d]]?"-":b[a.exportDataCol[d]])};if(a.exportDataTransformFn={pdf:g,xls:g},a.fieldNames=a.exportCol,a.heading="Early Fund Closing",a.formatData=formatData.format,0===a.timeColumns.length)return void(a.errorMessage="Early Fund Closing dates are in the past.");a.isValidCutOff=function(a){return a&&"CLOSED"!==a};for(var h=b.data.allECF.earlyCutOffTime,i=0;i<a.timeColumns.length;i++)if(a.timeColumns[i].isToday)for(var j=a.timeColumns[i].lookup,k=0;k<h.length;k++)if(h[k].earlyCutoffFlag&&a.isValidCutOff(h[k][j])){a.hasEarlyFundClosing=!0;break}},function(b,c,d,e){a.errorMessage="Failed to retrieve closing data."})}return b.$inject=["$scope","$filter","nxn.BroadcastEarlyFundClosingService","NxnExportService","PageContext"],{scope:!0,restrict:"AE",templateUrl:"partials/common/broadcast/expand/broadcastEarlyFundClosings.html",controller:b}}angular.module("nxn.broadcast").directive("nxnBroadcastEarlyFundClosings",a),a.$inject=["$compile"]}(),function(){"use strict";function a(a,b,c){b.broadcastMessage=c,angular.isDefined(b.broadcastMessage.dataUrl)?b.isStartSpinner=!0:b.isStartSpinner=!1,b.close=function(){b.modalInstance.close()},a.$on("$stateChangeSuccess",function(){b.modalInstance.close()})}angular.module("nxn.broadcast").controller("BroadcastExpandController",a),a.$inject=["$rootScope","$scope","broadcastMessage"]}(),angular.module("nxn.CustodyAccounts").controller("NxnCustodyAccountsFilterCtrl",["$scope","nxnCustodyAccountsService","PageContext","$rootScope","$state","nxnEDGDocumentsService","workBenchAccountControlParams","promiseWBUserAlias","WBService",function(a,b,c,d,e,f,g,h,i){var j=angular.uppercase(c.getEnvironment()),k={accountType:"GSP",alias:h.alias,aliasToken:h.aliasToken,accountGroupType:"C/A",productCode:"NXN_AC",accountGroupIds:[]},l={accountType:"GSP",alias:h.alias,showAccountGroupEnabled:!0};a.alertInfo={error:!1,message:""},a.workBenchAccountControlParams=new g(l),b.workBenchAccountControlParams=a.workBenchAccountControlParams,b.accountControlData=a.workBenchAccountControlParams.getAccountControlData(),f.setSelectedSolView("CustodyAccounts"),f.resetAccounts(),f.setAccountControlProperties(k),f.setCurrEnv(j),f.setAvailableAccounts([]),f.setAvailableAccountGroups([]),b.loadCustodyAccountsAndFireDocumentSearch(j,k).then(function(b){angular.isDefined(b.errorObj)&&""===b.errorObj?(f.setAvailableAccounts(b.accountsListObj),d.$broadcast("ERS_FIRE_ELASTIC_SEARCH_EVENT",{})):a.showHideAlert(!0)},function(b){a.showHideAlert(!0)}),b.loadCustodyAccountGroupAndFireDocumentSearch(j,k).then(function(a){f.setAvailableAccountGroups(a.accountGroupListObj)}),a.showHideAlert=function(b){b?a.alertInfo={error:!0,message:" The system cannot process your request now. Please try again later."}:a.alertInfo={error:!1,message:""}},a.onAccountSelect=function(c,g){if("nxnAccounts.custody.documents"===e.current.name){var h=b.accountControlData.selectedAccountType.name,l=b.accountControlData.selectedAccounts.value,m=b.fetchSelectedCustodyAccountGroups();if(f.resetSelectedLists(),"SPECIFIC ACCOUNT GROUPS"===h.toUpperCase()&&m.length>0)return f.setResolvedAccountsFromAccGrps([]),f.setSelectedAccountGroups(m),k.accountGroupIds=m,void i.getUserInfo().then(function(a){var b={alias:a.alias,aliasToken:a.aliasToken};return b}).then(function(c){k.alias=c.alias,k.aliasToken=c.aliasToken,b.loadCustodyAccountsAndFireDocumentSearch(j,k).then(function(b){angular.isDefined(b.errorObj)&&""===b.errorObj?(f.setResolvedAccountsFromAccGrps(b.accountsListObj),d.$broadcast("ERS_FIRE_ELASTIC_SEARCH_EVENT",{})):a.showHideAlert(!0)},function(b){a.showHideAlert(!0)})});"SPECIFIC ACCOUNTS"===h.toUpperCase()&&l.length>0&&f.setSelectedAccounts(l),(l.length>0||"ALL ACCOUNTS"===h.toUpperCase())&&d.$broadcast("ERS_FIRE_ELASTIC_SEARCH_EVENT",{})}}}]).controller("NxnCustodyAccountsCtrl",["$scope","nxnAccountsService","nxnCustodyAccountsService",function(a,b,c){a.nxnCustodyAccountsService=c,a.setActiveTab=function(d){for(var e=0;e<c.tabs.length;e++)c.tabs[e].viewName===d?(c.tabs[e].active=!0,b.selectedTabRefs.custodyAccounts=c.tabs[e].sref,a.setActiveView("custodyAccounts")):c.tabs[e].active=!1},a.getDisplayFlag=function(b){return"deliveryInstructionsTab"!==b||a.deliveryInstructionTabFlag}}]),angular.module("nxn.CustodyAccounts").config(["nxnAppConfigProvider",function(a){var b={mock:{qqmGetTimeout:15e3,qqmPostTimeout:3e4,qqmGetDetailTimeout:3e4,qqmExportTimeout:6e4,qqmAccountsTimeout:6e4,qqmPositionSummaryTimeout:6e4,qqmTransactionSummaryTimeout:6e4,broadridgeurl:"http://www.proxydisclosure.com/",marketprofileurl:"https://dev-nexen.bnymellon.com/affwebservices/public/saml2sso?SPID=http://bnym.thomasmurray.com/",mainframeserviceurl:"/img/mainframe.png"},local:{qqmGetTimeout:15e3,qqmPostTimeout:3e4,qqmGetDetailTimeout:3e4,qqmExportTimeout:6e4,qqmAccountsTimeout:6e4,qqmPositionSummaryTimeout:18e4,qqmTransactionSummaryTimeout:18e4,broadridgeurl:"http://www.proxydisclosure.com/",marketprofileurl:"https://dev-nexen.bnymellon.com/affwebservices/public/saml2sso?SPID=http://bnym.thomasmurray.com/",mainframeserviceurl:"https://connectapp-dev.bnymellon.com/mfsaccess/"},dev:{qqmGetTimeout:15e3,qqmPostTimeout:3e4,qqmGetDetailTimeout:3e4,qqmExportTimeout:6e4,qqmAccountsTimeout:6e4,qqmPositionSummaryTimeout:18e4,qqmTransactionSummaryTimeout:18e4,broadridgeurl:"http://www.proxydisclosure.com/",marketprofileurl:"https://dev-nexen.bnymellon.com/affwebservices/public/saml2sso?SPID=http://bnym.thomasmurray.com/",mainframeserviceurl:"https://connectapp-dev.bnymellon.com/mfsaccess/"},uat:{qqmGetTimeout:1e4,qqmPostTimeout:1e4,qqmGetDetailTimeout:1e4,qqmExportTimeout:3e4,qqmAccountsTimeout:3e4,qqmPositionSummaryTimeout:18e4,qqmTransactionSummaryTimeout:18e4,broadridgeurl:"http://www.proxydisclosure.com/",marketprofileurl:"https://uat-nexen.bnymellon.com/affwebservices/public/saml2sso?SPID=http://bnym.thomasmurray.com/",mainframeserviceurl:"https://connectapp-uat.bnymellon.com/mfsaccess/"},qa:{qqmGetTimeout:1e4,qqmPostTimeout:1e4,qqmGetDetailTimeout:1e4,qqmExportTimeout:3e4,qqmAccountsTimeout:3e4,qqmPositionSummaryTimeout:18e4,
qqmTransactionSummaryTimeout:18e4,broadridgeurl:"http://www.proxydisclosure.com/",marketprofileurl:"https://uat-nexen.bnymellon.com/affwebservices/public/saml2sso?SPID=http://bnym.thomasmurray.com/",mainframeserviceurl:"https://connectapp-uat.bnymellon.com/mfsaccess/"},dcat:{qqmGetTimeout:1e4,qqmPostTimeout:1e4,qqmGetDetailTimeout:1e4,qqmExportTimeout:15e3,qqmAccountsTimeout:15e3,qqmPositionSummaryTimeout:15e3,qqmTransactionSummaryTimeout:15e3,broadridgeurl:"http://www.proxydisclosure.com/",marketprofileurl:"https://xat-nexen.bnymellon.com/affwebservices/public/saml2sso?SPID=http://bnym.thomasmurray.com/",mainframeserviceurl:"https://connectapp-dcat.bnymellon.com/mfsaccess/"},xat:{qqmGetTimeout:1e4,qqmPostTimeout:1e4,qqmGetDetailTimeout:1e4,qqmExportTimeout:15e3,qqmAccountsTimeout:15e3,qqmPositionSummaryTimeout:15e3,qqmTransactionSummaryTimeout:15e3,broadridgeurl:"http://www.proxydisclosure.com/",marketprofileurl:"https://xat-nexen.bnymellon.com/affwebservices/public/saml2sso?SPID=http://bnym.thomasmurray.com/",mainframeserviceurl:"https://connectapp-uat.bnymellon.com/mfsaccess/"},production:{qqmGetTimeout:1e4,qqmPostTimeout:1e4,qqmGetDetailTimeout:1e4,qqmExportTimeout:15e3,qqmAccountsTimeout:15e3,qqmPositionSummaryTimeout:15e3,qqmTransactionSummaryTimeout:15e3,broadridgeurl:"http://www.proxydisclosure.com/",marketprofileurl:"https://nexen.bnymellon.com/affwebservices/public/saml2sso?SPID=http://bnym.thomasmurray.com/",mainframeserviceurl:"https://connectapp-uat.bnymellon.com/mfsaccess/"}};a.extendProperties(b)}]),angular.module("nxn.CustodyAccounts").controller("NxnCustodyAccountsDeliveryInstructionsCtrl",["nxnCustodyAccountsService","$scope","$rootScope","getCountryList","CustodyAccountsDataRetrieval","$filter","promiseDISummary","nxn.formats","nxnNgTableParams",function(a,b,c,d,e,f,g,h,i){function j(a){if(b.gridExportData=[],a&&angular.isDefined(a)){for(var c=0;c<a.length;c++){var d=a[c],e=[];e.push(d.accountName),e.push(d.accountNumber),e.push(d.countryName),e.push(d.locationCode),e.push(d.subCustodianName),e.push(d.swiftBIC),e.push(d.subAccountId),e.push(d.subAccountName),e.push(d.localMarketID),b.gridExportData.push(e)}b.DITableParams&&b.DITableParams.setExportData(b.gridExportData)}}function k(){var b=[],c=a.accountControlData;if(angular.isUndefined(c.selectedAccountType)||"All Accounts"===c.selectedAccountType.name)defaultAccounts=[],o="ALL";else if(null!=c.selectedAccountGroups.value&&c.selectedAccountGroups.value.length>0)b=a.accountControlData.selectedAccountGroups,o="accountgroups";else{if(b=a.accountControlData.selectedAccounts,!angular.isUndefined(b)){b=a.accountControlData.selectedAccounts;for(var d=0;d<b.length;d++)delete b[d].accountNumber_6_digits,delete b[d].accountNumber_12_digits,delete b[d].accountSource,delete b[d].accountingStatus,delete b[d].origin}o="accounts"}return b.value}function l(a,b){a.usCandata=[];for(var c=0;c<b.data.securitySubAccountItems.subContentItem.length;c++)a.usCandata.push({titles:b.data.securitySubAccountItems.subContentItem[c].title,items:b.data.securitySubAccountItems.subContentItem[c].data})}var m=[{title:"Country Name",dataField:"countryName",fixed:!0,default:!0,isSelected:!0,class:"text-left nxn-fixed-column",visible:!0},{title:"Location Code",dataField:"locationCode",fixed:!0,default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Sub Custodian Name",dataField:"subCustodianName",default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"SWIFT BIC",dataField:"swiftBIC",default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Security Sub-Account",dataField:"subAccountId",default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Sub-Account Name",dataField:"subAccountName",default:!0,isSelected:!0,class:"text-left",visible:!0},{title:"Local Market ID",dataField:"localMarketID",default:!0,isSelected:!0,class:"text-left",visible:!0}],n=["Account Name","Account Number","Country Name","Location Code","Sub Custodian Name","SWIFT BIC","Security Sub-Account","Sub-Account Name","Local Market ID"],o="";b.columnFields=m,b.lstUpdTs=moment().format(),b.DIindividualCountryTableParams=i.get({count:-1,sorting:{accountName:"asc"}},{groupBy:function(a){return"N/A"===a.locationCode?"Accounts Not Set up for Security Trading in this Market(s)":"Applicable Accounts"}},!1,[],b.lstUpdTs);var p=function(a,c){c.offset?c.offset:0;b.deliveryInstructionTableShow=!1;var d=k(),f=b.country.selected.codeBNY;if(b.countryCodeSelected=b.country.selected.code,b.countryNameSelected=b.country.selected.name,s(),"NCJ"===b.country.selected.code||"USA|BSD"===b.country.selected.code){var g="";g="USA|BSD"===b.country.selected.code?"US":"CA",e.getDepositoryInfo(g).then(function(c){var d=c.data;b.lstUpdTs=moment().format(),null===d.error||""===d.error?(b.deliveryInstructionUSCANTableShow=!0,b.depositoryIndividualTableUSCANData=d.data.data,l(b,d),a.resolve({data:d.data,time:b.lstUpdTs,offset:0})):b.deliveryInstructionUSCANTableShow=!1,b.deliveryInstructionTableShow=!1,b.deliveryInstructionIndividualCountryTableShow=!1}).catch(function(c){var d=c.data;b.lstUpdTs=moment().format(),a.resolve({data:d.data,time:b.lstUpdTs,offset:0})})}else e.getDISummary(d,f).then(function(c){var d=c.data;b.lstUpdTs=moment().format(),null===d.error||""===d.error?"ALL"===b.country.selected.code?(b.gridData=d.data.accounts,b.DITableParams.setCurrentData(b.gridData,b.lstUpdTs,0,1),b.deliveryInstructionTableShow=!0,b.deliveryInstructionIndividualCountryTableShow=!1,a.resolve({data:d.data.accounts,time:b.lstUpdTs,offset:0})):(b.individualCountryGridData=d.data.accounts,j(b.individualCountryGridData),b.DIindividualCountryTableParams.setExportData(b.gridExportData),b.DIindividualCountryTableParams.setCurrentData(b.individualCountryGridData,b.lstUpdTs,0,1),b.deliveryInstructionTableShow=!1,b.deliveryInstructionIndividualCountryTableShow=!0,a.resolve({data:d.data.accounts,time:b.lstUpdTs,offset:0})):(b.deliveryInstructionTableShow=!1,b.deliveryInstructionIndividualCountryTableShow=!1,a.resolve({data:d.data.accounts,time:b.lstUpdTs,offset:0})),b.deliveryInstructionUSCANTableShow=!1}).catch(function(a){b.lstUpdTs=moment().format()})};b.DIindividualCountryTableParams.setIncludeCollapseGroups(),b.DIindividualCountryTableParams.setColumns(b.columnFields),b.DIindividualCountryTableParams.filter(b.filter1),b.DIindividualCountryTableParams.setServerDataFn(p),b.DIindividualCountryTableParams.setExportFields(n),b.DIindividualCountryTableParams.setExportHeading("Delivery Instruction"),j(b.getServerData),a.stopTabSpinner("deliveryInstructionsTab"),b.setActiveTab("deliveryInstructionsTab"),b.deliveryInstructionTableShow=!1,b.countryList=[],b.country={};var q=d;b.countryList=q;var r={appList:"TAX,GMG,DI_BNYM",code:"ALL",codeBNY:"ALL",flag:"ALL",fullname:"All",id:"all",name:"All Countries",title:"all countries"};b.countryList.splice(0,0,r),b.country.selected=b.countryList[0],b.countryCodeSelected=b.country.selected.code,b.countryNameSelected=b.country.selected.name,a.isAccountConfigLoaded()||a.setSelectedAccountsFromConfig([]),null===g.data.error||""===g.data.error?(b.gridData=g.data.data.accounts,j(b.gridData),b.DITableParams=i.get({sorting:{accountName:"asc"}},{groupBy:function(a){return a.accountName+" ("+a.accountNumber.trim()+")"}},!1,b.gridData,b.lstUpdTs),b.DITableParams.setIncludeCollapseGroups(),b.DITableParams.setColumns(b.columnFields),b.DITableParams.setExportFields(n),b.DITableParams.setExportHeading("Delivery Instruction"),b.DITableParams.setExportData(b.gridExportData),b.DITableParams.filter(b.filter2),b.DITableParams.setServerDataFn(p),b.deliveryInstructionTableShow=!0):(b.DITableParams=i.get({sorting:{accountName:"asc"}},{groupBy:function(a){return a.accountName+" ("+a.accountNumber.trim()+")"}},!1,[],b.lstUpdTs),b.DITableParams.setServerDataFn(p),b.DITableParams.setExportFields(n),b.DITableParams.setExportHeading("Delivery Instruction"),b.deliveryInstructionTableShow=!1);var s=function(){var a="";b.flagSource="","ALL"===b.country.selected.flag?b.flagSource="":(a="img/countryFlags/flag_"+b.country.selected.flag+".gif",b.flagSource='<img src ="'+a+'">')};b.isDepositoryInfo=function(a){return!(angular.isUndefined(a)||"United States"!==a&&"Canada"!==a)},b.display=function(a,b){var c=b.dataField;if(!angular.isUndefined(c))return a[c]},b.go=function(){b.isDeliveryInstructionSpinner=!0,b.deliveryInstructionTableShow=!1;var a=k(),c=b.country.selected.codeBNY;if(b.countryCodeSelected=b.country.selected.code,b.countryNameSelected=b.country.selected.name,s(),"NCJ"===b.country.selected.code||"USA|BSD"===b.country.selected.code){var d="";d="USA|BSD"===b.country.selected.code?"US":"CA",e.getDepositoryInfo(d).then(function(a){var c=a.data;b.lstUpdTs=moment().format(),null===c.error||""===c.error?(b.deliveryInstructionUSCANTableShow=!0,b.depositoryIndividualTableUSCANData=c.data.data,l(b,c),b.isDeliveryInstructionSpinner=!1):b.deliveryInstructionUSCANTableShow=!1,b.deliveryInstructionTableShow=!1,b.deliveryInstructionIndividualCountryTableShow=!1}).catch(function(a){b.lstUpdTs=moment().format()})}else e.getDISummary(a,c,o).then(function(a){var c=a.data;b.lstUpdTs=moment().format(),null===c.error||""===c.error?("ALL"===b.country.selected.code?(b.gridData=c.data.accounts,j(b.gridData),b.DITableParams.setCurrentData(b.gridData,b.lstUpdTs,0,1),b.deliveryInstructionTableShow=!0,b.deliveryInstructionIndividualCountryTableShow=!1):(b.individualCountryGridData=c.data.accounts,j(b.individualCountryGridData),b.DIindividualCountryTableParams.setExportData(b.gridExportData),b.DIindividualCountryTableParams.setCurrentData(b.individualCountryGridData,b.lstUpdTs,0,1),b.deliveryInstructionTableShow=!1,b.deliveryInstructionIndividualCountryTableShow=!0),b.isDeliveryInstructionSpinner=!1):(b.deliveryInstructionTableShow=!1,b.deliveryInstructionIndividualCountryTableShow=!1),b.deliveryInstructionUSCANTableShow=!1}).catch(function(a){b.lstUpdTs=moment().format()})},c.$on("refreshDeliveryInstruction",function(){b.go.apply()});b.$watch("DIindividualCountryTableParams.searchText",function(a,c){a!==c&&b.DIindividualCountryTableParams.filter(b.filter1)}),b.filter1=function(a){return""===b.DIindividualCountryTableParams.searchText||(a.accountName.toLowerCase().indexOf(b.DIindividualCountryTableParams.searchText.toLowerCase())>-1||a.countryName.toLowerCase().indexOf(b.DIindividualCountryTableParams.searchText.toLowerCase())>-1)},b.$watch("DITableParams.searchText",function(a,c){a!==c&&(b.DITableParams.filter(b.filter2),b.DITableParams.reload())}),b.filter2=function(a){return""===b.DITableParams.searchText||(a.accountName.toLowerCase().indexOf(b.DITableParams.searchText.toLowerCase())>-1||a.countryName.toLowerCase().indexOf(b.DITableParams.searchText.toLowerCase())>-1)}}]).controller("nxnDIDepositoryViewCtrl",["$scope","ModalService","CustodyAccountsDataRetrieval","nxnAlertService",function(a,b,c,d){a.result={},a.showModal=function(e){"NCJ"===e?e="CA":"USA"===e&&(e="US");var f={},g={controller:"nxnDepositoryCtrl",backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/accounts/custody_accounts/deliveryInstructions/depositoryInfo.html",resolve:{modalOptionObj:function(){return a.modalDetail=f,a.modalDetail},depositoryInfoObj:["ModalSpinnerService",function(a){var b=a.showModal(),f=function(a){var b=a.opened;b.then(function(){a.dismiss("cancel")})};return c.getDepositoryInfo(e).then(function(a){var c=a.data;return f(b),c}).catch(function(a){var c=a.data;f(b);var e="";if(c.errors&&c.errors.length>0)for(var g=0;g<c.errors.length;g++)e+=" Error: "+c.errors[g].code+" - "+c.errors[g].message+".";d.show("ERROR","An error ocurred when contacting the backend service."+e)})}]}};b.showModal(g,f)}}]).controller("nxnDepositoryCtrl",["$scope","ModalService","depositoryInfoObj","nxnAlertService","$modalInstance",function(a,b,c,d,e){a.usCanModaldata=[];for(var f=0;f<c.data.securitySubAccountItems.subContentItem.length;f++)a.usCanModaldata.push({titles:c.data.securitySubAccountItems.subContentItem[f].title,items:c.data.securitySubAccountItems.subContentItem[f].data});a.close=function(){e.dismiss("cancel")}}]),function(){"use strict";function a(a,b,c,d,e,f){d.setSelectedSolView("TripartyDocuments");var g=f.SOL_VIEW_SPECIFIC_META_CONFIGS[d.getSelectedSolView()].ACCOUNTS_MAPPING_FIELD;b.availableAccounts=[],b.selectedAccounts=[],b.tabs=[{title:"Documents",sref:"nxnAccounts.triPartyRepo.documents({fromNav:'false'})",stateName:"nxnAccounts.triPartyRepo.documents",viewName:"TriPartyRepoDocumentTab",active:!1,activeOn:"nxnAccounts.triPartyRepo.documents",isTabSpinner:!0}],b.accountsMultiSelectSettings={displayProp:g.displayField,idProp:g.keyField,externalIdProp:"",scrollable:"auto",maxHeight:"400px",dynamicTitle:!0,smartButtonMaxItems:1,buttonDefaultText:"Accounts",enableSearch:!0},b.availableAccountTypes=[{name:"All Accounts"},{name:"Specific Accounts"}],b.selectedAccountType=b.availableAccountTypes[0],b.accountTranslationTexts={singularDynamicButtonTextSuffix:"Account Selected",pluralDynamicButtonTextSuffix:"Accounts Selected"},d.setTabList(b.tabs),d.resetAccounts(),"success"===e.promiseStatus&&(b.availableAccounts=e.data,d.setAvailableAccounts(e.data));var h=function(){a.$broadcast("ERS_FIRE_ELASTIC_SEARCH_EVENT",{})};b.$watch("selectedAccounts",function(a,c){a!==c&&(d.selectedAccounts=b.selectedAccounts,h())},!0),b.setSelectedAccountType=function(a,c){b.selectedAccountType=a,"All Accounts"===a.name?(d.selectedAccounts=[],h()):b.selectedAccounts.length>0&&(d.selectedAccounts=b.selectedAccounts,h())},b.setActiveTab=function(a){for(var d=0;d<b.tabs.length;d++)b.tabs[d].viewName===a?(b.tabs[d].active=!0,c.selectedTabRefs.TriPartyDocuments=b.tabs[d].sref,b.setActiveView("TriPartyDocuments")):b.tabs[d].active=!1}}angular.module("nxn.EDGDocuments").controller("nxnTripartyRepoController",a),a.$inject=["$rootScope","$scope","nxnAccountsService","nxnEDGDocumentsService","promiseBDSAccountsList","documentSearchConfigs"]}(),function(){"use strict";function a(a,b,c,d,e){c.setSelectedSolView("CBSEFILES");var f=c.getSelectedSolView(),g=e.SOL_VIEW_SPECIFIC_META_CONFIGS[f].ACCOUNTS_MAPPING_FIELD;b.alertInfo={error:!1,message:""},b.filterTitle="Invoice Groups",b.availableAccounts=[],b.selectedAccounts=[],b.tabs=[{title:"EFiles",sref:"nxnAccounts.clientDocuments.efiles({fromNav:'false'})",stateName:"nxnAccounts.clientDocuments.efiles",viewName:"clientDocuments",active:!1,activeOn:"nxnAccounts.clientDocuments.efiles",isTabSpinner:!0}],b.accountsMultiSelectSettings={displayProp:g.displayField,idProp:g.keyField,externalIdProp:"",scrollable:"auto",maxHeight:"400px",dynamicTitle:!0,smartButtonMaxItems:1,buttonDefaultText:"Invoice Group",enableSearch:!0},b.availableAccountTypes=[{name:"All Invoice Groups"},{name:"Specific Groups"}],b.selectedAccountType=b.availableAccountTypes[0],b.accountTranslationTexts={singularDynamicButtonTextSuffix:"Invoice Group Selected",pluralDynamicButtonTextSuffix:"Invoice Groups Selected"},b.showHideAlert=function(a){a?b.alertInfo={error:!0,message:" The system cannot process your request now. Please try again later."}:b.alertInfo={error:!1,message:""}},c.setTabList(b.tabs),c.resetAccounts(),"success"===d.promiseStatus?(b.availableAccounts=d.data,c.setAvailableAccounts(d.data)):b.showHideAlert(!0);var h=function(){a.$broadcast("ERS_FIRE_ELASTIC_SEARCH_EVENT",{})};b.$watch("selectedAccounts",function(a,d){a!==d&&(c.setSelectedAccounts(b.selectedAccounts),h())},!0),b.setSelectedAccountType=function(a){b.selectedAccountType=a,"All Invoice Groups"===a.name?(c.setSelectedAccounts([]),h()):b.selectedAccounts.length>0&&(c.setSelectedAccounts(b.selectedAccounts),h())}}angular.module("nxn.EDGDocuments").controller("nxnCBSDocumentsFilterController",a),a.$inject=["$rootScope","$scope","nxnEDGDocumentsService","promiseCBSAccountsList","documentSearchConfigs"]}(),function(){"use strict";function a(){return{scope:{},templateUrl:"partials/accounts/documents-dashboard/documents.dashboard.html",controller:b}}function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){var b=j.DOCS_DASHBOARD_METADATA_CONFIGS.AVBL_SOLUTION_VIEWS_MAPPING,c=[];k.resetDefAttributes();for(var d in b)if(b.hasOwnProperty(d)&&n.hasExactEntitlement(d)){var e=b[d];if(e.indexOf(",")>0)for(var f=e.split(","),g=0;g<f.length;g++){var h=angular.copy(j.DOCS_DASHBOARD_METADATA_CONFIGS.SOL_VIEW_SPECIFIC_CONFIGS[f[g]]);t(h.CATEGORY_FILTERS_METADATA.viewName,c)||c.push(h.CATEGORY_FILTERS_METADATA)}else{var i=angular.copy(j.DOCS_DASHBOARD_METADATA_CONFIGS.SOL_VIEW_SPECIFIC_CONFIGS[e]);t(i.CATEGORY_FILTERS_METADATA.viewName,c)||c.push(i.CATEGORY_FILTERS_METADATA)}}c.sort(function(a,b){var c=a.display.toLowerCase(),d=b.display.toLowerCase();return c<d?-1:c>d?1:0});var l=c.length>0?c[0]:{};a.categoryFilters.setData(c),a.categoryFilters.setSelectedParentGrp(l),l.hasOwnProperty("viewName")&&(V=angular.copy(l.viewName),a.columnFields=j.DOCS_DASHBOARD_METADATA_CONFIGS.SOL_VIEW_SPECIFIC_CONFIGS[V].DATAGRID_COLUMNS_DEF)}function t(a,b){for(var c=!1,d=0;d<b.length;d++){var e=b[d].viewName;if(e===a){c=!0;break}}return c}function u(b,c){T.length>0?K().then(function(c){return"OK"!==c.status?(a.loadingRecentDocuments=!1,a.categoryFilters.disableParentGroup=!1,a.noDocsAvailableMessage=c.errorMessage,a.showNoDocMsg=!0,void J(!0,"warning",a.noDocsAvailableMessage)):(I(b),a.loadingRecentDocuments=!1,J(!1),void 0)}):a.showNoDocMsg=!0}function v(b){J(!1),a.loadingRecentDocuments=!0,a.categoryFilters.disableParentGroup=!0,k.setSelectedSolView(V),E().then(function(c){c.accounts?(T=c.accounts,K().then(function(c){return"OK"!==c.status?(a.loadingRecentDocuments=!1,a.categoryFilters.disableParentGroup=!1,a.noDocsAvailableMessage=c.errorMessage,a.showNoDocMsg=!0,void J(!0,"warning",a.noDocsAvailableMessage)):(I(b),a.loadingRecentDocuments=!1,J(!1),void 0)})):(a.loadingRecentDocuments=!1,a.categoryFilters.disableParentGroup=!1,a.noDocsAvailableMessage=c.errorMessage,a.showNoDocMsg=!0)})}function w(){var a=j.DOCS_DASHBOARD_METADATA_CONFIGS.SOL_VIEW_SPECIFIC_CONFIGS[V].ELASTIC_SEARCH_IDX_NAME;return a}function x(a,b){var c=[];if(!a)return void b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});if(Y=a.selectionByClient){if(c.push(a.entityId),0===c.length)return void b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});b.resolve({accounts:c,errorMessage:""})}else O.getClientEntities(a.entityId,W).then(function(a){if("success"===a.promiseStatus){var d=a.data.data[0].fundFamilies[0].entities,e=P.mapAndSort(d);if(angular.forEach(e,function(a){c.push(a.entityId)}),0===c.length)return void b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});b.resolve({accounts:c,errorMessage:""})}else b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})})}function y(a){return{entityId:a.entityId,entityName:a.entityName,entityType:a.entityType,productType:a.productType,selectionByClient:a.selectionByClient}}function z(b,c,d){return c.productType.toUpperCase()===a.REProductType?void b.resolve({selectionByClient:c.selectionByClient,clientId:c.entityId}):void b.resolve({selectionByClient:c.selectionByClient,clientId:d.entityId})}function A(b,c,d){var e=P.filterClients(W),f=[];d&&_.each(e,function(b){b.productType.toUpperCase()===a.REProductType&&f.push(y(b))});var g=_.first(e);if(c){var h=_.find(e,function(a){return a.entityId===c.clientId});if(h)return d&&f.length>0&&z(b,h,f[0]),void x(h,b);if(g)return d&&f.length>0&&z(b,g,f[0]),void x(g,b)}if(!O.getUserSelections().client&&g)return d&&f.length>0&&z(b,g,f[0]),void x(g,b);var i=_.find(e,function(a){return a.entityId===O.getUserSelections().client.entityId});return i?(d&&f.length>0&&z(b,i,f[0]),void x(i,b)):g?(d&&f.length>0&&z(b,g,f[0]),void x(g,b)):d&&f.length>0?void b.resolve({clientId:f[0].entityId}):d?void b.resolve({clientId:null}):void x(null,b)}function B(a,b){P.isClients()?A(a,null,b):O.getClients().then(function(c){"success"===c.promiseStatus&&c.data.data?(P.setClients(c.data.data),O.getUserDetails().then(function(c){if("success"===c.promiseStatus&&c.data.data){var d=c.data.data;X=d.clientId,A(a,d,b)}else A(a,null,b)})):a.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})})}function C(){var a=e.defer();return B(a,!0),a.promise}function D(a,b,c){var d=[];if(!c)return void b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});if(Y=c.selectionByClient){if(d.push(c.clientId),0===d.length)return void b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});b.resolve({accounts:d,errorMessage:""})}else O.getProperties(a).then(function(a){if("success"===a.promiseStatus){var c=a.data.data;if(angular.forEach(c,function(a){d.push(a.entityId)}),0===d.length)return void b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});b.resolve({accounts:d,errorMessage:""})}else b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})})}function E(){var b=e.defer(),c=(a.categoryFilters.selectedParentGrp.resourceType,j.SOL_VIEW_SPECIFIC_META_CONFIGS[V].ACCOUNTS_MAPPING_FIELD),d=angular.uppercase(n.getEnvironment());if("AISINVESTMENTREPO"===V.toUpperCase())O?O.getAccounts("").then(function(a){if("success"===a.promiseStatus){var c=P.mapAndSort(a.data.data),d=[];if(angular.forEach(c,function(a){d.push(a.entityId)}),0===d.length)return void b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});b.resolve({accounts:d,errorMessage:""})}else b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})}):b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});else if("CLIENTSDOCUMENTS"===V.toUpperCase())O?(W="investorServicesEntities",B(b,!1)):b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});else if("FUNDSDOCUMENTS"===V.toUpperCase())O?(W="fundAccountingEntities",B(b,!1)):b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});else if("PROPERTIESDOCUMENTS"===V.toUpperCase())if(O){W="fundAccountingEntities";var h="";n.hasExactEntitlement("AIS_PRL_NXN_INT")||n.hasExactEntitlement("AIS_PRL_NXN_RFM")?C().then(function(c){return c.clientId?(h="?clientId="+c.clientId,void D(h,b,c)):(a.loadingRecentDocuments=!1,a.categoryFilters.disableParentGroup=!1,a.noDocsAvailableMessage=j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE,void(a.showNoDocMsg=!0))}):D(h,b,null)}else b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE});else if("CUSTODYACCOUNTS"===V.toUpperCase())k.setAvailableAccounts([]),p.getUserInfo().then(function(a){var b={accountType:"GSP",alias:a.alias,aliasToken:a.aliasToken,accountGroupType:"C/A",productCode:"NXN_AC",accountGroupIds:[]};return b}).then(function(a){q.loadCustodyAccountsAndFireDocumentSearch(d,a).then(function(a){var d=a.accountsListObj;if(angular.isArray(d)){var e=[];angular.forEach(d,function(a){a[c.keyField]&&e.push(a[c.keyField].trim())}),b.resolve({accounts:e,errorMessage:""})}else b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})},function(a){b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})})});else if("SECMODDOCUMENTS"===V.toUpperCase()){var i=f.API_GATEWAY_SVC_URLS[d]+""+f.PATH_TO_LOAD_FUNDS_FOR_SECMOD;g.getAllFundsForSecMod(i).then(function(a,d,e,f){var g=a.data;if(angular.isArray(g)&&g.length>0){var h=[];angular.forEach(g,function(a){a[c.keyField]&&h.push(a[c.keyField].trim())}),b.resolve({accounts:h,errorMessage:""})}else b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})},function(a,c,d,e){b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})})}else{var l=j.ACCOUNTS_RETRIEVAL_PROPS.PRODUCT_ID[V],m=f.ERS_SVC_BASE_URLS[d]+""+f.PATH_TO_LOAD_ACCOUNTS_FROM_UPS+"?productId="+l+"&systemId=CNTSYS_ERS&isIndividualAccountOnly=true&isAllAccount=true&isAccountWithPagination=true";g.getAllAccountsFromUPS(m).then(function(a,d,e,f){var g=a.data;if(angular.isArray(g)&&g.length>0){var h=[];angular.forEach(g,function(a){a[c.keyField]&&h.push(a[c.keyField].trim())}),b.resolve({accounts:h,errorMessage:""})}else b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})},function(a,c,d,e){b.resolve({errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE})})}return b.promise}function F(){var b="";if(U){var c=a.categoryFilters.selectedParentGrp.hikariFilterField,d=a.categoryFilters.selectedSubGrp.display;b=k.formatExactMatchQuery(d,c+".raw")}return b}function G(){var a=[],b="";return b=Y?S.getSearchProperties("all").hikariFieldFilter.idxKeyField:"CLIENTSDOCUMENTS"===V&&S?S.getSearchProperties("investors").hikariFieldFilter.idxKeyField:"PROPERTIESDOCUMENTS"===V&&S?S.getSearchProperties("properties").hikariFieldFilter.idxKeyField:"FUNDSDOCUMENTS"===V&&S?n.hasExactEntitlement("AIS_PRL_NXN_RPM")?S.getSearchProperties("properties").hikariFieldFilter.idxKeyField:S.getSearchProperties("funds").hikariFieldFilter.idxKeyField:j.DOCS_DASHBOARD_METADATA_CONFIGS.SOL_VIEW_SPECIFIC_CONFIGS[V].HIKARI_SEARCH_FIELD,T=T.join("~").toLowerCase(),T=T.split("~"),a.push({field:b+".raw",values:T}),a}function H(){var b={},c=0,d=10,e=null,f=a.categoryFilters.selectedParentGrp.avblDocTypes;if("FUNDSDOCUMENTS"===k.documentsWidgetSelectedSubCategory.category.viewName){var g=_.filter(f,function(a){return a.docTypeName.toLowerCase().indexOf("property")<0});e=k.buildSimpleQuery(g,"src_sys_doc_type_name.raw")}else e=k.buildSimpleQuery(f,"src_sys_doc_type_name.raw");var h=F(),i="";return""!==e&&(i="("+e+")"),""!==h&&(i+=" AND "+h),b.namespaceId=j.NAMESPACE_TOKEN.namespaceId,b.indexName=w(),b.fieldFilters=G(),b.queryString=i,b.pageFrom=c,b.pageSize=d,b.sortBy=["edg_document_upload_timestamp.raw:DESC"],b}function I(b){var c=angular.uppercase(n.getEnvironment()),d=f.API_GATEWAY_SVC_URLS[c]+""+f.PATH_TO_HIKARI_ADVANCED_SEARCH,e=H();J(!1),a.loadingRecentDocuments=!0,a.categoryFilters.disableParentGroup=!0;var h=function(c,d,e){var f=c.data.data;f&&f.length>0&&(f=_.sortBy(f,function(a){return new Date(a.document_as_of_dt)}).reverse()),a.listSearchResult=f,0===a.listSearchResult.length?(a.noDocsAvailableMessage=j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE,a.showNoDocMsg=!0):(a.showNoDocMsg=!1,a.columnFields=j.DOCS_DASHBOARD_METADATA_CONFIGS.SOL_VIEW_SPECIFIC_CONFIGS[V].DATAGRID_COLUMNS_DEF,a.recentDocsTable.setCurrentData(a.listSearchResult,moment().format(),0,1),b?b.resolve({data:a.listSearchResult,time:moment().format(),offset:0}):(a.recentDocsTable.setCurrentData(a.listSearchResult,moment().format(),0,1),a.recentDocsTable.reload(),a.rowCount=a.listSearchResult.length>10?10:a.listSearchResult.length)),a.loadingRecentDocuments=!1,a.categoryFilters.disableParentGroup=!1},i=function(){b&&b.reject({data:[]}),a.recentDocsTable.setCurrentData([],moment().format(),0,1),a.loadingRecentDocuments=!1,a.categoryFilters.disableParentGroup=!1,a.noDocsAvailableMessage=j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_AVAILABLE,a.showNoDocMsg=!0};g.getDashboardRecentDocs(d,e).then(h,i)}function J(b,c,d){b?a.alertInfo={show:"true",type:c,message:d}:a.alertInfo.show="false"}function K(){var b=e.defer();if(0!==Object.keys(j.SRC_DOCUMENT_META_DEF).length)return Z||L(j.SRC_DOCUMENT_META_DEF),b.resolve({status:"OK"}),a.loadingRecentDocuments=!1,b.promise;var c=angular.uppercase(n.getEnvironment()),d=f.ERS_SVC_BASE_URLS[c]+""+f.PATH_TO_GET_DOC_META_DATA;a.loadingRecentDocuments=!0;var h=function(c,d,e){j.SRC_DOCUMENT_META_DEF=c.data.results.SRC_DOCUMENT_META_DEF,L(c.data.results.SRC_DOCUMENT_META_DEF),a.loadingRecentDocuments=!1,b.resolve({status:"OK"})},i=function(){a.loadingRecentDocuments=!1,b.resolve({status:"fail",errorMessage:j.MESSAGE_CONSTANTS.ERR_MSG_NO_DOC_TYPE})};return g.getSrcDocMetaData(d).then(h,i),b.promise}function L(a){var b=i.data;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c],e=d.productId;if(n.hasExactEntitlement(e))for(var f=d.solView,g=0;g<b.length;g++)for(var h=b[g],j=0;j<f.length;j++)if(h.viewName===f[j]){var k={productId:e,docTypeName:c};h.avblDocTypes.push(k);break}}Z=!0}function M(b,c){if(a.aisThirdPartyLegalParameters={action:c,record:b},!k.isAisView())return!0;if("THIRD PARTY"!==(""+b.document_top_level_category).toUpperCase())return!0;if(k.getAisThirdPartyAccepted())return!0;var d={templateUrl:"partials/accounts/edg_documents/modal/third-party-ais.html",controller:["$scope","$modalInstance",N],windowClass:"nxn-documents-thirdparty-popup",scope:a};return r.showModal(d),!1}function N(a,b){a.onThirdPartyCancel=function(){b.dismiss("cancel")},a.onThirdPartyProceed=function(){a.$parent.showAisThirdPartyDisclaimer=!0,k.setAisThirdPartyAccepted(),b.dismiss("cancel"),"view"===a.aisThirdPartyLegalParameters.action?a.viewDocument(a.aisThirdPartyLegalParameters.record):a.downloadDocument(a.aisThirdPartyLegalParameters.record)}}var O,P,Q,R,S,T=[],U=!1,V="",W="",X="",Y=!1,Z=!1;a.alertInfo={show:"false"},a.listSearchResult=[],a.showNoDocMsg=!1,a.loadingRecentDocuments=!1,a.iframeSrc=d.trustAsResourceUrl("about:blank"),a.selectedRowIdx=null,a.rowCount=0,a.noDocsAvailableMessage="",a.REProductType="RE",a.categoryFilters=i,a.categoryFilters.placeholder="Select Account Type",a.categoryFilters.hideIfSingleCategory=!0,a.categoryFilters.disableParentGroup=!0,a.categoryFilters.setDefaultSubGrp({key:"All",display:"All Documents"}),a.recentDocsTable=h.get({},{},!1,null,moment().format()),a.recentDocsTable.settings().$scope=a,a.recentDocsTable.setExportAvailable(!1),a.recentDocsTable.setPartialParams(!1),a.recentDocsTable.setServerDataFn(u),a.recentDocsTable.setSearchAvailable(!1),a.recentDocsTable.setColumns(a.columnFields),a.selAsOfDateOptions={value:"RelDate,1,0,0,-365"},b.has("anpDataService")&&(O=b.get("anpDataService"),Q=b.get("anpFundsService"),R=b.get("anpInvestorsService"),S=b.get("anpConstantConfigs"),P=b.get("anpAccountService")),s(),v(),a.$on("/dashboard/portlet/refresh",function(){u(null)}),a.highlightRow=function(b){a.selectedRowIdx=b},a.evaluateExp=function(b,c,d){for(var e=c.split(","),f="",g=0;g<e.length;g++)if(e[g]){var h=d[e[g].trim()],i=h?h:"";f=""===f?'"'+i+'"':f+',"'+i+'"'}return a.$eval(b+"("+f+")")},a.formatDocDate=function(a){return k.formatDocDate(a)},a.formatAisDocDate=function(a){return k.formatAisDocDate(a)},a.formatValueAsStacked=function(a,b){return k.formatValueAsStacked(a,b)},a.formatValueInSingleRow=function(a,b){return k.formatValueInSingleRow(a,b)},a.getValue=function(a){return k.getValue(a)},a.categoryFilters.onParentGrpChanged=function(){U=!1,k.documentsWidgetSelectedSubCategory.category={},a.categoryFilters.selectedParentGrp.hasOwnProperty("viewName")&&(V=angular.copy(a.categoryFilters.selectedParentGrp.viewName),k.documentsWidgetSelectedSubCategory.category=a.categoryFilters.selectedParentGrp),T=[],a.recentDocsTable.setCurrentData([],moment().format(),0,1),v()},a.categoryFilters.onSubGroupSelected=function(){var b=a.categoryFilters.selectedSubGrp;k.documentsWidgetSelectedSubCategory.additionalFilters=null,"ALL"!==b.key.toUpperCase()?(U=!0,k.isAisView()&&(k.documentsWidgetSelectedSubCategory.additionalFilters=b)):U=!1,u(null)},a.openDocumentsPageByView=function(){var b=a.categoryFilters.selectedParentGrp.pathUrl;J(!1),c.path(b)},a.getAisThirdPartyLegal=function(){return j.AIS_THIRDPARTY_LEGAL},a.viewDocument=function(a){if(M(a,"view")){var b=a.src_sys_doc_type_disp_name;k.openViewDocumentPopup([a],b)}},a.downloadDocument=function(b){if(M(b,"downld")){if(k.downloadProgress.widget)return void J(!0,"warning",j.MESSAGE_CONSTANTS.INFO_EXISTING_REQ_IN_PROGRESS);var c=function(b,c,d,e){var f=k.getDocumentURL(b);""!==f?a.iframeSrc=f:J(!0,"danger",j.MESSAGE_CONSTANTS.ERR_MSG_DOWNLOAD_FAILURE),a.loadingRecentDocuments=!1,k.downloadProgress.widget=!1},d=function(b,c,d,e){a.loadingRecentDocuments=!1,k.downloadProgress.widget=!1,J(!0,"danger",j.MESSAGE_CONSTANTS.ERR_MSG_DOWNLOAD_FAILURE)};a.loadingRecentDocuments=!0,k.downloadProgress.widget=!0;var e=new o;e.download([b],"attachment").then(c,d)}},a.closeAlert=function(){J(!1)}}angular.module("nxn.EDGDocuments").controller("nxnDocsComponentController",b).directive("nxnDocsDashboard",a),b.$inject=["$scope","$injector","$location","$sce","$q","documentSvcUrls","nxnEDGDocumentsDataService","nxnNgTableParams","nxnCategoryFilters","documentSearchConfigs","nxnEDGDocumentsService","nxn.UserSettingsService","nxnDocumentsRelativeDateService","PageContext","nxnEDGDocumentsDownloadService","WBService","nxnCustodyAccountsService","ModalService"];
}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(a,b){a.onThirdPartyCancel=function(){var c=a.categoryFilters.selectedParentGrp.subGroupCategory;angular.forEach(c,function(a){a.isActive=!a.customStyle}),a.$parent.showAisThirdPartyDisclaimer=!1,b.dismiss("cancel"),a.categoryFilters.onSubGroupSelected()},a.onThirdPartyProceed=function(){a.$parent.showAisThirdPartyDisclaimer=!0,d.setAisThirdPartyAccepted(),b.dismiss("cancel"),a.categoryFilters.onSubGroupSelected()}}function t(){if(d.resetDefAttributes(),da=angular.uppercase(e.getEnvironment()),d.setCurrEnv(da),na&&(ca=angular.copy(ma.DOCUMENTS_CATEGORY_FILTERS_METADATA)),na){var b=a.categoryFilters,c=d.documentsWidgetSelectedSubCategory.additionalFilters;if(b.setData(ca),"TAGS"===na&&a.enableThirdPartyCategory){var f=_.find(b.selectedParentGrp.subGroupCategory,function(a){return a.customStyle===!0});f&&(f.visible=!0)}if(c)"TAGS"===na&&angular.forEach(b.selectedParentGrp.subGroupCategory,function(a){a.display===c.display?a.isActive=!0:a.isActive=!1});else if("TAGS"===na&&a.enableThirdPartyCategory)angular.forEach(b.selectedParentGrp.subGroupCategory,function(a){a.isActive=!a.customStyle});else{var g=ca[0];b.setDefaultSubGrp({key:g.key,display:g.display})}}e.hasExactEntitlement("ERC_ERS_DIST")&&(a.showDistributionOption=!0),e.hasExactEntitlement("ERC_ERS_SCH")&&(a.showScheduleOption=!0),"CUSTODYACCOUNTS"===a.selectedView?d.getAllAccounts().length>0&&L(!0):(d.setAccountControlProperties(null),L(!0))}function u(){var b=a.availDateTypeOptions[0];null!=b&&(a.selDateTypeOptions={selected:b})}function v(){var b=x("P90D");a.date={startDate:moment(),endDate:moment()},b&&(a.selAsOfDateOptions={selected:b})}function w(){for(var b=g.AS_OF_DATE_OPTIONS[a.selectedView],c=[],d=0;d<b.length;d++){var e=b[d];c.push(g.AVBL_DATE_FILTER_OPTIONS[e])}return c}function x(b){for(var c=null,d=0;d<a.availAsOfDateOptions.length;d++){var e=a.availAsOfDateOptions[d];if(e.shortKey===b){c=e;break}}return c||(c=a.availAsOfDateOptions[0]),c}function y(a,b,c,d){a.moreInfoColumns=ma.SEARCH_FIELD_METADATA.CUSTOM_FIELD_MAPPINGS,a.getCustomFieldData=function(a){var b=d[a];return b},a.close=function(){b.dismiss("cancel")}}function z(a,b,c,d){a.searchResultExceeded=c.MESSAGE_CONSTANTS.MSG_DOC_SELECTED_SEARCH_RESULT_EXCEEDED_100,a.proceedToDistribute=function(){a.close(),d()},a.close=function(){b.dismiss("cancel")}}function A(a){for(var b=0;b<ca.length;b++){var c=ca[b];if("ALL"===c.key){c.avblDocTypes.push(a);for(var d=0;d<c.subGroupCategory.length;d++){var e=c.subGroupCategory[d];if(e.key===a.groupBy){e.visible=!0,e.avblDocTypes.push(a);break}}}else if(c.key===a.groupBy){var f={key:a.docTypeName,display:a.displayName,frequency:a.frequency,isActive:!0};f.avblDocTypes=[a],f.visible=!0,c.subGroupCategory.push(f),c.avblDocTypes.push(a),c.visible=!0;break}}}function B(b,c){angular.isDefined(c)&&c===!0?b===!0?p.showModal():p.closeModal():a.loadingDocuments=b}function C(){var b,c,e="";if(d.isAisView())b=moment(a.aisSelectedDate.startDate).format(fa),c=moment(a.aisSelectedDate.endDate).format(ga);else if("Custom Range"===a.selAsOfDateOptions.selected.name)b=moment(a.date.startDate).format(fa),c=moment(a.date.endDate).format(ga);else if(e=j.formatToRelDate(a.selAsOfDateOptions.selected.value),"Prior Weekday"===a.selAsOfDateOptions.selected.name)b=moment(e).format(fa),c=moment(e).format(ga);else if("Prior Month"===a.selAsOfDateOptions.selected.name){var f=j.getFirstDateOfMonth(e);b=moment(f).format(fa),c=moment(e).format(ga)}else{var g=new Date;b=moment(e).format(fa),c=moment(g).format(ga)}e=b+" TO "+c;var h=a.selDateTypeOptions.selected.value+":["+e+"]";return h}function D(){var a="";if(ba.length>0){var b=ma.SEARCH_FIELD_METADATA;a=b.indexName}return a}function E(){return d.getSelectedAccounts()}function F(){var a=[];if(d.isAisView()){var b=d.getSearchProperties();b.length>0?angular.forEach(b,function(c){a=G(a,null!==b,c)}):a=G(a,!1)}else a=G(a,!1);return a}function G(a,b,c){var e="~",f=null,g=null;return b?(f=d.getAisSelectedAccountNumbers(c),g=d.getAisHikariFieldFilters(c)):(f=d.getSelectedAccountNumbers(),g=d.getHikariFieldFilters()),f=f.join(e).toLowerCase().split(e),a.push({field:g.idxKeyField+".raw",values:f}),a}function H(b,c){var e={},f="",h="",i=a.categoryFilters.selectedParentGrp;angular.isDefined(a.input.freeText)&&null!==a.input.freeText&&""!==a.input.freeText&&(f=d.formatFreeSearchText(a.input.freeText)),e.namespaceId=g.NAMESPACE_TOKEN.namespaceId,e.indexName=D();var j=C(),k=d.buildSimpleQuery(ba,"src_sys_doc_type_name.raw");""!==k&&(j+=" AND ("+k+")"),""!==f&&(j+=" AND "+f);var l=_.filter(i.subGroupCategory,function(a){return a.isActive===!0});if(""!==ea||a.enableThirdPartyCategory){var m=!1;l.length!==i.subGroupCategory.length&&na&&(angular.forEach(i.subGroupCategory,function(a){a.isActive&&!m?(j+=" AND ("+d.formatExactMatchQuery(a.display,i.hikariFilterField+".raw"),m=!0):a.isActive&&m&&(j+=" OR "+d.formatExactMatchQuery(a.display,i.hikariFilterField+".raw"))}),m&&(j+=")")),d.documentsWidgetSelectedSubCategory.category={},d.documentsWidgetSelectedSubCategory.additionalFilters=null}return h=a.sorting.userSorted===!1?ma.DEFAULT_SORTING_FIELD:a.sorting.sortByText,e.queryString=j,e.fieldFilters=F(),e.sortBy=h.split(","),e.pageFrom=b,e.pageSize=c,e}function I(a,b,d,e){var g=H(a,b),h=f.API_GATEWAY_SVC_URLS[da]+""+f.PATH_TO_HIKARI_ADVANCED_SEARCH;c.getElasticSearchResult(h,g).then(d,e)}function J(){B(!0);var b=function(b,c,e,f){a.listSearchResult=b.data.data,ja=b.data.meta.pagination.total;for(var h=0;h<a.listSearchResult.length;h++){var i=a.listSearchResult[h],j=null;g.SRC_DOCUMENT_META_DEF.hasOwnProperty(i.src_sys_doc_type_name.toUpperCase())&&(j=g.SRC_DOCUMENT_META_DEF[i.src_sys_doc_type_name.toUpperCase()]),null!==j&&angular.isDefined(j)?i.groups=j.groups:i.groups=""}0===a.listSearchResult.length?a.changeMessage({type:"warning",msg:g.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_FOUND}):a.messages=[],d.stopTabSpinner("TriPartyRepoDocumentTab"),N(),B(!1)},c=function(b,c,e,f){a.changeMessage({type:"danger",msg:g.MESSAGE_CONSTANTS.ERR_MSG_GENERIC_SYSTEM_FAILURE}),d.stopTabSpinner("TriPartyRepoDocumentTab"),B(!1)};ia=(a.edgDocumentGridOptions.paginationCurrentPage-1)*a.edgDocumentGridOptions.paginationPageSize,I(ia,a.edgDocumentGridOptions.paginationPageSize,b,c)}function K(b){b&&(a.edgDocumentGridOptions.paginationCurrentPage=1),Y().then(function(b){return"OK"!==b.status?void a.changeMessage({type:"warning",msg:b.errorMessage}):(J(null),void(a.loadingDocuments=!1))}),b?(ka=[],a.edgDocumentGridOptions.selectedItemSize=0,d.selectedItemSize=0,a.gridApi&&(a.gridApi.core.clearAllFilters(),a.gridApi.grid.selection.selectAll=!1)):(a.edgDocumentGridOptions.selectedItemSize=T(),d.selectedItemSize=T(),a.gridApi&&O())}function L(b){Y().then(function(c){return"OK"!==c.status?void a.changeMessage({type:"warning",msg:c.errorMessage}):void(0===ba.length||0===E().length?(a.edgDocumentGridOptions.data=[],a.listSearchResult=[],B(!1,!0),a.changeMessage({type:"warning",msg:g.MESSAGE_CONSTANTS.ERR_MSG_NO_DOCS_FOUND})):K(b))})}function M(){var b="",c="";return d.isAisView()?(b=moment(a.aisSelectedDate.startDate).format(fa),c=moment(a.aisSelectedDate.endDate).format(ga)):"Custom Range"===a.selAsOfDateOptions.selected.name?(b=moment(a.date.startDate).format(ha),c=moment(a.date.endDate).format(ha)):(b=a.selAsOfDateOptions.selected.value,c="RelDate,1,0,0,0"),{fromDate:b,toDate:c}}function N(){var b=angular.copy(a.listSearchResult);a.edgDocumentGridOptions.data=null,a.edgDocumentGridOptions.totalItems=ja,a.edgDocumentGridOptions.totalServerItems=ja;for(var c=0;c<a.edgDocumentGridOptions.columnDefs.length;c++){var d=a.edgDocumentGridOptions.columnDefs[c];if(angular.isDefined(d.formatFunc)&&""!==d.formatFunc)for(var e=0;e<b.length;e++){var f=b[e],g=a.evaluateExp(d.formatFunc,d.arguments,f);f[d.field]=g}}a.edgDocumentGridOptions.data=b,angular.forEach(b,function(a,b){a.index=b})}function O(){var b=R(a.edgDocumentGridOptions.paginationCurrentPage);if(null===b)return void(a.gridApi.grid.selection.selectAll=!1);for(var c=0;c<b.length;c++)if(null!=a.gridApi){var d=b[c].index;null!==d&&a.gridApi.selection.selectRow(a.edgDocumentGridOptions.data[d])}}function P(){var b=a.gridApi.core.getVisibleRows(a.gridApi.grid).length,c=a.gridApi.selection.getSelectedRows().length;b===c&&b>0?a.gridApi.grid.selection.selectAll=!0:a.gridApi.grid.selection.selectAll=!1}function Q(){S(a.edgDocumentGridOptions.paginationCurrentPage);var b={pageNumber:a.edgDocumentGridOptions.paginationCurrentPage,itemList:a.gridApi.selection.getSelectedRows()};ka.push(b)}function R(a){var b=null;return angular.forEach(ka,function(c){if(c.pageNumber===a)return b=c.itemList}),b}function S(a){angular.forEach(ka,function(b){if(b.pageNumber===a){var c=ka.indexOf(b);ka.splice(c,1)}})}function T(b){var c=0;return angular.forEach(ka,function(d){b?d.pageNumber!==a.edgDocumentGridOptions.paginationCurrentPage&&(c+=d.itemList.length):c+=d.itemList.length}),c}function U(){var a=[];return angular.forEach(ka,function(b){angular.forEach(b.itemList,function(b){a.push(b)})}),a}function V(a){var b=h.showModal({size:"sm"},{max_number:a,headerText:"Warning",bodyUrl:"gridAlertTemplate.html"});return b}function W(b){for(var c=0;c<a.edgDocumentGridOptions.columnDefs.length;c++)if(a.edgDocumentGridOptions.columnDefs[c].field===b)return a.edgDocumentGridOptions.columnDefs[c].sortField;return null}function X(b){a.selDateTypeOptions.selected={name:"As Of Date",value:b.searchOn},a.aisSelectedDate=b,K(!0)}function Y(){var b=r.defer();if(0!==Object.keys(g.SRC_DOCUMENT_META_DEF).length)return ba.length<1&&Z(g.SRC_DOCUMENT_META_DEF),b.resolve({status:"OK"}),a.loadingDocuments=!1,b.promise;var d=angular.uppercase(e.getEnvironment()),h=f.ERS_SVC_BASE_URLS[d]+""+f.PATH_TO_GET_DOC_META_DATA;a.loadingDocuments=!0;var i=function(c,d,e){return g.SRC_DOCUMENT_META_DEF=c.data.results.SRC_DOCUMENT_META_DEF,ba=[],Z(c.data.results.SRC_DOCUMENT_META_DEF),a.loadingDocuments=!1,b.resolve({status:"OK"}),b.promise},j=function(){return a.loadingDocuments=!1,b.resolve({status:"fail",errorMessage:g.MESSAGE_CONSTANTS.ERR_MSG_NO_DOC_TYPE}),b.promise};return c.getSrcDocMetaData(h).then(i,j),b.promise}function Z(b){for(var c in b)if(b.hasOwnProperty(c)){var f=b[c],g=f.productId;if(e.hasExactEntitlement(g))for(var h=f.solView,i=0;i<h.length;i++)if(h[i]===a.selectedView){var j={productId:g,docTypeName:c,displayName:f.displayName,groupBy:f.groupBy,frequency:f.frequency};ba.push(j),"CUSTODYACCOUNTS"===a.selectedView&&A(j)}}d.setSelectedDocTypes(angular.copy(ba))}var $=300,aa=300,ba=[],ca=[],da="",ea=d.documentsWidgetSelectedSubCategory.additionalFilters?d.documentsWidgetSelectedSubCategory.additionalFilters:"",fa="YYYY-MM-DD",ga="YYYY-MM-DD",ha="YYYYMMDD",ia=1,ja=0,ka=[],la=!1;a.aisSelectedDate={startDate:moment().subtract(90,"day"),endDate:moment()},a.isInfoDeliveryLoaded=!1,b.has("infodeliveryMainService")&&(a.isInfoDeliveryLoaded=!0),B(!0),a.disableApplyButton=!0,a.selectedView=d.getSelectedSolView(),a.listSearchResult=[],a.messages=[],a.loadingDocuments=!1,a.selectedSearchMethod="Create an ad hoc search",a.adhocSearch="Create an adhoc search",a.saveSearch="View a saved search",a.searchByName="Select..",a.input={freeText:""},a.iframeSrc=i.trustAsResourceUrl("about:blank"),a.windowHeight=3*parseInt(window.innerHeight)/4,a.showSearchBySave=!1,a.selectedRowIdx=null,a.sorting={userSorted:!1,sortAscending:!1,currSortingCol:"",sortByText:""},a.aisDateFilterOptions={onDateSelected:X,type:"edgDocs"},a.availDateTypeOptions=[{name:"As Of Date",value:"document_as_of_dt",selected:!0},{name:"Creation Date",value:"document_created_date",selected:!1},{name:"Upload Date",value:"edg_document_upload_timestamp",selected:!1}],a.selDateTypeOptions={selected:a.availDateTypeOptions[0]},a.availAsOfDateOptions=d.isAisView()?[]:w(),a.selAsOfDateOptions={},a.date={startDate:moment(),endDate:moment()},a.nxnDocsDateParams={options:{singleDatePicker:!1,opens:"left",locale:{format:"MM/DD/YYYY"}}},a.showDistributionOption=!1,a.showScheduleOption=!1,a.notificationRecords={},d.showAnpNotification=d.isAisView()&&e.hasExactEntitlement("AIS_PRL_INVALRT");var ma=g.SOL_VIEW_SPECIFIC_META_CONFIGS[a.selectedView],na=ma.hasOwnProperty("CATEGORY_COMPONENT_TYPE")?ma.CATEGORY_COMPONENT_TYPE:null,oa=ma.GRID_OPTIONS_COLUMNS_DEF;a.showAnpNotification=d.showAnpNotification,a.edgDocumentGridOptions={nxnExportOpts:!1,columnDefs:oa,enableNxnGridHeaderRefresh:!0,nxnRefreshDataFn:K,rowHeight:50,paginationPageSizes:[25,50,75,100],paginationPageSize:25,paginationCurrentPage:1,useExternalPagination:!0,useExternalSorting:!0,multiSelect:!0,enableNxnGridHeaderSearch:!1,enableNxnGridHeaderExport:!1,selectedItemSize:0,nxnGridHeaderTemplate:"partials/accounts/edg_documents/edg-documents-grid-header.html",paginationTemplate:"nxnDocumentsGridFooterTemplate.html",saveGridSettings:!0},a.getAisThirdPartyLegal=function(){return g.AIS_THIRDPARTY_LEGAL},a.showAisThirdPartyDisclaimer=!1,a.categoryFilters=l,a.categoryFilters.placeholder="Select Document Type",a.categoryFilters.hideIfSingleCategory=!0,a.categoryFilters.disableParentGroup=!1,a.isAisView=function(a){return d.isAisView()},a.showSubcategory=function(a){return na===a},a.autoSubmit={lastSubmittedValue:"",timerSubmit:null,cancelTimer:function(){null!=this.timerSubmit&&(k.cancel(this.timerSubmit),this.timerSubmit=null)},onChange:function(){this.cancelTimer(),this.lastSubmittedValue!==a.input.freeText.trim()&&(this.timerSubmit=k(function(){a.retrieveDocumentList()},250))}},a.$on("$destroy",function(){a.autoSubmit.cancelTimer()}),a.$on("ERS_FIRE_ELASTIC_SEARCH_EVENT",function(){L(!0)}),a.$on("AIS_NOTIFICATION_ACTION",function(){a.notificationRecords=d.eventArgs,a.launchAisNotification()}),a.$on("AIS_MULTIPLE_ROWS_ALERTSETTINGS_ACTION",function(){d.eventMultiActions;Q();var b=U();0!==b.length&&(a.notificationRecords=b,a.launchAisNotification())}),a.launchAisNotification=function(){angular.element("#aisAlertNotifier").trigger("click")},a.$on("ERS_EDG_SINGLE_ROW_ACTION",function(){var b=d.eventArgs,c=d.eventAction;a.perfomCtxMenuAction(c,b)}),a.$on("ERS_EDG_MULTIPLE_ROWS_ACTION",function(){var b=d.eventMultiActions;a.perfomCtxMenuActionMultipleRows(b)}),a.evaluateExp=function(b,c,d){if(!d)return c=c?c:"",a.$eval(b+'("'+c+'")');for(var e=c.split(","),f="",g=0;g<e.length;g++)if(e[g]){var h=d[e[g].trim()],i=h?h:"";f=""===f?'"'+i+'"':f+',"'+i+'"'}return a.$eval(b+"("+f+")")},a.formatValueAsStacked=function(a,b){return d.formatValueAsStacked(a,b)},a.formatValueInSingleRow=function(a,b){return d.formatValueInSingleRow(a,b)},a.formatValueAsStackedMobile=function(a,b){return d.formatValueInSingleRow(a,b)},a.formatValueInSingleRowMobile=function(a,b){return d.formatValueInSingleRow(a,b)},a.getValueMobile=function(a){return d.getValue(a)},a.getValue=function(a){return d.getValue(a)},a.formatDocDateMobile=function(b){return a.formatDocDate(b)},a.formatDocDate=function(a){return d.formatDocDate(a)},a.formatAisDocDate=function(a){return d.formatAisDocDate(a)},a.formatDateByUserSelectedTz=function(a){return d.formatDateByUserSelectedTz(a)},a.setSelectedDateRange=function(a){"Custom Range"!==a.name&&K(!0)},a.setSelectedDateType=function(b){a.selDateTypeOptions.selected=b,K(!0)},a.categoryFilters.onParentGrpChanged=function(){var b=a.categoryFilters.selectedParentGrp;a.categoryFilters.setDefaultSubGrp({key:b.key,display:b.display,avblDocTypes:b.avblDocTypes}),ba=[],angular.copy(b.avblDocTypes,ba),K(!0)},a.closeMessage=function(b){a.messages.splice(b,1)},a.changeMessage=function(b){a.messages=[],b&&b.hasOwnProperty("type")&&(a.messages.push({type:b.type,msg:b.msg}),n.hash("top"),o())},a.onSubGrpTagSelected=function(b){if(a.showAisThirdPartyDisclaimer=!1,a.categoryFilters.selectedSubGrp=b,b.isActive=!b.isActive,a.enableThirdPartyCategory){var c=a.categoryFilters.selectedParentGrp.subGroupCategory;if(b.customStyle)angular.forEach(c,function(a){!a.customStyle&&b.isActive?a.isActive=!1:a.customStyle||b.isActive||(a.isActive=!0)});else if(b.isActive){var e=_.find(c,function(a){return a.customStyle===!0});e.isActive=!1}else{var f=_.filter(c,function(a){if(a.isActive&&!a.customStyle)return a}).length;0===f&&angular.forEach(c,function(a){a.customStyle||(a.isActive=!0)})}}if(b.customStyle&&b.isActive){if(d.getAisThirdPartyAccepted())return a.showAisThirdPartyDisclaimer=!0,void a.categoryFilters.onSubGroupSelected();a.edgDocumentGridOptions.data=[],a.listSearchResult=[];var g={templateUrl:"partials/accounts/edg_documents/modal/third-party-ais.html",controller:["$scope","$modalInstance",s],windowClass:"nxn-documents-thirdparty-popup",scope:a};h.showModal(g)}else a.categoryFilters.onSubGroupSelected()},u(),v(),t(),a.categoryFilters.onSubGroupSelected=function(){var b=a.categoryFilters.selectedSubGrp;if("CUSTODYACCOUNTS"===a.selectedView){if(ba=[],angular.copy(b.avblDocTypes,ba),ea="",b.hasOwnProperty("frequency")&&b.frequency){var c=x(b.frequency);c&&(a.selAsOfDateOptions={selected:c})}}else ea="ALL"!==b.key.toUpperCase()?b.display:"";K(!0)},a.validateDistributionSearchResult=function(){if(0===a.listSearchResult.length)a.changeMessage({type:"warning",msg:g.MESSAGE_CONSTANTS.MSG_NO_DOCS_SELECTED_TO_DISTRIBUTE});else if(ja>aa)a.changeMessage({type:"warning",msg:g.MESSAGE_CONSTANTS.ERR_MSG_DOC_SELECTED_EXCEEDED_SEARCH_RESULT.replace("{0}",aa)});else if(ja>=100){var b={templateUrl:"AdhocDistWarning.html",controller:["$scope","$modalInstance","documentSearchConfigs","callBackFn",z],resolve:{callBackFn:function(){return a.showDistributionPopup}}};h.showModal(b)}else a.showDistributionPopup()},a.showDistributionPopup=function(b){if(d.selectedItemSize>aa)return void V(aa);var c={selRecord:b,totalRecords:angular.isDefined(b)?b.length:ja,currEnv:da,changeAlertMsg:a.changeMessage,showParentLoader:B,callElasticSearch:I},e={templateUrl:"partials/accounts/edg_documents/modal/adhoc-distribute.html",controller:"nxnDocsDistributionProfileController",scope:a,windowClass:"nxn-documents-distribution-popup",resolve:{modalData:function(){return c}}};h.showModal(e)},a.getSortingIcon=function(b){return a.sorting.userSorted!==!0?"":a.sorting.sortAscending&&a.sorting.currSortingCol===b?"sort-asc":a.sorting.sortAscending||a.sorting.currSortingCol!==b?void 0:"sort-desc"},a.downloadDocument=function(c){function e(a){return void 0!==a.cf15}if(d.downloadProgress.mainPage)return void a.changeMessage({type:"warning",msg:g.MESSAGE_CONSTANTS.INFO_EXISTING_REQ_IN_PROGRESS});if(d.selectedItemSize>$)return void V($);var f=function(b,c,e,f){if("CMP"===b.statusCode&&"00"===b.errorCode){var g=d.getDocumentURL(b);""!==g&&(a.iframeSrc=g)}else a.changeMessage({type:"danger",msg:b.errorMessage});d.downloadProgress.mainPage=!1,B(!1)},h=function(b,c,e,f){d.downloadProgress.mainPage=!1,B(!1),a.changeMessage({type:"danger",msg:g.MESSAGE_CONSTANTS.ERR_MSG_DOWNLOAD_FAILURE})};a.messages=[],d.downloadProgress.mainPage=!0,B(!0);var i=_.filter(c,e);if(i&&b.has("anpEntitlement")&&b.has("anpRbtEventPosting")){var j=b.get("anpRbtEventPosting");j.postEvents(i)}var k=new q;k.download(c,"attachment").then(f,h)},a.viewDocumentInPopup=function(a){var c=angular.isDefined(a.src_sys_doc_type_disp_name)&&null!==a.src_sys_doc_type_disp_name?a.src_sys_doc_type_disp_name:a.src_sys_doc_type_name;if(c+=a.document_status?" - "+a.document_status:"",d.openViewDocumentPopup([a],c),B(!1),a.cf15&&b.has("anpEntitlement")&&b.has("anpRbtEventPosting")){var e=b.get("anpRbtEventPosting");e.postEventsOnViewAction(a)}},a.retrieveDocumentList=function(){a.date.startDate>a.date.endDate?a.changeMessage({type:"danger",msg:g.MESSAGE_CONSTANTS.ERR_MSG_DATE_VALIDATION_FAILURE}):(a.messages=[],a.autoSubmit.cancelTimer(),a.autoSubmit.lastSubmittedValue=a.input.freeText.trim(),K(!0))},a.resetAisDateToDefaults=function(){a.aisDateFilterOptions.resetDateControl(),a.input.freeText=""},a.resetToDefaults=function(){a.input.freeText="",a.disableApplyButton=!0,v(),u(),K(!0)},a.showSchDistPopUp=function(b,c){var d={currView:b,selRecord:angular.isDefined(c)?c:{},availSearchDocsList:a.listSearchResult,docAsOfDt:M(),changeAlertMsg:a.changeMessage},e={templateUrl:"partials/accounts/edg_documents/modal/scheduled-distributions.html",controller:"nxnDocsScheduleDistributionsController",scope:a,windowClass:"nxn-documents-distribution-popup",resolve:{modalData:function(){return d}}};h.showModal(e)},a.perfomCtxMenuActionMultipleRows=function(b){Q();var c=U();if(0!==c.length)if("addschedule"===b)if("TRIPARTYDOCUMENTS"===a.selectedView){var d=[];angular.forEach(c,function(a){null!==a.document_status&&"FINAL"===a.document_status.toUpperCase()&&d.push(a)}),a.showSchDistPopUp("VIW_ADD_SCH_DIST_FRM_PARENT",d)}else a.showSchDistPopUp("VIW_ADD_SCH_DIST_FRM_PARENT",c);else"distributenow"===b?a.showDistributionPopup(c):"multidownload"===b&&a.downloadDocument(c)},a.perfomCtxMenuAction=function(b,c){if("moreinfo"===b){var d={templateUrl:"MoreInfo.html",controller:["$scope","$modalInstance","documentSearchConfigs","currRecord",y],windowClass:"nxn-documents-moreInfo-window",scope:a,resolve:{currRecord:function(){return c}}};h.showModal(d)}else"download"===b?a.downloadDocument([c]):"pdf"===b?a.viewDocumentInPopup(c):"distributeNow"===b?a.showDistributionPopup([c]):a.showSchDistPopUp("VIW_ADD_SCH_DIST_FRM_PARENT",[c])},a.edgDocumentGridOptions.onRegisterApi=function(b){a.gridApi=b,a.edgDocumentGridOptions.paginationAPI=b.pagination,b.selection.on.rowSelectionChanged(a,function(b){la=!1;var c=a.gridApi.selection.getSelectedRows().length,e=!0;d.selectedItemSize=T(e)+c,a.edgDocumentGridOptions.selectedItemSize=T(e)+c}),b.selection.on.rowSelectionChangedBatch(a,function(b){la=!1;var c=a.gridApi.selection.getSelectedRows(),e=!0;d.selectedItemSize=T(e)+c.length,a.edgDocumentGridOptions.selectedItemSize=T(e)+c.length}),b.pagination.on.paginationChanged(a,function(b,c){a.edgDocumentGridOptions.paginationPageSize!==c?(a.edgDocumentGridOptions.paginationPageSize=c,a.edgDocumentGridOptions.paginationCurrentPage=b,K(!0),la=!1):(Q(),a.edgDocumentGridOptions.paginationCurrentPage=b,K(),la=!0)}),b.core.on.rowsRendered(a,function(){la&&O(),P()}),a.gridApi.core.on.filterChanged(a,function(){a.gridApi.grid.selection.selectAll=!1,a.gridApi.selection.clearSelectedRows(),d.selectedItemSize=0,a.edgDocumentGridOptions.selectedItemSize=0,ka=[]}),a.gridApi.core.on.sortChanged(a,function(b,c){if(c.length>0){var d=c[c.length-1],e=d.sort.direction.toUpperCase(),f=W(d.field);a.sorting.userSorted=!0,a.sorting.currSortingCol=f,a.sorting.sortAscending="ASC"===e,a.sorting.sortByText=f+".raw:"+(a.sorting.sortAscending?"ASC":"DESC"),K(!0)}})}}angular.module("nxn.EDGDocuments").controller("nxnEDGDocumentsController",a),a.$inject=["$scope","$injector","nxnEDGDocumentsDataService","nxnEDGDocumentsService","PageContext","documentSvcUrls","documentSearchConfigs","ModalService","$sce","nxnDocumentsRelativeDateService","$timeout","nxnCategoryFilters","nxn.UserSettingsService","$location","$anchorScroll","ModalSpinnerService","nxnEDGDocumentsDownloadService","$q"]}(),function(){"use strict";function a(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.nxnEnter)}),b.preventDefault())})}}angular.module("nxn.EDGDocuments").directive("nxnEnter",a)}(),function(){"use strict";function a(a,b,c,d){a.showAnpNotification=c.showAnpNotification,a.handleSingleRowMenuAction=function(a,b){"alertsettings"!==a?c.broadcastActionItem(a,b):c.broadcastNotificationItem(a,b)},a.handleMultipleRowsMenuAction=function(a){c.broadcastMultipleActions(a)},a.handleMultipleRowsAlertSettingsAction=function(a){c.broadcastMultipleAlertSettingsActions(a)},a.getSelectedItemSize=function(){return c.selectedItemSize},a.formatValue=function(a,b){return angular.isDefined(a)&&null!==a&&angular.isDefined(b)&&null!==b?a+" - <br>"+b:angular.isDefined(a)&&null!==a?a:b},a.filterAction=function(e,f){var g=!0,h=c.getSelectedSolView(),i=d.SOL_VIEW_SPECIFIC_META_CONFIGS[h].SEARCH_FIELD_METADATA.CUSTOM_FIELD_MAPPINGS,j=b.hasExactEntitlement("ERC_ERS_DIST"),k=b.hasExactEntitlement("ERC_ERS_SCH");return"TRIPARTYDOCUMENTS"!==h||"addschedule"!==e||null!==f.document_status&&"FINAL"===f.document_status.toUpperCase()||(g=!1),"distributeNow"!==e||j!==!1&&a.showAnpNotification!==!0||(g=!1),"addschedule"!==e||j!==!1&&k!==!1&&a.showAnpNotification!==!0||(g=!1),"alertsettings"===e&&a.showAnpNotification===!1&&(g=!1),"moreinfo"===e&&0===i.length&&(g=!1),g}}angular.module("nxn.EDGDocuments").controller("nxnEDGActionDropdownController",a),a.$inject=["$scope","PageContext","nxnEDGDocumentsService","documentSearchConfigs"]}(),function(){function a(a){a.put("edgDocumentGridActionCellTemplate.html",'<div class="nxn-grid-template-cell" ng-controller="nxnEDGActionDropdownController"><div nxn-dropdown classlink="nxn-dropdown-link" linktext="Action" classmenu="nxn-custom-dropdown-menu" menualign="left" ng-if="getSelectedItemSize() < 2"><a ng-if="row.entity.document_fmt_type.toUpperCase() === \'PDF\'" class="nxn-cursor-pointer" ng-click="handleSingleRowMenuAction(\'pdf\', row.entity)"> View PDF</a><a ng-if="filterAction(\'alertsettings\', row.entity) === true && showAnpNotification" class="nxn-cursor-pointer" ng-click="handleSingleRowMenuAction(\'alertsettings\', row.entity)"> Alert Settings</a><a ng-if="filterAction(\'addschedule\', row.entity) === true && !showAnpNotification" class="nxn-cursor-pointer" ng-click="handleSingleRowMenuAction(\'addschedule\', row.entity)"> Create Distribution</a><a ng-if="filterAction(\'distributeNow\', row.entity) === true && !showAnpNotification" class="nxn-cursor-pointer" ng-click="handleSingleRowMenuAction(\'distributeNow\', row.entity)"> Distribute Now</a><a class="nxn-cursor-pointer" ng-click="handleSingleRowMenuAction(\'download\', row.entity)"> Download</a><a ng-if="filterAction(\'moreinfo\', row.entity) === true" class="nxn-cursor-pointer" ng-click="handleSingleRowMenuAction(\'moreinfo\', row.entity)"> More Info</a></div><div ng-if="getSelectedItemSize() > 1"><span ng-style="{\'color\': \'#bcbcbc\'}">Action&nbsp;<span class="fa fa-caret-down"></span></span></div></div>'),a.put("gridAccountNoAndNameColCellTemplate.html",'<div ng-controller="nxnEDGActionDropdownController" class="ui-grid-cell-contents" style="text-overflow:ellipsis; overflow:hidden; white-space:nowrap;" tooltip=\'{{row.entity.document_account_name}}\' tooltip-append-to-body="true" tooltip-placement=bottom><span bind-html-compile="formatValue(row.entity.document_account_no, row.entity.document_account_name)"></span></div>'),a.put("gridAccountNoAndNameColCellTemplateAisRecentDocWidget.html",'<div ng-controller="nxnEDGActionDropdownController" class="ui-grid-cell-contents" style="text-overflow:ellipsis; overflow:hidden; white-space:nowrap;" tooltip=\'{{row.entity.document_account_name}} {{row.entity.cf6}}\' tooltip-append-to-body="true" tooltip-placement=bottom><span bind-html-compile="formatValue(row.entity.document_account_name,row.entity.cf6)"></span></div>'),a.put("gridAccountNameAndNoColCellTemplate.html",'<div ng-controller="nxnEDGActionDropdownController" class="ui-grid-cell-contents" style="text-overflow:ellipsis; overflow:hidden; white-space:nowrap;" tooltip=\'{{row.entity.document_account_name}} {{row.entity.cf6}}\' tooltip-append-to-body="true" tooltip-placement=bottom><span bind-html-compile="formatValue(row.entity.document_account_name,row.entity.cf6)"></span></div>'),a.put("gridAffiliateNameAndSecDescColCellTemplate.html",'<div ng-controller="nxnEDGActionDropdownController" class="ui-grid-cell-contents" style="text-overflow:ellipsis; overflow:hidden; white-space:nowrap;" tooltip=\'{{row.entity.document_affiliate_name}}\' tooltip-append-to-body="true" tooltip-placement=bottom><span bind-html-compile="formatValue(row.entity.document_affiliate_name, row.entity.document_security_desc)"></span></div>'),a.put("gridDocTypeColCellTemplate.html",'<div ng-controller="nxnEDGActionDropdownController" class="ui-grid-cell-contents" tooltip=\'{{row.entity.src_sys_doc_type_disp_name}}\' tooltip-append-to-body="true" tooltip-placement=bottom style="text-overflow:ellipsis; overflow:hidden; white-space:nowrap;"><div ng-if="row.entity.document_fmt_type.toUpperCase() === \'PDF\'"><a class="nxn-cursor-pointer" ng-controller="nxnEDGActionDropdownController" ng-click="handleSingleRowMenuAction(\'pdf\', row.entity)">{{row.entity.src_sys_doc_type_disp_name}}</a></div><div ng-if="row.entity.document_fmt_type.toUpperCase() !== \'PDF\'">{{row.entity.src_sys_doc_type_disp_name}}</div></div>'),a.put("gridDocTypeWithStatusColCellTemplate.html",'<div ng-controller="nxnEDGActionDropdownController" class="ui-grid-cell-contents" tooltip=\'{{row.entity.src_sys_doc_type_disp_name}}\' tooltip-append-to-body="true" tooltip-placement=bottom style="text-overflow:ellipsis; overflow:hidden; white-space:nowrap;"><div ng-if="row.entity.document_fmt_type.toUpperCase() === \'PDF\'"><a class="nxn-cursor-pointer" ng-controller="nxnEDGActionDropdownController" ng-click="handleSingleRowMenuAction(\'pdf\', row.entity)"><span bind-html-compile="formatValue(row.entity.src_sys_doc_type_disp_name, row.entity.document_status)"></span></a></div><div ng-if="row.entity.document_fmt_type.toUpperCase() !== \'PDF\'"><span bind-html-compile="formatValue(row.entity.src_sys_doc_type_disp_name, row.entity.document_status)"></span></div></div>'),a.put("gridDocTypeNameAndFileNameColCellTemplate.html",'<div ng-controller="nxnEDGActionDropdownController" class="ui-grid-cell-contents" tooltip=\'{{row.entity.src_sys_doc_type_disp_name}}\' tooltip-append-to-body="true" tooltip-placement=bottom style="text-overflow:ellipsis; overflow:hidden; white-space:nowrap;"><div ng-if="row.entity.document_fmt_type.toUpperCase() === \'PDF\'"><a class="nxn-cursor-pointer" ng-click="handleSingleRowMenuAction(\'pdf\', row.entity)"><span bind-html-compile="formatValue(row.entity.src_sys_doc_type_disp_name, row.entity.cf2)"></span></a></div><div ng-if="row.entity.document_fmt_type.toUpperCase() !== \'PDF\'"><span bind-html-compile="formatValue(row.entity.src_sys_doc_type_disp_name, row.entity.cf2)"></span></div></div>'),a.put("gridClientIdAndNameColCellTemplate.html",'<div ng-controller="nxnEDGActionDropdownController" class="ui-grid-cell-contents" tooltip=\'{{row.entity.document_client_name}}\' tooltip-append-to-body="true" tooltip-placement=bottom style="text-overflow:ellipsis; white-space:nowrap; overflow:hidden;"><div ng-if="row.entity.document_client_name !== null && row.entity.document_client_id !== null"><span bind-html-compile="formatValue(row.entity.document_client_name, row.entity.document_client_id)"></span></div><div ng-if="row.entity.document_client_name !== null && row.entity.document_client_id === null">{{row.entity.document_client_name}}</div><div ng-if="row.entity.document_client_name === null && row.entity.document_client_id !== null">{{row.entity.document_client_id}}</div></div>'),a.put("gridFormatColCellTemplate.html","<div class=\"nxn-grid-template-cell\"><div ng-if=\"row.entity.document_fmt_type.toUpperCase()=='PDF' || row.entity.document_fmt_type.toUpperCase()=='CSV'\"<span class=\"fa fa-file-text-o\"></span></div><div ng-if=\"row.entity.document_fmt_type.toUpperCase()=='PUB' || row.entity.document_fmt_type.toUpperCase()=='XLSM'\"<span class=\"fa fa-file-text-o\"></span></div><div ng-if=\"row.entity.document_fmt_type.toUpperCase()=='TXT' || row.entity.document_fmt_type.toUpperCase()=='DOC' || row.entity.document_fmt_type.toUpperCase()=='DOCX'\"<span class=\"fa fa-file-word-o\"></span></div><div ng-if=\"row.entity.document_fmt_type.toUpperCase()=='XLS' || row.entity.document_fmt_type.toUpperCase()=='XLSX'\"<span class=\"fa fa-file-excel-o\"></span></div><div ng-if=\"row.entity.document_fmt_type.toUpperCase()=='JPG' || row.entity.document_fmt_type.toUpperCase()=='JPEG' || row.entity.document_fmt_type.toUpperCase()=='PNG' || row.entity.document_fmt_type.toUpperCase()=='BMP'\"<span class=\"fa fa-file-image-o\"></span></div><div ng-if=\"row.entity.document_fmt_type.toUpperCase()=='TIF' || row.entity.document_fmt_type.toUpperCase()=='TIFF' || row.entity.document_fmt_type.toUpperCase()=='GIF'\"<span class=\"fa fa-file-image-o\"></span></div><div ng-if=\"row.entity.document_fmt_type.toUpperCase()=='PPT' || row.entity.document_fmt_type.toUpperCase()=='PPTX'\"<span class=\"fa fa-file-powerpoint-o\"></span></div><div ng-if=\"row.entity.document_fmt_type.toUpperCase()=='ZIP'\"<span class=\"fa fa-file-archive-o\"></span></div><span> {{row.entity.document_fmt_type.toUpperCase()}}</span></div>"),
a.put("gridAlertTemplate.html",'<div class="modal-body"><div>You have reached the maximum number ({{modalOptions.max_number}}) of selections! Please unselect some records and try again.</div></div><div class="modal-footer"><button id="sysParamsSubmitConfirmSubmit" type="submit" class="btn btn-primary"ng-click="modalOptions.ok();">OK</button></div>'),a.put("nxnDocumentsGridFooterTemplate.html",'<!--[if gt IE 8]>\r\n<style>\r\n/* Fix for IE 9 to show the horizontal scroll bar in UI-Grid */\r\n.ui-grid-pager-panel  {\r\n    bottom: -22px;\r\n    border: 1px solid #ccc;\r\n    border-top-width: 0;\r\n    left: -1px;\r\n    right: -1px;\r\n    width: auto;\r\n}\r\n\r\n.nxn-grid .ui-grid {\r\n    margin-bottom: 42px;\r\n}\r\n</style>\r\n<![endif]--><div class=ui-grid-pager-panel nxn-ui-grid-footer ng-if=grid.options.enablePaginationControls><div class=nxn-pagination-container><div class="nxn-paging-item btn-back"><button type=button class="btn btn-primary" ng-click=paginationApi.previousPage() ng-disabled="cantPageBackward()"><i class="fa fa-angle-left nxn-fa-xl nxn-white-imp"></i></button></div><div class="nxn-paging-item select-page"><ui-select theme=selectize ng-model=grid.options.paginationCurrentPage on-select=paginationApi.seek($item.index)><ui-select-match placeholder="">Page {{paginationApi.getPage()}}</ui-select-match><ui-select-choices repeat="page.index as page in pages">{{page.label}}</ui-select-choices></ui-select></div><div class="nxn-paging-item btn-fwd"><button type=button class="btn btn-primary" ng-click=paginationApi.nextPage() ng-disabled="cantPageForward()"><i class="fa fa-angle-right nxn-fa-xl nxn-white-imp"></i></button></div><div class="nxn-paging-item select-row-range" ng-if="grid.options.paginationPageSizes.length > 1"><ui-select theme=selectize ng-model=grid.options.paginationPageSize><ui-select-match placeholder="">{{grid.options.paginationPageSize}} Rows</ui-select-match><ui-select-choices repeat="pageSize in grid.options.paginationPageSizes">{{pageSize}} Rows</ui-select-choices></ui-select></div><div class="nxn-paging-item row-range nxn-pad-right-20"><span ng-if="grid.options.paginationPageSizes.length <= 1" class=row-range-text>{{grid.options.paginationPageSize}}&nbsp;Rows&nbsp;&nbsp;</span> <span ng-show="grid.options.totalItems > 0" class=row-range-text>{{showingLow}} - {{showingHigh}} / {{grid.options.totalItems}}</span></div></div></div>'),a.put("savedSchDistGridActionCellTemplate.html",'<div ng-controller="nxnSchDistActionDropdownController" class="ui-grid-cell-contents"><div nxn-dropdown classlink="nxn-dropdown-link" linktext="Action" classmenu="nxn-custom-dropdown-menu" menualign="{{menualign}}"><div ng-repeat="action in schDistActions" ng-init="innerIndex = $index"><a ng-if="checkProfileAttached(row.entity) && row.entity.schedulePausedInd === \'Y\' && action.key === \'unpause\'" class="nxn-cursor-pointer" id="{{\'actionClick-\' + outerIndex + innerIndex}}" ng-click="performAction(action.key, row.entity)">{{action.display}}</a><a ng-if="checkProfileAttached(row.entity) && row.entity.schedulePausedInd === \'N\' && action.key === \'pause\'" class="nxn-cursor-pointer" id="{{\'actionClick-\' + outerIndex + innerIndex}}" ng-click="performAction(action.key, row.entity)">{{action.display}}</a><a ng-if="action.key !== \'pause\' && action.key !== \'unpause\'" class="nxn-cursor-pointer" id="{{\'actionClick-\' + outerIndex + innerIndex}}" ng-click="performAction(action.key, row.entity)">{{action.display}}</a></div></div></div>'),a.put("savedGridDistCellTemplate.html",'<div ng-controller="nxnSchDistActionDropdownController" class="ui-grid-cell-contents"><a ng-if="checkProfileAttached(row.entity)" ng-click="editDistributionProfile(row.entity)">{{row.entity.profileDesc}}</a><a ng-if="!checkProfileAttached(row.entity)" ng-click="addOrAttachDistProfile(row.entity)">Add</a></div></div>'),a.put("savedGridNameCellTemplate.html",'<div ng-controller="nxnSchDistActionDropdownController" class="ui-grid-cell-contents"><div ng-if="checkAliasMatched(row.entity) === true"><a ng-click="editSavedSchDistribution(row.entity)">{{row.entity.nodeName}}</a></div><div ng-if="checkAliasMatched(row.entity) === false"><span>{{row.entity.nodeName}}</span></div></div>'),a.put("savedGridScheduleCellTemplate.html",'<div ng-controller="nxnSchDistActionDropdownController" class="ui-grid-cell-contents"><span ng-if="checkProfileAttached(row.entity)">{{formatSchDescription(row.entity.scheduleId, row.entity.schedulePausedInd)}}</span></div>')}angular.module("nxn.EDGDocuments").run(a),a.$inject=["$templateCache"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(a){if(angular.isUndefined(h.selRecord)){var b=function(b,c,d,e){var f=b.data.data,g=j(f,a);k(g)},c=function(a,b,c,d){h.showParentLoader(!1),h.changeAlertMsg({type:"danger",msg:e.MESSAGE_CONSTANTS.ERR_MSG_GENERIC_SYSTEM_FAILURE})};h.showParentLoader(!0),h.changeAlertMsg({}),h.callElasticSearch(0,0,b,c)}else{var d=j(h.selRecord,a);k(d)}}function j(a,b){var c={distributionProfileDetail:{profileId:b.eventData.profileId,profileName:b.eventData.profileDesc},reportDetail:{workbook:{reportConfigs:[]}}},d=c.reportDetail.workbook.reportConfigs,f=e.REQUEST_ATTRIBUTE_MAPPING_FOR_DOCUMENTS;return angular.forEach(a,function(a){var b=null;e.SRC_DOCUMENT_META_DEF.hasOwnProperty(a.src_sys_doc_type_name.toUpperCase())&&(b=e.SRC_DOCUMENT_META_DEF[a.src_sys_doc_type_name.toUpperCase()]);var c={acReportConfiguration:{acReportConfigurationParam:[]}};for(var g in f)if(f.hasOwnProperty(g)){var h=f[g],i=a[h]?a[h]:"";"srcSysDocumentTypeName"===g&&null!==b&&angular.isDefined()&&(i=b.displayName);var j={parameterName:g,parameterValue:i};c.acReportConfiguration.acReportConfigurationParam.push(j)}var k={parameterName:"shellId",parameterValue:""};null!==b&&angular.isDefined(b)&&(k.parameterValue=b.shellId),c.acReportConfiguration.acReportConfigurationParam.push(k),d.push(c)}),c}function k(a){var b=d.ERS_SVC_BASE_URLS[m]+""+d.PATH_TO_ADHOC_DISTRIBUTION+"?taskName=rundistribute&requestOrigin=NXNDOCS";g.distributeDocument(b,a).then(function(a,b,c,d){h.showParentLoader(!1);a.data&&"00"===a.data.returnCode?h.changeAlertMsg({type:"success",msg:e.MESSAGE_CONSTANTS.MSG_DOCS_DISTRIBUTION_SUCCEEDED}):h.changeAlertMsg({type:"danger",msg:e.MESSAGE_CONSTANTS.ERR_MSG_DOCS_DISTRIBUTION_FAILURE})},function(a,b,c,d){h.showParentLoader(!1),h.changeAlertMsg({type:"danger",msg:e.MESSAGE_CONSTANTS.ERR_MSG_DOCS_DISTRIBUTION_FAILURE})})}function l(b,c){""!==b?a.message={type:c,msg:b}:a.message={}}var m=h.currEnv;a.currentDistributionUrl=c.trustAsResourceUrl("about:blank"),a.viewTemplate="partials/accounts/edg_documents/modal/distribution-profiles.html",a.currentDistributionUrl=c.trustAsResourceUrl(d.ERS_SVC_BASE_URLS[m]+""+d.PATH_TO_DISTRIBUTION_POPUP),a.message={},l(e.MESSAGE_CONSTANTS.MSG_TOTAL_DOCS_TO_DISTRIBUTE.replace("{0}",h.totalRecords),"info"),a.close=function(){b.dismiss("cancel")},a.distPopupCallBackFn=function(a){angular.isDefined(a.eventType)&&"REQ_COMPLETED"!==a.eventType||(i(a),b.dismiss("cancel"))},a.applyDistribution=function(){a.distributionRefObj.saveDistributionProfile&&a.distributionRefObj.saveDistributionProfile()},a.closeMessage=function(){a.message={}},a.distributionRefObj={callback:a.distPopupCallBackFn,origin:e.NEXEN_DOCUMENTS,dataBinding:{profileId:"-1",workbookId:"-1",profileName:""}}}angular.module("nxn.EDGDocuments").controller("nxnDocsDistributionProfileController",a),a.$inject=["$scope","$modalInstance","$sce","documentSvcUrls","documentSearchConfigs","nxnEDGDocumentsService","nxnEDGDocumentsDataService","modalData"]}(),function(){"use strict";function a(a,b,c){var d=b.getSelectedSolView();a.schDistActions=[{key:"pause",display:"Pause Distribution"},{key:"unpause",display:"Resume Distribution"},{key:"remove",display:"Delete"}],a.formatSchDescription=function(a,b){var c="";return c=parseInt(a)>-1&&"N"===b?"Active":"Paused"},a.performAction=function(a,c){b.broadcastSchDistItem(a,c)},a.checkProfileAttached=function(a){return!!(a.hasOwnProperty("odProfileId")&&a.odProfileId>-1)},a.editDistributionProfile=function(a){b.broadcastSchDistItem("editDistProfile",a)},a.addOrAttachDistProfile=function(a){b.broadcastSchDistItem("addOrAttachDistProfile",a)},a.checkAliasMatched=function(a){if(angular.isUndefined(b.getAccountControlProperties())||null===b.getAccountControlProperties()||angular.isUndefined(b.getAccountControlProperties().alias)||null===b.getAccountControlProperties().alias)return!0;var c=b.getAccountControlProperties().alias.toUpperCase();return!!("CUSTODYACCOUNTS"!==d||a.hasOwnProperty("workbookAlias")&&a.workbookAlias.toUpperCase()===c)},a.editSavedSchDistribution=function(a){b.broadcastSchDistItem("editSavedSchDistribution",a)}}angular.module("nxn.EDGDocuments").controller("nxnSchDistActionDropdownController",a),a.$inject=["$scope","nxnEDGDocumentsService","documentSearchConfigs"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){var a="AISINVESTMENTREPO"===ca.toUpperCase(),b="FUNDSDOCUMENTS"===ca.toUpperCase(),c="CLIENTSDOCUMENTS"===ca.toUpperCase();return a||b||c}function p(){"TYPE_CUSTODY"===a.accountCntrlType?a.selectedAccounts.value=a.workBenchAccountControlParams.getAccountControlData().selectedAccounts.value:angular.isDefined(a.distributionAccOptions)&&null!==a.distributionAccOptions&&(a.selectedAccounts.value=a.distributionAccOptions.selectedAccounts,a.availableAccounts=a.distributionAccOptions.availableAccounts)}function q(b){var c=s(b);a.currView=b,a.viewTemplate=c.path,a.schDistModalTitle=c.title,"VIW_DEFAULT"!==a.currView&&"VIW_ADD_SCH_DIST_FRM_PARENT"!==a.currView||(a.lblCancelBtn="Close"),"VIW_DEFAULT"===a.currView?a.defaultBannerInfo={show:"true",type:"alert-info",message:e.MESSAGE_CONSTANTS.MSG_SCHEDULE_DISTRIBUTION_SUPPORT_ONLY_WSA}:a.defaultBannerInfo={show:"false"}}function r(b){q(b),"VIW_DEFAULT"===b?z():"VIW_ADD_SCH_DIST_FRM_PARENT"===b&&(R(),ba=d.selRecord,t(),o()&&(a.distributionAccOptions.selections=h.getSearchProperties(),a.distributionAccOptions.fromSaved=!1),1===d.selRecord.length&&Y(d.selRecord[0]))}function s(a){for(var b={},c=0;c<ha.length;c++)if(a===ha[c].viewName){b=ha[c];break}return b}function t(){for(var b=[],c=[],d=h.getHikariFieldFilters(),e=angular.copy(h.getSelectedDocTypes()),f=angular.copy(h.getAllAccounts()),g=h.getCompositeAccountsMap(),i=0;i<ba.length;i++){var j=ba[i];if(!v(b,j[d.idxKeyField],fa.keyField)){var k=j[d.idxKeyField],l=angular.isDefined(g[k])?g[k]:null;null!==l&&(b.push(l),u(l,f,fa.keyField))}if(!v(c,j.src_sys_doc_type_name,"docTypeName")){var m=w(j.src_sys_doc_type_name);angular.isDefined(m)&&(c.push(m),u(m,e,"productId"))}}a.availableDocTypes=e,a.selectedDocTypes.value=c,o()?a.distributionAccOptions.selections[a.distributionAccOptions.selections.length-1].selectedAccounts=b:(a.availableAccounts=f,a.selectedAccounts.value=b,a.workBenchAccountControlParams.setSelectedAccounts(a.selectedAccounts.value))}function u(a,b,c){for(var d=0;d<b.length;d++)if(a[c]===b[d][c]){b.splice(d,1);break}}function v(a,b,c){for(var d=!1,e=0;e<a.length;e++)if(null!==a[e][c]&&null!==b&&a[e][c].toUpperCase()===b.toUpperCase()){d=!0;break}return d}function w(a){for(var b,c=angular.copy(h.getSelectedDocTypes()),d=0;d<c.length;d++)if(c[d].docTypeName.toUpperCase()===a.toUpperCase()){b=c[d];break}return b}function x(b,c){a.showHideAlert(!1),a.lblCancelBtn="Cancel",q(b),a.distributionRefObj={callback:a.saveProfileCallBackFn,origin:e.NEXEN_DOCUMENTS,dataBinding:{profileId:angular.isDefined(c)&&angular.isDefined(c.odProfileId)?c.odProfileId:"-1",workbookId:angular.isDefined(c)&&angular.isDefined(c.workbookId)?c.workbookId:"-1",profileName:angular.isDefined(c)&&angular.isDefined(c.profileDesc)?c.profileDesc:""}}}function y(a,b){z(a)}function z(b){var c=f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_LOAD_SAVED_SCH_DISTRIBUTIONS+"?resourceType=document&lobViewInd="+ca.toLowerCase(),d=function(b,c,d,e){a.listSavedSchDist=b.data.data,a.showLoadingSpinner=!1,a.listSavedSchDist&&a.listSavedSchDist.length>0&&A()},h=function(c,d,f,g){a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_RETRIEVE_SAVE_CONFIG_FAILURE,!0),a.showLoadingSpinner=!1,null!==b&&b.reject({data:a.listSavedSchDist})};a.showLoadingSpinner=!0,g.getSavedSchDistributions(c).then(d,h)}function A(){var b=angular.copy(a.listSavedSchDist);a.distributionGridOptions.data=null;for(var c=0;c<a.distributionGridOptions.columnDefs.length;c++){var d=a.distributionGridOptions.columnDefs[c];if(angular.isDefined(d.formatFunc)&&""!==d.formatFunc)for(var e=0;e<b.length;e++){var f=b[e],g=a.evaluateExp(d.formatFunc,d.arguments,f);f[d.field]=g}}angular.forEach(b,function(a,b){a.index=b}),a.distributionGridOptions.data=b}function B(){for(var b="",c=0;c<a.selectedDocTypes.value.length;c++){var d=a.selectedDocTypes.value[c];""===b?b=d.productId:b+=","+d.productId}return b}function C(){var b="",c=a.workBenchAccountControlParams.getAccountControlData().selectedAccountType.name;if("TYPE_CUSTODY"===a.accountCntrlType&&"All Accounts"===c)b="ALIAS_"+ia.alias;else{for(var d=0;d<a.selectedAccounts.value.length;d++){var e=a.selectedAccounts.value[d],f=e[fa.keyField],g=e[fa.displayField];f=angular.isDefined(f)&&null!==f?f.trim():" ",g=angular.isDefined(g)&&null!==g?g.trim():" ",""!==f&&""!==g&&(""===b?b=f+"="+g:b+="^"+f+"="+g)}if("TYPE_CUSTODY"===a.accountCntrlType){var h=a.workBenchAccountControlParams.getAccountControlData().selectedAccountGroups.value;if(0!==h.length){for(var i="",j=0;j<h.length;j++){var k=h[j],l=k.accountGroupId,m=k.accountGroupName;l=angular.isDefined(l)&&null!==l?l.trim():" ",m=angular.isDefined(m)&&null!==m?m.trim():" ",""!==l&&""!==m&&(""===i?i="<"+l+"="+m+">":i+="^<"+l+"="+m+">")}""!==b&&""!==i?b=b+"^"+i:""!==b&&""===i?b=b:""===b&&""!==i&&(b=i)}}}return b}function D(){var b=K(),c=f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_PERFORM_SCHEDULE_TASKS,d=function(b,c,d,f){var g=b.data;a.showLoadingSpinner=!1,g.hasOwnProperty("messageBody")&&g.messageBody[0].hasOwnProperty("schedules")&&parseInt(g.messageBody[0].schedules.scheduleId)>0?(a.schDist.scheduleId=g.messageBody[0].schedules.scheduleId,E()):a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_CREATE_SCHEDULE_FAILURE)},h=function(b,c,d,f){a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_CREATE_SCHEDULE_FAILURE)};a.showLoadingSpinner=!0,g.createWSASchedule(c,b).then(d,h)}function E(){var b=[{attributeKey:"profileId",attributeValue:a.schDist.profileId}],c=F("WORKBOOK",a.schDist.workbookId,"assosciateProfile",b),f=[{attributeKey:"scheduleId",attributeValue:a.schDist.scheduleId}],g=F("WORKBOOK",a.schDist.workbookId,"assosciateSchedule",f),h=function(b){var c=b[0].data,f=b[1].data;a.showLoadingSpinner=!1,c.hasOwnProperty("workbookId")&&parseInt(c.workbookId)>0&&f.hasOwnProperty("workbookId")&&parseInt(f.workbookId)>0?"VIW_ADD_SCH_DIST_FRM_PARENT"===da?(a.close(),d.changeAlertMsg({type:"success",msg:e.MESSAGE_CONSTANTS.MSG_SAVE_SCHEDULE_DISTRIBUTIONS_SUCCEEDED})):(r(da),a.showHideAlert(!0,"success",e.MESSAGE_CONSTANTS.MSG_SAVE_SCHEDULE_DISTRIBUTIONS_SUCCEEDED)):a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_ASSOCIATE_PROFILE_FAILURE)},i=function(b){a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_ASSOCIATE_PROFILE_FAILURE)};k.all([c,g]).then(h,i)}function F(a,b,c,d){var e=f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_SAVED_CONFIG_TASKS,h={};return angular.isDefined(d)&&null!==d&&d.length>0&&(h={taskId:0,taskSchema:"",taskDetailAttribute:d}),e=e+"?reportNodeType="+a+"&reportNodeId="+b+"&taskName="+c,g.performSavedRptTasks(e,h)}function G(b,c){var d=f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_SAVE_SEARCH_IN_HIKARI,e=J();a.showLoadingSpinner=!0,g.saveSearchInHikari(d,e).then(b,c)}function H(b){var c=e.SOL_VIEW_SPECIFIC_META_CONFIGS[ca].SEARCH_FIELD_METADATA.indexName,d=e.NAMESPACE_TOKEN.namespaceId,h=(e.NAMESPACE_TOKEN.token[aa],f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_REMOVE_SEARCH_IN_HIKARI.replace("{searchName}",b)+"?namespaceId="+d+"&indexName="+c);a.showLoadingSpinner=!0;var i=function(b,c,d,f){var g=b.data;a.showLoadingSpinner=!1,g.hasOwnProperty("meta")&&g.meta.hasOwnProperty("code")&&"SUCCESS"===g.meta.code.toUpperCase()?a.showHideAlert(!0,"success",e.MESSAGE_CONSTANTS.MSG_REMOVE_SVD_SCH_DIST_SUCCEEDED):a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_REMOVE_SVD_SCH_DIST_FAILURE)},j=function(b,c,d,f){a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_REMOVE_SVD_SCH_DIST_FAILURE)};g.removeSearchInHikari(h).then(i,j)}function I(){var b=function(b,c,d,f){a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_GENERIC_SYSTEM_FAILURE,!0),a.showLoadingSpinner=!1};S(a.schDist.workbookId,b,b)}function J(){var b="",c=e.SOL_VIEW_SPECIFIC_META_CONFIGS[ca].SEARCH_FIELD_METADATA.indexName,d=e.NAMESPACE_TOKEN.namespaceId;e.NAMESPACE_TOKEN.token[aa];b=a.customFilterList.length>0&&("VIW_ADD_SCH_DIST_FRM_PARENT"===a.currView||"VIW_EDIT_SCH_DIST"===a.currView)?"("+M()+" AND "+N()+" AND "+O()+")":"("+M()+" AND "+N()+")";var f={namespaceId:d,indexName:c,searchName:a.schDist.acRptConfigId,searchQuery:b,notifyMeta:{email:"ERSPlatformSupportGroup@bnymellon.com"}};return f}function K(){var b=e.SOL_VIEW_SPECIFIC_META_CONFIGS[ca].RESOURCE_TYPE,c={messageHeader:{sourceApp:"NXNDOCS",lobOwner:b,actionCode:"create"},messageBody:{schedules:[{scheduleId:"",sourceAppKey:a.schDist.workbookId,taskType:"6",pauseIndicator:"N",customSchedule:[],dailySchedule:[],oneTimeSchedule:[],rwfSchedule:[],fromDate:"",toDate:"",userSetTimeZone:"",cronValue:""}]}};return c}function L(){var b=C(),c=B(),f="1210",g=e.SOL_VIEW_SPECIFIC_META_CONFIGS[ca].SEARCH_FIELD_METADATA.indexName,i="",j={nodeId:-1,binderName:"",nodeType:"BINDER",workbook:{nodeId:-1,nodeType:"WORKBOOK",isTopReportConfig:"Y",saveType:"D",odProfileId:-1,scheduleId:-1,lobViewInd:ca,reportConfigs:[{reportConfigName:"",reportShellId:"",defaultOutputViewId:"ZIP",userOutputViewId:"ZIP",userSvdOnlineVwType:"ZIP",nodeType:"REPORT",acReportConfiguration:{}}]}};j.binderName=a.schDist.distName,j.workbook.workbookName=a.schDist.distName,j.workbook.reportConfigs[0].reportConfigName=a.schDist.distName,j.workbook.reportConfigs[0].reportShellId=f;var k=j.workbook.reportConfigs[0].acReportConfiguration;k.outputName=a.schDist.distName,k.acReportShellId=f,k.rptSolShellId="-1",k.odOutputTypeCode="ZIP",a.customFilterList.length>0&&("VIW_ADD_SCH_DIST_FRM_PARENT"===a.currView||"VIW_EDIT_SCH_DIST"===a.currView)&&(i="("+O()+")");var l=h.getHikariFieldFilters(),m=[{parameterName:"@acct_no",parameterValue:b},{parameterName:"@available_report_title",parameterValue:c},{parameterName:"@from_date",parameterValue:d.docAsOfDt.fromDate},{parameterName:"@to_date",parameterValue:d.docAsOfDt.toDate},{parameterName:"EMAIL_SUBJECT_LINE",parameterValue:""},{parameterName:"OPTIONAL_DIST_FORMAT",parameterValue:"ZIP"},{parameterName:"OPTIONAL_REPT_NAME",parameterValue:a.schDist.distName},{parameterName:"indexName",parameterValue:g},{parameterName:"searchFieldName",parameterValue:l.idxKeyField},{parameterName:"searchQuery",parameterValue:i},{parameterName:"subContext",parameterValue:o()?a.distributionAccOptions.selections[a.distributionAccOptions.selections.length-1].context:""},{parameterName:"OPTIONAL_VIEW_TYPE",parameterValue:"EXP_ZIP"},{parameterName:"date_displayed",parameterValue:d.docAsOfDt.fromDate+"]"+d.docAsOfDt.toDate}];return k.acReportConfigurationParam=m,j}function M(){var b=h.buildSimpleQuery(a.selectedDocTypes.value,"src_sys_doc_type_name.raw");return"("+b+")"}function N(){var b="",c="",d=h.getHikariFieldFilters(),e=a.workBenchAccountControlParams.getAccountControlData().selectedAccountType.name;if("TYPE_CUSTODY"===a.accountCntrlType&&"All Accounts"===e){var f=("ALIAS_"+ia.alias).trim();b=h.formatExactMatchQuery(f,d.idxKeyField+".raw")}else{for(var g=0;g<a.selectedAccounts.value.length;g++){var i=a.selectedAccounts.value[g][fa.keyField].trim();if(i){var j=h.formatExactMatchQuery(i.trim(),d.idxKeyField+".raw");b=""===b?j:b+" OR "+j}}if("TYPE_CUSTODY"===a.accountCntrlType){for(var k=a.workBenchAccountControlParams.getAccountControlData().selectedAccountGroups.value,l=0;l<k.length;l++){var m=k[l].accountGroupId;if(m){m=("GRP_"+m).trim();var n=h.formatExactMatchQuery(m,d.idxKeyField+".raw");c=""===c?n:c+" OR "+n}}""!==b&&""!==c?b=b+" OR "+c:""!==b&&""===c?b=b:""===b&&""!==c&&(b=c)}}return"("+b+")"}function O(){for(var b="",c=0;c<a.customFilterList.length;c++){var d=a.customFilterList[c],e=angular.isDefined(d.value)&&null!==d.value?d.value:"",f=h.formatExactMatchQuery(e.trim(),d.fieldName+".raw");b=""===b?f:b+" AND "+f}return"("+b+")"}function P(b){var c=b.split("^"),d=[],e=[],f=h.getCompositeAccountsMap(),g=h.getCompositeAccountGroupsMap(),i=angular.copy(h.getAllAccounts()),j=angular.copy(h.getAllAccountGroups()),k=0;if(o()){for(k=0;k<c.length;k++){var l=c[k].split("="),m={};m.Id=l[0],m.Name=l[1],d.push(m)}a.distributionAccOptions.selections[a.distributionAccOptions.selections.length-1].selectedAccounts=d}else if("TYPE_CUSTODY"===a.accountCntrlType&&/^(ALIAS_)/.test(b))a.workBenchAccountControlParams.setSelectedAccountType("All Accounts"),a.workBenchAccountControlParams.setSelectedAccounts([]),a.workBenchAccountControlParams.getAccountControlData().selectedAccountGroups.value=[];else{for(k=0;k<c.length;k++)if("TYPE_CUSTODY"===a.accountCntrlType&&(c[k].includes("<")||c[k].includes(">"))){c[k]=c[k].replace(/[<>]/g,"");var n=c[k].split("="),p=n[0];if(g&&g.hasOwnProperty(p)){var q=g[p];e.push(q),u(q,j,"accountGroupId")}}else{var r=c[k].split("="),s=r[0];if(f&&f.hasOwnProperty(s)){var t=f[s];d.push(t),u(t,i,fa.keyField)}}a.availableAccounts=i,a.selectedAccounts.value=d,"TYPE_CUSTODY"===a.accountCntrlType&&(a.workBenchAccountControlParams.setSelectedAccountType("Specific Accounts"),0!==a.selectedAccounts.value.length&&a.workBenchAccountControlParams.setSelectedAccounts(a.selectedAccounts.value),0!==e.length&&(0===a.selectedAccounts.value.length&&a.workBenchAccountControlParams.setSelectedAccountType("Specific Account Groups"),a.workBenchAccountControlParams.getAccountControlData().selectedAccountGroups.value=e))}}function Q(b){for(var c=b.split(","),d=[],e=angular.copy(h.getSelectedDocTypes()),f=0;f<c.length;f++)for(var g=0;g<e.length;g++)if(e[g].productId===c[f]){var i=e[g];d.push(i),u(i,e,"productId")}a.availableDocTypes=e,a.selectedDocTypes.value=d}function R(){a.selectedDocTypes.value=[],a.selectedAccounts.value=[],a.customFilterList=[],a.workBenchAccountControlParams.setSelectedAccounts(a.selectedAccounts.value),a.workBenchAccountControlParams.getAccountControlData().selectedAccountGroups.value=[],a.workBenchAccountControlParams.setSelectedAccountType("Specific Accounts"),o()&&(a.distributionAccOptions.selections[a.distributionAccOptions.selections.length-1].selectedAccounts=[],a.distributionAccOptions.selections[a.distributionAccOptions.selections.length-1].context=null,a.distributionAccOptions.fromSaved=!1),a.schDist={distName:"",workbookId:"",acRptConfigId:"",wkRptConfigId:"",profileId:"",profileName:"",scheduleId:""}}function S(b,c,d){var e=[{attributeKey:"",attributeValue:""}],f=F("WORKBOOK",b,"remove",e);a.showLoadingSpinner=!0,f.then(c,d)}function T(){var b=L(),c=f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_UPDATE_RPT_CONFIGURATION+"/"+a.schDist.acRptConfigId;return g.updateRptConfig(c,b)}function U(b){var c=b.nodeId,d=b.applicationReportCfgId,f=function(b,f,g,h){var i=b.data;a.showLoadingSpinner=!1,i&&(i.hasOwnProperty("statusMessage")||i.hasOwnProperty("workbookId"))?(H(d),W(c)):a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_REMOVE_SVD_SCH_DIST_FAILURE)},g=function(b,c,d,f){a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_REMOVE_SVD_SCH_DIST_FAILURE)};a.showLoadingSpinner=!0,S(c,f,g)}function V(b){var c=b.scheduleId;if(c<=0)return void a.showHideAlert(!0,"warning",e.MESSAGE_CONSTANTS.ERR_MSG_NO_SCHEDULE_ATTACHED);var d="Y"===b.schedulePausedInd?"Active":"Pause",h=f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_PERFORM_SCHEDULE_TASKS+"/"+c+"?state="+d,i="",j=function(d,f,g,h){var j=d.data;a.showLoadingSpinner=!1,j.hasOwnProperty("messageBody")&&j.messageBody[0].hasOwnProperty("statusInfo")&&"00"===j.messageBody[0].statusInfo.returnCode?(i="Y"===b.schedulePausedInd?e.MESSAGE_CONSTANTS.MSG_UNPAUSE_SCHEDULE_SUCCEEDED:e.MESSAGE_CONSTANTS.MSG_PAUSE_SCHEDULE_SUCCEEDED,a.showHideAlert(!0,"success",i),X(c),"Y"===b.schedulePausedInd?b.schedulePausedInd="N":b.schedulePausedInd="Y"):(i="Y"===b.schedulePausedInd?e.MESSAGE_CONSTANTS.ERR_MSG_UNPAUSE_SCHEDULE_FAILURE:e.MESSAGE_CONSTANTS.ERR_MSG_PAUSE_SCHEDULE_FAILURE,a.showHideAlert(!0,"danger",i))},k=function(c,d,f,g){a.showLoadingSpinner=!1,i="Y"===b.schedulePausedInd?e.MESSAGE_CONSTANTS.ERR_MSG_UNPAUSE_SCHEDULE_FAILURE:e.MESSAGE_CONSTANTS.ERR_MSG_PAUSE_SCHEDULE_FAILURE,a.showHideAlert(!0,"danger",i)};a.showLoadingSpinner=!0,g.pauseSchedule(h,{}).then(j,k)}function W(b){for(var c=0;c<a.listSavedSchDist.length;c++){var d=a.listSavedSchDist[c];if(d.nodeId===b){a.listSavedSchDist.splice(c,1),A();break}}}function X(b){for(var c=0;c<a.listSavedSchDist.length;c++){var d=a.listSavedSchDist[c];if(d.scheduleId===b){var e=d.schedulePausedInd;d.schedulePausedInd="Y"===e?"N":"Y";break}}}function Y(b){for(var c=e.SOL_VIEW_SPECIFIC_META_CONFIGS[ca].SEARCH_FIELD_METADATA.CUSTOM_FIELD_MAPPINGS,d=[],f=0;f<c.length;f++){var g=c[f];if(g.display===!0&&b.hasOwnProperty(g.mapping)&&angular.isDefined(b[g.mapping])&&""!==b[g.mapping]&&null!==b[g.mapping]){var h={fieldName:g.mapping,title:g.title,value:b[g.mapping],formattedDispValue:Z(g.renderFunc,b[g.mapping])};d.push(h)}}a.customFilterList=d}function Z(b,c){var d="";return a.$parent&&a.$parent[b]&&(d=a.$parent[b](c)),d}function $(){var b=!1,c=/^[a-zA-Z0-9~\-!@$^&()=_\ ]*$/,d=a.workBenchAccountControlParams.getAccountControlData().selectedAccountGroups.value,f=a.workBenchAccountControlParams.getAccountControlData().selectedAccountType.name;if(a.showHideAlert(!1),""===a.schDist.distName)angular.element("#txtSchDistName").focus(),a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_MANDATORY_DISTIRBUTION_NAME,!0),b=!0;else if(angular.isDefined(a.schDist.distName)&&""!==a.schDist.distName&&!c.test(a.schDist.distName))angular.element("#txtSchDistName").focus(),b=!0,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_INVALID_INPUT,!0);else if("TYPE_CUSTODY"!==a.accountCntrlType&&0===a.selectedAccounts.value.length)a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_MANDATORY_ACCOUNT_NUMBER,!0),b=!0;else if("TYPE_CUSTODY"!==a.accountCntrlType&&a.selectedAccounts.value.length>ga.accounts){var g=e.MESSAGE_CONSTANTS.ERR_MSG_ACCOUNTS_SELECTION_EXCEEDED_THE_LIMIT.replace(/\{0\}/g,ga.accounts);a.showHideAlert(!0,"danger",g,!0),b=!0}else if("TYPE_CUSTODY"===a.accountCntrlType&&"Specific Accounts"===f&&0===a.selectedAccounts.value.length&&0===d.length)a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_MANDATORY_ACCOUNT_NUMBER_GROUP,!0),b=!0;else if("TYPE_CUSTODY"===a.accountCntrlType&&a.selectedAccounts.value.length>500){var h=e.MESSAGE_CONSTANTS.ERR_MSG_ACCOUNTS_SELECTION_EXCEEDED_THE_LIMIT.replace(/\{0\}/g,500);a.showHideAlert(!0,"danger",h,!0),b=!0}else if("TYPE_CUSTODY"===a.accountCntrlType&&d.length>500){var i=e.MESSAGE_CONSTANTS.ERR_MSG_ACCOUNT_GROUPS_SELECTION_EXCEEDED_THE_LIMIT.replace(/\{0\}/g,500);a.showHideAlert(!0,"danger",i,!0),b=!0}else"TYPE_CUSTODY"===a.accountCntrlType&&"All Accounts"===f&&(a.selectedAccounts.value.length>0||d.length>0)?(a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_ALL_INDIVIDUAL_ACCOUNTS_NOT_SELECT_TOGETHER,!0),b=!0):0===a.selectedDocTypes.value.length&&(a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_MANDATORY_DOCUMENT_TYPE,!0),b=!0);return b}function _(a){var b={};a=a.replace(/(\\*)/g,""),a=a.replace(/ (AND|OR) /g,"");for(var c=a.split(/[()]+/).filter(function(a){return a}),d=0;d<c.length;d++){var e=c[d],f=e.replace(/(^:)|(:$)/g,"").split(/.raw:/g);b[f[0]]=f[1]}Y(b)}var aa=h.getCurrEnv(),ba=d.availSearchDocsList,ca=h.getSelectedSolView(),da=d.currView,ea="partials/accounts/edg_documents/modal/",fa=h.getAccountMappingField(),ga=h.getSchDistParamSelectionLimit(),ha=[{viewName:"VIW_DEFAULT",path:ea+"saved-scheduled-distributions.html",title:"Saved Distributions"},{viewName:"VIW_ADD_SCH_DIST",path:ea+"add-schedule-distributions.html",title:"New Distribution"},{viewName:"VIW_ADD_DIST_PROF",path:ea+"distribution-profiles.html",title:"Add Distribution Profile"},{viewName:"VIW_EDIT_SCH_DIST",path:ea+"add-schedule-distributions.html",title:"Edit Distribution"},{viewName:"VIW_EDIT_DIST_PROF",path:ea+"distribution-profiles.html",title:"Edit Distribution Profile"},{viewName:"VIW_ADD_SCH_DIST_FRM_PARENT",path:ea+"add-schedule-distributions.html",title:"New Distribution"}];a.isInfoDeliveryLoaded=!1,b.has("infodeliveryMainService")&&(a.isInfoDeliveryLoaded=!0);var ia=h.getAccountControlProperties(),ja={showAllAccounts:!0,accountType:"GSP",productCode:"NXN_AC",alias:null!==ia&&angular.isDefined(ia)?ia.alias:"",aliasToken:null!==ia&&angular.isDefined(ia)?ia.aliasToken:"",showAccountGroupEnabled:!0};a.workBenchAccountControlParams=new n(ja),a.workBenchAccountControlParams.setSelectedAccountType("Specific Accounts"),a.solView=ca,a.lblCancelBtn="",a.currView=da,a.listSavedSchDist=[],a.accountCntrlType=e.SOL_VIEW_SPECIFIC_META_CONFIGS[ca].ACCOUNT_CNTRL_TYPE,a.schDist={distName:"",workbookId:"",acRptConfigId:"",wkRptConfigId:"",profileId:"",profileName:"",scheduleId:""},a.alertInfo={show:"false"},a.defaultBannerInfo={show:"false"},a.showLoadingSpinner=!1,a.dataPerPage=50,a.selectedAccounts={},a.selectedAccounts.value=[],a.availableAccounts=[],a.selectedDocTypes={},a.selectedDocTypes.value=[],a.availableDocTypes=[],a.customFilterList=[],o()&&(a.distributionAccOptions={limit:ga.accounts,fromSaved:!1,selections:[{selectedAccounts:[],context:null}]}),a.accountFieldsInfo=[{dataField:fa.keyField,headerName:"Account Number"},{dataField:fa.displayField,headerName:"Account Name"}],a.docsFieldsInfo=[{dataField:"displayName",headerName:"Document Type"}];var ka=e.SOL_VIEW_SPECIFIC_META_CONFIGS[ca].SAVED_SCH_DIST_COLUMNS_DEF,la=e[ka];a.distributionGridOptions={nxnExportOpts:!1,appScopeProvider:a,columnDefs:la,rowHeight:30,enableSorting:!0,enablePagination:!0,enablePaginationControls:!0,paginationPageSizes:[25,50,75,100],paginationPageSize:25,enableRowSelection:!1,enableColumnMenus:!0,enableMenu:!0,useExternalSorting:!1,enableSelectAll:!1,multiSelect:!1,enableNxnGridHeader:!0,enableNxnGridHeaderSearch:!0,enableNxnGridHeaderRefresh:!0,nxnRefreshDataFn:y,nxnGridHeaderTemplate:"partials/accounts/edg_documents/modal/sch-dist-header.html",saveGridSettings:!0},a.distributionLabelText=h.getScheduledDistrLabel(),a.evaluateExp=function(b,c,d){for(var e=c.split(","),f="",g=0;g<e.length;g++){var h=d[e[g].trim()],i=h?h:"";f=""===f?'"'+i+'"':f+',"'+i+'"'}return a.$eval(b+"("+f+")")},a.getValue=function(a){return h.getValue(a)},a.formatDate=function(a){return h.formatDocDate(a)},a.formatSchDescription=function(a,b){var c="";return c=parseInt(a)>-1&&"N"===b?"When Available":"Paused"},a.checkProfileAttached=function(a){return!!(a.hasOwnProperty("odProfileId")&&a.odProfileId>-1)},a.cancel=function(){a.showHideAlert(!1),"VIW_ADD_SCH_DIST"===a.currView||"VIW_ADD_DIST_PROF"===a.currView||"VIW_EDIT_SCH_DIST"===a.currView||"VIW_EDIT_DIST_PROF"===a.currView?(a.workBenchAccountControlParams.setSelectedAccountType("Specific Accounts"),r("VIW_DEFAULT")):c.dismiss("cancel")},a.close=function(){c.dismiss("cancel")},a.showHideAlert=function(b,c,d,e){b?a.alertInfo={show:"true",type:c,message:d}:a.alertInfo.show="false",e&&(l.hash("btnSchDistModalClose"),m())},a.addSchDistributions=function(){a.showHideAlert(!1),a.lblCancelBtn="Cancel",q("VIW_ADD_SCH_DIST"),R(),t(),o()&&(a.distributionAccOptions.selections=h.getSearchProperties(),a.distributionAccOptions.fromSaved=!1)},a.onSaveAndContinue=function(){if(p(),!$()){var b=L(),c=f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_SAVE_RPT_CONFIGURATION,d=function(b,c,d,f){var g=b.data;if(a.showLoadingSpinner=!1,g.hasOwnProperty("workbookId")&&parseInt(g.workbookId)>0){
a.schDist.acRptConfigId=g.applicationReportCfgId,a.schDist.workbookId=g.workbookId;var h=function(b,c,d,e){var f=b.data;a.showLoadingSpinner=!1,f.hasOwnProperty("meta")&&f.meta.hasOwnProperty("code")&&"SUCCESS"===f.meta.code.toUpperCase()?a.addOrAttachDistProfile():I()},i=function(a,b,c,d){I()};G(h,i)}else a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_SAVE_CONFIG_FAILURE,!0)},h=function(b,c,d,f){a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_SAVE_CONFIG_FAILURE,!0)};a.showLoadingSpinner=!0,g.saveNewReportConfig(c,b).then(d,h)}},a.saveProfileCallBackFn=function(b){var c="";if(angular.isDefined(b.eventType)&&"REQ_COMPLETED"!==b.eventType)return void(a.showLoadingSpinner=!1);if("VIW_ADD_DIST_PROF"===a.currView)a.schDist.profileId=b.eventData.profileId,a.schDist.profileName=b.eventData.profileDesc,D();else if("VIW_EDIT_DIST_PROF"===a.currView)if(a.schDist.profileId===b.eventData.profileId)q("VIW_DEFAULT"),a.showLoadingSpinner=!1,a.showHideAlert(!0,"success",e.MESSAGE_CONSTANTS.MSG_SAVE_DISTRIBUTION_PROFILE_SUCCEEDED);else{c="-1"===b.eventData.profileId?"disassosciateProfile":"assosciateProfile";var d=[{attributeKey:"profileId",attributeValue:b.eventData.profileId}],f=F("WORKBOOK",a.schDist.workbookId,c,d),g=function(b,c,d,f){var g=b.data;a.showLoadingSpinner=!1,g.hasOwnProperty("workbookId")&&parseInt(g.workbookId)>0?(r("VIW_DEFAULT"),a.showHideAlert(!0,"success",e.MESSAGE_CONSTANTS.MSG_SAVE_DISTRIBUTION_PROFILE_SUCCEEDED)):a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_ASSOCIATE_PROFILE_FAILURE)},h=function(b,c,d,f){a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_ASSOCIATE_PROFILE_FAILURE)};a.schDist.profileId=b.eventData.profileId,f.then(g,h)}},a.saveOrUpdateDistProfile=function(){a.showHideAlert(!1),a.distributionRefObj.saveDistributionProfile&&a.distributionRefObj.saveDistributionProfile()},a.editSavedSchDistribution=function(b){var c=function(b,c,d,f){var g=b.data,i="";if(a.showLoadingSpinner=!1,g.hasOwnProperty("reportConfigurationId")&&parseInt(g.reportConfigurationId)>0){for(var j=g.configParams,k=0;k<j.length;k++){var l=j[k].parameterName;if("@acct_no"===l?P(j[k].parameterValue):"@available_report_title"===l?Q(j[k].parameterValue):"searchQuery"===l?angular.isDefined(j[k].parameterValue)&&null!==j[k].parameterValue&&_(j[k].parameterValue):"subContext"===l&&(i=j[k].parameterValue),k+1===j.length){q("VIW_EDIT_SCH_DIST");break}}if(o()){var m=h.getSearchProperties();a.distributionAccOptions.selections[a.distributionAccOptions.selections.length-1].context=""!==i?i:m[m.length-1].context,a.distributionAccOptions.fromSaved=!0}}else{if(o()){var n=h.getSearchProperties();a.distributionAccOptions.selections[a.distributionAccOptions.selections.length-1].context=n[n.length-1].context,a.distributionAccOptions.fromSaved=!0}a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_RETRIEVE_SAVE_CONFIG_FAILURE)}},d=function(b,c,d,f){if(a.showLoadingSpinner=!1,o()){var g=h.getSearchProperties();a.distributionAccOptions.selections[a.distributionAccOptions.selections.length-1].context=g[g.length-1].context,a.distributionAccOptions.fromSaved=!0}a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_RETRIEVE_SAVE_CONFIG_FAILURE)};a.showHideAlert(!1),a.lblCancelBtn="Cancel",R(),a.showLoadingSpinner=!0,a.schDist.distName=b.nodeName,a.schDist.acRptConfigId=b.applicationReportCfgId,a.schDist.workbookId=b.nodeId;var i=f.ERS_SVC_BASE_URLS[aa]+""+f.PATH_TO_GET_SAVED_RPT_CONFIGURATION+"/"+a.schDist.acRptConfigId;g.getSavedRptConfig(i).then(c,d)},a.onSaveAndReturn=function(){if(p(),!$()){var b=T(),c=[{attributeKey:"isTopLevelReport",attributeValue:"Y"},{attributeKey:"newName",attributeValue:a.schDist.distName}],d=F("WORKBOOK",a.schDist.workbookId,"rename",c),f=function(b){var c=b[0].data,d=b[1].data;if(c.hasOwnProperty("nodeId")&&parseInt(c.nodeId)>0&&d.hasOwnProperty("statusMessage")&&d.statusMessage.indexOf("success")!==-1){var f=function(b,c,d,f){a.showLoadingSpinner=!1,r("VIW_DEFAULT"),a.showHideAlert(!0,"success",e.MESSAGE_CONSTANTS.MSG_SAVE_SCHEDULE_DISTRIBUTIONS_SUCCEEDED)},g=function(b,c,d,f){a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_SAVE_CONFIG_FAILURE,!0)};G(f,g)}else a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_SAVE_CONFIG_FAILURE,!0)},g=function(b,c,d,f){a.showLoadingSpinner=!1,a.showHideAlert(!0,"danger",e.MESSAGE_CONSTANTS.ERR_MSG_SAVE_CONFIG_FAILURE,!0)};a.showLoadingSpinner=!0,k.all([b,d]).then(f,g)}},a.$on("ERS_EDG_SCH_DIST",function(){var b=h.eventArgs,c=h.eventAction;"editDistProfile"===c?a.editDistributionProfile(b):"addOrAttachDistProfile"===c?a.addOrAttachDistProfile(b):"editSavedSchDistribution"===c?a.editSavedSchDistribution(b):a.perfomAction(c,b)}),a.addOrAttachDistProfile=function(b){angular.isDefined(b)&&(R(),a.schDist.workbookId=b.workbookId),x("VIW_ADD_DIST_PROF")},a.editDistributionProfile=function(b){R(),a.schDist.profileId=b.odProfileId,a.schDist.workbookId=b.workbookId,x("VIW_EDIT_DIST_PROF",b)},a.perfomAction=function(b,c){a.showHideAlert(!1),"REMOVE"===b.toUpperCase()?U(c):V(c)},a.removeCustomFilter=function(b){a.customFilterList.splice(a.customFilterList.indexOf(b),1)},r(da)}angular.module("nxn.EDGDocuments").controller("nxnDocsScheduleDistributionsController",a),a.$inject=["$scope","$injector","$modalInstance","modalData","documentSearchConfigs","documentSvcUrls","nxnEDGDocumentsDataService","nxnEDGDocumentsService","nxnNgTableParams","$sce","$q","$location","$anchorScroll","workBenchAccountControlParams"]}(),function(){"use strict";function a(a,b,c,d,e,f){a.documentTitle=e.title,a.alertInfo={show:"false"},a.documentSrc=c.trustAsResourceUrl("about:blank"),a.windowHeight=3*parseInt(window.innerHeight)/4;var g=function(b,c,e,f){if("CMP"===b.statusCode&&"00"===b.errorCode){var g=d.getDocumentURL(b);""!==g&&(a.documentSrc=g)}else a.loadingViewDocuments=!1,a.alertInfo={show:"true",type:"danger",message:b.errorMessage};a.loadingViewDocuments=!1};a.close=function(){a.documentSrc=c.trustAsResourceUrl("about:blank"),b.dismiss("cancel")};var h=new f;h.download(e.currRecord,"inline").then(g),a.loadingViewDocuments=!0}angular.module("nxn.EDGDocuments").controller("nxnDocsViewDocumentController",a),a.$inject=["$scope","$modalInstance","$sce","nxnEDGDocumentsService","modalData","nxnEDGDocumentsDownloadService"]}(),function(){"use strict";function a(a,b,c,d,e,f){d.setSelectedSolView("ERURECONDOCUMENTS");var g=f.SOL_VIEW_SPECIFIC_META_CONFIGS[d.getSelectedSolView()].ACCOUNTS_MAPPING_FIELD;b.errorMessage="",b.filterTitle="Account Groups",b.availableAccounts=[],b.selectedAccounts=[],b.tabs=[{title:"Documents",sref:"reconciliation.documents({fromNav:'false'})",stateName:"reconciliation.documents",viewName:"reconDocuments",active:!1,activeOn:"reconciliation",isTabSpinner:!0}],b.accountsMultiSelectSettings={displayProp:g.displayField,idProp:g.keyField,externalIdProp:"",scrollable:"auto",maxHeight:"400px",dynamicTitle:!0,smartButtonMaxItems:1,buttonDefaultText:"Account Group",enableSearch:!0},b.availableAccountTypes=[{name:"All Account Groups"},{name:"Specific Groups"}],b.selectedAccountType=b.availableAccountTypes[0],b.accountTranslationTexts={singularDynamicButtonTextSuffix:"Account Group Selected",pluralDynamicButtonTextSuffix:"Account Groups Selected"},d.setTabList(b.tabs),d.resetAccounts(),"success"===e.promiseStatus&&(b.availableAccounts=e.data,d.setAvailableAccounts(e.data));var h=function(){a.$broadcast("ERS_FIRE_ELASTIC_SEARCH_EVENT",{})};b.$watch("selectedAccounts",function(a,c){a!==c&&(d.setSelectedAccounts(b.selectedAccounts),h())},!0),b.setSelectedAccountType=function(a,c){b.selectedAccountType=a,"All Account Groups"===a.name?(d.setSelectedAccounts([]),h()):b.selectedAccounts.length>0&&(d.setSelectedAccounts(b.selectedAccounts),h())}}angular.module("nxn.EDGDocuments").controller("nxnReconDocumentsFilterController",a),a.$inject=["$rootScope","$scope","nxnAccountsService","nxnEDGDocumentsService","promiseERUReconAccountsList","documentSearchConfigs"]}(),function(){"use strict";function a(a,b,c,d,e){c.setSelectedSolView("SECMODDOCUMENTS");var f=c.getSelectedSolView(),g=e.SOL_VIEW_SPECIFIC_META_CONFIGS[f].ACCOUNTS_MAPPING_FIELD;b.alertInfo={error:!1,message:""},b.filterTitle="Documents",b.availableFunds=[],b.selectedFunds=[],b.tabs=[{title:"Documents",sref:"secModReports.documents({fromNav:'false'})",stateName:"secModReports.documents",viewName:"secmodDocuments",active:!1,activeOn:"secModReports.documents",isTabSpinner:!0}],b.fundsMultiSelectSettings={displayProp:g.displayField,idProp:g.keyField,externalIdProp:"",scrollable:"auto",maxHeight:"400px",dynamicTitle:!0,smartButtonMaxItems:1,buttonDefaultText:"Funds",enableSearch:!0},b.availableFundTypes=[{name:"All Funds"},{name:"Specific Funds"}],b.selectedFundType=b.availableFundTypes[0],b.FundTranslationTexts={singularDynamicButtonTextSuffix:"Fund Selected",pluralDynamicButtonTextSuffix:"Fund Selected"},b.showHideAlert=function(a){a?b.alertInfo={error:!0,message:" The system cannot process your request now. Please try again later."}:b.alertInfo={error:!1,message:""}},c.setTabList(b.tabs),c.resetAccounts(),"success"===d.promiseStatus?(b.availableFunds=d.data,c.setAvailableAccounts(d.data)):b.showHideAlert(!0);var h=function(){a.$broadcast("ERS_FIRE_ELASTIC_SEARCH_EVENT",{})};b.$watch("selectedFunds",function(a,d){a!==d&&(c.setSelectedAccounts(b.selectedFunds),h())},!0),b.setSelectedFundType=function(a){b.selectedFundType=a,"All Funds"===a.name?(c.setSelectedAccounts([]),h()):b.selectedFunds.length>0&&(c.setSelectedAccounts(b.selectedFunds),h())}}angular.module("nxn.EDGDocuments").controller("nxnSecModFundsFilterController",a),a.$inject=["$rootScope","$scope","nxnEDGDocumentsService","promiseSecModFundsList","documentSearchConfigs"]}(),function(){"use strict";angular.module("nxn.EDGDocuments").value("documentSearchConfigs",{NAMESPACE_TOKEN:{token:{DEV:"K3dGuEciGsRi6wSoyYr7Qcd3sNy55Comt9ony0aUASA=",QA:"Y5exJ+7NTiaWpHaCTCy3oPzPMY+iTeCiBQdE2/+AgXU=",XAT:"YdNCbvvTZ0KRZZq5EI4PcDgmTDustWWzor/BVFTbQBc=",PRODUCTION:"mgTaQTloDg5g7wFf3pzEIP+yQP8kK+qmX86EXIlBDPM=",LOCAL:"K3dGuEciGsRi6wSoyYr7Qcd3sNy55Comt9ony0aUASA=",MOCK:"K3dGuEciGsRi6wSoyYr7Qcd3sNy55Comt9ony0aUASA="},namespaceId:"edgsearchdocuments"},NEXEN_DOCUMENTS:"ORG_NEXEN_DOCUMENTS",ACCOUNTS_RETRIEVAL_PROPS:{PRODUCT_ID:{TRIPARTYDOCUMENTS:"BDSSUBSCP",ERURECONDOCUMENTS:"ERS_EDG_ERURPT",CBSEFILES:"INVC00004ACC"}},AS_OF_DATE_OPTIONS:{TRIPARTYDOCUMENTS:["PAST_7_DAYS","PAST_30_DAYS","PAST_90_DAYS","PAST_6_MONTHS","PAST_1_YEAR","CUSTOM_RANGE"],CUSTODYACCOUNTS:["PRIOR_WEEKDAY","PAST_7_DAYS","PRIOR_MONTH","PAST_90_DAYS","PAST_6_MONTHS","PAST_1_YEAR","CUSTOM_RANGE"],ERURECONDOCUMENTS:["PAST_7_DAYS","PAST_30_DAYS","PAST_90_DAYS","PAST_6_MONTHS","PAST_1_YEAR","CUSTOM_RANGE"],CBSEFILES:["PAST_7_DAYS","PAST_30_DAYS","PAST_90_DAYS","PAST_6_MONTHS","PAST_1_YEAR","CUSTOM_RANGE"],SECMODDOCUMENTS:["PAST_7_DAYS","PAST_30_DAYS","PAST_90_DAYS","PAST_6_MONTHS","PAST_1_YEAR","CUSTOM_RANGE"]},AIS_THIRDPARTY_LEGAL:"BNY Mellon’s client has requested that BNY Mellon make available to you certain documents (“Third Party Documents”) with respect to one or more of the investment funds sponsored or managed by our client (each a “Fund”).  The Third Party Documents are being made available to you at the request of our client and are intended for general information and reference purposes only.  BNY Mellon does not sponsor or endorse any Fund and is in no way affiliated or otherwise associated with such Fund.  BNY Mellon has not prepared, reviewed, evaluated or otherwise examined any Third Party Documents and is not responsible for their contents.  The Third Party Documents are provided on an “as is” basis and are at your sole risk.  BNY Mellon makes no representations, warranties, guarantees or assurances of any kind regarding the Third Party Documents or any Fund, and BNY Mellon shall not be responsible or liable for any damages or losses that arise from any use of the Third Party Documents or your investment in any Fund.",AVBL_DATE_FILTER_OPTIONS:{PRIOR_WEEKDAY:{name:"Prior Weekday",value:"RelDate,2,0,0,0",shortKey:"PBD"},PAST_7_DAYS:{name:"Past 7 Days",value:"RelDate,1,0,0,-7",shortKey:"P7D"},PRIOR_MONTH:{name:"Prior Month",value:"RelDate,13,0,0,0",shortKey:"PBM"},PAST_30_DAYS:{name:"Past 30 Days",value:"RelDate,1,0,0,-30",shortKey:"P30D"},PAST_90_DAYS:{name:"Past 90 Days",value:"RelDate,1,0,0,-90",shortKey:"P90D"},PAST_6_MONTHS:{name:"Past 6 Months",value:"RelDate,1,0,0,-180",shortKey:"P6M"},PAST_1_YEAR:{name:"Past 1 year",value:"RelDate,1,0,0,-365",shortKey:"P1Y"},CUSTOM_RANGE:{name:"Custom Range",value:"",shortKey:"CUSTM"}},SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:100,cellTemplate:"savedSchDistGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colName",field:"nodeName",displayName:"Name",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,cellTemplate:"savedGridNameCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDist",field:"profileDesc",displayName:"Distribution Profile",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,cellTemplate:"savedGridDistCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colSchedule",field:"scheduleDesc",displayName:"Schedule Status",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:100,cellTemplate:"savedGridScheduleCellTemplate.html",arguments:"scheduleId,schedulePausedInd",renderFunc:"formatSchDescription",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colCreate",field:"lastOutputDate",displayName:"Last Distribution",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,width:150,cellClass:"text-left",headerCellClass:"text-left",formatFunc:"formatDate",arguments:"lastOutputDate",exporterSuppressExport:!0,visible:!0},{name:"colUpdate",field:"updateDate",displayName:"Last Update",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",formatFunc:"formatDate",arguments:"updateDate",exporterSuppressExport:!0,visible:!0}],SAVED_SCH_DIST_GRID_COLUMNS_DEF_CUSTODY:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:100,cellTemplate:"savedSchDistGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colName",field:"nodeName",displayName:"Name",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,cellTemplate:"savedGridNameCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDist",field:"profileDesc",displayName:"Distribution Profile",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,cellTemplate:"savedGridDistCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colSchedule",field:"scheduleDesc",displayName:"Schedule Status",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:100,cellTemplate:"savedGridScheduleCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colAlias",field:"workbookAlias",displayName:"Client Alias",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,width:120,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colCreate",field:"lastOutputDate",displayName:"Last Distribution",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,width:150,cellClass:"text-left",headerCellClass:"text-left",formatFunc:"formatDate",arguments:"lastOutputDate",exporterSuppressExport:!0,visible:!0},{name:"colUpdate",field:"updateDate",displayName:"Last Update",enableColumnMenu:!0,enableSorting:!0,enableHiding:!0,enableFiltering:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",formatFunc:"formatDate",arguments:"updateDate",exporterSuppressExport:!0,visible:!0}],MESSAGE_CONSTANTS:{ERR_MSG_GENERIC_SYSTEM_FAILURE:" The system cannot process your request now. Please try again later.",ERR_MSG_DOWNLOAD_FAILURE:"The system encountered an issue while downloading. Please contact your system administrator for assistance.",ERR_MSG_NO_DOCS_FOUND:" There are no documents that match the search criteria.",ERR_MSG_DOWNLOAD_TIMEOUT:"Document download has timed out. Please try again later.",ERR_MSG_NO_ENTITLEMENTS:" You do not have the required entitlements to access this resource. Please contact your system administrator for assistance.",ERR_MSG_UPDATE_DISTIRIBUTION_PROFILE:" The system encountered an issue while saving a profile. Please contact your system administrator for assistance.",ERR_MSG_DISTIRBUTE_FAILURE:"The system cannot process your request now. Please try again later.",ERR_MSG_DATE_VALIDATION_FAILURE:" To Date should be always greater or equal to From Date.",ERR_MSG_DOCS_DISTRIBUTION_FAILURE:" The system encountered an issue while distributing the documents. Please contact your system administrator for assistance.",MSG_DOCS_DISTRIBUTION_SUCCEEDED:" Documents distribution has initiated successfully.",MSG_NO_DOCS_SELECTED_TO_DISTRIBUTE:" No documents were selected for distribution.",ERR_MSG_SAVE_CONFIG_FAILURE:"The system encountered an issue while saving a scheduled distribution. Please contact your system administrator for assistance.",ERR_MSG_ASSOCIATE_PROFILE_FAILURE:" The system encountered an issue while associating a profile. Please contact your system administrator for assistance.",ERR_MSG_RETRIEVE_SAVE_CONFIG_FAILURE:"The system encountered an issue while retrieving a saved configuration. Please contact your system administrator for assistance.",ERR_MSG_CREATE_SCHEDULE_FAILURE:" The system encountered an issue while creating a schedule. Please contact your system administrator for assistance.",ERR_MSG_REMOVE_SVD_SCH_DIST_FAILURE:" The system encountered an issue while removing a scheduled distribution. Please contact your system administrator for assistance.",MSG_REMOVE_SVD_SCH_DIST_SUCCEEDED:" Distribution is removed successfully.",ERR_MSG_PAUSE_SCHEDULE_FAILURE:" The system encountered an issue while pausing a schedule. Please contact your system administrator for assistance.",ERR_MSG_UNPAUSE_SCHEDULE_FAILURE:" The system encountered an issue while unpausing a schedule. Please contact your system administrator for assistance.",MSG_PAUSE_SCHEDULE_SUCCEEDED:" Schedule is paused.",MSG_UNPAUSE_SCHEDULE_SUCCEEDED:" Schedule is resumed.",ERR_MSG_NO_SCHEDULE_ATTACHED:" No schedule has attached.",MSG_SAVE_SCHEDULE_DISTRIBUTIONS_SUCCEEDED:" Success! The scheduled distribution has been saved.",MSG_SAVE_DISTRIBUTION_PROFILE_SUCCEEDED:" Success! Your profile has been saved.",ERR_MSG_MANDATORY_DISTIRBUTION_NAME:" Please provide a distribution name.",ERR_MSG_MANDATORY_ACCOUNT_NUMBER:" Please select an account.",ERR_MSG_MANDATORY_ACCOUNT_NUMBER_GROUP:" Please select an account or account group.",ERR_MSG_ALL_INDIVIDUAL_ACCOUNTS_NOT_SELECT_TOGETHER:" Please select either accounts or all accounts.",ERR_MSG_MANDATORY_DOCUMENT_TYPE:" Please select a document type.",ERR_MSG_INVALID_INPUT:" Profile name can contain only alphabets, numbers and the following special characters ~ - ! @ $ ^ & ( ) = _",MSG_DOC_SELECTED_SEARCH_RESULT_EXCEEDED_100:" You have requested to distribute more than 100 documents. Click Confirm to continue.",ERR_MSG_DOC_SELECTED_EXCEEDED_SEARCH_RESULT:" Results exceed the distribution limit of {0} documents. Please refine your search.",MSG_TOTAL_DOCS_TO_DISTRIBUTE:" You have selected {0} document(s) for distribution.",MSG_SCHEDULE_DISTRIBUTION_SUPPORT_ONLY_WSA:' Distributions are always scheduled as "When Available".',ERR_MSG_ACCOUNTS_SELECTION_EXCEEDED_THE_LIMIT:" Please reduce your accounts selection as it exceeds the limit of {0}.",ERR_MSG_ACCOUNT_GROUPS_SELECTION_EXCEEDED_THE_LIMIT:" Please reduce your account group selection as it exceeds the limit of {0}.",INFO_EXISTING_REQ_IN_PROGRESS:" Please wait for current download to complete.",ERR_MSG_NO_DOCS_AVAILABLE:" No documents available to view.",ERR_MSG_NO_DOC_TYPE:"Failed to retrieve document types."},REQUEST_ATTRIBUTE_MAPPING_FOR_DOCUMENTS:{srcSysDocumentTypeName:"src_sys_doc_type_disp_name",sourceSystemMmnemonic:"source_system_mnemonic",documentItemId:"document_item_id",documentClientId:"document_client_id",documentAsOfDate:"document_as_of_dt",documentAccountNo:"document_account_no",documentAccountDesc:"document_account_name",documentItemTypeClass:"document_item_type_class",documentCreatedDate:"document_created_date",sourceSystemPrimaryKey:"source_system_primary_key",edgDocumentUploadDate:"edg_document_upload_timestamp",retentionClassId:"retention_class_id",documentFormatType:"document_fmt_type",documentStatus:"document_status",documentUserId:"document_user_id",documentSource:"document_source",documentAffiliateId:"document_affiliate_id",enrollmentDate:"enrollment_date",documentAffiliateName:"document_affiliate_name",documentClientName:"document_client_name"},DOCS_DASHBOARD_METADATA_CONFIGS:{AVBL_SOLUTION_VIEWS_MAPPING:{ERS_EDG_BILL:"TRIPARTYDOCUMENTS",ERS_EDG_CUST:"CUSTODYACCOUNTS",AIS_PRL_NXN_SFM:"FUNDSDOCUMENTS,CLIENTSDOCUMENTS",AIS_PRL_NXN_INT:"FUNDSDOCUMENTS,CLIENTSDOCUMENTS,PROPERTIESDOCUMENTS",AIS_PRL_NXN_INV:"AISINVESTMENTREPO",AIS_PRL_NXN_DIS:"AISINVESTMENTREPO",AIS_PRL_NXN_RPM:"PROPERTIESDOCUMENTS",AIS_PRL_NXN_RFM:"FUNDSDOCUMENTS,PROPERTIESDOCUMENTS",ERS_EDG_ERU:"ERURECONDOCUMENTS",ERS_EDG_CBSE:"CBSEFILES",SEC_MOD_DOC:"SECMODDOCUMENTS"},SOL_VIEW_SPECIFIC_CONFIGS:{TRIPARTYDOCUMENTS:{ELASTIC_SEARCH_IDX_NAME:"t_csc_document1",HIKARI_SEARCH_FIELD:"document_account_no",ACCOUNTS_MAPPING_FIELD:{keyField:"accountID",displayField:"accountShortName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"getValue",arguments:"src_sys_doc_type_disp_name",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Account Name and Number",uniqueId:"accNameWithNum",default:!0,isSelected:!0,class:"text-left",visible:!0,fixed:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"document_account_no,document_account_name",sortableArguments:"document_account_name"},{title:"Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{display:"Billing Accounts",viewName:"TRIPARTYDOCUMENTS",resourceType:"bds",visible:!0,pathUrl:"nxnAccounts/triPartyRepo/documents",subGroupCategory:[],avblDocTypes:[]}},CUSTODYACCOUNTS:{ELASTIC_SEARCH_IDX_NAME:"t_cap_document1",HIKARI_SEARCH_FIELD:"document_account_no",ACCOUNTS_MAPPING_FIELD:{keyField:"displayAccountNumber",displayField:"accountName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"getValue",arguments:"src_sys_doc_type_disp_name",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Account Name and Number",uniqueId:"accNameWithNum",default:!0,isSelected:!0,class:"text-left",visible:!0,fixed:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"document_account_no,document_account_name",sortableArguments:"document_account_name"},{title:"Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{display:"Custody Accounts",viewName:"CUSTODYACCOUNTS",resourceType:"custody",pathUrl:"nxnAccounts/custody/documents",visible:!0,subGroupCategory:[],avblDocTypes:[]}},FUNDSDOCUMENTS:{ELASTIC_SEARCH_IDX_NAME:"t_pra_document1",HIKARI_SEARCH_FIELD:"document_affiliate_id",ACCOUNTS_MAPPING_FIELD:{keyField:"fundId",displayField:"fundName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left wrapText",visible:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"src_sys_doc_type_disp_name,cf2",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Entity Name",uniqueId:"clientId",class:"text-left wrapText",default:!0,isSelected:!0,visible:!0,sortable:!0,sortField:"document_affiliate_name",renderFunc:"formatValueAsStacked",arguments:"document_affiliate_name,document_security_desc"},{title:"Valuation Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatAisDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{display:"Portfolio Documents",viewName:"FUNDSDOCUMENTS",resourceType:"ais",visible:!0,pathUrl:"/ais/portfolios/documents",hikariFilterField:"document_top_level_category",avblDocTypes:[],subGroupCategory:[{key:"COMTAX",display:"Compliance / Tax",visible:!0},{key:"CORR",display:"Correspondence",visible:!0},{key:"CRPSSEC",display:"Corporate Secretarial",visible:!0},{key:"FMNGR",display:"Fund / Manager Reports",visible:!0},{key:"LEGAL",display:"Legal",visible:!0},{key:"TCONF",display:"Transactions and Confirmations",visible:!0}]}},CLIENTSDOCUMENTS:{ELASTIC_SEARCH_IDX_NAME:"t_pra_document1",HIKARI_SEARCH_FIELD:"document_account_no",ACCOUNTS_MAPPING_FIELD:{keyField:"investorId",displayField:"investorName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"src_sys_doc_type_disp_name,cf2",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Account Description",fixed:!0,uniqueId:"accNameWithNum",class:"text-left",default:!0,isSelected:!0,visible:!0,sortable:!0,sortField:"document_account_name",renderFunc:"formatValueAsStacked",arguments:"document_account_name"},{title:"Entity",uniqueId:"clientId",class:"text-left",default:!0,isSelected:!0,visible:!0,sortable:!0,sortField:"document_affiliate_name",renderFunc:"formatValueAsStacked",arguments:"document_affiliate_name"},{title:"Valuation Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatAisDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{display:"Investor Documents",viewName:"CLIENTSDOCUMENTS",resourceType:"ais",pathUrl:"ais/investors/documents",hikariFilterField:"document_top_level_category",visible:!0,avblDocTypes:[],subGroupCategory:[{key:"COMTAX",display:"Compliance / Tax",visible:!0},{key:"CORR",display:"Correspondence",visible:!0},{key:"FMNGR",display:"Fund / Manager Reports",visible:!0},{key:"STMT",display:"Statements",visible:!0},{key:"TCONF",display:"Transactions and Confirmations",visible:!0}]}},PROPERTIESDOCUMENTS:{ELASTIC_SEARCH_IDX_NAME:"t_pra_document1",HIKARI_SEARCH_FIELD:"document_security_id",ACCOUNTS_MAPPING_FIELD:{keyField:"propertyId",displayField:"propertyName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"src_sys_doc_type_disp_name,cf2",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Entity Name",uniqueId:"clientId",class:"text-left",default:!0,isSelected:!0,visible:!0,sortable:!0,sortField:"document_affiliate_name",renderFunc:"formatValueAsStacked",arguments:"document_affiliate_name"},{title:"Valuation Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatAisDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{display:"Property Documents",viewName:"PROPERTIESDOCUMENTS",resourceType:"ais",pathUrl:"ais/portfolios/documents",hikariFilterField:"document_top_level_category",visible:!0,avblDocTypes:[],subGroupCategory:[{key:"COMTAX",display:"Compliance / Tax",visible:!0},{key:"CORR",display:"Correspondence",visible:!0},{key:"FMNGR",display:"Fund / Manager Reports",visible:!0},{key:"TCONF",display:"Transactions and Confirmations",visible:!0}]}},AISINVESTMENTREPO:{ELASTIC_SEARCH_IDX_NAME:"t_pra_document1",HIKARI_SEARCH_FIELD:"document_account_no",ACCOUNTS_MAPPING_FIELD:{keyField:"accountID",displayField:"accountShortName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"src_sys_doc_type_disp_name,cf2",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Account Description",fixed:!0,uniqueId:"accNameWithNum",class:"text-left",default:!0,isSelected:!0,visible:!0,sortable:!0,sortField:"document_account_name",renderFunc:"formatValueAsStacked",arguments:"document_account_name"},{title:"Entity",uniqueId:"clientId",class:"text-left",default:!0,isSelected:!0,visible:!0,sortable:!0,sortField:"document_affiliate_name",renderFunc:"formatValueAsStacked",arguments:"document_affiliate_name"},{title:"Valuation Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatAisDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{display:"Account Documents",viewName:"AISINVESTMENTREPO",resourceType:"ais",pathUrl:"ais/investments/documents",hikariFilterField:"document_top_level_category",visible:!0,avblDocTypes:[],subGroupCategory:[{key:"COMTAX",display:"Compliance / Tax",visible:!0},{key:"CORR",display:"Correspondence",visible:!0},{key:"FMNGR",display:"Fund / Manager Reports",visible:!0},{key:"STMT",display:"Statements",visible:!0},{key:"TCONF",display:"Transactions and Confirmations",visible:!0}]}},ERURECONDOCUMENTS:{ELASTIC_SEARCH_IDX_NAME:"t_eru_document1",HIKARI_SEARCH_FIELD:"document_account_no",ACCOUNTS_MAPPING_FIELD:{keyField:"accountID",displayField:"accountShortName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"getValue",arguments:"src_sys_doc_type_disp_name",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Business Unit",uniqueId:"accNameWithNum",default:!0,isSelected:!0,class:"text-left",visible:!0,fixed:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"document_account_no,document_account_name",sortableArguments:"document_account_name"},{title:"Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{
display:"Recon Statements",viewName:"ERURECONDOCUMENTS",resourceType:"eru",visible:!0,pathUrl:"reconciliation/documents",subGroupCategory:[],avblDocTypes:[]}},CBSEFILES:{ELASTIC_SEARCH_IDX_NAME:"t_cbs_document1",HIKARI_SEARCH_FIELD:"document_account_no",ACCOUNTS_MAPPING_FIELD:{keyField:"accountID",displayField:"accountShortName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"getValue",arguments:"src_sys_doc_type_disp_name",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Invoice Group",uniqueId:"accNameWithNum",default:!0,isSelected:!0,class:"text-left",visible:!0,fixed:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"document_account_no,document_account_name",sortableArguments:"document_account_name"},{title:"Invoice Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{display:"CBS EFiles",viewName:"CBSEFILES",resourceType:"cbs",visible:!0,pathUrl:"nxnAccounts/clientDocuments/efiles",subGroupCategory:[],avblDocTypes:[]}},SECMODDOCUMENTS:{ELASTIC_SEARCH_IDX_NAME:"t_sec_document1",HIKARI_SEARCH_FIELD:"document_account_no",ACCOUNTS_MAPPING_FIELD:{keyField:"fundId",displayField:"fundName"},DATAGRID_COLUMNS_DEF:[{title:"Action",uniqueId:"actions",default:!0,isSelected:!0,class:"text-left",visible:!0,fixedColumn:!0,fixed:!0},{title:"Document Name",uniqueId:"documentName",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"getValue",arguments:"src_sys_doc_type_disp_name",sortableArguments:"src_sys_doc_type_disp_name"},{title:"Fund id and Name",uniqueId:"fundIdWithName",default:!0,isSelected:!0,class:"text-left",visible:!0,fixed:!0,sortable:!0,renderFunc:"formatValueAsStacked",arguments:"document_account_no,document_account_name",sortableArguments:"document_account_name"},{title:"Date",uniqueId:"docAsOfDate",default:!0,fixed:!0,isSelected:!1,class:"text-left",visible:!0,sortable:!0,renderFunc:"formatDocDate",arguments:"document_as_of_dt",sortableArguments:"document_as_of_dt"}],CATEGORY_FILTERS_METADATA:{display:"Sec-Mod Documents",viewName:"SECMODDOCUMENTS",resourceType:"xrs",visible:!0,pathUrl:"secModReports/documents",subGroupCategory:[],avblDocTypes:[]}}}},SRC_DOCUMENT_META_DEF:{},SOL_VIEW_SPECIFIC_META_CONFIGS:{TRIPARTYDOCUMENTS:{RESOURCE_TYPE:"BDS",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT",DEFAULT_SORTING_FIELD:"document_account_no.raw:ASC,cf2.raw:ASC",ACCOUNT_CNTRL_TYPE:"TYPE_DEFAULT",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_account_no",idxDisplayField:"document_account_name"},ACCOUNTS_MAPPING_FIELD:{keyField:"accountID",displayField:"accountShortName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocAccountNoAndName",field:"document_account_no",displayName:"Account Number & Name",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"document_account_no",suppressRemoveSort:!0,cellTemplate:"gridAccountNoAndNameColCellTemplate.html",minWidth:230,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocAsOfDate",field:"document_as_of_dt",displayName:"As Of Date",enableSorting:!0,enableFiltering:!1,sortField:"document_as_of_dt",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colDocDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Document Name",enableSorting:!0,enableFiltering:!1,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"*",cellTemplate:"gridDocTypeWithStatusColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocClientNameAndId",field:"document_client_id",displayName:"Client & Client ID",enableSorting:!0,enableFiltering:!1,sortField:"document_client_id",suppressRemoveSort:!0,minWidth:175,width:"*",cellTemplate:"gridClientIdAndNameColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableSorting:!0,enableFiltering:!1,sortField:"document_fmt_type",suppressRemoveSort:!0,minWidth:100,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_created_date",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!0},{name:"colDocUploadDate",field:"edg_document_upload_timestamp",displayName:"Upload Date",enableSorting:!0,enableFiltering:!1,sortField:"edg_document_upload_timestamp",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"edg_document_upload_timestamp",visible:!0}],SEARCH_FIELD_METADATA:{itemClassAlias:"BDSDocuments",indexName:"t_csc_document1",CUSTOM_FIELD_MAPPINGS:[{title:"Customer Name",mapping:"cf1",display:!0,renderFunc:"getValue"},{title:"Client ID",mapping:"cf2",display:!0,renderFunc:"getValue"},{title:"RO Number",mapping:"cf3",display:!0,renderFunc:"getValue"},{title:"Division Code",mapping:"cf4",display:!0,renderFunc:"getValue"},{title:"ORG Code",mapping:"cf5",display:!0,renderFunc:"getValue"},{title:"Institution Code",mapping:"cf6",display:!0,renderFunc:"getValue"},{title:"Status",mapping:"document_status",display:!0,renderFunc:"getValue"}]}},CUSTODYACCOUNTS:{RESOURCE_TYPE:"CUS",CATEGORY_COMPONENT_TYPE:"LIST",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_CUSTODY",DEFAULT_SORTING_FIELD:"document_created_date.raw:DESC,document_account_no.raw:DESC",ACCOUNT_CNTRL_TYPE:"TYPE_CUSTODY",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_account_no",idxDisplayField:"document_account_name"},ACCOUNTS_MAPPING_FIELD:{keyField:"displayAccountNumber",displayField:"accountName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocAccountNo",field:"document_account_no",displayName:"Account Number & Name",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"document_account_no",suppressRemoveSort:!0,cellTemplate:"gridAccountNoAndNameColCellTemplate.html",minWidth:230,width:"35%",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocAsOfDate",field:"document_as_of_dt",displayName:"As Of Date",enableSorting:!0,enableFiltering:!1,sortField:"document_as_of_dt",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colDocDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Document Name",enableSorting:!0,enableFiltering:!1,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"25%",cellTemplate:"gridDocTypeWithStatusColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocClientNameAndId",field:"document_client_id",displayName:"Client & Client ID",enableSorting:!0,enableFiltering:!1,sortField:"document_client_id",suppressRemoveSort:!0,minWidth:200,width:"25%",cellTemplate:"gridClientIdAndNameColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableSorting:!0,enableFiltering:!1,sortField:"document_fmt_type",suppressRemoveSort:!0,minWidth:100,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_created_date",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!0},{name:"colDocUploadDate",field:"edg_document_upload_timestamp",displayName:"Upload Date",enableSorting:!0,enableFiltering:!1,sortField:"edg_document_upload_timestamp",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"edg_document_upload_timestamp",visible:!0}],SEARCH_FIELD_METADATA:{itemClassAlias:"CustodyDocuments",indexName:"t_cap_document1",CUSTOM_FIELD_MAPPINGS:[{title:"Customer Name",mapping:"cf1",display:!0,renderFunc:"getValue"},{title:"CLE (Contractual Legal Entity)",mapping:"cf2",display:!0,renderFunc:"getValue"},{title:"IPID",mapping:"cf3",display:!0,renderFunc:"getValue"}]},DOCUMENTS_CATEGORY_FILTERS_METADATA:[{display:"All Categories",key:"ALL",viewName:"CUSTODYACCOUNTS",hikariFilterField:"src_sys_doc_type_name",visible:!0,avblDocTypes:[],subGroupCategory:[{key:"CTSTMTS",display:"Statements",visible:!1,avblDocTypes:[]},{key:"CAPSTMTS",display:"CAP/CASS Statements",visible:!1,avblDocTypes:[]}]},{display:"Statements",key:"CTSTMTS",viewName:"CUSTODYACCOUNTS",hikariFilterField:"src_sys_doc_type_name",visible:!1,avblDocTypes:[],subGroupCategory:[]},{display:"CAP/CASS Statements",key:"CAPSTMTS",viewName:"CUSTODYACCOUNTS",hikariFilterField:"src_sys_doc_type_name",visible:!1,avblDocTypes:[],subGroupCategory:[]}]},AISINVESTMENTREPO:{RESOURCE_TYPE:"AIS",CATEGORY_COMPONENT_TYPE:"TAGS",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT",DEFAULT_SORTING_FIELD:"document_as_of_dt.raw:DESC,document_account_no.raw:DESC",ACCOUNT_CNTRL_TYPE:"TYPE_AIS",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_account_no",idxDisplayField:"document_account_name"},ACCOUNTS_MAPPING_FIELD:{keyField:"accountID",displayField:"accountShortName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Document Name",enableSorting:!0,enableFiltering:!1,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"*",cellTemplate:"gridDocTypeNameAndFileNameColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocAsOfDate",field:"document_as_of_dt",displayName:"Valuation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_as_of_dt",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatAisDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colDocInvNameAndId",field:"document_account_no",displayName:"Account Description and ID",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"document_account_no",suppressRemoveSort:!0,cellTemplate:"gridAccountNoAndNameColCellTemplateAisRecentDocWidget.html",minWidth:225,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocFundName",field:"document_affiliate_name",displayName:"Entity and ID",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"document_affiliate_name",suppressRemoveSort:!0,cellTemplate:"partials/anp/investorServices/gridEntityAndIdColCellTemplate.html",minWidth:200,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocFrequency",field:"cf8",displayName:"Frequency",enableSorting:!0,enableFiltering:!1,sortField:"cf8",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocStatus",field:"cf9",displayName:"Status",enableSorting:!0,enableFiltering:!1,sortField:"cf9",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableSorting:!0,enableFiltering:!1,sortField:"document_fmt_type",suppressRemoveSort:!0,minWidth:100,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_created_date",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!1},{name:"colDocUploadDate",field:"edg_document_upload_timestamp",displayName:"Upload Date",enableSorting:!0,enableFiltering:!1,sortField:"edg_document_upload_timestamp",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"edg_document_upload_timestamp",visible:!1},{name:"colDocFundFamilyName",field:"document_client_name",displayName:"Fund Family Name",enableSorting:!0,enableFiltering:!1,sortField:"document_client_name",suppressRemoveSort:!0,minWidth:150,width:150,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocFundFamilyID",field:"document_client_id",displayName:"Fund Family ID",enableSorting:!0,enableFiltering:!1,sortField:"document_client_id",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocDocSubCategory",field:"document_child_level_category",displayName:"Document Sub Category",enableSorting:!0,enableFiltering:!1,sortField:"document_child_level_category",suppressRemoveSort:!0,minWidth:120,width:120,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1}],SEARCH_FIELD_METADATA:{itemClassAlias:"AISDocuments",indexName:"t_pra_document1",CUSTOM_FIELD_MAPPINGS:[{title:"Fund Family Name",mapping:"document_client_name",display:!0,renderFunc:"getValue"},{title:"Fund Family ID",mapping:"document_client_id",display:!0,renderFunc:"getValue"},{title:"Document Upload Date",mapping:"edg_document_upload_timestamp",display:!1,renderFunc:"getValue"},{title:"Document Sub Category",mapping:"document_child_level_category",display:!0,renderFunc:"getValue"}]},DOCUMENTS_CATEGORY_FILTERS_METADATA:[{display:"All Documents",key:"ALL",viewName:"AISINVESTMENTREPO",visible:!0,hikariFilterField:"document_top_level_category",subGroupCategory:[{key:"COMTAX",display:"Compliance / Tax",visible:!0},{key:"CORR",display:"Correspondence",visible:!0},{key:"FMNGR",display:"Fund / Manager Reports",visible:!0},{key:"STMT",display:"Statements",visible:!0},{key:"TCONF",display:"Transactions and Confirmations",visible:!0},{key:"TPARTY",display:"Third Party",visible:!1,customStyle:!0}]}]},FUNDSDOCUMENTS:{RESOURCE_TYPE:"AIS",CATEGORY_COMPONENT_TYPE:"TAGS",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT",DEFAULT_SORTING_FIELD:"document_as_of_dt.raw:DESC,document_affiliate_id.raw:DESC",ACCOUNT_CNTRL_TYPE:"TYPE_AIS",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_affiliate_id",idxDisplayField:"document_affiliate_name"},ACCOUNTS_MAPPING_FIELD:{keyField:"accountNumber",displayField:"accountName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Document Name",enableSorting:!0,enableFiltering:!1,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"*",cellTemplate:"gridDocTypeNameAndFileNameColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocAsOfDate",field:"document_as_of_dt",displayName:"Valuation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_as_of_dt",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatAisDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colDocEntityName",field:"document_affiliate_name",displayName:"Entity Name",minWidth:175,width:"*",enableSorting:!0,enableFiltering:!1,sortField:"document_affiliate_name",suppressRemoveSort:!0,cellClass:"text-left",cellTemplate:"gridAffiliateNameAndSecDescColCellTemplate.html",headerCellClass:"text-left",visible:!0},{name:"colDocEntityId",field:"cf4",displayName:"Entity ID",minWidth:140,width:"140",enableSorting:!0,enableFiltering:!1,sortField:"cf4",suppressRemoveSort:!0,cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocFrequency",field:"cf8",displayName:"Frequency",enableSorting:!0,enableFiltering:!1,sortField:"cf8",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocStatus",field:"cf9",displayName:"Status",enableSorting:!0,enableFiltering:!1,sortField:"cf9",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableSorting:!0,enableFiltering:!1,sortField:"document_fmt_type",suppressRemoveSort:!0,minWidth:100,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_created_date",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!1},{name:"colDocUploadDate",field:"edg_document_upload_timestamp",displayName:"Upload Date",enableSorting:!0,enableFiltering:!1,sortField:"edg_document_upload_timestamp",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"edg_document_upload_timestamp",visible:!1},{name:"colDocFundFamilyName",field:"document_client_name",displayName:"Fund Family Name",enableSorting:!0,enableFiltering:!1,sortField:"document_client_name",suppressRemoveSort:!0,minWidth:150,width:150,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocFundFamilyID",field:"document_client_id",displayName:"Fund Family ID",enableSorting:!0,enableFiltering:!1,sortField:"document_client_id",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocReferenceID",field:"cf4",displayName:"Reference ID",enableSorting:!0,enableFiltering:!1,sortField:"cf4",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocDocSubCategory",field:"document_child_level_category",displayName:"Document Sub Category",enableSorting:!0,enableFiltering:!1,sortField:"document_child_level_category",suppressRemoveSort:!0,minWidth:120,width:120,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1}],SEARCH_FIELD_METADATA:{itemClassAlias:"AISDocuments",indexName:"t_pra_document1",CUSTOM_FIELD_MAPPINGS:[{title:"Fund Family Name",mapping:"document_client_name",display:!0,renderFunc:"getValue"},{title:"Fund Family ID",mapping:"document_client_id",display:!0,renderFunc:"getValue"},{title:"Reference ID",mapping:"cf4",display:!0,renderFunc:"getValue"},{title:"Document Upload Date",mapping:"edg_document_upload_timestamp",display:!1,renderFunc:"getValue"},{title:"Document Sub Category",mapping:"document_child_level_category",display:!0,renderFunc:"getValue"}]},DOCUMENTS_CATEGORY_FILTERS_METADATA:[{display:"All Documents",key:"ALL",viewName:"FUNDSDOCUMENTS",visible:!0,hikariFilterField:"document_top_level_category",subGroupCategory:[{key:"COMTAX",display:"Compliance / Tax",visible:!0},{key:"CORR",display:"Correspondence",visible:!0},{key:"CRPSSEC",display:"Corporate Secretarial",visible:!0},{key:"FMNGR",display:"Fund / Manager Reports",visible:!0},{key:"LEGAL",display:"Legal",visible:!0},{key:"TCONF",display:"Transactions and Confirmations",visible:!0}]}]},CLIENTSDOCUMENTS:{RESOURCE_TYPE:"AIS",CATEGORY_COMPONENT_TYPE:"TAGS",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT",DEFAULT_SORTING_FIELD:"document_as_of_dt.raw:DESC,document_account_no.raw:DESC",ACCOUNT_CNTRL_TYPE:"TYPE_AIS",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_account_no",idxDisplayField:"document_account_name"},ACCOUNTS_MAPPING_FIELD:{keyField:"accountNumber",displayField:"accountName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Document Name",enableSorting:!0,enableFiltering:!1,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"*",cellTemplate:"gridDocTypeNameAndFileNameColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocAsOfDate",field:"document_as_of_dt",displayName:"Valuation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_as_of_dt",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatAisDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colDocInvNameAndId",field:"document_account_no",displayName:"Account Description and ID",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"document_account_no",suppressRemoveSort:!0,cellTemplate:"gridAccountNameAndNoColCellTemplate.html",minWidth:200,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocFundName",field:"document_affiliate_name",displayName:"Entity and ID",minWidth:200,width:"*",enableSorting:!0,enableFiltering:!1,sortField:"document_affiliate_name",suppressRemoveSort:!0,cellTemplate:"partials/anp/investorServices/gridEntityAndIdColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocFrequency",field:"cf8",displayName:"Frequency",enableSorting:!0,enableFiltering:!1,sortField:"cf8",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocStatus",field:"cf9",displayName:"Status",enableSorting:!0,enableFiltering:!1,sortField:"cf9",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableFiltering:!1,enableSorting:!0,sortField:"document_fmt_type",suppressRemoveSort:!0,minWidth:100,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_created_date",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!1},{name:"colDocUploadDate",field:"edg_document_upload_timestamp",displayName:"Upload Date",enableSorting:!0,enableFiltering:!1,sortField:"edg_document_upload_timestamp",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"edg_document_upload_timestamp",visible:!1},{name:"colDocFundFamilyName",field:"document_client_name",displayName:"Fund Family Name",enableSorting:!0,enableFiltering:!1,sortField:"document_client_name",suppressRemoveSort:!0,minWidth:150,width:150,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocFundFamilyID",field:"document_client_id",displayName:"Fund Family ID",enableSorting:!0,enableFiltering:!1,sortField:"document_client_id",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocDocSubCategory",field:"document_child_level_category",displayName:"Document Sub Category",enableSorting:!0,enableFiltering:!1,sortField:"document_child_level_category",suppressRemoveSort:!0,minWidth:120,width:120,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1}],SEARCH_FIELD_METADATA:{itemClassAlias:"AISDocuments",indexName:"t_pra_document1",CUSTOM_FIELD_MAPPINGS:[{title:"Fund Family Name",mapping:"document_client_name",display:!0,renderFunc:"getValue"},{title:"Fund Family ID",mapping:"document_client_id",display:!0,renderFunc:"getValue"},{title:"Document Upload Date",mapping:"edg_document_upload_timestamp",display:!1,renderFunc:"getValue"},{title:"Document Sub Category",mapping:"document_child_level_category",display:!0,renderFunc:"getValue"}]},DOCUMENTS_CATEGORY_FILTERS_METADATA:[{display:"All Documents",key:"ALL",viewName:"CLIENTSDOCUMENTS",visible:!0,hikariFilterField:"document_top_level_category",subGroupCategory:[{key:"COMTAX",display:"Compliance / Tax",visible:!0},{key:"CORR",display:"Correspondence",visible:!0},{key:"FMNGR",display:"Fund / Manager Reports",visible:!0},{key:"STMT",display:"Statements",visible:!0},{key:"TCONF",display:"Transactions and Confirmations",visible:!0},{key:"TPARTY",display:"Third Party",visible:!1,customStyle:!0}]}]},PROPERTIESDOCUMENTS:{RESOURCE_TYPE:"AIS",CATEGORY_COMPONENT_TYPE:"TAGS",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT",DEFAULT_SORTING_FIELD:"document_as_of_dt.raw:DESC,document_account_no.raw:DESC",ACCOUNT_CNTRL_TYPE:"TYPE_AIS",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_security_id",idxDisplayField:"document_security_desc"},ACCOUNTS_MAPPING_FIELD:{keyField:"propertyId",displayField:"propertyName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Document Name",enableSorting:!0,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"*",cellTemplate:"gridDocTypeNameAndFileNameColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocAsOfDate",field:"document_as_of_dt",displayName:"Valuation Date",enableSorting:!0,sortField:"document_as_of_dt",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatAisDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colDocEntityName",field:"document_affiliate_name",displayName:"Entity Name",minWidth:175,width:"*",enableSorting:!0,sortField:"document_account_no",suppressRemoveSort:!0,cellClass:"text-left",cellTemplate:"gridAffiliateNameAndSecDescColCellTemplate.html",headerCellClass:"text-left",visible:!0},{name:"colDocEntityId",field:"document_affiliate_id",displayName:"Entity ID",minWidth:140,width:"140",enableSorting:!0,sortField:"document_affiliate_name",suppressRemoveSort:!0,cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocFrequency",field:"cf8",displayName:"Frequency",enableSorting:!0,enableFiltering:!1,sortField:"cf8",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocStatus",field:"cf9",displayName:"Status",enableSorting:!0,enableFiltering:!1,sortField:"cf9",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableSorting:!0,sortField:"document_fmt_type",suppressRemoveSort:!0,minWidth:100,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,sortField:"document_created_date",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!1},{name:"colDocUploadDate",field:"edg_document_upload_timestamp",displayName:"Upload Date",enableSorting:!0,sortField:"edg_document_upload_timestamp",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"edg_document_upload_timestamp",visible:!1},{name:"colDocFundFamilyName",field:"document_client_name",displayName:"Fund Family Name",enableSorting:!0,enableFiltering:!1,sortField:"document_client_name",suppressRemoveSort:!0,minWidth:150,width:150,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocFundFamilyID",field:"document_client_id",displayName:"Fund Family ID",enableSorting:!0,enableFiltering:!1,sortField:"document_client_id",suppressRemoveSort:!0,minWidth:100,width:100,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1},{name:"colDocDocSubCategory",field:"document_child_level_category",displayName:"Document Sub Category",enableSorting:!0,enableFiltering:!1,sortField:"document_child_level_category",suppressRemoveSort:!0,minWidth:120,width:120,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!1}],SEARCH_FIELD_METADATA:{
itemClassAlias:"AISDocuments",indexName:"t_pra_document1",CUSTOM_FIELD_MAPPINGS:[{title:"Fund Family Name",mapping:"document_client_name",display:!0,renderFunc:"getValue"},{title:"Fund Family ID",mapping:"document_client_id",display:!0,renderFunc:"getValue"},{title:"Document Upload Date",mapping:"edg_document_upload_timestamp",display:!1,renderFunc:"getValue"},{title:"Document Sub Category",mapping:"document_child_level_category",display:!0,renderFunc:"getValue"}]},DOCUMENTS_CATEGORY_FILTERS_METADATA:[{display:"All Documents",key:"ALL",viewName:"PROPERTIESDOCUMENTS",visible:!0,hikariFilterField:"document_top_level_category",subGroupCategory:[{key:"FMNGR",display:"Fund / Manager Reports",visible:!0},{key:"TCONF",display:"Transactions and Confirmations",visible:!0},{key:"CORR",display:"Correspondence",visible:!0},{key:"COMTAX",display:"Compliance / Tax",visible:!0}]}]},ERURECONDOCUMENTS:{RESOURCE_TYPE:"ERU",ACCOUNT_CNTRL_TYPE:"TYPE_DEFAULT",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT",DEFAULT_SORTING_FIELD:"document_account_no.raw:ASC",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_account_no",idxDisplayField:"document_account_name"},ACCOUNTS_MAPPING_FIELD:{keyField:"accountID",displayField:"accountShortName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocBusinessUnit",field:"cf4",displayName:"Business Unit",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"cf4",suppressRemoveSort:!0,minWidth:110,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocAccountGroup",field:"cf1",displayName:"Account Group",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"cf1",suppressRemoveSort:!0,minWidth:140,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Document Name",enableSorting:!0,enableFiltering:!1,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"*",cellTemplate:"gridDocTypeColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocAsOfDate",field:"document_as_of_dt",displayName:"As Of Date",enableSorting:!0,enableFiltering:!1,sortField:"document_as_of_dt",suppressRemoveSort:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colDocReconType",field:"cf2",displayName:"Reconciliation Type",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"cf2",suppressRemoveSort:!0,minWidth:140,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableSorting:!0,enableFiltering:!1,sortField:"document_fmt_type",suppressRemoveSort:!0,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_created_date",suppressRemoveSort:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!0},{name:"colDocUploadDate",field:"edg_document_upload_timestamp",displayName:"Upload Date",enableSorting:!0,enableFiltering:!1,sortField:"edg_document_upload_timestamp",suppressRemoveSort:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"edg_document_upload_timestamp",visible:!0}],SEARCH_FIELD_METADATA:{itemClassAlias:"ERUReconDocuments",indexName:"t_eru_document1",CUSTOM_FIELD_MAPPINGS:[{title:"Account No",mapping:"document_account_no",display:!0,renderFunc:"getValue"},{title:"Account Name",mapping:"document_account_name",display:!0,renderFunc:"getValue"},{title:"Document Status",mapping:"document_status",display:!0,renderFunc:"getValue"}]}},CBSEFILES:{RESOURCE_TYPE:"CBS",ACCOUNT_CNTRL_TYPE:"TYPE_DEFAULT",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT",DEFAULT_SORTING_FIELD:"document_account_no.raw:ASC",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_account_no",idxDisplayField:"document_account_name"},ACCOUNTS_MAPPING_FIELD:{keyField:"accountID",displayField:"accountShortName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocInvoiceGroup",field:"document_account_no",displayName:"Invoice group",enableHiding:!1,enableSorting:!0,sortField:"document_account_no",suppressRemoveSort:!0,minWidth:110,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colInvoiceGroupName",field:"document_account_name",displayName:"Invoice Group Name",enableHiding:!1,enableSorting:!0,sortField:"document_account_name",suppressRemoveSort:!0,minWidth:140,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colInvDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Invoice Name",enableSorting:!0,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"*",cellTemplate:"gridDocTypeColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colInvAsOfDate",field:"document_as_of_dt",displayName:"Invoice Date",enableSorting:!0,sortField:"document_as_of_dt",suppressRemoveSort:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colInvNumber",field:"cf1",displayName:"Invoice No",enableHiding:!1,enableSorting:!0,sortField:"cf1",suppressRemoveSort:!0,minWidth:140,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableSorting:!0,sortField:"document_fmt_type",suppressRemoveSort:!0,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,sortField:"document_created_date",suppressRemoveSort:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!0},{name:"colInvFromDate",field:"cf3",displayName:"From Date",enableSorting:!0,sortField:"cf3",suppressRemoveSort:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDocDate",arguments:"cf3",visible:!0},{name:"colInvToDate",field:"cf4",displayName:"To Date",enableSorting:!0,sortField:"cf4",suppressRemoveSort:!0,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDocDate",arguments:"cf4",visible:!0}],SEARCH_FIELD_METADATA:{itemClassAlias:"CBSEfiles",indexName:"t_cbs_document1",CUSTOM_FIELD_MAPPINGS:[]}},SECMODDOCUMENTS:{RESOURCE_TYPE:"XRS",SAVED_SCH_DIST_COLUMNS_DEF:"SAVED_SCH_DIST_GRID_COLUMNS_DEF_DEFAULT",DEFAULT_SORTING_FIELD:"document_account_no.raw:ASC,document_as_of_dt:DESC",ACCOUNT_CNTRL_TYPE:"TYPE_DEFAULT",SCH_DIST_PARAMETER_SELECTION_LIMIT:{accounts:500,docTypes:-1},HIKARI_SEARCH_FIELD:{idxKeyField:"document_account_no",idxDisplayField:"document_account_name"},ACCOUNTS_MAPPING_FIELD:{keyField:"fundId",displayField:"fundName"},GRID_OPTIONS_COLUMNS_DEF:[{name:"colAction",field:"action",displayName:"Actions",enableColumnMenu:!1,enableSorting:!1,enableHiding:!1,enableFiltering:!1,width:80,cellTemplate:"edgDocumentGridActionCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocFundIdAndName",field:"document_account_no",displayName:"Fund Number & Name",enableHiding:!1,enableSorting:!0,enableFiltering:!1,sortField:"document_account_no",suppressRemoveSort:!0,cellTemplate:"gridAccountNoAndNameColCellTemplate.html",minWidth:230,width:"*",cellClass:"text-left",headerCellClass:"text-left",visible:!0},{name:"colDocAsOfDate",field:"document_as_of_dt",displayName:"As Of Date",enableSorting:!0,enableFiltering:!1,sortField:"document_as_of_dt",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDocDate",arguments:"document_as_of_dt",visible:!0},{name:"colDocDisplayName",field:"src_sys_doc_type_disp_name",displayName:"Document Name",enableSorting:!0,enableFiltering:!1,sortField:"src_sys_doc_type_disp_name",suppressRemoveSort:!0,minWidth:200,width:"*",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocFormatType",field:"document_fmt_type",displayName:"Format",enableSorting:!0,enableFiltering:!1,sortField:"document_fmt_type",suppressRemoveSort:!0,minWidth:100,width:100,cellTemplate:"gridFormatColCellTemplate.html",cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,visible:!0},{name:"colDocCreationDate",field:"document_created_date",displayName:"Creation Date",enableSorting:!0,enableFiltering:!1,sortField:"document_created_date",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"document_created_date",visible:!0},{name:"colDocUploadDate",field:"edg_document_upload_timestamp",displayName:"Upload Date",enableSorting:!0,enableFiltering:!1,sortField:"edg_document_upload_timestamp",suppressRemoveSort:!0,minWidth:140,width:140,cellClass:"text-left",headerCellClass:"text-left",exporterSuppressExport:!0,formatFunc:"formatDateByUserSelectedTz",arguments:"edg_document_upload_timestamp",visible:!0}],SEARCH_FIELD_METADATA:{itemClassAlias:"XRSDocuments",indexName:"t_sec_document1",CUSTOM_FIELD_MAPPINGS:[]}}}})}(),function(){"use strict";function a(a){return angular.isDefined(a.hasExactEntitlement)&&a.hasExactEntitlement("ERS_EDG_ERU")}function b(a){return angular.isDefined(a.hasExactEntitlement)&&a.hasExactEntitlement("ERS_EDG_CBSE")}function c(a){return angular.isDefined(a.hasExactEntitlement)&&a.hasExactEntitlement("SEC_MOD_DOC")}angular.module("nxn.EDGDocuments").constant("NxnDocumentsEntitlementProvider",{hasERUReconDocumentsAccess:a,hasCBSDocumentsAccess:b,hasSecModDocumentsAccess:c})}(),angular.module("NexenCommon").controller("acml",["$scope",function(a){var b=[{accountNumber:"102292289780                       ",accountName:"Apax Europe Vi Gp L.P                   ",currency:"EUR",amount:33337e5,status:"Pending",transactionNumber:"MFD1408264775900",entryUserId:"QAGLSUAT1718",entryDate:"2014-08-25",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-25 09:52:24",lstUpdatedUser:"QAGLSUAT1718",authorizationFlag:!1},{accountNumber:"106472428400                       ",accountName:"Icbc Cs Global Dynamic Alloc Fund       ",currency:"USD",amount:8966666.12,status:"Pending",transactionNumber:"MFD1408254776000",entryUserId:"QAGLSUAT1718",entryDate:"2014-08-25",valueDate:"2014-08-25",lstUpdatedTimestamp:"2014-08-25 09:52:42",lstUpdatedUser:"QAGLSUAT1718",authorizationFlag:!1},{accountNumber:"102267578260                       ",accountName:"Zurich Insurance Plc Uk Br Zic Mfd      ",currency:"GBP",amount:1e8,status:"Pending Authorization",transactionNumber:"MFD1408264779500",entryUserId:"GLSAMDUAT1",entryDate:"2014-08-26",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-26 05:26:08",lstUpdatedUser:"GLSAMDUAT1",authorizationFlag:!1},{accountNumber:"102267578262                    ",accountName:"Zurich Insurance Plc Uk Br Zic Mfd 2     ",currency:"GBP",amount:1e8,status:"Pending Authorization",transactionNumber:"MFD1408264779500",entryUserId:"GLSAMDUAT1",entryDate:"2014-08-26",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-26 05:26:08",lstUpdatedUser:"GLSAMDUAT1",authorizationFlag:!1},{accountNumber:"102292289763                       ",accountName:"Monsanto",currency:"EUR",amount:33337e5,status:"Pending",transactionNumber:"MFD1408264775900",entryUserId:"QAGLSUAT1718",entryDate:"2014-08-25",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-25 09:52:24",lstUpdatedUser:"QAGLSUAT1718",authorizationFlag:!1},{accountNumber:"106472428464                       ",accountName:" Pepsi   ",currency:"USD",amount:8966666.12,status:"Pending",transactionNumber:"MFD1408254776000",entryUserId:"QAGLSUAT1718",entryDate:"2014-08-25",valueDate:"2014-08-25",lstUpdatedTimestamp:"2014-08-25 09:52:42",lstUpdatedUser:"QAGLSUAT1718",authorizationFlag:!1},{accountNumber:"102267578265                       ",accountName:"Coca-Cola ",currency:"GBP",amount:1e8,status:"Pending Authorization",transactionNumber:"MFD1408264779500",entryUserId:"GLSAMDUAT1",entryDate:"2014-08-26",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-26 05:26:08",lstUpdatedUser:"GLSAMDUAT1",authorizationFlag:!1},{accountNumber:"102267578266                    ",accountName:" Shell ",currency:"GBP",amount:1e8,status:"Pending Authorization",transactionNumber:"MFD1408264779500",entryUserId:"GLSAMDUAT1",entryDate:"2014-08-26",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-26 05:26:08",lstUpdatedUser:"GLSAMDUAT1",authorizationFlag:!1},{accountNumber:"102292289767                       ",accountName:"Morgan Stanley   ",currency:"EUR",amount:33337e5,status:"Pending",transactionNumber:"MFD1408264775900",entryUserId:"QAGLSUAT1718",entryDate:"2014-08-25",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-25 09:52:24",lstUpdatedUser:"QAGLSUAT1718",authorizationFlag:!1},{accountNumber:"106472428468                       ",accountName:"Atlassian  ",currency:"USD",amount:8966666.12,status:"Pending",transactionNumber:"MFD1408254776000",entryUserId:"QAGLSUAT1718",entryDate:"2014-08-25",valueDate:"2014-08-25",lstUpdatedTimestamp:"2014-08-25 09:52:42",lstUpdatedUser:"QAGLSUAT1718",authorizationFlag:!1},{accountNumber:"102267578269                       ",accountName:"Google ",currency:"GBP",amount:1e8,status:"Pending Authorization",transactionNumber:"MFD1408264779500",entryUserId:"GLSAMDUAT1",entryDate:"2014-08-26",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-26 05:26:08",lstUpdatedUser:"GLSAMDUAT1",authorizationFlag:!1},{accountNumber:"102267578270                    ",accountName:" Citizen",currency:"GBP",amount:1e8,status:"Pending Authorization",transactionNumber:"MFD1408264779500",entryUserId:"GLSAMDUAT1",entryDate:"2014-08-26",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-26 05:26:08",lstUpdatedUser:"GLSAMDUAT1",authorizationFlag:!1},{accountNumber:"102292289771                       ",accountName:" Nomura",currency:"EUR",amount:33337e5,status:"Pending",transactionNumber:"MFD1408264775900",entryUserId:"QAGLSUAT1718",entryDate:"2014-08-25",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-25 09:52:24",lstUpdatedUser:"QAGLSUAT1718",authorizationFlag:!1},{accountNumber:"106472428472                       ",accountName:"Infosys",currency:"USD",amount:8966666.12,status:"Pending",transactionNumber:"MFD1408254776000",entryUserId:"QAGLSUAT1718",entryDate:"2014-08-25",valueDate:"2014-08-25",lstUpdatedTimestamp:"2014-08-25 09:52:42",lstUpdatedUser:"QAGLSUAT1718",authorizationFlag:!1},{accountNumber:"102267578273                       ",accountName:"Schlumberger",currency:"GBP",amount:1e8,status:"Pending Authorization",transactionNumber:"MFD1408264779500",entryUserId:"GLSAMDUAT1",entryDate:"2014-08-26",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-26 05:26:08",lstUpdatedUser:"GLSAMDUAT1",authorizationFlag:!1},{accountNumber:"102267578274                    ",accountName:"Exadata",currency:"GBP",amount:1e8,status:"Pending Authorization",transactionNumber:"MFD1408264779500",entryUserId:"GLSAMDUAT1",entryDate:"2014-08-26",valueDate:"2014-08-26",lstUpdatedTimestamp:"2014-08-26 05:26:08",lstUpdatedUser:"GLSAMDUAT1",authorizationFlag:!1}];a.allData=b,a.selectedData=[],a.fieldsInfo=[{dataField:"accountNumber",headerName:"Account Number"},{dataField:"accountName",headerName:"Account Name"}]}]),angular.module("nxn.Alerts").directive("nxnAlertsAccumulator",["$interpolate","nxn.formatData","PageContext","$q",function(a,b,c,d){var e=function(a,b,c){a.$watch("allDataList.length",function(){a.tableLeft.setCurrentData(a.allData),a.tableLeft.reload()}),a.$watch("allData.length",function(){a.tableLeft.setCurrentData(a.allData),a.tableLeft.reload()}),a.$watch("selectedData.length",function(){a.tableRight.setCurrentData(a.selectedData),a.tableRight.reload()})},f=function(a,b,e,f,g){function h(a,b,c){var d=a.getSelectedPageNum();a.setCurrentData(c,null,1,d)}function i(b,c){a.isAccountGroupSpinner=!0;var d=[],e=[];angular.forEach(c,function(a){e.push({accountId:a.number})}),g.getAccountGroupListAll(b,e).then(function(b,c,e,f){angular.isDefined(b.data)&&b.data.success===!1?a.accountsErrorMessage=b.data.errorMessage:(angular.forEach(b.data.items,function(a){d.push(a)}),a.selectedData=m(a.selectedData,d),a.allDataList=n(a.allDataList,a.selectedData)),a.isAccountGroupSpinner=!1},function(b,c,d,e){400===b.status?a.accountsErrorMessage=b.data.message:a.accountsErrorMessage="There was an error in selecting account list.",a.isAccountGroupSpinner=!1})}function j(b,c){a.isAccountGroupSpinner=!0;var e=[];angular.forEach(c,function(c){var f=[],h=d.defer();e.push(h.promise),g.getAccountGroupList(b,c.number).then(function(b,d,e,g){angular.isDefined(b.data)&&b.data.success===!1?a.accountsErrorMessage="Unable to get Accounts for Account Id: "+c.number:(angular.forEach(b.data,function(a){f.push(a)}),a.selectedData=m(a.selectedData,f),a.allDataList=n(a.allDataList,a.selectedData)),h.resolve()},function(b,c,d,e){a.accountsErrorMessage="There was an error in selecting account list.",a.isAccountGroupSpinner=!1})}),d.all(e).then(function(){a.isAccountGroupSpinner=!1})}function k(a,b){for(var c,d=[],e=a.length-1;e>=0;e--)c=a[e],c.$selected&&(a.splice(e,1),c.$selected=!1,d.push(c));for(var f=d.length-1;f>=0;f--)b.push(d[f])}function l(a,b){for(var c,d=[],e=a.length-1;e>=0;e--)c=a[e],c.$selected&&(c.$selected=!1,d.push(c));return d}function m(a,b){a=a.concat(b);for(var c=0;c<a.length;++c)for(var d=c+1;d<a.length;++d)a[c].number===a[d].number&&a.splice(d--,1);return a}function n(a,b){for(var c=0;c<a.length;++c)for(var d=0;d<b.length;++d)angular.isDefined(a[c])&&angular.isDefined(b[d])&&a[c].number===b[d].number&&a.splice(c,1);return a}a.allData=a.allData||[],a.selectedData=a.selectedData||[],a.visibleFields=a.visibleFields(),a.dataPerPage=a.dataPerPage||10,a.publication&&c.getUserInfo().userType&&(a.isInternal=angular.equals(c.getUserInfo().userType.toLowerCase(),"internal")),a.tableLeft=e.get({count:a.dataPerPage},{},!1,a.allData,null),a.$watch("filterL.$",function(b,c){b!==c&&(a.tableLeft.setCurrentData(a.allData),a.tableLeft.filter(a.filterL),a.tableLeft.reload())}),a.tableRight=e.get({count:a.dataPerPage},{},!1,a.selectedData,null),a.$watch("filterR.$",function(b,c){b!==c&&(a.tableRight.setCurrentData(a.selectedData),a.tableRight.filter(a.filterR),a.tableRight.reload())}),a.move=function(b,c){a.accountsErrorMessage="";var d="right"===b;if(a.publication)a.moveGroup(b,c);else{var e=d?a.allData:a.selectedData,f=d?a.selectedData:a.allData;if(c){var g=d?a.tableLeft:a.tableRight,i=g.getFilteredData();f=m(f,i),e=e.filter(function(a){return i.indexOf(a)===-1}),a.allData=d?e:f,a.selectedData=d?f:e}else k(e,f)}h(a.tableLeft,a.dataPerPage,a.allData),h(a.tableRight,a.dataPerPage,a.selectedData)},a.moveGroup=function(b,c){var d="right"===b;a.data=d?a.allData:a.allDataList;var e=d?a.data:a.selectedData,f=d?a.selectedData:a.data;if(d){if(0===a.allData.length)return;var g=[];c?i(a.publication,e):(g=l(e,f),j(a.publication,g))}else c?(a.allDataList=m(a.allDataList,a.selectedData),a.selectedData=[]):k(a.selectedData,a.allDataList)},a.enableRight=function(){for(var b,c=a.allData,d=c.length-1;d>=0;d--)if(b=c[d],b.$selected)return!1;return!0},a.enableLeft=function(){for(var b,c=a.selectedData,d=c.length-1;d>=0;d--)if(b=c[d],b.$selected)return!1;return!0}};return f.$inject=["$scope","ngTableParams","nxnNgTableParams","$filter","nxn.AlertsV2Service"],{restrict:"E",link:e,controller:f,scope:{allData:"=nxnAllData",allDataList:"=nxnAllDataList",selectedData:"=nxnSelectedData",visibleFields:"&nxnVisibleFieldsInfo",leftMsg:"@nxnLeftMsg",rightMsg:"@nxnRightMsg",allowSortableHeader:"=nxnAllowHeaderSort",dataPerPage:"@nxnDataPerPage",publication:"@publication",accountsErrorMessage:"=nxnAccountsError"},templateUrl:"partials/common/accumulator/accumulator.html"}}]),function(){"use strict";var a="api/sites/guides/static-assets/userguides/",b={v2:{DEFAULT:{serviceCallOrder:[""]},MOCK:{cors:"/cors/ssAlertsMessaging2",proxy:"/ssAlertsMessaging2",serviceCallOrder:["proxy","cors"]},LOCAL:{proxy:"/ssAlertsMessaging2",cors:"/cors/ssAlertsMessaging2",serviceCallOrder:["proxy","cors"]},DEV:{apiStore:"https://apigateway.dev.bnymellon.com/ssalertsmessaging2/v2",cors:"https://dev-alertsmessages.bnymellon.com/ssAlertsMessaging2",serviceCallOrder:["apiStore","cors"]},UAT:{apiStore:"https://apigateway.test.bnymellon.com/ssalertsmessaging2/v2",cors:"https://uat-alertsmessages.bnymellon.com/ssAlertsMessaging2",serviceCallOrder:["apiStore","cors"]},QA:{apiStore:"https://apigateway.test.bnymellon.com/ssalertsmessaging2/v2",cors:"https://uat-alertsmessages.bnymellon.com/ssAlertsMessaging2",serviceCallOrder:["apiStore","cors"]},XAT:{apiStore:"https://apigateway.qa.bnymellon.com/ssalertsmessaging2/v2",cors:"https://xat-alertsmessages.bnymellon.com/ssAlertsMessaging2",serviceCallOrder:["apiStore","cors"]},PRODUCTION:{apiStore:"https://apigateway.bnymellon.com/ssalertsmessaging2/v2",cors:"https://alertsmessages.bnymellon.com/ssAlertsMessaging2",serviceCallOrder:["apiStore","cors"]}},hasAlertsEntitlement:function(a){for(var b=["IIC","CCGDWNLDPRERPTS","IICUPLOAD","COMP_DLS","AM_MAIN","AIS_PRL_INVALRT"],c=!1,d=0;d<b.length&&!c;d++)a.hasExactEntitlement(b[d])&&(c=!0);return c},userGuideAPI:{MOCK:"",LOCAL:"",DEV:"https://nexencontentapi.dev.bnymellon.com/"+a,UAT:"https://nexencontentapi.test.bnymellon.com/"+a,QA:"https://nexencontentapi.test.bnymellon.com/"+a,DCAT:"https://nexencontentapi.qa.bnymellon.com/"+a,XAT:"https://nexencontentapi.qa.bnymellon.com/"+a,PRODUCTION:"https://nexencontentapi.bnymellon.com/"+a}};angular.module("nxn.Alerts").constant("AlertsServiceConfig",b)}(),angular.module("nxn.Alerts").controller("nxn.AlertsController",["$rootScope","$scope","$filter","PageContext","nxn.AlertsV2Service","ngTableParams","nxn.HighchartsService","$window","nxnWindowSizeService","promiseAlerts","nxnNgTableParams","nxn.formatData",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){b.chartAlertTypeConfig=g.defaultDoughnutPieConfig("Alert Type",ha),b.chartAlertTypeConfig.size={width:180,height:180},b.chartAlertTypeConfig.options.plotOptions.pie.events={click:function(a){b.alertTypeState.state=!1,b.alertTypeState.filterState=a.point.key,b.alertTypeState.title=a.point.name,X("type",a.point.key,a.point.key).then(function(){Y(b.chartAlertTypeConfig,a)}),b.totalUpdate("Filtered Total",b.totalAlertCount)}}}function n(a){fa=[],ha=[];for(var c=0;c<a.alertTypeBreakDown.length;c++){var d=a.alertTypeBreakDown[c].alertType,e=a.alertTypeBreakDown[c].alertCount;M(d);var f={};f={key:d,key1:b.name,value:e},fa.push(f)}$.map(fa,function(a,b){var c;a.key in ea?c=ea[a.key]:(c=Highcharts.getOptions().colors[b],ea[a.key]=c);ha.push({key:a.key,name:a.key1,y:parseInt(a.value,10),color:c,defaultColor:c})})}function o(){return b.filteredTableParams.refresh=!1,b.customDateState===!0?(b.startDate=b.firstDate,b.endDate=b.secondDate):0===b.amountOfDays&&(b.startDate=moment(b.filterObj.endDate).format("ll"),b.endDate=moment(b.filterObj.endDate).format("ll")),b.isAlertSpinner=!0,e.getFilterAlert(b.startDate,b.endDate,e.getAlertCountThreshhold(),0,ca,aa,da).then(function(a){b.alertRefreshDate=new Date,P(a.data),b.isAlertSpinner=!1},function(a){b.alertRefreshDate=new Date})}function p(){return b.statusChartState.state=!0,b.statusChartState.filterState="",b.statusChartState.title="",b.alertTypeState.state=!0,b.alertTypeState.filterState="",b.alertTypeState.title="",b.priorityChartState.state=!0,b.priorityChartState.filterState=0,b.priorityChartState.title="",ba=[],da=[],ca=[],aa=[],b.totalUpdate("Total",b.totalAlertCount),o().then(function(){v(),W(),Y()})}function q(a){switch(a){case"priority":b.statusChartState.state&&b.alertTypeState.state?b.clearAll():!b.statusChartState.state&&b.alertTypeState.state?(ca=[],b.clearSelectedFilter(b.priorityChartState,b.chartStatusConfig,"status",b.statusChartState)):b.statusChartState.state&&!b.alertTypeState.state?(ca=[],b.clearSelectedFilter(b.priorityChartState,b.chartAlertTypeConfig,"type",b.alertTypeState)):b.statusChartState.state||b.alertTypeState.state||(ca=[],b.clearMultiSelected(b.priorityChartState,b.chartStatusConfig,b.chartAlertTypeConfig,"status","type",b.statusChartState,b.alertTypeState));break;case"status":b.priorityChartState.state&&b.alertTypeState.state?b.clearAll():!b.priorityChartState.state&&b.alertTypeState.state?(aa=[],b.clearSelectedFilter(b.statusChartState,b.chartPriorityConfig,"priority",b.priorityChartState)):b.priorityChartState.state&&!b.alertTypeState.state?(aa=[],b.clearSelectedFilter(b.statusChartState,b.chartAlertTypeConfig,"type",b.alertTypeState)):b.priorityChartState.state||b.alertTypeState.state||(aa=[],b.clearMultiSelected(b.statusChartState,b.chartPriorityConfig,b.chartAlertTypeConfig,"priority","type",b.priorityChartState,b.alertTypeState));break;case"alertType":b.statusChartState.state&&b.priorityChartState.state?b.clearAll():!b.statusChartState.state&&b.priorityChartState.state?(da=[],b.clearSelectedFilter(b.alertTypeState,b.chartStatusConfig,"status",b.statusChartState)):b.statusChartState.state&&!b.priorityChartState.state?(da=[],b.clearSelectedFilter(b.alertTypeState,b.chartPriorityConfig,"priority",b.priorityChartState)):b.statusChartState.state||b.priorityChartState.state||(da=[],b.clearMultiSelected(b.alertTypeState,b.chartStatusConfig,b.chartPriorityConfig,"status","priority",b.statusChartState,b.priorityChartState))}}function r(a,c,d,e,f,h,i){a.state=!0,X(e,h.filterState,h.title),g.setSubtitle(c,h.title),c.title.text=b.totalAlertCount,g.setSubtitle(d,i.title),d.title.text=b.totalAlertCount}function s(a,c,d,e){a.state=!0,X(d,e.filterState,e.title),g.setSubtitle(c,e.title),c.title.text=b.totalAlertCount}function t(a){for(var b=0;b<a.length;b++){var c=a[b];if("priority"===c.type)switch(ca=[],c.title.toUpperCase()){case"HIGH":ca.push(1);break;case"MEDIUM":ca.push(2);break;case"LOW":ca.push(3)}else"status"===c.type?(aa=[],"NEW"===c.value?aa.push(1,4):aa.push(2,3)):"type"===c.type&&(da=[],da.push(c.value))}}function u(a,c){var d=b.filteredTableParams.getSelectedPageNum(),f=A(c.alert.alertRecId);if(angular.isDefined(f)){var g=b.nxnAlerts.indexOf(f);g!==-1&&(b.nxnAlerts.splice(g,1),b.alertInbox.pop(),v())}var h=b.filteredTableParams.getTotalPageCount();if(b.totalCount=b.totalAlertCount-1,0===b.filteredArray.length)b.clearAll();else{var i=function(a){b.filteredTableParams.setSelectedPage(a),b.filteredTableParams.setPartialParams(b.totalCount,e.getAlertCountThreshhold())};d>=1&&d<=h&&(--b.totalAlertCount,i(d),b.filteredTableParams.reload())}}function v(){b.customDateState===!0&&(b.startDate=b.firstDate,b.endDate=b.secondDate),e.getFilterCount(b.startDate,b.endDate,ca,aa,da).then(function(a){b.totalCount=a.data.totalAlertCount,b.totalAlertCount=a.data.totalAlertCount,b.alertRefreshDate=new Date,Q(a.data)})}function w(a,c,d){b.isAlertSpinner=!0,e.getCustomDateRange(a,c,d).then(function(e){angular.isDefined(e)&&angular.isDefined(e.data)&&(!angular.isDefined(d)&&e.data.totalPages>1?b.fetchCustomRange(a,c,d):(P(e.data),b.totalAlertCount=e.data.totalAlertCount,b.isAlertSpinner=!1))}),v()}function x(a){switch(a.chartType){case"status":X(a.chartType,a.key,a.title),b.statusChartState.state=!1,b.statusChartState.filterState=a.key,b.statusChartState.title=a.title;break;case"priority":X(a.chartType,a.key,a.title),b.priorityChartState.state=!1,b.priorityChartState.filterState=a.key,b.priorityChartState.title=a.title;break;default:X("type",a.key,a.title),b.alertTypeState.state=!1,b.alertTypeState.filterState=a.key,b.alertTypeState.title=a.title}b.totalUpdate("Filtered Total",b.totalAlertCount)}function y(){b.statusChartState.state=!0,b.statusChartState.filterState="",b.statusChartState.title="",b.alertTypeState.state=!0,b.alertTypeState.filterState="",b.alertTypeState.title="",b.priorityChartState.state=!0,b.priorityChartState.filterState=0,b.priorityChartState.title="",R()}function z(a,c){angular.equals(a,c)||a.startDate.isSame(c.startDate)&&a.endDate.isSame(c.endDate)||(b.customDateState=!0,b.rangeRetriever())}function A(a){if(angular.isDefined(b.nxnAlerts)&&b.nxnAlerts.length>0)for(var c=0;c<b.nxnAlerts.length;c++)if(b.nxnAlerts[c].alertRecId===a)return b.nxnAlerts[c]}function B(a,d){var e=d.dataField;if(!angular.isUndefined(e)){var f=a[e];return"alertPriority"===e?c("uppercase")(b.priorityValue[a.attributes.AlertPriority-1].text):f}}function C(){return[{title:"Priority",dataField:"attributes.AlertPriority",fixed:!0,default:!0,isSelected:!0,class:"",visible:!0},{title:"Action",dataField:"action",fixed:!0,default:!0,isSelected:!0,class:"",visible:!0},{title:"Date/Time",dataField:"alertRecTime",fixed:!0,default:!0,isSelected:!0,class:"",visible:!0},{title:"Alert Type",dataField:"alertTypeDescription",default:!0,isSelected:!0,class:"",visible:!0},{title:"Alert Name",dataField:"alertEventName",default:!0,isSelected:!0,class:"",visible:!0},{title:"Alert Description",dataField:"alertDescription",default:!0,isSelected:!0,class:"",visible:!0},{title:"Expiration",dataField:"expirationTime",default:!0,isSelected:!0,class:"",visible:!0}]}function D(){return{options:{clearable:!0,autoUpdateInput:!0,singleDatePicker:"portlet"===b.displayMode,minDate:F().subtract(30,"days"),maxDate:F(),dateLimit:{days:30},ranges:{Today:[F(),F()],Yesterday:[F().subtract(1,"days"),F().subtract(1,"days")],"Last Week":[F().subtract(6,"days"),F()],"Last Two Weeks":[F().subtract(13,"days"),F()],"Last Month":[F().subtract(1,"month").startOf("month"),F()]},locale:{format:"DD-MMM-YYYY",separator:" - "}}}}function E(){return{priorityAr:[{chartType:"priority",key:0,title:"Low",color:"#91cef2",direction:"text-right"},{chartType:"priority",key:1,title:"Medium",color:"#f2d681",direction:"text-center"},{chartType:"priority",key:2,title:"High",color:"#ea9f8e",direction:"text-left"}],statusAr:[{chartType:"status",key:"ACKNOWLEDGED",title:"Read",color:"#8CA1CC",direction:"text-right"},{chartType:"status",key:"NEW",title:"Unread",color:"#CCCCCC",direction:"text-left"}]}}function F(){return ga.clone()}function G(){var a=[{y:b.pCount.pLow,color:"#91cef2",defaultColor:"#91cef2",name:"Low"},{y:b.pCount.pMed,color:"#f2d681",defaultColor:"#f2d681",name:"Medium"},{y:b.pCount.pHigh,color:"#ea9f8e",defaultColor:"#ea9f8e",name:"High"}];return a}function H(a,c){if(b.filteredTableParams.refresh===!0)return v(),void o();b.isAlertSpinner=!0,b.customDateState===!0&&(b.startDate=b.firstDate,b.endDate=b.secondDate);var d=c.offset?c.offset:0;d/e.getAlertCountThreshhold()+1;e.getFilterAlert(b.startDate,b.endDate,e.getAlertCountThreshhold(),d,ca,aa,da).then(function(c){b.alertRefreshDate=new Date,P(c.data),
a.resolve({data:b.filteredArray,time:b.alertRefreshDate,offset:d}),b.isAlertSpinner=!1}).catch(function(a){b.alertRefreshDate=new Date})}function I(){var a=[{y:b.pCount.aUnread,color:"#CCCCCC",defaultColor:"#CCCCCC",name:"Unread"},{y:b.pCount.aRead,color:"#8CA1CC",defaultColor:"#8CA1CC",name:"Read"}];return a}function J(){return{pdf:function(a,d){d.push(c("uppercase")(b.priorityValue[a.attributes.AlertPriority-1].text)),d.push(a.alertRecTime),d.push(a.alertTypeDescription),d.push(a.alertEventName),d.push(a.alertDescription),d.push(a.expirationTime)},xls:function(a,d){d.push(c("uppercase")(b.priorityValue[a.attributes.AlertPriority-1].text)),d.push(a.alertRecTime),d.push(a.alertTypeDescription),d.push(a.alertEventName),d.push(a.alertDescription),d.push(a.expirationTime)}}}function K(){b.alertColumns=C(),b.alertRangeMax=new Date-864e5,b.alertRangeMin=b.alertRangeMax-2592e6,b.alertRefreshDate=new Date,b.alertTypeState={state:!0,filterState:"",title:""},b.amountOfDays=0,b.checkAll=!1,b.currentFilterView=b.curreSelectedFilter,b.customDateOptions={month:"short",day:"2-digit",year:"numeric"},b.customDateState=!1,b.dateRangePickerOptions=D(),b.defaultErrorMsg=!1,b.defaultFilterObj={startDate:moment().startOf("day"),endDate:moment().endOf("day")},b.displayLgTable=L(i.getWindowSize(h.innerWidth)),b.exportFields=["Priority","Date/Time","Alert Type","Alert Name","Alert Description","Expiration"],b.filterObj=angular.copy(b.defaultFilterObj),b.toDateMin=b.filterObj.startDate,b.filteredTableParams=k.get({count:25},{},!0,b.nxnAlerts,b.alertRefreshDate),b.filterText="Total",b.filteredArray=[],b.isAlertSpinner=!1,b.legendObjs=E(),b.nxnAlerts=[],b.pCount={pLow:0,pMed:0,pHigh:0,aRead:0,aUnread:0},b.priorityChartState={state:!0,filterState:0,title:""},b.priorityValue=[{display:"label label-danger",text:"URGENT"},{display:"label label-warning",text:"MEDIUM"},{display:"label label-info",text:"LOW"}],b.status={isopen:!1},b.statusChartState={state:!0,filterState:"",title:""},b.toDateMax=new Date,b.totalCount=0,b.transformFn=J(),b.alertPriorityClass=function(a,c){var d=c.dataField;if(!angular.isUndefined(d)){var e=a[d];return"alertPriority"===d?b.priorityValue[a.attributes.AlertPriority-1].display:e}},b.alertStatusWeight=function(a){return b.alertReturn="nxn-delivery-label","ACKNOWLEDGED"!==a&&"READ"!==a||(b.alertReturn=""),b.alertReturn},b.alertStatusEnvelope=function(a){return b.alertEnvelope="fa fa-envelope fa-fw","ACKNOWLEDGED"!==a&&"READ"!==a||(b.alertEnvelope="fa fa-envelope-open-o fa-fw"),b.alertEnvelope},b.checkAllAction=function(a){for(var c=0;c<b.filteredArray.length;c++)b.filteredArray[c].selected=a,b.alertInbox[c].selected=a},b.clearAll=p,b.clearFilter=q,b.clearMultiSelected=r,b.clearSelectedFilter=s,b.currFilterChange=function(a){b.curreSelectedFilter=a},b.fetchCustomRange=w,b.filterLegend=x,b.formatAlert=B,b.getFormattedCurrentDataTime=function(){return l.formatValue($.trim(new Date),"DateWithTimeZone","")},b.openFilterCtrl=function(){N(),T(),m()},b.rangeRetriever=function(){y();var a=b.filterObj.startDate,c=b.filterObj.endDate;a=moment(a).format("ll"),c=moment(c).format("ll"),b.firstDate=a,b.secondDate=c,b.fetchCustomRange(a,c,e.getAlertCountThreshhold())},b.toggleDropdown=function(a){a.preventDefault(),a.stopPropagation(),b.status.isopen=!b.status.isopen},b.totalUpdate=function(a,c){b.totalCount=b.totalAlertCount,b.filterText=a,b.filteredTableParams.setExportData(b.filteredArray),b.filteredTableParams.setExportTransformFn(b.transformFn)};var c=a.$on("deleteAlert",u),d=a.$on("updateAlertStatus",V);b.$on("$destroy",function(){d(),c()}),b.$on("windowResize",Z),b.$watchCollection("filterObj",z)}function L(a){return a.indexOf("medium")!==-1||a.indexOf("large")!==-1}function M(a){b.name="","AM_FTFDOCLIB"===a?b.name="Document Library":"AM_FTFFILETRANS"===a?b.name="File Transfer":"AM_GLSMTRNDRAW"===a?b.name="Drawdown":"AM_GLSMTRNPRE"===a?b.name="Preadvice":"AM_GLSMTRNWIRE"===a?b.name="Wire":"AM_GLSTRDPUR"===a?b.name="Purchase":"AM_GLSTRDRED"===a?b.name="Redemption":"AM_GLSMMRDAILY"===a?b.name="Daily Liquidity":"AM_GLSMMRFUND"===a?b.name="Fund Assets":"AM_GLSMMRWEEKLY"===a?b.name="Weekly Liquidity":"AM_ICOALERT"===a?b.name="Single Alerts":"AM_GLSMMRASSETS"===a?b.name="Drop in Assets":"AM_GLSMMRNAV"===a?b.name="Market NAV":"AM_GLSMMRWAM"===a?b.name="WAM":"AM_GLSMMRRATING"===a&&(b.name="Rating")}function N(){var a=G();b.chartPriorityConfig=g.defaultDoughnutPieConfig("Priority",a),b.chartPriorityConfig.size={width:180,height:180},b.chartPriorityConfig.options.plotOptions.pie.events={click:function(a){var c;switch(a.point.name){case"Low":c=X("priority",0,"LOW").then(function(){b.priorityChartState.state=!1,b.priorityChartState.filterState=0,b.priorityChartState.title="Low"});break;case"Medium":c=X("priority",1,"MEDIUM").then(function(){b.priorityChartState.state=!1,b.priorityChartState.filterState=1,b.priorityChartState.title="Medium"});break;case"High":c=X("priority",2,"HIGH").then(function(){b.priorityChartState.state=!1,b.priorityChartState.filterState=2,b.priorityChartState.title="High"})}c.then(function(){Y(b.chartPriorityConfig,a),b.totalUpdate("Filtered Total",b.totalAlertCount)})}},b.chartPriorityConfig.title.style.font="bold 40px Arial, Arial, sans-serif",b.chartPriorityConfig.title.y=6,b.chartPriorityConfig.options.subtitle.style.fontsize="11px",b.chartPriorityConfig.options.subtitle.y=20}function O(a){for(var c=0;c<a.priorityBreakDownList.length;c++)b.pCount.pLow=a.priorityBreakDownList[c].low,b.pCount.pMed=a.priorityBreakDownList[c].mid,b.pCount.pHigh=a.priorityBreakDownList[c].high}function P(a){if(b.filteredArray=[],angular.isDefined(a)&&angular.isDefined(a.alerts)&&null!==a.alerts&&a.alerts.length>0){b.nxnAlerts=a.alerts,b.alertInbox=[],b.nxnAlertAr=[],b.nxnAlertAr=b.nxnAlerts,b.nxnNewCount=0;for(var c=0;c<b.nxnAlertAr.length;c++){"NEW"===b.nxnAlertAr[c].ackStatus&&b.nxnNewCount++;var d={selected:!0,ackStatus:b.nxnAlertAr[c].ackStatus,alertRecTime:b.nxnAlertAr[c].alertRecTime,alertSource:b.nxnAlertAr[c].alertSource,alertPriority:b.nxnAlertAr[c].attributes.AlertPriority,alertEventName:b.nxnAlertAr[c].alertEventName,alertDescription:b.nxnAlertAr[c].alertDescription,expirationTime:b.nxnAlertAr[c].expirationTime,alertDetails:b.nxnAlertAr[c].alertDetails,alertTypeDescription:b.nxnAlertAr[c].alertTypeDescription};b.alertInbox.push(d)}b.filteredArray=b.nxnAlerts,N(),T(),m()}b.totalCount=b.totalAlertCount,b.alertRefreshDate=new Date,b.filteredTableParams.setCurrentData(b.nxnAlerts,b.alertRefreshDate,0,1),b.filteredTableParams.setPartialParams(a.totalAlertCount,e.getAlertCountThreshhold()),b.filteredTableParams.setExportData(b.nxnAlerts)}function Q(a){b.pCount={pLow:0,pMed:0,pHigh:0,aRead:0,aUnread:0},U(a),O(a),n(a),W(),b.alertRefreshDate=new Date}function R(){da=[],ca=[],aa=[]}function S(){angular.isDefined(j)&&angular.isDefined(j.promiseStatus)&&"error"===j.promiseStatus&&(b.errorMessage=j.errorMessage,b.defaultErrorMsg=!0),d.get(function(a){_=a,b.filteredTableParams.setPartialParams(j.data.data.totalAlertCount,e.getAlertCountThreshhold()),b.filteredTableParams.setServerDataFn(H),b.filteredTableParams.setColumns(b.alertColumns),b.filteredTableParams.setExportFields(b.exportFields),b.filteredTableParams.setExportHeading("Alerts"),b.filteredTableParams.setExportData(b.nxnAlerts),b.filteredTableParams.setExportTransformFn(b.transformFn),g.setDefaultColors(),b.customDateState=!1,b.amountOfDays=0,b.startDate=moment(b.filterObj.endDate).format("ll"),b.endDate=moment(b.filterObj.endDate).format("ll"),y(),v(),angular.isDefined(j)&&P(j.data.data)})}function T(){var a=I();b.chartStatusConfig=g.defaultDoughnutPieConfig("Status",a),b.chartStatusConfig.size={width:180,height:180},b.chartStatusConfig.title.style.font="bold 40px Arial, Arial, sans-serif",b.chartStatusConfig.options.plotOptions.pie.events={click:function(a){var c;switch(a.point.name){case"Read":c=X("status","ACKNOWLEDGED","READ").then(function(){b.statusChartState.state=!1,b.statusChartState.filterState="ACKNOWLEDGED",b.statusChartState.title="Read"});break;case"Unread":c=X("status","NEW","NEW").then(function(){b.statusChartState.state=!1,b.statusChartState.filterState="NEW",b.statusChartState.title="Unread"})}c.then(function(){Y(b.chartStatusConfig,a),b.totalUpdate("Filtered Total",b.totalAlertCount)})}}}function U(a){for(var c=0;c<a.statusBreakDownList.length;c++)b.pCount.aRead=a.statusBreakDownList[c].acknowledged+a.statusBreakDownList[c].read,b.pCount.aUnread=a.statusBreakDownList[c].newAlert+a.statusBreakDownList[c].differed}function V(a,c){var d=A(c.alert.alertRecId);b.filteredTableParams.getSelectedPageNum();angular.isDefined(d)&&(d.ackStatus=c.status,b.nxnNewCount--,v())}function W(){b.chartPriorityConfig.series[0].data=G(),b.chartStatusConfig.series[0].data=I(),b.chartAlertTypeConfig.series[0].data=ha}function X(a,b,c){ba=[];for(var d=0;d<ba.length;d++)if(ba[d].type===a)return ba[d].value=b,void(ba[d].title=c);return ba.push({type:a,value:b,title:c}),t(ba),o().then(function(){v(),W()})}function Y(a,c){var d,e,f,h,i=!1,j="";a&&(""!==b.chartStatusConfig.options.subtitle.text&&b.chartStatusConfig.options.subtitle.text!==a.options.subtitle.text&&(d=!0,f=b.chartStatusConfig.options.subtitle.text),""!==b.chartPriorityConfig.options.subtitle.text&&b.chartPriorityConfig.options.subtitle.text!==a.options.subtitle.text&&(e=!0,h=b.chartPriorityConfig.options.subtitle.text),""!==b.chartAlertTypeConfig.options.subtitle.text&&b.chartAlertTypeConfig.options.subtitle.text!==a.options.subtitle.text&&(i=!0,j=b.chartAlertTypeConfig.options.subtitle.text)),g.setSubtitle(b.chartStatusConfig),g.genericChartCenterModification(b.chartStatusConfig),g.setSubtitle(b.chartPriorityConfig),g.genericChartCenterModification(b.chartPriorityConfig),g.setSubtitle(b.chartAlertTypeConfig),g.genericChartCenterModification(b.chartAlertTypeConfig),a&&(g.setSubtitle(a,c.point.name),g.genericChartCenterModification(a,c),d&&(g.setSubtitle(b.chartStatusConfig,f),g.genericChartCenterModification(b.chartStatusConfig,c)),e&&(g.setSubtitle(b.chartPriorityConfig,h),g.genericChartCenterModification(b.chartPriorityConfig,c)),i&&(g.setSubtitle(b.chartAlertTypeConfig,j),g.genericChartCenterModification(b.chartAlertTypeConfig,c)))}function Z(a,c,d){b.displayLgTable=L(c),b.$apply()}var _,aa=[],ba=[],ca=[],da=[],ea={},fa=[],ga=moment(),ha=[];K(),S()}]),angular.module("nxn.Alerts").directive("nxnAlertsDateRange",function(){return{restrict:"E",scope:{enableDisable:"=nxnEnableDisable",appendToBody:"=nxnAppendToBody",edArray:"=nxnArray"},templateUrl:"partials/alerts/dateRange.html",controller:["$scope",function(a){function b(){return e?{options:{drops:"up",clearable:!0,autoUpdateInput:!0,minDate:moment(),singleDatePicker:"portlet"===a.displayMode,locale:{format:"DD-MMM-YYYY",separator:" - "}}}:{options:{drops:"up",clearable:!0,autoUpdateInput:!0,minDate:a.enableDisable.dates.fromDate,singleDatePicker:"portlet"===a.displayMode,locale:{format:"DD-MMM-YYYY",separator:" - "}}}}function c(b,c){angular.equals(b,c)||(a.enableDisable.dates.toDate=b.endDate.toDate(),a.enableDisable.dates.fromDate=b.startDate.toDate()),b.endDate.toDate()<moment("DEC 12 2099").toDate()?a.selectedDateIndex=1:a.selectedDateIndex=0,a.enableDisable.dates.beingReset=!1}var d="MMM DD, YYYY",e=!1;a.datesArray=[{label:"Always"},{label:"Specific Dates"}];var f=function(a){return!(!a||""===a)},g=a.enableDisable.dates.fromDate,h=a.enableDisable.dates.toDate;f(g)||(g=new moment),f(h)||(h=moment("DEC 12 2099")),f(g)&&g>moment()&&(e=!0),a.dateRangePickerOptions=b(),a.filterObj={startDate:moment(g),endDate:moment(h)},a.$watchCollection("filterObj",c),"Enable Alerts"===a.enableDisable.value?a.selectedIndex=0:"Disable Alerts"===a.enableDisable.value?a.selectedIndex=1:a.selectedIndex=0,a.enableDisableToggle=function(b){a.selectedIndex=b,0===a.selectedIndex?a.enableDisable.value="Enable Alerts":1===a.selectedIndex&&(a.enableDisable.value="Disable Alerts"),a.enableDisable.dates.toDate=a.filterObj.endDate.toDate(),a.enableDisable.dates.fromDate=a.filterObj.startDate.toDate()},a.datesToggle=function(b){a.selectedDateIndex=b,0===b&&(a.filterObj={startDate:moment(),endDate:moment("DEC 12 2099")})};var i=function(){a.enableDisable.formModified?a.dateMessage="Date settings have been modified. The changes need to be saved.":a.dateMessage=""},j=function(){"Enable Alerts"===a.enableDisable.value?a.alertMessage="Alerts will be enabled for selected dates":a.alertMessage="Alerts will be disabled for selected dates"};a.$watch("enableDisable.dates",function(b,c){b.beingReset?(a.filterObj.startDate=moment(b.fromDate),a.filterObj.endDate=moment(b.toDate)):moment(b.fromDate).format(d)!==moment(c.fromDate).format(d)?a.enableDisable.formModified=!0:moment(b.toDate).format(d)!==moment(c.toDate).format(d)&&(a.enableDisable.formModified=!0),i()},!0),a.$watch("enableDisable.value",function(b,c){"Enable Alerts"===b?a.selectedIndex=0:"Disable Alerts"===b&&(a.selectedIndex=1),b===c||a.enableDisable.dates.beingReset||(a.enableDisable.formModified=!0),j()}),a.$watch("enableDisable.formModified",function(){i()})}]}}),function(){"use strict";function a(){return{restrict:"AE",scope:{},templateUrl:"partials/alerts/alertsdropdown.html",controller:"nxn.AlertsControllerNavbar"}}angular.module("nxn.Alerts").directive("nxnAlertsDropdown",a)}(),angular.module("nxn.Alerts").controller("nxn.AlertsMainController",["$scope","$state","$stateParams","$window","AlertsServiceConfig","PageContext",function(a,b,c,d,e,f){a.$state=b,a.tabs=[{title:"Alerts",sref:"alertsDashboard.alerts",viewName:"alerts",active:!1,activeOn:"alertsDashboard.alerts"},{title:"Manage",sref:"alertsDashboard.manage",viewName:"alertsManageView@alertsDashboard",active:!1,activeOn:"alertsDashboard.manage"},{title:"Distribute",sref:"alertsDashboard.distribute",viewName:"alertsDistributeView@alertsDashboard",active:!1,activeOn:"alertsDashboard.distribute"},{title:"Broadcasts",sref:"alertsDashboard.broadcasts",viewName:"broadcasts",active:!1,activeOn:"alertsDashboard.broadcasts"}],a.entitledForAlerts=e.hasAlertsEntitlement(f),a.alertsDashboardHeader="",a.entitledForAlerts?a.tabsForAlerts=a.tabs:(a.tabsForAlerts=[],angular.forEach(a.tabs,function(b){"broadcasts"===b.viewName&&a.tabsForAlerts.push(b)})),a.setActiveTab=function(b){angular.forEach(a.tabs,function(c){c.active=c.viewName===b,a.isHide="broadcasts"===b})},a.helpModal=function(){var a=e.userGuideAPI[angular.uppercase(f.getEnvironment())],b=a+"GatewayAlertsUserGuide.pdf";d.open(b)}}]),angular.module("nxn.Alerts").controller("nxn.AlertsModalController",["$rootScope","$scope","ModalService","nxn.AlertsV2Service",function(a,b,c,d){b.dataToggle={visable:!1,dataTitle:"Some Content"},b.showDelete=function(b,e){var f=(b.alertRecId,{});f.headerText="Delete Alert",f.bodyUrl="partials/alerts/deleteAlertModal/deleteAlertModal.html",f.alert=b,f.closeButtonText="No",f.actionButtonText="Yes";var g={backdrop:!0,size:"sm",keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};c.showModal(g,f).result.then(function(b){var c=b.alertRecId;d.deleteAlertsByID(c).then(function(){angular.isDefined(e)&&e.close(),a.$broadcast("deleteAlert",{alert:b})})})},b.showAlert=function(f){var g={},h=e(f);g.splittedDetails=b.splitDetails(f,4),g.headerText="Alert Details",g.bodyUrl="partials/alerts/alertModal.html",g.showDelete=b.showDelete,g.alert=h,g.typeAr=[{display:"label label-danger",text:"URGENT"},{display:"label label-warning",text:"MEDIUM"},{display:"label label-info",text:"LOW"}];var i={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};c.showModal(i,g).result.then(function(a){}),"NEW"!==f.ackStatus&&"READ"!==f.ackStatus||d.changeAckStatus(f.alertRecId,3).then(function(b){a.$broadcast("updateAlertStatus",{alert:f,status:"ACKNOWLEDGED"})})};var e=function(a){for(var b=0;b<a.alertDetails.length;b++)""!==a.alertDetails[b].valueLabel&&null!==a.alertDetails[b].valueLabel||(a.alertDetails[b].valueLabel="--"),a.alertDetails[b].valueLabel.trim();return a};b.splitDetails=function(a,b){for(var c=[],d=0;d<a.alertDetails.length;d+=b)c.push(a.alertDetails.slice(d,d+b));return c}}]),angular.module("nxn.Alerts").controller("nxn.AlertsControllerNavbar",["$document","$interval","$rootScope","$scope","AlertsServiceConfig","ModalService","nxn.AlertsV2Service","nxn.userEmulationService","NxnZoneService","PageContext",function(a,b,c,d,e,f,g,h,i,j){function k(){var a=d.nxnAlertAr;d.nxnAlertAr=[],angular.isDefined(a)&&0!==a.length?l(a):n()}function l(a){if(d.nxnNewCount=0,angular.isDefined(a)&&null!==a&&a.length>0){d.nxnAlertAr=a;for(var b=0;b<d.nxnAlertAr.length;b++)d.nxnAlertAr[b].alertRecTime=moment(d.nxnAlertAr[b].alertRecTime).format("MMM DD, YYYY hh:mm:ss A"),"NEW"===d.nxnAlertAr[b].ackStatus&&d.nxnNewCount++}}function m(a){if(angular.isDefined(d.nxnAlertAr)&&d.nxnAlertAr.length>0)for(var b=0;b<d.nxnAlertAr.length;b++)if(d.nxnAlertAr[b].alertRecId===a)return d.nxnAlertAr[b]}function n(){if(d.entitledForAlerts){var a=new Date,b=moment(a).format("YYYY-MM-DD");g.getCustomDateRange(b,b).then(function(a){angular.isDefined(a)&&angular.isDefined(a.data)&&(r=a.data,l(r.alerts))},function(a){s=p,o()})}}function o(){var a=null;!angular.isArray(d.accountGroups)||0===d.accountGroups.length;s===p&&(a="Failed to load accounts"),d.documentErrorMessage=a}var p="FAILURE",q=!1,r=d.nxnAlertAr,s=null;d.fpsRegistered=j.isFPSRegistered(),d.isEmulationMode=h.isEmulationMode(),d.entitledForAlerts=e.hasAlertsEntitlement(j),c.$on("pageReloaded",function(){d.fpsRegistered=j.isFPSRegistered(),d.entitledForAlerts=e.hasAlertsEntitlement(j)}),d.nxnNewCount=0,d.priorityValue=[{display:"label label-danger",text:"URGENT"},{display:"label label-warning",text:"MEDIUM"},{display:"label label-info",text:"LOW"}],d.deferAlert=function(a){g.changeAckStatus(a.alertRecId,4).then(function(b){c.$broadcast("updateAlertStatus",{alert:a,status:"DIFFERED"})})},d.$watch("fpsRegistered",function(a){a===!0&&k()}),c.$on("updateAlertStatus",function(a,b){var c=m(b.alert.alertRecId);angular.isDefined(c)&&(c.ackStatus=b.status,k())}),c.$on("deleteAlert",function(a,b){var c=m(b.alert.alertRecId);if(angular.isDefined(c)){var e=d.nxnAlertAr.indexOf(c);e!==-1&&(d.nxnAlertAr.splice(e,1),k())}}),i.runOutsideAngular(function(){a.on("mousemove",function(){q=!0})});var t=b(function(){q&&n(),q=!1},6e5);d.$on("$destroy",function(){b.cancel(t)})}]),function(){"use strict";function a(a,b,c,d){function e(a){a.businesses={available:[],selected:[]}}function f(a){a.services={available:[],selected:[]}}function g(a){a.notifications={available:[],selected:[]}}function h(a){angular.forEach(a.gridData,function(a){a.getFormattedBusiness=function(){return j(a.targetLabel)},a.getFormattedDate=function(){return d("userPrefDateTimeFormat")(a.msgDate,"DATE")}})}function i(a,b,c){var d=_.chain(a).pluck(b).uniq().value();return _.chain(d).map(function(a){var b;return b=""===a?"Blank":angular.isDefined(c)?c(a):a,{id:a,label:b}}).sortBy("label").partition("id").flatten().value()}function j(a){var b=l[a];return angular.isUndefined(b)&&(b=a),b}function k(a){var b=a.selectedFilters,c=angular.copy(a.gridData);b.business.length>0&&(c=c.filter(function(a){return b.business.indexOf(a.targetLabel)!==-1}));var d=c;b.service.length>0&&(d=d.filter(function(a){return b.service.indexOf(a.service)!==-1}));var e=d;return b.notification.length>0&&(e=e.filter(function(a){return b.notification.indexOf(a.notification)!==-1})),e}var l={wb:"Asset Servicing",ais:"Alternative Investment Services",gateway:"NEXEN",liquidity:"Global Liquidity Services",gfa:"Global Fund Accounting",corporatetrust:"Corporate Trust"};a.loadGrid=function(){c.getAlertBroadcasts().then(function(b){a.gridData=b.data.messages,h(a),a.filteredGridData=k(a),a.businesses.available=i(a.gridData,"targetLabel",j),a.services.available=i(a.gridData,"service"),a.notifications.available=i(a.gridData,"notification")})},a.applyFilter=function(){b.log("[BroadcastController] applyFilter() called"),a.selectedFilters={business:_.pluck(a.businesses.selected,"id"),service:_.pluck(a.services.selected,"id"),notification:_.pluck(a.notifications.selected,"id")},b.log("[BroadcastController] "+angular.toJson(a.selectedFilters)),a.filteredGridData=k(a),a.businesses.available=i(a.gridData,"targetLabel",j),a.services.available=i(a.gridData,"service"),a.notifications.available=i(a.gridData,"notification")},a.resetSearchKeyword=function(a){a.search=""},a.resetFilters=function(){a.businesses.selected=[],a.services.selected=[],a.notifications.selected=[],a.selectedFilters={business:[],service:[],notification:[]},a.loadGrid()},a.gridData=[],a.filteredGridData=[],e(a),f(a),g(a),a.selectedFilters={business:[],service:[],notification:[]},a.loadGrid()}angular.module("nxn.Alerts").controller("nxn.BroadcastController",a),a.$inject=["$scope","$log","nxn.BroadcastService","$filter"]}(),angular.module("nxn.Alerts").controller("nxn.AlertsDistributeController",["$rootScope","$scope","ModalService","nxn.AlertsV2Service","nxn.AlertsSubscribeService","ngTableParams","promiseAlertDevices",function(a,b,c,d,e,f,g){var h="MMM DD, YYYY",i="MM/DD/YYYY";b.isDistributeSpinner=!1,b.enableDisableArray=[{id:0,label:"Enable Alerts"},{id:1,label:"Disable Alerts"}],b.enableDisable={},b.enableDisable.value=b.enableDisableArray[0].label,b.enableDisable.dates={},b.enableDisable.formModified=!1,b.emailCellModified=!1;var j=!1;b.cellPhoneWarning="The alerts can be delivered only to US cell phone numbers",b.modifyForm=function(){b.emailCellModified=!0},b.addEmail=function(){var a,c;for(c=12;c<28;c++)if(14!==c&&15!==c){var d=b.deviceList.map(function(a){return a.deviceCode}).indexOf("0"+c.toString());if(d===-1){a="0"+c.toString();break}}if(c<28){var e={deviceCode:a,deviceAddress:"",actionType:null,local:!0};b.deviceList.push(e),b.emailCellModified=!0}else k("danger","You have reached the maximum number of emails!")},b.messages=[],b.closeMessage=function(a){b.messages.splice(a,1)};var k=function(a,c){b.messages.splice(0,1),b.messages.push({type:a,msg:c})};b.sendTestEmail=function(a){b.isDistributeSpinner=!0,d.testEmail(a).then(function(a){angular.isDefined(a.data)&&("OK"===a.data.status?k("success",a.data.message):k("danger","FAILED: "+a.data)),b.isDistributeSpinner=!1},function(a){k("danger","FAILED: "+a.status+" "+a.statusText),b.isDistributeSpinner=!1})};var l=function(a,b){return a.deviceAddress<b.deviceAddress?-1:a.deviceAddress>b.deviceAddress?1:0};b.resetForm=function(){b.getEmails(b.cachedEmailData,!1,!0)},b.getEmails=function(a,c,d){var e;if(a)e=a,c||(b.enableDisable.formModified=!1),b.emailCellModified=!1;else{if(!angular.isDefined(g)||!angular.isDefined(g.data))return k("danger","Device List Retrieval FAILED"),void(b.getAlertDevicesSuccess=!1);e=g.data}b.cachedEmailData={},angular.copy(e,b.cachedEmailData),e.enabled?b.enableDisable.value=b.enableDisableArray[0].label:b.enableDisable.value=b.enableDisableArray[1].label,b.deviceList=e.deviceInfo,b.deviceList.sort(l),angular.forEach(b.localDeviceList,function(a){this.push(a)},b.deviceList),delete b.localDeviceList,b.providerList=e.provider,b.alertDevicesMetadata={},b.alertDevicesMetadata.enabled=e.enabled,b.alertDevicesMetadata.holdDate=e.holdDate,b.alertDevicesMetadata.toDate=e.toDate;var f=!1;angular.forEach(b.providerList,function(a){a.selected===!0&&(b.cellPhoneProvider={},b.cellPhoneProvider.cpp=a,f=!0)}),!f&&d&&(b.cellPhoneProvider=void 0,b.checkCellPhoneValidity()),angular.forEach(b.deviceList,function(a){"004"===a.deviceCode&&(""===a.deviceAddress?(b.cellNum="XXXXXXXXXX",b.cellNumIsPresent=!1):(b.cellNumIsPresent=!0,b.cellNum=a.deviceAddress,b.cellNumString=b.cellNum.substring(0,3)+"-"+b.cellNum.substring(3,6)+"-"+b.cellNum.substring(6)))}),c||(e.holdDate&&""!==e.holdDate?b.enableDisable.dates.fromDate=new Date(e.holdDate):b.enableDisable.dates.fromDate=null,e.toDate&&""!==e.toDate?b.enableDisable.dates.toDate=new Date(e.toDate):b.enableDisable.dates.toDate=null),b.enableDisable.dates.beingReset=!!d,b.getAlertDevicesSuccess=!0},b.getEmails(),b.checkCellPhoneValidity=function(){j=!!angular.isDefined(b.cellPhoneProvider),j&&angular.isDefined(b.cellNum)&&"XXXXXXXXXX"!==b.cellNum?b.cellPhoneIsValid=!0:b.cellPhoneIsValid=!1},b.checkCellPhoneValidity(),b.saveMethods=function(){b.isDistributeSpinner=!0;var a=b.alertDevicesMetadata.enabled;if(b.cellNumIsPresent&&!j)return k("danger","Select your service provider to proceed further"),void(b.isDistributeSpinner=!1);"Disable Alerts"===b.enableDisable.value?a=!1:"Enable Alerts"===b.enableDisable.value&&(a=!0);var c=new Date(moment().format(h)),e=b.enableDisable.dates.fromDate,f="[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime()),g=b.enableDisable.dates.toDate,l="[object Date]"===Object.prototype.toString.call(g)&&!isNaN(g.getTime()),m=g<c||e<c;if(f)if(g&&!l)k("danger","To Date Invalid"),b.isDistributeSpinner=!1;else if(g&&e>g)k("danger","From Date Greater Than To Date"),b.isDistributeSpinner=!1;else if(b.enableDisable.formModified&&m)k("danger","From Date or To Date should not be less than Today"),b.isDistributeSpinner=!1;else{var n=[];angular.forEach(b.deviceList,function(a){if("070"!==a.deviceCode&&"010"!==a.deviceCode){var b={};b.actionType="UPDATE",b.deviceAddress=a.deviceAddress,b.deviceCode=a.deviceCode,this.push(b)}},n);var o=[];if(angular.isDefined(b.cellPhoneProvider)&&angular.isDefined(b.cellPhoneProvider.cpp))b.cellPhoneProvider.cpp.selected=!0,o.push(b.cellPhoneProvider.cpp);else{var p={};p.valueLabel="NoSerPrdV",p.displayLabel="NoSerPrdL",p.selected=!1,o.push(p)}var q;q=null!==b.enableDisable.dates.fromDate?moment(b.enableDisable.dates.fromDate).format(i):moment(new Date).format(i),g=null!==b.enableDisable.dates.toDate?moment(b.enableDisable.dates.toDate).format(i):"",d.updateAlertDevices(n,o,q,g,a).then(function(a){angular.isDefined(a.data.userId)?k("success","Saved successfully"):k("danger","Save FAILED"),d.getAlertDevices().then(function(a){b.isDistributeSpinner=!1,b.getEmails(a.data)},function(a){k("danger","Device List Retrieval FAILED"),b.isDistributeSpinner=!1})},function(a){k("danger","Save FAILED"),b.isDistributeSpinner=!1})}else k("danger","From Date Invalid"),b.isDistributeSpinner=!1},b.deleteDevice=function(a){b.isDistributeSpinner=!0;var c,e=[];for(c=0;c<b.deviceList.length;c++)if(b.deviceList[c].deviceCode===a){if(angular.isDefined(b.deviceList[c].local))return b.deviceList.splice(c,1),k("success","Deleted successfully"),void(b.isDistributeSpinner=!1);var f={};f.actionType="DELETE",f.deviceAddress=b.deviceList[c].deviceAddress,f.deviceCode=a,e.push(f)}b.localDeviceList=[],angular.forEach(b.deviceList,function(a){angular.isDefined(a.local)&&this.push(a)},b.localDeviceList);var g=[];if(angular.isDefined(b.cellPhoneProvider)&&angular.isDefined(b.cellPhoneProvider.cpp))b.cellPhoneProvider.cpp.selected=!0,g.push(b.cellPhoneProvider.cpp);else{var h={};h.valueLabel="NoSerPrdV",h.displayLabel="NoSerPrdL",h.selected=!1,g.push(h)}var j=moment(b.alertDevicesMetadata.holdDate).format(i),l=moment(b.alertDevicesMetadata.toDate).format(i);null===l&&(l="");var m=b.alertDevicesMetadata.enabled;d.updateAlertDevices(e,g,j,l,m).then(function(a){angular.isDefined(a.data.userId)?k("success","Deleted successfully"):k("danger","Delete FAILED"),d.getAlertDevices().then(function(a){b.isDistributeSpinner=!1,b.getEmails(a.data,!0)},function(a){k("danger","Device List Retrieval FAILED"),b.isDistributeSpinner=!1})},function(a){k("danger","Delete FAILED"),b.isDistributeSpinner=!1})},b.sendTestSms=function(a,c){var e=a+"@"+c.valueLabel;b.isDistributeSpinner=!0,d.testSms(e).then(function(c){if(angular.isDefined(c.data))if("OK"===c.data.status){var d="SMS to "+a+" has been successfully sent";k("success",d)}else k("danger","FAILED: "+c.data);b.isDistributeSpinner=!1},function(a){k("danger","FAILED: "+a.status+" "+a.statusText),b.isDistributeSpinner=!1})}}]).directive("distributeMethod",function(){return{restrict:"E",templateUrl:"partials/alerts/distributionViews/method.html"}}).directive("distributeEnableDisable",function(){return{restrict:"E",templateUrl:"partials/alerts/distributionViews/enableDisable.html"}}).directive("distributeRecipients",function(){return{restrict:"E",templateUrl:"partials/alerts/distributionViews/recipients.html"}}),angular.module("nxn.Alerts").controller("nxn.AlertsManageController",["$scope","ModalService","nxn.AlertsV2Service","nxn.AlertsSubscribeService","ngTableParams","PageContext","promiseAlertSubscriptionCategories","promiseAlertDevices","nxnNgTableParams","nxnExportBackend",function(a,b,c,d,e,f,g,h,i,j){function k(){return{pdf:function(a,b){b.push(a)},xls:function(a,b){b.push(a)}}}function l(b){var d={};angular.forEach(a.alertSubscInfo,function(a){a.alertCategory===b.alertCategory&&(d=a)});var e=d.alertType,f=d.parentAlert,g=d.alertCategory,h=d.alertTypeLabel,i=d.pubName;a.ersKeys=[],angular.forEach(b.types[0].savedAlerts,function(b){c.getSubscDetails(e,f,g,h,b,i).then(function(c,d,e,f){var g={};g.label=b.label,g.ersKey=c.data.alertSubscInfo[0].subscriptionList[0].alertNamespace.confVal.customValue[0],a.ersKeys.push(g)},function(b,c,d,e){a.changeMessage("danger","An error occurred when contacting the backend service.")})})}function m(b){angular.forEach(a.ersKeys,function(c){c.label===b.label&&(a.ersKey=c.ersKey)})}function n(b){c.exportAlertSubscription().then(function(c,d,e,f){angular.isDefined(c)&&angular.isDefined(c.data)&&j.exportDataAndOpen(c.data,b).then(function(a,b,c,d){},function(b){a.changeMessage("danger","Exporting subscription FAILED to export file"),a.subscriptionFailure=!0})},function(b){a.changeMessage("danger","Exporting subscription FAILED to get Subscription"),a.subscriptionFailure=!0})}function o(a,b,c){this.index=a,this.alertTable=b,this.alertTableData=c,this.getSubscDetails=r,this.deleteAllSubscByAlertType=u,this.deleteSubscription=w}function p(a,b,c){this.index=a,this.alertTable=b,this.alertTableData=c,this.getSummarySubscDetails=x,this.deleteSummarySubscription=z}a.alertSubscInfo=d.getAlertSubscInfo(),a.categoryLabels=d.getCategoryLabels(),0===a.alertSubscInfo.length&&(a.subscriptionFailure=!0,a.isEmpty=!0),a.maxAccountsReached=d.getMaxAccountsReached(),a.messages=[];var q="hasGroupRows";a.closeMessage=function(b){a.messages.splice(b,1)},a.changeMessage=function(b,c){a.messages.splice(0,1),a.messages.push({type:b,msg:c})},a.launchAnpNotification=function(){angular.element("#aisAlertNotifier").trigger("click")},a.closeError=function(){a.isEmpty=!1},a.isAisEntitled=!1,f.hasExactEntitlement("AIS_PRL_INVALRT")&&(a.isAisEntitled=!0),a.getSavedAlerts=function(){angular.forEach(a.categoryLabels,function(b,e){angular.isDefined(b.alertCategory)&&c.getSavedAlerts(b.alertCategory).then(function(c){if(d.setSavedAlerts(b,c),"AM_GLSMMF"===b.alertCategory){var f=["Saved Alerts"];a.transformFunc=k(),a.categoryDetailTable[e].data=a.categoryLabels[e].labelName,a.categoryDetailTable[e].setCurrentData(a.categoryLabels[e].labelName),a.categoryDetailTable[e].reload(),a.categoryDetailTable[e].setExportTableData(!0),a.categoryDetailTable[e].setExportData(a.categoryLabels[e].labelName),a.categoryDetailTable[e].setExportTransformFn(a.transformFunc),a.categoryDetailTable[e].setExportAvailable(!0),a.categoryDetailTable[e].setExportFields(f),a.categoryDetailTable[e].setExportHeading("Alerts Subscriptions")}"AM_AISDOC"===b.alertCategory&&a.isAisEntitled&&l(b),a.categoryDetailTable[e].expandableGroupCount=a.categoryDetailTable[e].getExpandableGroupCount(),a.categoryDetailTable[e].expandedGroupCount=a.categoryDetailTable[e].expandableGroupCount},function(b){a.changeMessage("danger","Subscription List Retrieval FAILED"),a.subscriptionFailure=!0})})},a.getSavedAlerts(),angular.isDefined(g)&&angular.isDefined(g.promiseStatus)&&"error"===g.promiseStatus&&(a.changeMessage("danger","Subscription Entitlement Retrieval FAILED"),a.subscriptionFailure=!0),a.startExportFile=n,a.refreshCategoryLabels=function(){var b=!1,c=!1;angular.isDefined(a.expandableFlagBefore)&&(b=a.expandableFlagBefore),angular.isDefined(a.isAlreadyExpanded)&&(c=a.isAlreadyExpanded),
a.categoryLabels=d.getCategoryLabels(),D(a.selectedTabIndex,b,!0,c)},a.showAddAlert=function(){var c={};c.headerText="Add Subscription",c.bodyUrl="partials/alerts/subscWizViews/addSubscriptionModal.html",c.alertSubscInfo=d.getAlertSubscInfo(),c.categoryLabels=d.getCategoryLabels(),c.currentScreen=1,c.maxAccountsReached=a.maxAccountsReached,c.isViewSpinner=!1,c.getSubscDetails=r,c.launchAnpNotification=a.launchAnpNotification,c.getSummarySubscDetails=x,c.filterCategories=function(a){var b=angular.isUndefined(a)||""===a.trim();a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");for(var d,e=b?null:new RegExp(a,"i"),f=0;f<c.categoryLabels.length;f++){var g=c.categoryLabels[f];if(g.show=b||g.alertCategoryLabel.search(e)!==-1,!angular.isUndefined(g.types)){var h=!0;if(!b)for(d=0;d<g.types.length;d++)g.types[d].show=b||g.types[d].label.search(e)!==-1,g.types[d].show&&(g.show=!0,h=!1);if(g.show&&h)for(d=0;d<g.types.length;d++)g.types[d].show=!0}}},c.filterCategories(""),c.previousScreen=function(){this.currentScreen--},c.nextScreen=function(){this.currentScreen++};var e={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};return b.showModal(e,c),c};var r=function(b,c,d,e){"AM_AISDOC"===b.alertCategory?angular.isDefined(d)&&a.isAisEntitled&&m(d):"AM_GLSMMF"===b.alertCategory?s(b,d):(angular.isDefined(e)&&e.close(),t(b,c,d))},s=function(c,d){var e=c.alertCategory,f={};f.headerText="View Subscription",f.bodyUrl="partials/alerts/subscWizViews/viewMMRSubscriptionModal.html",f.alertCategoryLabel=c.alertCategoryLabel,f.alertCategory=e,f.savedAlert=d,f.currentScreen=1,f.previousScreen=function(){this.currentScreen--},f.nextScreen=function(){2!==this.currentScreen&&this.currentScreen++};var g={templateUrl:"partials/common/modal.html",controller:"nxn.AlertsSubscribeViewMMRModalController",resolve:{modalOptionObj:function(){return a.modalDetail=f,a.modalDetail}}};b.showModal(g,f).result.then(function(a){})},t=function(c,e,f){a.expandableFlagBefore=e.hasGroupRows,a.isAlreadyExpanded=!!e.hasGroupRows&&e.expandGroup;var g=d.getAlertSubscInfo(),h={};if(angular.forEach(g,function(a){a.alertCategory===c.alertCategory&&a.alertType===e.type&&(h=a)}),!angular.isDefined(h.alertType))return void a.changeMessage("danger","This subscription type doesn't seem to be available.");var i=h.alertType,j=h.parentAlert,k=h.alertCategory,l=h.alertTypeLabel,m=h.pubName,n={};angular.isDefined(f)?n.headerText="Edit Subscription":n.headerText="Add Subscription",n.selectedSubscription=h.alertCategoryLabel+" - "+h.alertTypeLabel,n.alertType=h.alertTypeLabel,n.parentAlert=h.parentAlert,n.alertName=h.alertType,n.publication=h.pubName,n.bodyUrl="partials/alerts/subscWizViews/editSubscriptionModal.html",n.currentScreen=1,n.isViewSpinner=!0,n.subscriptionName=angular.isDefined(f)?f.label:f;var o=[];angular.isDefined(e.savedAlerts)&&angular.forEach(e.savedAlerts,function(a){o.push(a.label)}),n.savedAlerts=o,n.previousScreen=function(){this.currentScreen--},n.nextScreen=function(){1===this.currentScreen&&!this.atLeastOneChecked()||2===this.currentScreen&&!this.atLeastOneAccount()||this.currentScreen++};var p={backdrop:!0,keyboard:!1,modalFade:!0,templateUrl:"partials/common/modal.html",controller:"nxn.AlertsSubscribeModalController",scope:a,resolve:{modalOptionObj:function(){return a.modalDetail=n,a.modalDetail},promiseAlertSubscriptionInfo:["nxn.AlertsV2Service","nxn.AlertsSubscribeService","ModalSpinnerService",function(b,c,d){var e=d.showModal(),g=function(a){var b=a.opened;b.then(function(){a.dismiss("cancel")})};return b.getSubscDetails(i,j,k,l,f,m).then(function(a,b,c,d){return g(e),a},function(b,c,d,f){g(e),a.changeMessage("danger","An error occurred when contacting the backend service.")})}],promiseEntitlements:["nxn.AlertsV2Service","ModalSpinnerService",function(a,b){var c=b.showModal(),d=function(a){var b=a.opened;b.then(function(){a.dismiss("cancel")})},e={AM_FTFDOCLIB:!0,AM_GLSMTRNWIRE:!0,AM_GLSMTRNPRE:!0,AM_GLSMTRNDRAW:!0,AM_GLSTRDRED:!0,AM_GLSTRDPUR:!0,AM_ICOALERT:!0,AM_LOANDEAL:!0,AM_FTFSFTP:!0,AM_LOANPOSTED:!0};return e[i]?a.getEntitlements(m,k,i).then(function(a,b,e,f){return d(c),{promiseStatus:"success",data:a.data,alertType:i}},function(a,b,e,f){return d(c),{promiseStatus:"error",message:a.data.message}}):(d(c),{promiseStatus:"success"})}]}};b.showModal(p,n).result.then(function(a){})},u=function(d,e){var f;angular.forEach(a.alertSubscInfo,function(a){a.alertCategory===d.alertCategory&&a.alertType===e.type&&(f=a.parentAlert)});var g=[];g.push(e.type);var h={};h.headerText="Delete All",h.bodyUrl="partials/alerts/deleteAlertModal/deleteAllSubscModal.html",h.subscription=e.label,h.closeButtonText="No",h.actionButtonText="Yes";var i={backdrop:!0,size:"sm",keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};a.deleteModalInstance=b.showModal(i,h),a.deleteModalInstance.result.then(function(b){c.deleteAllSubscriptions(g[0]).then(function(b,c,d,f){var g=!!e.hasGroupRows&&e.expandGroup;e.savedAlerts.splice(0,e.savedAlerts.length),e.hasGroupRows=e.savedAlerts.length>0,e.expandGroup=e.savedAlerts.length>0,D(a.selectedTabIndex,!0,e.hasGroupRows,g),a.changeMessage("success","All '"+e.label+"' alert subscriptions have been deleted.")},function(b,c,d,f){a.changeMessage("danger","An error occurred when deleting '"+e.label+"' subscriptions")})})},v=function(b,d,e){c.deleteSubscription(b,d.type,e.label).then(function(b,c,f,g){var h=!!d.hasGroupRows&&d.expandGroup,i=d.savedAlerts.indexOf(e);i>=0&&d.savedAlerts.splice(i,1),d.hasGroupRows=d.savedAlerts.length>0,d.expandGroup=d.savedAlerts.length>0,D(a.selectedTabIndex,!0,d.hasGroupRows,h),a.changeMessage("success","The '"+e.label+"' alert subscription has been deleted.")},function(b,c,d,f){a.changeMessage("danger","An error occurred when deleting '"+e.label+"' from alerts")})},w=function(d,e,f){var g;angular.forEach(a.alertSubscInfo,function(a){a.alertCategory===d.alertCategory&&a.alertType===e.type&&(g=a.parentAlert)});var h={};h.headerText="Delete Saved Subscription",h.bodyUrl="partials/alerts/deleteAlertModal/deleteSubscriptionModal.html",h.subscription=f.label,h.closeButtonText="No",h.actionButtonText="Yes";var i={backdrop:!0,size:"sm",keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};a.deleteModalInstance=b.showModal(i,h),"AM_AISDOC"===d.alertCategory?(m(f),a.deleteModalInstance.result.then(function(b){c.deleteErsSubscription(a.ersKey).then(function(a){v(d.alertCategory,e,f)},function(b,c,d,e){a.changeMessage("danger","An error occurred when deleting '"+f.label+"' from ERS")})})):a.deleteModalInstance.result.then(function(a){v(d.alertCategory,e,f)})},x=function(a){angular.isDefined(a)&&a.close&&a.close(),y()},y=function(){angular.forEach(a.categoryLabels,function(b){b.isSummaryAlert&&(a.expandableFlagBefore=b.types[0].hasGroupRows,a.isAlreadyExpanded=!!b.types[0].hasGroupRows&&b.types[0].expandGroup)});var d={};d.bodyUrl="partials/alerts/subscWizViews/editSummarySubscriptionModal.html",d.currentScreen=1,d.isViewSpinner=!1,d.previousScreen=function(){this.currentScreen--},d.nextScreen=function(){1===this.currentScreen&&!this.atLeastOneType()||2===this.currentScreen&&!this.atLeastOneTime()||this.currentScreen++},d.alertDevicesData=h.data;var e={backdrop:!0,keyboard:!1,modalFade:!0,templateUrl:"partials/common/modal.html",controller:"nxn.SummaryAlertsModalController",scope:a,resolve:{modalOptionObj:function(){return a.modalDetail=d,a.modalDetail},promiseSummaryAlertBatchInfo:["nxn.AlertsSubscribeService","ModalSpinnerService",function(b,d){var e=d.showModal(),f=function(a){var b=a.opened;b.then(function(){a.dismiss("cancel")})};return c.getSummaryBatchInfo().then(function(a,b,c,d){return f(e),a},function(b,c,d,g){f(e),a.changeMessage("danger","An error occurred when contacting the backend service.")})}]}};b.showModal(e,d).result.then(function(a){})},z=function(d){var e={};e.headerText="Delete Summary Alert Subscription",e.bodyUrl="partials/alerts/deleteAlertModal/deleteSubscriptionModal.html",e.subscription="Summary Alert",e.closeButtonText="No",e.actionButtonText="Yes";var f={backdrop:!0,size:"sm",keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};b.showModal(f,e).result.then(function(b){c.deleteSummarySubscription().then(function(b,c,e,f){var g=!!d.types[0].hasGroupRows&&d.types[0].expandGroup;d.allowAdditionalAlerts=!0,d.types[0].hasGroupRows=!d.allowAdditionalAlerts,d.types[0].expandGroup=!d.allowAdditionalAlerts,D(a.selectedTabIndex,!0,d.types[0].hasGroupRows,g),a.changeMessage("success","The summary alert has been deleted.")},function(b,c,d,e){a.changeMessage("danger","An error occurred when deleting the summary alert ")})})};a.subscriptionTableParams=new e({count:3},{counts:[]}),a.refreshAlertsData=function(){var b=[];c.getSubscAlertTypes().then(function(e){d.setAlertSubscInfo(e.data.alertSubscInfo,e.data.summarySubcFlag),angular.isDefined(e.data.upsError)&&"ERROR_MAX_ACCOUNTS_REQUESTED"===e.data.upsError&&d.setMaxAccountsReached(!0),b=d.getCategoryLabels(),angular.forEach(b,function(e,f){angular.isDefined(e.alertCategory)&&f===a.selectedTabIndex&&c.getSavedAlerts(e.alertCategory).then(function(c){d.setSavedAlerts(e,c),"AM_GLSMMF"===e.alertCategory?a.categoryDetailTable[a.selectedTabIndex].setCurrentData(b[a.selectedTabIndex].labelName):a.categoryDetailTable[a.selectedTabIndex].setCurrentData(b[a.selectedTabIndex].types)},function(b){a.changeMessage("danger","Subscription List Retrieval FAILED"),a.subscriptionFailure=!0})})},function(b){a.changeMessage("danger","Subscription Alert Type Retrieval FAILED"),a.subscriptionFailure=!0})};var A=function(b,c){var d=c.offset?c.offset:0;a.refreshAlertsData(),angular.isDefined(a.selectedTabIndex)?b.resolve({data:"AM_GLSMMF"===a.categoryDetailLabel[a.selectedTabIndex].alertCategory?a.categoryDetailLabel[a.selectedTabIndex].labelName:a.categoryDetailLabel[a.selectedTabIndex].types,time:moment().format(),offset:d}):b.reject()},B={heading:"Alerts Subscriptions",columns:["Alert Subscription Name","Saved Alerts"],pdf:[{value:"label",align:"left"},{value:"savedAlerts.label",align:"left"}],xls:[{value:"label"},{value:"savedAlerts.label"}]};a.categoryDetailLabel=[],a.categoryDetailTable=[a.categoryLabels.length];var C=function(b,c){return c?function(){return new p(b,a.categoryDetailTable[b],a.categoryDetailLabel[b])}:function(){return new o(b,a.categoryDetailTable[b],a.categoryDetailLabel[b])}};a.alertTabs=[],a.initData=function(){if(angular.isDefined(a.categoryLabels))for(var b=0;b<a.categoryLabels.length;b++){a.categoryDetailLabel[b]=a.categoryLabels[b],"AM_GLSMMF"!==a.categoryDetailLabel[b].alertCategory?(a.categoryDetailTable[b]=i.get({page:1,count:5},{},!1,a.categoryDetailLabel[b].types,moment().format(),{},q),a.categoryDetailTable[b].setGroupedTable(!0),a.categoryDetailTable[b].setIncludeCollapseGroups(),a.categoryDetailTable[b].setExportTableData(!0),a.categoryDetailTable[b].setExportDesc(B),a.categoryDetailTable[b].toggleCollapseGroups()):(a.categoryDetailTable[b]=i.get({page:1,count:25},{},!1,a.categoryDetailLabel[b].types,moment().format(),{}),a.categoryDetailTable[b].setExportAvailable(!1)),a.categoryDetailTable[b].setServerDataFn(A);var c={};c.label=a.categoryLabels[b].alertCategoryLabel,c.controller=C(b,a.categoryLabels[b].isSummaryAlert),a.categoryLabels[b].isSummaryAlert?c.template="partials/alerts/subscWizViews/summaryAlerts.html":"AM_GLSMMF"===a.categoryLabels[b].alertCategory?c.template="partials/alerts/subscWizViews/moneyMarkets.html":"AM_AISDOC"===a.categoryLabels[b].alertCategory?c.template="partials/alerts/subscWizViews/aisDocAlerts.html":c.template="partials/alerts/subscWizViews/lobAlerts.html",a.alertTabs.push(c)}},a.initData(),a.selectedTab=function(b){a.selectedTabIndex=b};var D=function(b,c,d,e){angular.isDefined(b)&&c!==d&&(c===!1&&d===!0?(a.categoryDetailTable[b].expandableGroupCount=a.categoryDetailTable[b].expandableGroupCount+1,a.categoryDetailTable[b].expandedGroupCount=a.categoryDetailTable[b].expandedGroupCount+1):c===!0&&d===!1&&(a.categoryDetailTable[b].expandableGroupCount=a.categoryDetailTable[b].expandableGroupCount-1,e&&(a.categoryDetailTable[b].expandedGroupCount=a.categoryDetailTable[b].expandedGroupCount-1)),a.categoryDetailTable[b].expandableGroupCount!==a.categoryDetailTable[b].expandedGroupCount||a.categoryDetailTable[b].expandGroups?0===a.categoryDetailTable[b].expandedGroupCount&&a.categoryDetailTable[b].expandGroups&&(a.categoryDetailTable[b].expandGroups=!1,a.categoryDetailTable[b].collapseGroupBy=!0,a.categoryDetailTable[b].collapseText="Expand"):(a.categoryDetailTable[b].expandGroups=!0,a.categoryDetailTable[b].collapseGroupBy=!1,a.categoryDetailTable[b].collapseText="Collapse"))};a.$watch(function(){return angular.isDefined(a.categoryDetailTable[a.selectedTabIndex])?a.categoryDetailTable[a.selectedTabIndex].searchText:null},function(b,c){b!==c&&("AM_GLSMMF"===a.categoryDetailLabel[a.selectedTabIndex].alertCategory?a.filteredCategoryDetails=a.searchFilter(a.categoryDetailLabel[a.selectedTabIndex].labelName,a.categoryDetailTable[a.selectedTabIndex].searchText):a.filteredCategoryDetails=a.searchFilter(a.categoryDetailLabel[a.selectedTabIndex].types,a.categoryDetailTable[a.selectedTabIndex].searchText),a.categoryDetailTable[a.selectedTabIndex].settings().$scope&&(a.categoryDetailTable[a.selectedTabIndex].setCurrentData(a.filteredCategoryDetails),a.categoryDetailTable[a.selectedTabIndex].reload(),"AM_GLSMMF"===a.categoryDetailLabel[a.selectedTabIndex].alertCategory&&a.categoryDetailTable[a.selectedTabIndex].setExportData(a.categoryDetailTable[a.selectedTabIndex].getCurrentData())))},!0),a.searchFilter=function(a,b){if(angular.isUndefined(b)||""===b.trim())return a;b=b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");for(var c,d=new RegExp(b,"i"),e=[],f=0;f<a.length;f++){var g=a[f];if(angular.isUndefined(g.label))g.search(d)!==-1&&e.push(g);else if("Summary Alerts"===g.label)g.label.search(d)!==-1&&e.push(g);else{if(angular.isUndefined(g.savedAlerts))continue;var h={};for(h.savedAlerts=[],c=0;c<g.savedAlerts.length;c++)g.savedAlerts[c].label.search(d)!==-1&&(h.expandGroup=g.expandGroup,h.label=g.label,h.type=g.type,h.savedAlerts.push(g.savedAlerts[c]));g.label.search(d)!==-1?e.push(g):h.savedAlerts.length>0&&e.push(h)}}return e}}]),angular.module("nxn.Alerts").controller("nxn.AlertsSubscribeModalController",["$scope","$filter","ModalService","modalOptionObj","$modalInstance","promiseAlertSubscriptionInfo","promiseEntitlements","nxn.AlertsV2Service","nxn.AlertsSubscribeService","nxnNgTableParams","PageContext",function(a,b,c,d,e,f,g,h,i,j,k){var l,m=k.getUser();i.resetSubscriptionDetails(),a.modalOptions=d,a.modalOptions.editExisting=angular.isDefined(a.modalOptions.subscriptionName),a.modificationMade=!1,a.$watch("modalOptions.mutilGridAcctEdit.length",function(b,c){b!==c&&angular.isDefined(c)&&(a.modificationMade=!0)});var n=function(){var b="Are you sure that you want to close this window without saving? All changes will be lost.",d={};d.bodyUrl="partials/alerts/subscWizViews/noSaveConfirmation.html",d.headerText="Confirmation",d.closeButtonText="No",d.actionButtonText="Yes",d.modalContentText=b,d.hideHeaderClose=!0;var f={backdrop:!1,keyboard:!1,size:"sm",scope:a};c.showModal(f,d).result.then(function(a){a&&e.dismiss("cancel")})};if(a.modalOptions.close=function(b){a.modificationMade?n():e.dismiss("cancel")},a.today=new Date,a.modalOptions.highlightRow=function(b){return"~NEW~"===b||b===a.modalOptions.subscriptionName?{"background-color":"#f0e0bd"}:{}},a.confirmChange=function(){a.modificationMade=!0},a.checkboxes={checkedAll:!0,checked:!1,items:{}},a.selectAllDevices=function(){angular.isDefined(a.deviceDetailsTable)?angular.forEach(a.deviceDetailsTable,function(b){angular.isDefined(b.deviceCode)&&(a.checkboxes.items[b.deviceCode]=a.checkboxes.checkedAll,b.checked=a.checkboxes.checkedAll)}):angular.forEach(a.deviceInfo,function(b){angular.isDefined(b.deviceCode)&&(a.checkboxes.items[b.deviceCode]=a.checkboxes.checkedAll,b.checked=a.checkboxes.checkedAll)})},a.cbxDeviceAddressChange=function(b,c){a.checkboxes.checkedAll=!0,c?angular.forEach(a.checkboxes.items,function(b){b||(a.checkboxes.checkedAll=!1)}):a.checkboxes.checkedAll=!1,angular.isDefined(a.deviceDetailsTable)?angular.forEach(a.deviceDetailsTable,function(a){a.deviceCode===b&&(a.checked=c)}):angular.forEach(a.deviceInfo,function(a){a.deviceCode===b&&(a.checked=c)})},a.modalOptions.atLeastOneChecked=function(){var b="",c=!1;angular.forEach(a.modalOptions.statusCheckboxGroup,function(a){a.checked===!0&&(c=!0)}),c||(b="You must choose at least one Status");var d=!1;angular.isDefined(a.modalOptions.instructionCheckboxGroup)&&(angular.forEach(a.modalOptions.instructionCheckboxGroup,function(a){a.checked===!0&&(d=!0)}),d||(b="You must choose at least one Instruction"),d===!1&&c===!1&&(b="You must choose at least one Status and one Instruction"));var e=angular.isDefined(a.modalOptions.instructionCheckboxGroup)?!(!d||!c):!angular.isDefined(a.modalOptions.statusCheckboxGroup)||!!c;return a.invalidFormCheckStatusInstruction=e?null:b,e},a.modalOptions.atLeastOneAccount=function(){var b=i.getAccounts(a.modalOptions).length>0;return a.invalidFormCheckAccounts=null,b||(a.invalidFormCheckAccounts="AM_FTFDOCLIB"===a.modalOptions.alertName?"You must choose at least one group":"You must choose at least one account"),b},a.modalOptions.filters={types:["Account Name","Account Number"],operations:["Contains","Starts With","Ends With"],operands:["AND","OR"],newFilter:function(){return{type:"Account Name",operation:"Contains",token:"",operand:"AND"}},data:[],hasFiltered:!1,addNewFilter:function(a){this.data.splice(a,0,this.newFilter())},removeFilter:function(a){this.data.splice(a,1)},reset:function(){var a=this.data.filter(function(a){return a.token.length>0});a.length>0&&this.hasFiltered&&(this.resetFilteredData(),this.data=[],this.addNewFilter(),this.hasFiltered=!1)},resetFilteredData:function(){var b=a.subscriptionDetails.alertType;i.setEntitlements(b,[],a.modalOptions),a.subscriptionDetails=i.getSubscriptionDetails()},apply:function(){var b=this.data.filter(function(a){return a.token.length>0});if(b.length>0){var c=a.subscriptionDetails.pubName,d=a.subscriptionDetails.alertCategory,e=a.subscriptionDetails.alertType;a.modalOptions.isViewSpinner=!0,a.invalidFormCheckAccounts="",this.resetFilteredData(),this.hasFiltered=!0,h.getEntitlements(c,d,e,b).then(function(b,c,d,f){angular.isDefined(b)&&angular.isDefined(b.data)&&(i.setEntitlements(e,b.data,a.modalOptions),a.subscriptionDetails=i.getSubscriptionDetails(),a.modalOptions.isViewSpinner=!1)},function(b,c,d,e){a.invalidFormCheckAccounts=b.data.message,a.modalOptions.isViewSpinner=!1})}else a.invalidFormCheckAccounts="Please choose at least one criteria."}},a.modalOptions.filters.addNewFilter(),a.deviceDetailsTableParams=j.get({},{},!1,a.modalOptions.devicesBySavedAlert,a.today),a.deviceDetailsTableParams.settings().$scope=a,a.modalOptions.deviceDetailsTableParams=a.deviceDetailsTableParams,a.deviceDetailsTableParams.setExportAvailable(!1),a.modalOptions.deviceForSavedAlert=[],angular.isDefined(f)){if(angular.isDefined(f)&&angular.isDefined(f.data)&&angular.isDefined(f.data.alertSubscInfo)){i.setSubscriptionDetails(f,a.modalOptions),a.subscriptionDetails=i.getSubscriptionDetails(),a.isAlertRule=!!angular.isDefined(a.modalOptions.geExprList&&a.modalOptions.leExprList),a.isRedemption="AM_GLSTRDRED"===a.modalOptions.alertName,a.isInstruction=!!angular.isDefined(a.modalOptions.instructionCheckboxGroup),a.isStatus=!!angular.isDefined(a.modalOptions.statusCheckboxGroup),a.isDocLib="AM_FTFDOCLIB"===a.modalOptions.alertName,a.isDocLib?a.heading="User Groups":a.isStatus?a.heading="Accounts List":a.heading="Deals",a.type="",a.isInstruction&&(a.type=a.type+" , instruction "),a.hasAccounts&&(a.isDocLib?a.type=a.type+" and groups ":a.type=a.type+" and accounts "),a.userType=f.data.userType;var o=f.data.alertSubscInfo;a.modalOptions.savedAlertList=[],angular.forEach(o[0].subscriptionList,function(a){var b={};b.alertSubscription=a.alertName,b.alertType=o[0].alertType,b.alertCategory=o[0].alertCategory,this.push(b)},a.modalOptions.savedAlertList);var p=function(b){function c(a){return"010"!==a.deviceCode&&"070"!==a.deviceCode}var d={};a.modalOptions.editExisting||(d.alertSubscription="~NEW~",d.alertType=a.subscriptionDetails.alertType,d.alertCategory=a.subscriptionDetails.alertCategory,d.devices=[]),i.setSubscriptionDeviceDetails(b,d),a.modalOptions.devicesBySavedAlert=i.getSubscriptionDeviceDetails(a.modalOptions.subscriptionName),a.modalOptions.allDevices=i.getSubscriptionDevices(),angular.forEach(a.modalOptions.devicesBySavedAlert,function(b){(b.alertSubscription===a.modalOptions.subscriptionName||!a.modalOptions.editExisting&&"~NEW~"===b.alertSubscription)&&(a.modalOptions.deviceForSavedAlert[0]=b)}),a.deviceInfo=[],angular.forEach(a.modalOptions.devicesBySavedAlert[0].editableDevices.filter(c),function(b){a.deviceInfo.push(b)}),a.deviceDetailsTableParams.setCurrentData(a.deviceInfo),a.deviceDetailsTableParams.reload(),angular.forEach(a.deviceInfo,function(b){angular.isDefined(b.deviceCode)&&(a.checkboxes.checkedAll=a.checkboxes.checkedAll&&b.checked,a.checkboxes.items[b.deviceCode]=b.checked)})};angular.isDefined(a.modalOptions.savedAlertList)&&a.modalOptions.savedAlertList.length>0?h.getAlertDevicesByAlert(a.modalOptions.savedAlertList).then(function(a){angular.isDefined(a)&&angular.isDefined(a.data)&&p(a.data)}):h.getAlertDevices().then(function(a){if(angular.isDefined(a)&&angular.isDefined(a.data)){var b={};if(angular.isDefined(a.data.deviceInfo)&&a.data.deviceInfo.length>0){var c=[];angular.forEach(a.data.deviceInfo,function(a){if(angular.isDefined(a.deviceAddress)&&null!==a.deviceAddress&&""!==a.deviceAddress){var b={};b.deviceAddress=a.deviceAddress,b.deviceCode=a.deviceCode,c.push(b)}}),b.devices=c}b.server=[],p(b)}})}a.modalOptions.isViewSpinner=!1}a.isLargeAccounts=!1,a.modalOptions.isLargeAccounts=!1,angular.isDefined(g)&&angular.isDefined(g.promiseStatus)&&"error"===g.promiseStatus?("The search results are too broad to display. Use filters to narrow your search results."!==g.message&&"Too many accounts. Please use the filter to reduce the number of accounts."!==g.message||(a.isLargeAccounts=!0,a.modalOptions.isLargeAccounts=!0),a.invalidFormCheckAccounts=g.message):angular.isDefined(g)&&angular.isDefined(g.data)&&("AM_FTFSFTP"===a.modalOptions.alertName?l=g.data[0].number:(i.setEntitlements(a.subscriptionDetails.alertType,g.data,a.modalOptions),a.subscriptionDetails=i.getSubscriptionDetails()));var q={AM_FTFDOCLIB:!0,AM_GLSMTRNWIRE:!0,AM_GLSMTRNPRE:!0,AM_GLSMTRNDRAW:!0,AM_GLSTRDRED:!0,AM_GLSTRDPUR:!0,AM_ICOALERT:!0,AM_LOANDEAL:!0,AM_LOANPOSTED:!0};a.hasAccounts=q[a.subscriptionDetails.alertType],a.$watch("deviceDetailsTableParams.searchText",function(b,c){b!==c&&a.searchFilter()}),a.searchFilter=function(){var c=a.deviceDetailsTableParams.searchText;c=c.replace(/!/g," "),a.deviceDetailsTable=b("filter")(a.deviceInfo,{deviceAddress:c}),a.deviceDetailsTableParams.setCurrentData(a.deviceDetailsTable),a.deviceDetailsTableParams.reload()},a.saveSubscription=function(){a.modificationMade=!1,a.disableSaveSub=!0,a.modalOptions.isViewSpinner=!0;var b={},c=a.modalOptions.subscriptionName,d=i.getStatusCheckboxes(a.modalOptions),e=i.getInstructionCheckboxes(a.modalOptions),f=i.getAccountBalances(a.modalOptions),g=i.getAccounts(a.modalOptions),j=i.getInstructionType(a.modalOptions);a.modalOptions.editExisting&&(b=i.getSelectedAccountsForEdit(a.modalOptions,c));var k;angular.forEach(a.alertSubscInfo,function(b){b.alertCategory===a.subscriptionDetails.alertCategory&&b.alertType===a.subscriptionDetails.alertType&&(k=b.parentAlert)}),a.dupErrorMsgAr=[],a.closeDupError=function(b){a.dupErrorMsgAr.splice(b,1)};var n=l?l:m.toUpperCase(),o=[];angular.forEach(a.modalOptions.selectedAccount,function(a){o.push(a.number)});var p=i.getAlertSubscCriteriaVo(c,f,g,o,d,a.modalOptions.oldStatusArray,e,j,a.modalOptions.oldInstructionArray,n,a.hasAccounts);h.updateSubscription(a.subscriptionDetails,g,b,a.userType,k,p,a.modalOptions.editExisting).then(function(b,d,e,f){if(angular.isDefined(b.data)&&b.data.success===!1){var g=b.data.errorMessage;a.modalOptions.close(),a.changeMessage("danger","There was an error when saving the alert subscription: "+g)}else{a.modalOptions.editExisting||(i.addSavedAlert(a.subscriptionDetails.alertCategory,a.subscriptionDetails.alertType,c),a.refreshCategoryLabels());var j=[],k=i.getSubscriptionDevicesFromServer();a.modalOptions.editExisting?angular.forEach(k,function(a){a.alertSubscription===c&&(j[0]=a)}):(a.modalOptions.deviceForSavedAlert[0].alertSubscription=c,angular.forEach(k,function(a){"~NEW~"===a.alertSubscription&&(j[0]=a)}));var l=angular.copy(a.isAlertRule?a.modalOptions.devicesBySavedAlert:a.modalOptions.deviceForSavedAlert);h.updateAlertDevicesByAlert(i.getSubscriptionDeviceClient(l,c),i.getSubscriptionDevices(),a.isAlertRule?k:j).then(function(b,d,e,f){if(angular.isDefined(b.data.success)&&b.data.success===!1){var g=b.data.errorMessage;a.modalOptions.close(),a.changeMessage("danger","There was an error when saving the subscription by device: "+g)}else a.modalOptions.close(),a.changeMessage("success","The alert subscription '"+c+"' has been saved.")},function(b,c,d,e){a.disableSaveSub=!1,a.modalOptions.isViewSpinner=!1,a.modalOptions.close(),a.changeMessage("danger","There was an error when saving the subscription by device.")})}},function(b,c,d,e){var f=b.data.message;if(f.indexOf("Subscription already exists")>-1){var g=b.data.params;a.disableSaveSub=!1,a.modificationMade=!0,a.modalOptions.isViewSpinner=!1,a.dupErrorMsgAr.push({state:!0,text:g[0],type:"warning"}),a.modalOptions.currentScreen=1}else a.disableSaveSub=!1,a.modalOptions.isViewSpinner=!1,a.modalOptions.close(),a.changeMessage("danger","There was an error when saving the alert subscription.")})}}]),angular.module("nxn.Alerts").controller("nxn.SummaryAlertsModalController",["$scope","ModalService","modalOptionObj","$modalInstance","promiseSummaryAlertBatchInfo","nxn.AlertsV2Service","nxn.AlertsSubscribeService",function(a,b,c,d,e,f,g){g.resetSummaryAlertBatchInfo(),a.modalOptions=c,a.summaryModification=!1,a.deviceList=[],a.$watch("summaryAlertBatchInfo.groupEmailAlertsByValue",function(b,c){b!==c&&a.changeSummary()});var h=function(){var c="Are you sure that you want to close this window without saving? All changes will be lost.",e={};e.bodyUrl="partials/alerts/subscWizViews/noSaveConfirmation.html",e.headerText="Confirmation",e.closeButtonText="No",e.actionButtonText="Yes",e.modalContentText=c,e.hideHeaderClose=!0;var f={backdrop:!1,keyboard:!1,size:"sm",scope:a};b.showModal(f,e).result.then(function(a){a&&d.dismiss("cancel")})};a.modalOptions.close=function(b){a.summaryModification||a.enableDisable.formModified?h():d.dismiss("cancel")},a.changeSummary=function(){a.summaryModification=!0},a.buttonPresent=function(){a.hideRemove=!1,a.hideAddEmail=!1,1===a.deviceList.length&&(a.hideRemove=!0),6===a.deviceList.length&&(a.hideAddEmail=!0)},a.modalOptions.atLeastOneType=function(){var b=!1;return angular.forEach(a.summaryAlertAlertTypes,function(a){angular.forEach(a.alertTypeLabels,function(a){a.enable===!0&&(b=!0)})}),a.invalidForm1=b?null:"At least one alert type must be set",b},a.modalOptions.atLeastOneTime=function(){var b=!1;return angular.forEach(a.summaryAlertBatchInfo.timeInterval,function(a){angular.isDefined(a.disabled)?a.disabled===!1&&(b=!0):b=!0}),a.invalidForm2=b?null:"At least one scheduled time must be set",b};var i="MMM DD, YYYY";a.newScheduleTime={hourValue:"07",minuteValue:"00",ampmValue:"AM"},a.hourArrayString=["01","02","03","04","05","06","07","08","09","10","11","12"],a.duplicateError={state:!1},a.addScheduledTime=function(){if(a.duplicateError.state=!1,angular.isDefined(a.summaryAlertBatchInfo.timeInterval)&&null!==a.summaryAlertBatchInfo.timeInterval||(a.summaryAlertBatchInfo.timeInterval=[]),angular.isDefined(a.summaryAlertBatchInfo.timeInterval)&&a.summaryAlertBatchInfo.timeInterval.length<=0)a.summaryAlertBatchInfo.timeInterval.splice(a.summaryAlertBatchInfo.timeInterval.length,0,angular.copy(a.newScheduleTime)),a.summaryModification=!0;else{for(var b=!1,c=0;c<a.summaryAlertBatchInfo.timeInterval.length;c++){var d=a.summaryAlertBatchInfo.timeInterval[c].hourValue+a.summaryAlertBatchInfo.timeInterval[c].minuteValue+a.summaryAlertBatchInfo.timeInterval[c].ampmValue,e=a.newScheduleTime.hourValue+a.newScheduleTime.minuteValue+a.newScheduleTime.ampmValue;d===e&&a.summaryAlertBatchInfo.timeInterval[c].disabled===!0?(b=!0,delete a.summaryAlertBatchInfo.timeInterval[c].disabled):d===e&&(b=!0,a.duplicateError.state=!0)}b||(a.summaryAlertBatchInfo.timeInterval.splice(a.summaryAlertBatchInfo.timeInterval.length,0,angular.copy(a.newScheduleTime)),a.summaryModification=!0)}},a.modalOptions.messages=[],a.modalOptions.closeMessage=function(b){a.modalOptions.messages.splice(b,1)};var j=function(b,c){a.modalOptions.messages.splice(0,1),a.modalOptions.messages.push({type:b,msg:c})};a.modalOptions.sendTestEmail=function(a){f.testEmail(a).then(function(a){angular.isDefined(a.data)&&("OK"===a.data.status?j("success",a.data.message):j("danger","FAILED: "+a.data))})},a.modalOptions.addEmail=function(b){var c;b||(b="",a.changeSummary());for(var d=0;d<10;d++){var e=a.deviceList.map(function(a){return a.deviceCode}).indexOf(d);if(e===-1){c=d;break}}if(a.deviceList.length<6){var f={deviceAddress:b,deviceCode:c};a.deviceList.push(f)}a.buttonPresent()},a.enableDisableArray=[{id:0,label:"Enable Alerts"},{id:1,label:"Disable Alerts"}],a.enableDisable={},a.enableDisable.value=a.enableDisableArray[0].label,a.enableDisable.dates={},a.enableDisable.formModified=!1,a.enableDisable.radioColumns={xs:"2",sm:"2",md:"2",lg:"2"},a.enableDisable.dateColumns={xs:"3",sm:"3",md:"3",lg:"3"},a.resetForm=function(){angular.copy(a.cachedEnableDisable.dates,a.enableDisable.dates),a.enableDisable.dates.beingReset=!0,a.enableDisable.value=a.cachedEnableDisable.value,a.enableDisable.formModified=!1},a.toggleGroupEmailAlertsBy=function(b){a.summaryAlertBatchInfo.groupEmailAlertsByValue=b},angular.isDefined(e)&&(angular.isArray(e.data.scheduledEmail)&&0===e.data.scheduledEmail.length&&angular.forEach(a.modalOptions.alertDevicesData.deviceInfo,function(a){"006"===a.deviceCode&&e.data.scheduledEmail.push(a.deviceAddress)}),g.setSummaryAlertBatchInfo(e.data),a.summaryAlertBatchInfo=g.getSummaryAlertBatchInfo(),angular.forEach(a.summaryAlertBatchInfo.scheduledEmail,function(b){a.modalOptions.addEmail(b)}),a.summaryAlertAlertTypes=g.getSummaryAlertAlertTypes(),a.add=!a.summaryAlertBatchInfo.timeInterval||0===a.summaryAlertBatchInfo.timeInterval.length,a.modalOptions.headerText=a.add?"Add Subscription":"Edit Subscription",a.summaryAlertBatchInfo.enable||a.add?a.enableDisable.value=a.enableDisableArray[0].label:a.enableDisable.value=a.enableDisableArray[1].label,null!==a.summaryAlertBatchInfo.holdFromDate?a.enableDisable.dates.fromDate=new Date(a.summaryAlertBatchInfo.holdFromDate):a.enableDisable.dates.fromDate=new Date,null!==a.summaryAlertBatchInfo.holdToDate?a.enableDisable.dates.toDate=new Date(a.summaryAlertBatchInfo.holdToDate):a.enableDisable.dates.toDate=null,a.cachedEnableDisable={},angular.copy(a.enableDisable,a.cachedEnableDisable)),a.deleteDevice=function(b){a.changeSummary(),a.deviceList.length>1&&(a.deviceList.splice(b,1),a.buttonPresent())},a.saveSummarySubscription=function(){a.summaryAlertBatchInfo.scheduledEmail=[],angular.forEach(a.deviceList,function(b){a.summaryAlertBatchInfo.scheduledEmail.push(b.deviceAddress)}),a.enableDisable.formModified=!1,a.summaryModification=!1,a.enableDisable.value===a.enableDisableArray[1].label?a.summaryAlertBatchInfo.enable=!1:a.summaryAlertBatchInfo.enable=!0;var b=moment(new Date).format(i),c=a.enableDisable.dates.fromDate,d="[object Date]"===Object.prototype.toString.call(c)&&!isNaN(c.getTime()),e=a.enableDisable.dates.toDate,h="[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime());
if(!d)return void(a.invalidForm3="From Date Invalid");if(null!==e&&!h)return void(a.invalidForm3="To Date Invalid");if(null!==e&&c>e)return void(a.invalidForm3="From Date Greater Than To Date");if(c<new Date(b)&&null!==e&&e<new Date(b))return void(a.invalidForm3="From and To Dates Less Than Today");null!==a.enableDisable.dates.fromDate?a.summaryAlertBatchInfo.holdFromDate=moment(a.enableDisable.dates.fromDate).format(i):a.summaryAlertBatchInfo.holdFromDate=moment(new Date).format(i),null!==a.enableDisable.dates.toDate?a.summaryAlertBatchInfo.holdToDate=moment(a.enableDisable.dates.toDate).format(i):a.summaryAlertBatchInfo.holdToDate="",a.summaryAlertBatchInfo.alertTypes=g.populateSummaryAlertTypes(a.summaryAlertAlertTypes,a.summaryAlertBatchInfo.holdFromDate,a.summaryAlertBatchInfo.holdToDate),a.summaryAlertBatchInfo.groupEmailAlertBy=[{valueLabel:a.summaryAlertBatchInfo.groupEmailAlertsByValue,selected:!0}];var j=[];angular.forEach(a.summaryAlertBatchInfo.timeInterval,function(a){a.disabled||j.push(a)}),a.summaryAlertBatchInfo.timeInterval=j;var k=!1;angular.forEach(a.summaryAlertBatchInfo.alertTypes,function(a){a.enable&&(k=!0)}),f.updateSummaryBatchInfo(a.summaryAlertBatchInfo).then(function(){g.setSavedSummaryAlert(),a.refreshCategoryLabels(),a.modalOptions.close(),a.changeMessage("success","The summary alert has been saved.")},function(){a.changeMessage("danger","There was an error when saving the summary alert.")})}}]),angular.module("nxn.Alerts").controller("nxn.AlertsSubscribeViewMMRModalController",["$scope","$filter","ModalService","modalOptionObj","$modalInstance","nxn.AlertsV2Service","nxn.AlertsSubscribeService","PageContext","nxnNgTableParams",function(a,b,c,d,e,f,g,h,i){var j=["AM_GLSMMRFUND","AM_GLSMMRDAILY","AM_GLSMMRWEEKLY","AM_GLSMMRASSETS","AM_GLSMMRNAV","AM_GLSMMRWAM","AM_GLSMMRRATING"],k="GLS",l="AM_GLSMAIN";a.modalOptions=d,a.modalOptions.alertName=a.modalOptions.savedAlert,a.modalOptions.close=function(a){e.dismiss("cancel")},a.$watch("viewDeviceDetailsTableParams.searchText",function(b,c){b!==c&&a.searchFilter()}),a.searchFilter=function(){var c=a.viewDeviceDetailsTableParams.searchText;c=c.replace(/!/g," "),a.deviceDetailsTable=b("filter")(a.deviceInfo,{deviceAddress:c}),a.viewDeviceDetailsTableParams.setCurrentData(a.deviceDetailsTable),a.viewDeviceDetailsTableParams.reload()},a.modalOptions.alertValue=[],a.modalOptions.savedAlertList=[],angular.forEach(j,function(b){var c={};"AM_GLSMMRDAILY"===b?(c.id=2,c.alertName="Daily Liquidity"):"AM_GLSMMRWEEKLY"===b?(c.id=3,c.alertName="Weekly Liquidity"):"AM_GLSMMRFUND"===b?(c.id=1,c.alertName="Fund Assets (in millions) is"):"AM_GLSMMRASSETS"===b?(c.id=4,c.alertName="Drop in Assets"):"AM_GLSMMRNAV"===b?(c.id=5,c.alertName="Market NAV"):"AM_GLSMMRWAM"===b?c.alertName="WAM":"AM_GLSMMRRATING"===b&&(c.id=8,c.alertName="Change in Fund Rating"),f.getSubscDetails(b,l,a.modalOptions.alertCategory,a.modalOptions.alertCategoryLabel,a.modalOptions.savedAlert,k).then(function(d,e,f,g){if("AM_GLSMMRRATING"!==b){if(angular.isDefined(d.data.alertSubscInfo)&&angular.isDefined(d.data.alertSubscInfo[0].subscriptionList[0].alertRule))if(c.isValue=!0,"END"===d.data.alertSubscInfo[0].subscriptionList[0].alertRule.ruleOperator)c.exprValue=d.data.alertSubscInfo[0].subscriptionList[0].alertRule.exprList[0].exprValue,"AM_GLSMMRASSETS"===b?c.operator="greater than":"AM_GLSMMRWAM"===b?(c.id=6,"LT"===d.data.alertSubscInfo[0].subscriptionList[0].alertRule.exprList[0].exprOperator?c.operator="less than":"GT"===d.data.alertSubscInfo[0].subscriptionList[0].alertRule.exprList[0].exprOperator&&(c.operator="greater than")):c.operator="less than","AM_GLSMMRDAILY"!==b&&"AM_GLSMMRWEEKLY"!==b&&"AM_GLSMMRASSETS"!==b||(c.exprValue=c.exprValue+" %"),a.modalOptions.alertValue.push(c);else if("OR"===d.data.alertSubscInfo[0].subscriptionList[0].alertRule.ruleOperator)for(var h=0;h<d.data.alertSubscInfo[0].subscriptionList[0].alertRule.exprList.length;h++)"LT"===d.data.alertSubscInfo[0].subscriptionList[0].alertRule.exprList[h].exprOperator&&(c.id=6,c.exprValue=d.data.alertSubscInfo[0].subscriptionList[0].alertRule.exprList[h].exprValue,c.operator="less than",a.modalOptions.alertValue.push(c),c={}),"GT"===d.data.alertSubscInfo[0].subscriptionList[0].alertRule.exprList[h].exprOperator&&(c.exprValue=d.data.alertSubscInfo[0].subscriptionList[0].alertRule.exprList[h].exprValue,c.operator="greater than",c.alertName="WAM",c.isValue=!0,c.id=7,a.modalOptions.alertValue.push(c))}else if(angular.isDefined(d.data.alertSubscInfo)&&null!==d.data.alertSubscInfo[0].uiParams){c.isValue=!1,c.checkBoxGroup=d.data.alertSubscInfo[0].uiParams.uifield[0].items;var i=d.data.alertSubscInfo[0].subscriptionList[0].alertNamespace.confVal.customValue;null!==i&&angular.forEach(c.checkBoxGroup,function(a){i.indexOf(a.inputValue)>-1?a.checked=!0:a.checked=!1,"SandP"===a.boxLabel?a.boxLabel="S&P":"Moodys"===a.boxLabel&&(a.boxLabel="Moody's")}),a.modalOptions.alertValue.push(c)}},function(b,c,d,e){400!==b.status&&a.changeMessage("danger","An error occurred when contacting the backend service.")});var d={};d.alertSubscription=a.modalOptions.alertName,d.alertCategory=a.modalOptions.alertCategory,d.alertType=b,a.modalOptions.savedAlertList.push(d)}),angular.isDefined(a.modalOptions.savedAlertList)&&a.modalOptions.savedAlertList.length>0&&f.getAlertDevicesByAlert(a.modalOptions.savedAlertList).then(function(a){angular.isDefined(a)&&angular.isDefined(a.data)&&m(a.data)}),a.viewDeviceDetailsTableParams=i.get({},{},!1,a.modalOptions.devicesBySavedAlert,a.today),a.viewDeviceDetailsTableParams.settings().$scope=a,a.viewDeviceDetailsTableParams.setExportAvailable(!1),a.modalOptions.viewDeviceDetailsTableParams=a.viewDeviceDetailsTableParams;var m=function(b){function c(a){return"010"!==a.deviceCode&&"070"!==a.deviceCode}var d={};g.setSubscriptionDeviceDetails(b,d),a.modalOptions.devicesBySavedAlert=g.getSubscriptionDeviceDetails(a.modalOptions.alertName),a.deviceInfo=[];for(var e=0;e<a.modalOptions.devicesBySavedAlert.length;e++)null!==a.modalOptions.devicesBySavedAlert[e].devices&&angular.forEach(a.modalOptions.devicesBySavedAlert[e].devices.filter(c),function(b){a.deviceInfo.push(b)});a.viewDeviceDetailsTableParams.setCurrentData(a.deviceInfo),a.viewDeviceDetailsTableParams.reload()}}]),angular.module("NexenApp",["ngSanitize","nxn.fileTransfer","ui.select","aa.formExtensions","angularjs-dropdown-multiselect","ct.ui.router.extras","dp.viz","efi.EFITaskFlow","gridster","highcharts-ng","ndb.dashboard","ndb.navigation","nexenApp.httpProvider","nexenApp.httpService","NexenApp.ngTableParams","NexenCommon","ngCookies","ngResource","ngRoute","ngTable","ngUaParser","nxn.a2migration.common","nxn.Accounts","nxn.Alerts","nxn.auth","nxn.a2migration","nxn.bignumber","nxn.broadcast","nxn.categoryFilters","nxn.changepwd","nxn.common","nxn.common.util","nxn.content","nxn.digitalpulse","nxn.emulation","nxn.failover","nxn.footer","nxn.fps","nxn.Highcharts","nxn.http.throttle","nxn.keepalive","nxn.login","nxn.navbar","nxn.nxnUserSettings","nxn.pluginConfig","nxn.pluginAdmin","nxn.public","nxn.selfRegistration","nxn.spinner","nxn.stepup","nxn.sysParamsConfig","nxn.testDowngradedA2Components","nxn.Trading","nxn.ui","nxn.ui.uxSettings","nxn.userGuides","nxn.videoTutorials","nxn.util","nxn.util.a2migration","nxn.whiteLabel","nxn.userEmulation","NxnManageUserAccess","NxnUserAdmin","oc.lazyLoad","qqm.workbench","summernote","nxn.persistentAnnouncements","nxn.constants","ui.bootstrap","ui.grid","ui.grid.expandable","ui.grid.pagination","ui.grid.selection","ui.router","validationModule","web.workbench","pluginStateMapModule"]).config(["$stateProvider","$locationProvider","$urlRouterProvider","$httpProvider","$provide","datepickerConfig","datepickerPopupConfig","$compileProvider","keepAliveServiceProvider","ndbDashboardConfigProvider","PageContextConfigProvider","nxn.digitalpulse.serviceProvider","nxnEventMetricsProvider",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a,b,c,d,e){var f=a.path();if(!b.isLegacyRoute(f))return a.url();if("/"===f){var g=d.homepage;return""!==g?b.isLegacyRoute(g)?g:void c.navigate(g):"/home"}return e.getLegacyPathNotFoundUrl()+"?"+e.getPathNotFoundQueryKey()+"="+f}function o(){l.setRequiredAttributes({APPLICATION_MNEMONIC:"NXN"}),l.setDPStatsToSend({click:!0,dashboard:!0,efi:!0,http:!0,ico:!0,navigation:!0,pageload:!0,plugin:!0,plugin_admin:!0,session:!0,usage:!0})}b.html5Mode(!0),j.setPrefetchDefault(!1),j.setEnableDragDrop(!0),k.setEnablePluginSupport(!0),o(),m.setAppMnemonic("NXN"),f.showWeeks=!1,f.formatMonth="MMM",f.minMode="day",f.maxMode="month",g.showButtonBar=!1,i.setExtendSessionUrl("/nxn-service/pageContext/extendSession"),d.interceptors.push("httpUsageStatsTracker"),d.interceptors.push("dpStatsTracker"),d.interceptors.push("emulationHeaderTracker"),d.interceptors.push("sessionTimeoutInterceptor"),d.interceptors.push("qqmInterceptor"),d.interceptors.push("ApiStoreRequestInterceptor"),d.interceptors.push("nxnHttpInterceptor"),n.$inject=["$location","NxnRouterListenerService","NxnRouterService","NxnUserHomepageService","PathNotFoundService"],c.deferIntercept(),c.otherwise(n),e.decorator("$browser",["$delegate",function(a){return a.onUrlChange=function(){},a}]),a.state("pathNotFound",{url:"/page-not-found?not-found-path",template:"<dgc-path-not-found></dgc-path-not-found>"}),a.state("nxnDpDashboard",{url:"/digitalPulseDashboard",templateUrl:"partials/digitalpulse/digitalPulseDashboard.html",controller:"nxn.DpDashboard"}),a.state("cashAccount",{url:"/cashAccount",templateUrl:"partials/workbench/accountcash.html"}),a.state("home",{url:"/home",templateUrl:"partials/home.html",controller:"ndbDashboardCtrl",controllerAs:"vm",resolve:{dashboard:["$q","$rootScope","ndbDashboardService","NxnWhiteLabelService","PageContext",function(a,b,c,d,e){var f=a.defer();if(!d.isDefaultCookie())if(e.isTokenVerified())f.resolve("tokenVerified");else var g=b.$watch(e.isTokenVerified,function(a,b){a!==b&&a===!0&&(g(),f.resolve("tokenVerified"))});return f.promise.then(function(a){return c.getDefault()})}]}}),a.state("ng-modern",{template:"",url:"/ng-modern"}),a.state("warning",{url:"/warning",template:'<h1 id="warning">{{warningMessage}}</h1>',userEmulationEnabled:!0,params:{warningMessage:"This feature does not currently support mobile devices."},controller:["$scope","$stateParams",function(a,b){a.warningMessage=b.warningMessage}]}),a.state("liveChat",{url:"/liveChat",views:{"":{templateUrl:"partials/live-chat/liveChat.html"}}}),a.state("error",{url:"/error",template:"<h1>{{errorMessage}}</h1>",userEmulationEnabled:!0,params:{errorMessage:"There was an error loading the requested data"},controller:"StateErrorCtrl"}),a.state("emulationDisabled",{url:"/emulationdisabled",template:'<div class="nxn-display-inline-block nxn-mar-left-20 emulationdisabled" nxn-alert nxn-alert-type="alert-warning">The service you have selected does not support emulation and cannot be displayed at this time.</div>'}),a.state("accountsChange",{url:"/accountsChange",views:{"":{templateUrl:"partials/blankPage.html"}}}),a.state("userSettings",{url:"/userSettings",templateUrl:"partials/user-settings/nxnUserSettings.html",controller:"nxn.nxnUserSettingsController"}),e.decorator("$templateCache",["$delegate",function(a){var b=a.get;return a.get=function(a){return"custody_pager.html"===a?'<div class="col-md-12"><div class="row"><div class="col-md-9 col-sm-9"><ul class="pagination ng-table-pagination"><li><a ng-show="params.settings().previousPageURI !== \'\'" ng-click="params.settings().getPreviousSet(params.settings().previousPageURI)" href="">&laquo; Previous</a></li><li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"><a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span>{{params.settings().getPageDisplayNumber(page.number, params)}}</span></a><a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span>{{params.settings().getPageDisplayNumber(page.number, params)}}</span></a><a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a><a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span>{{params.settings().getPageDisplayNumber(page.number, params)}}</span></a></li><li>&nbsp;&nbsp;<a ng-show="params.settings().nextPageURI !== \'\'" ng-click="params.settings().getNextSet(params.settings().nextPageURI)" href="">Next &raquo;</a></li></ul></div><div class="ng-cloak ng-table-pager col-md-3"><div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"><button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-show="((params.settings().total > count) || ($index >= 1  && params.settings().total > params.settings().counts[$index - 1]))" ng-click="params.count(count)" class="btn btn-default"><span ng-bind="count"></span></button></div></div></div></div>':"ng-table/pager.html"===a?'<div class="col-md-12"><div class="row"><div class="col-md-9 col-sm-9"><ul class="pagination ng-table-pagination"><li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"><a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a><a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a><a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a><a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a><a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a><a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a></li></ul></div><div class="ng-cloak ng-table-pager col-md-3"><div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"><button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-show="((params.settings().total > count) || ($index >= 1  && params.settings().total > params.settings().counts[$index - 1]))" ng-click="params.count(count)" class="btn btn-default"><span ng-bind="count"></span></button></div></div></div></div>':"selectize/select.tpl.html"===a?'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="false" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div><div ng-show="$select.open && $select.status.message" class="nxn-ui-select-error-msg">{{$select.status.message}}</div></div><div class="ui-select-choices"></div></div>':"bootstrap/select-multiple.tpl.html"===a?'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search"><div ng-show="!$select.status && $select.items.length == 0 && $select.search != \'\'">No records found for the entered search criteria.: {{$select.search}}</div><div ng-show="$select.open && $select.status.message" class="nxn-ui-select-error-msg">{{$select.status.message}}</div></div><div class="ui-select-choices"></div></div>':b(a)},a}]),e.decorator("uiSelectDirective",["$delegate","$parse",function(a,b){var c=a[0],d=c.compile;return c.compile=function(){var a=d.apply(this,arguments);return function(c,d,e,f){a.apply(this,arguments);var g=f[0];(e.uiSelectOnOpen||e.uiSelectOnClose)&&(g.onOpenCallback=b(e.uiSelectOnOpen),g.onCloseCallback=b(e.uiSelectOnClose),c.$watch("$select.open",function(a,b){a!==b&&(a?g.onOpenCallback(c):g.onCloseCallback(c))}))}},a}]),h.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/)}]).factory("User",["$resource",function(a){return a("js/ng-app/users/:userId.json",{},{query:{method:"GET",params:{userId:"users"},isArray:!0}})}]).controller("StateErrorCtrl",["$scope","$stateParams",function(a,b){a.errorMessage=b.errorMessage}]).run(["$rootScope",function(a){}]).config(["aaFormExtensionsProvider",function(a){a.valMsgForTemplate='<div class="nxn-error-msg" ng-show="showMessages" ng-repeat="msg in errorMessages"><span class="fa fa-info-circle fa-fw"></span><span ng-bind-html="msg"></span></div>',a.labelStrategies.none=function(){return""},a.defaultLabelStrategy="none",a.defaultNotifyTarget=!1,a.defaultOnNavigateAwayStrategy="none"}]).config(["$provide",function(a){a.decorator("ngModelDirective",["$delegate",function(a){var b=a[0],c=b.controller;return b.controller=["$scope","$element","$attrs","$injector",function(a,b,d,e){var f=e.get("$interpolate");d.$set("name",f(d.name||"")(a)),e.invoke(c,this,{$scope:a,$element:b,$attrs:d})}],a}]),a.decorator("formDirective",["$delegate",function(a){var b=a[0],c=b.controller;return b.controller=["$scope","$element","$attrs","$injector",function(a,b,d,e){var f=e.get("$interpolate");d.$set("name",f(d.name||d.ngForm||"")(a)),e.invoke(c,this,{$scope:a,$element:b,$attrs:d})}],a}])}]),angular.module("NexenApp").run(["$browser","$filter","$location","$log","$q","$rootScope","$state","$timeout","$urlRouter","$window","CoreRouterEventsService","LogoutService","ModalSpinnerService","NavBar","NxnNavbarRegistrationService","NxnRouterListenerService","nxnStoreService","PageContext","PluginEntitlements","UserAuthService","keepAliveService","nxn.Router","nxn.UserTokenService","nxn.dp.payload.service","nxn.getCurrentEnvironment","nxnAppConfig","nxnBrowserOutOfDateService","nxnCheckAccess","nxnCustodyAccountsService","nxnDPUtility","nxnEventMetrics","nxnGuidFactory","pageLoadStatsService","stateUsageStats","timeElapsed","nxnClientInfoService","CookieService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){function L(a){angular.isDefined(r)&&r.get(function(b){var c={},e={};angular.isDefined(w)&&(c=w.getUsrToken()),angular.isDefined(g)&&(e=angular.isDefined(g.current)?g.current.url:"");var f={userId:b.user,currentEnv:b.env},h=new Date,i=[{env:"MOCK",isEnable:!0,postToEnv:["DEV"]},{env:"DEV",isEnable:!0,postToEnv:["DEV"]},{env:"QA",isEnable:!0,postToEnv:["XAT"]},{env:"XAT",isEnable:!0,postToEnv:["XAT"]},{env:"PRODUCTION",isEnable:!0,postToEnv:["PRODUCTION"]}],j=K.getCookie("wlCookie"),k={action:a,businessProcessCode:j,currentEnv:f.currentEnv,enterpriseStatusCode:"D",envDPInfo:i,eventDate:h,lob:"Client Experience Delivery",payloadType:"Non-Process",portalName:"NEXEN PORTAL",postAppMnemonic:"NXN",stateUrl:e,userId:f.userId,usrTok:c};k.browserName=W.browserInfo.name,k.browserVersion=W.browserInfo.version,k.osName=W.osInfo.name,k.osVersion=W.osInfo.version,angular.isDefined(x)?x.sendSessionStats(k):d.warn("nxnDPPayloadService must be loaded before running 'dpClickStats()'")})}function M(a,b,c,e,f){for(var h=[g.get("custody"),g.get("nxnAccounts")],i=[!1,!1],j=[!1,!1],k=0;k<h.length;k++)h[k]&&(0===b.name.indexOf(h[k].name)&&(i[k]=!0),0===e.name.indexOf(h[k].name)&&(j[k]=!0));var l=!1;if(angular.forEach(i,function(a,b){a&&(l=!0)}),b.name===e.name)d.log("PAGE REFRESH AND SO SET MODAL SPINNER ON PARAMS"),c.modalInstance=m.showModal();else if(l)for(k=0;k<i.length;k++){if(i[k]&&!j[k]){d.log("FROM A NON DEFINED STATE TO A DEFINED STATE AND SO SET MODAL SPINNER ON PARAMS"),c.modalInstance=m.showModal();break}if(i[k]&&j[k]&&angular.isDefined(c.fromNav)&&"true"===c.fromNav){d.log("FROM A NON DEFINED STATE TO A DEFINED STATE AND SO SET MODAL SPINNER ON PARAMS"),c.modalInstance=m.showModal();break}}else d.log("TO A NON DEFINED STATE AND SO SET MODAL SPINNER ON PARAMS"),c.modalInstance=m.showModal()}function N(a){var b="";return angular.isUndefined(a.url)?b=a.name:(b=g.href(a.name),angular.isString(b)&&"#"===b.charAt(0)&&(b=b.substring(1))),"/apps/ng-modern"===b?"/apps"+q.getState().routerUrl.fromUrl:b}function O(a){var b=null;if(a.templateUrl)b=a.templateUrl;else if(_.isObject(a.views)){var c=_.find(a.views,"templateUrl");c&&(b=c.templateUrl?c.templateUrl:null)}return b}function P(a){var b=new Map;s.getEntitledPluginNames().forEach(function(a){b.set(a.replace(/-/g,""),a)});var c=O(a);if(null!==c){var d=/partials\/(.+?)\//.exec(c);if(d)return b.get(d[1])}return null}function Q(){return{envDPInfo:[{env:"MOCK",isEnable:!0,postToEnv:["MOCK"]},{env:"DEV",isEnable:!0,postToEnv:["DEV"]},{env:"QA",isEnable:!0,postToEnv:["XAT"]},{env:"XAT",isEnable:!0,postToEnv:["XAT"]},{env:"PRODUCTION",isEnable:!0,postToEnv:["PRODUCTION"]}]}}function R(a,b){var c;if(angular.isUndefined(r.getEnvironment())&&"/sorry"===a.state){var d=j.location.host;c=y.getCurrentEnv(d)}else c=r.getEnvironment();var e=K.getCookie("wlCookie"),f={businessProcessCode:e,payloadType:"Non-Process",portalName:"NEXEN PORTAL",payloadMetric:"NEXEN USAGE STATS",postAppMnemonic:"NXN",enterpriseStatusCode:"D",lob:"Client Experience Delivery",toState:a.state,fromState:a.fromState,status:b,userAgent:a.userAgent,screenResolution:a.screenResolution,elapsedTime:a.timeElapsed,firstName:a.firstName,lastName:a.lastName,userTypeCode:a.userType,email:a.emailId,clientId:a.clientId,currentTimeStamp:new Date,currentEnv:c,userId:r.getUser(),usrTok:w.getUsrToken(),browserName:W.browserInfo.name,browserVersion:W.browserInfo.version,osName:W.osInfo.name,osVersion:W.osInfo.version,deviceType:W.deviceInfo.type,deviceModel:W.deviceInfo.model,startTime:a.startTime,endTime:a.endTime,stateGuid:a.stateGuid,sslVersion:angular.isDefined(r.getSslVersion)?r.getSslVersion():"",assignedLOBs:angular.isDefined(r.getLOBs)?null==r.getLOBs()||""===r.getLOBs()?"":r.getLOBs().toString():"",pluginName:a.pluginName},g=angular.extend({},f,{envDPInfo:Q().envDPInfo});x.sendUsageStats(g)}function S(a){var b=[];return angular.isUndefined(a)?b:(Object.keys(a).forEach(function(c){null!=a[c]&&angular.isDefined(a[c].state)&&b.push(a[c])}),b)}function T(a){for(var c=S(a.navbar),d=S(a.quickAccessNavbar),e=c.concat(d),f=[],g=0;g<e.length;g++)f=f.concat(e[g].state);f=b("uniqueArray")(f);for(var h=0;h<f.length;h++)v.enableState(f[h],a);v.enableStates()}function U(a){if(a.loggedIn&&!a.isError){z.init(a.env),n.init(a),T(a);var b={name:"Unknown",version:"Unknown"};b=W.browserInfo,A.warnDeprecatedBrowser(b),G.setPageCtxLoadTime(),h(function(){x.sendDpStats(V(),Q(),r.getEnvironment()),d.log("Load Metrics: "+G.getPageContextRequest()/1e3+"s, "+G.getPageContextRequestToLoad()/1e3+"s (request, load)")},0)}}function V(){var a=K.getCookie("wlCookie"),b={BUSINESS_PROCESS_CODE:a,LAST_ACTIVITY_TIME_STAMP:(new Date).toISOString(),LAST_ACTIVITY_USER_ID:r.getUser()||"",MISCELLANEOUS_1:"NEXEN_PAGE_LOAD_METRICS",MISCELLANEOUS_11:r.getEnvironment()||"",MISCELLANEOUS_15:w.getUsrToken()||"",MISCELLANEOUS_2:G.getPageContextRequest().toString(),MISCELLANEOUS_3:G.getPageContextLoad().toString(),MISCELLANEOUS_4:G.getPageContextRequestToLoad().toString(),MISCELLANEOUS_7:W.browserInfo.name,MISCELLANEOUS_8:W.browserInfo.version,SOURCE_REQUEST_ID:r.getUser()||"",TIMESTAMP_5:moment(new Date).tz(moment.tz.guess()).format()};return D.applyDefaultNXNParameters(b)}var W={browserInfo:{name:"",version:""},deviceType:{model:"",type:"",vendor:""},osInfo:{name:"",version:""}};f.isInitialApplicationLoad=!0,J.clientInfo$.subscribe(function(a){W=a}),o.getItem$().subscribe(function(a){n.setNavbarItems([a])}),f.$watch(r.loggedIn,function(){r.loggedIn()&&u.startWatch()}),q.observe().filter(function(a){return a.legacy.combinedJsLoadState&&(!a.currentUser.tokenUser||a.currentUser.tokenUserVerified)}).distinctUntilChanged(function(a,b){return _.isEqual(a.pageContext,b.pageContext)}).subscribe(function(a){U(r.adapterFunction(a)),E.registerEventMetricFn(function(a,b){x.sendClickStats(b)})}),u.sessionEvents.subscribe(function(a){switch(a){case"SESSION_WARNING":L("warning");break;case"SESSION_EXPIRED":L("expired"),l.logout().then(function(a){j.location.href="/"})}}),k.events$.filter(function(a){return a&&!a.isLegacy}).subscribe(function(b){"RESOLVE_END"===b.type&&g.go("ng-modern",{},{inherit:!0,location:!1,notify:!1}).then(function(){i.push(b.eventParams.url,{},{$$avoidResync:!0,replace:!0}),i.update(!0),a.url(c.absUrl(),!0)})});var X=null;k.events$.filter(function(a){return a&&!a.isLegacy}).filter(function(a){return"ERROR"===a.type||"CANCEL"===a.type}).subscribe(function(a){X=a.url}),f.$on("$locationChangeStart",function(a,b,c){if(d.debug("LOCATION CHANGE START ",b,c),(b.includes("/public/")||b.includes("/login"))&&(f.isInitialApplicationLoad=!1),f.isInitialApplicationLoad&&(f.loginProcessStarted=!0,f.isInitialApplicationLoad=!1),r.ready()&&X&&b.indexOf("/apps"+X)!==-1){var e=b.indexOf("/apps"+X);return"/apps/"===c.substring(e)&&g.go("home"),X=null,void a.preventDefault()}if(!(B.isPublicUrl(b)||r.ready()&&!r.loggedIn()||r.ready()&&r.loggedIn()&&b.indexOf("/home")!==-1&&c.indexOf("/public")!==-1)){var h=!1;q.observe().filter(function(a){return a.manifestRoutes.haveRoutesRegistered}).take(1).subscribe(function(a){h=a.manifestRoutes.haveRoutesRegistered}),r.ready()&&r.loggedIn()&&h||a.preventDefault()}}),i.listen(),f.$on("$stateChangeStart",function(a,b,c,e,h){d.debug("STATE CHANGE START from "+e.name+" to : "+b.name),B.checkAccess(a,e,b,h,c)&&(f.startTime="",f.startTime=I.init(),g.nxnFutureState=b,g.nxnCurrentState=e,v.startSpinner(b.name)&&M(a,b,c,e,h))}),f.$on("$stateChangeCancel",function(a,b,c,e,f){d.debug("STATE CHANGE CANCEL from "+e.name+" to : "+b.name),angular.isDefined(c.modalInstance)&&m.closeModal()}),f.$on("$stateChangeError",function(a,b,c,e,h,i){d.error("STATE CHANGE ERROR to "+b.name+", event: "+angular.toJson(a)+", error: "+i);var k=I.done(),l=((new Date).getTime(),r.getUserInfo().firstName),n=r.getUserInfo().lastName,o=r.getUserInfo().userType,p=r.getUserInfo().email,q=r.getUserInfo().clientId,s={userId:r.getUser(),state:N(b),fromState:N(e),status:"failed",userAgent:j.navigator.userAgent,screenResolution:j.innerWidth+"x"+j.innerHeight,timeElapsed:I.totalTime(),userType:o,firstName:l,lastName:n,emailId:p,lob:angular.isDefined(r.getLOBs)?null==r.getLOBs()||""===r.getLOBs()?"":r.getLOBs().toString():"",clientId:q,startTime:f.startTime,endTime:k,stateGuid:F.getGuid(),pluginName:P(b)};H.store(s),R(s,"Failure"),angular.isDefined(c.modalInstance)&&(d.log("ERROR DISMISS THE MODAL SPINNER ON PARAMS"),m.closeModal());var t=v.getErrorMessage(b.name),u={errorMessage:t};g.go("error",u)}),f.$on("$stateChangeSuccess",function(a,b,e,g,h){d.debug("STATE CHANGE SUCCESS to "+b.name),p.signalAngularJSPath(c.url());var i="function"==typeof c.absUrl?c.absUrl():"",k=window.dataLayer=window.dataLayer||[],l=c.path();if(angular.isString(i)&&i.indexOf("/apps")>=0&&(l="/apps"+l),k.push({event:"pageView",action:l}),m.closeModal(),angular.isUndefined(m.getModalInstance())||null===m.getModalInstance()){var n=C.shouldReloadData(b.name);""!==n&&(d.log("BROADCAST RELOAD: "+n),f.$broadcast(n))}var o=I.done(),q=((new Date).getTime(),r.getUserInfo().firstName),s=r.getUserInfo().lastName,t=r.getUserInfo().userType,u=r.getUserInfo().email,v=r.getUserInfo().clientId,w={userId:r.getUser(),state:N(b),fromState:N(g),status:"success",userAgent:j.navigator.userAgent,screenResolution:j.innerWidth+"x"+j.innerHeight,timeElapsed:I.totalTime(),userType:t,firstName:q,lastName:s,emailId:u,lob:angular.isDefined(r.getLOBs)?null==r.getLOBs()||""===r.getLOBs()?"":r.getLOBs().toString():"",clientId:v,startTime:f.startTime,endTime:o,stateGuid:F.getGuid(),pluginName:P(b)};H.store(w),R(w,"Success")})}]),function(){"use strict";function a(a,b,c){a.changePasswordUrl=c.getSMPasswordUrl(),a.closeModal=function(){b.close()},a.dismissModal=function(){b.dismiss()}}angular.module("nxn.changepwd").controller("ChangePasswordModalCtrl",a),a.$inject=["$scope","$modalInstance","nxnSMAgentService"]}(),function(){"use strict";function a(a,b,c,d){a.loadingPluginStates=!0,a.displayError=!1,a.pluginData=[];var e=!0;c.reload(e).then(function(){b.go("pluginStateMap"),a.pluginStateMapGridOptions=d.setGridColumn(),a.pluginStateMapGridOptions.data=d.getGridData(),a.loadingPluginStates=!1},function(){a.loadingPluginStates=!1,a.displayError=!0,a.errorMessage="Error while reloading user context"})}angular.module("pluginStateMapModule").controller("pluginStateMapController",["$scope","$state","PageContext","PluginStateMapService",a])}(),angular.module("NexenCommon").directive("nxnAccumulator",["$interpolate","nxn.formatData",function(a,b){var c=function(a,b,c){a.$watch("allData",function(){a.tableLeft.setCurrentData(a.allData),a.tableLeft.reload()}),a.$watch("selectedData",function(){a.tableRight.setCurrentData(a.selectedData),a.tableRight.reload()})},d=function(a,b,c,d){function e(a,b,c){var d=a.getSelectedPageNum();a.setCurrentData(c,null,1,d)}function f(b,c,d){for(var e,f=[],g=a.selectionLimit,h=b.length-1;h>=0;h--)if(e=b[h],e.$selected){if(angular.isDefined(g)&&d&&c.length+f.length>=g){a.selectionExceededMsg="Maximum selection limit ("+a.selectionLimit+") reached.";break}b.splice(h,1),e.$selected=!1,f.push(e)}for(var i=f.length-1;i>=0;i--)c.push(f[i])}if(a.allData=a.allData||[],a.selectedData=a.selectedData||[],angular.isDefined(a.selectionLimit)&&a.selectedData.length>a.selectionLimit){var g=a.selectedData,h=g.length;a.selectedData=g.slice(0,a.selectionLimit),a.allData=a.allData.concat(g.slice(a.selectionLimit,h))}a.visibleFields=a.visibleFields(),a.dataPerPage=a.dataPerPage||10,a.tableLeft=c.get({count:a.dataPerPage},{},!1,a.allData,null),a.$watch("filterL.$",function(b,c){b!==c&&(a.tableLeft.setCurrentData(a.allData),a.tableLeft.filter(a.filterL),a.tableLeft.reload())}),a.tableRight=c.get({count:a.dataPerPage},{},!1,a.selectedData,null),a.$watch("filterR.$",function(b,c){b!==c&&(a.tableRight.setCurrentData(a.selectedData),a.tableRight.filter(a.filterR),a.tableRight.reload())}),a.move=function(b,c){var d="right"===b,g=d?a.allData:a.selectedData,h=d?a.selectedData:a.allData;if(c){var i=d?a.tableLeft:a.tableRight,j=i.getFilteredData();angular.isDefined(a.selectionLimit)&&d&&h.length+g.length>a.selectionLimit&&(j=j.slice(0,a.selectionLimit-h.length),a.selectionExceededMsg="Maximum selection limit ("+a.selectionLimit+") reached."),h=h.concat(j),g=g.filter(function(a){return j.indexOf(a)===-1}),a.allData=d?g:h,a.selectedData=d?h:g}else f(g,h,d);e(a.tableLeft,a.dataPerPage,a.allData),e(a.tableRight,a.dataPerPage,a.selectedData)}};return d.$inject=["$scope","ngTableParams","nxnNgTableParams","$filter"],{restrict:"E",link:c,controller:d,scope:{allData:"=nxnAllData",selectedData:"=nxnSelectedData",selectionLimit:"=nxnSelectionLimit",selectionExceededMsg:"=?nxnSelectionExceededMsg",visibleFields:"&nxnVisibleFieldsInfo",leftMsg:"@nxnLeftMsg",rightMsg:"@nxnRightMsg",allowSortableHeader:"=nxnAllowHeaderSort",dataPerPage:"@nxnDataPerPage"},templateUrl:"partials/common/accumulator/accumulator.html"}}]).directive("fixedHeader",fixedHeader),fixedHeader.$inject=["$timeout"],function(){"use strict";function a(a){function b(){return a.get("/nxn-service/users/authLevel",{timeout:1e4})}var c={getAuthLevel:b};return c}angular.module("NexenCommon").factory("UserAuthService",a),a.$inject=["nxn.Http"]}(),angular.module("NexenCommon").directive("nxnAutofocus",nxnAutofocus),nxnAutofocus.$inject=["$timeout"],function(){"use strict";function a(){function a(a,b,c){function d(){a.height>=e&&(a.height=e,b.css({overflow:"auto",height:e}))}var e=parseInt(c.nxnAutoScrollbar);c.$observe("nxnAutoScrollbar",function(a){e=parseInt(a),d()}),a.$watch(function(){return b.height()},function(b){
a.height=b,d()})}return{link:a}}angular.module("nxn.NxnAutoScrollbar",[]).directive("nxnAutoScrollbar",a)}(),angular.module("NexenCommon").directive("nxnAutosuggest",["$compile",function(a){return{restrict:"A",scope:{ngModel:"=",nxnServiceCall:"&",nxnArrowKeyDown:"&",nxnArrowKeyUp:"&",nxnArrowKeyRight:"&",nxnArrowKeyLeft:"&",nxnArrowKeyEnter:"&"},require:"^ngModel",link:function(a,b,c,d){b.on("keyup",function(b){if(40===b.keyCode)a.nxnArrowKeyDown();else if(38===b.keyCode)a.nxnArrowKeyUp();else if(39===b.keyCode)a.nxnArrowKeyRight();else if(37===b.keyCode)a.nxnArrowKeyLeft();else if(13===b.keyCode)a.nxnArrowKeyEnter();else{var c=d.$viewValue;a.nxnServiceCall(c)}})},controller:["$scope",function(a){}]}}]);var myApp=angular.module("NexenCommon");myApp.provider("loginCtx",function(){var a={title:"NEXEN",headerUrl:"partials/common/default-header.html",footerUrl:"partials/common/default-footer.html",navUrl:"partials/common/nav-login.html"},b=angular.copy(a);return{$get:["$rootScope",function(c){return c.$on("$locationChangeStart",function(){angular.extend(b,a)}),b}]}}),myApp.controller("nxn.IframeController",["$scope","$sce","nxnAlertService","iframeUrls","PageContext","$stateParams",function(a,b,c,d,e,f){e.get(function(e){angular.isDefined(f.modalInstance)&&(a.close=function(){var a=f.modalInstance.opened;a.then(function(){f.modalInstance.dismiss("cancel")})});var g=e.env.toUpperCase();a.isShowSpinner=!1,a.isShowFrame=!0;var h="";angular.isDefined(d)&&angular.isDefined(d.contentSource)&&"CONTENT_PROVIDERS"===d.contentSource?angular.isDefined(d.url)&&angular.isDefined(d.stateInfo)?(h=d.url,a.contentSource=d.source,a.url=b.trustAsResourceUrl(h),a.stateInfo=d.stateInfo,a.isCrossDomain=d.isCrossDomain,a.contentOrigin=d.contentOrigin,a.stateInfo.isDisabled?(a.isShowFrame=!1,a.isShowSpinner=!1):(a.isShowFrame=!0,a.isShowSpinner=!0)):(c.show("INFO","Error Occured. Please try again later."),a.close()):angular.isDefined(d)&&angular.isDefined(d[g])?(h=d[g],a.url=b.trustAsResourceUrl(h),a.contentSource="default",a.isCrossDomain=!1):(c.show("INFO","Error Occured. Please try again later."),a.close())})}]),myApp.controller("spinnerModalController",["$scope","$log","$rootScope","$modalInstance",function(a,b,c,d){}]),myApp.controller("alertWindowController",["$scope","$log","$rootScope","$modalInstance","nxnAlertService",function(a,b,c,d,e){a.headerText=e.alertObj.headerText,a.actionButtonText=e.alertObj.actionButton,a.closeButtonText=e.alertObj.closeButton,a.message=e.alertObj.message,a.errorType=e.alertObj.errorType,a.close=function(){d.dismiss("cancel"),c.$broadcast("onClickClose")},a.ok=function(a){d.close(a),c.$broadcast("onClickOK")},a.showActionButton=function(){return"WARN"===a.errorType||"CONFIRM"===a.errorType}}]),myApp.controller("stateUsageStatsController",["$scope","stateUsageStats","dpStateUsageStats","ModalService","nxnNgTableParams","NxnDataGroupService","nxnAlertService","ModalSpinnerService","$filter",function(a,b,c,d,e,f,g,h,i){a.loadingStats=!1,a.showError=!1,a.init=!1,a.displayError=!1,a.errorMessage="",a.showDPUsageStats=!1,a.showDPUsageStatsGrid=!1,a.loadingDPModal=!1,a.showMore=!1,a.startCount=0,a.lastCount=0,a.fromDate=new Date,a.fromDate.setHours(0,0,0,0),a.toDate=new Date,a.toDate.setHours(23,59,59,0);var j=a.fromDate.getHours(),k=a.fromDate.getMinutes(),l=a.toDate.getHours(),m=a.toDate.getMinutes();a.hstep=1,a.mstep=15,a.ismeridian=!1,a.usageStatsfromDP={rowHeight:45,saveGridSettings:!0,columnDefs:[{name:"userId",displayName:"User Id"},{name:"fullName",displayName:"NAME"},{name:"userType",displayName:"USER TYPE"},{name:"emailId",displayName:"EMAIL"},{name:"clientId",displayName:"CLIENT ID"},{name:"stateCount",displayName:"STATE CHANGES",cellTemplate:'<a data-ng-click="grid.appScope.$parent.$parent.showDPModal(row.entity.userId)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a>'}]},a.changed=function(){j=a.fromDate.getHours(),k=a.fromDate.getMinutes(),l=a.toDate.getHours(),m=a.toDate.getMinutes()},a.applyTime=function(){a.getUsersByDate(a.selected)},a.getUsersByDate=function(b){a.showError=!1,a.showDPUsageStats=!0,a.showDPUsageStatsGrid=!1,a.usageStatsTable.searchText="",a.loadingStats=!0,a.displayError=!1,a.displayDPError=!1;var d=new Date,e=new Date;a.selected=b,a.filter=!0,"custom"===b?(a.loadingStats=!1,a.init=!1):("today"===b?(d.setHours(j,k,0,0),e.setHours(l,m,0,0)):"yesterday"===b?(d.setDate(d.getDate()-1),e.setDate(e.getDate()-1),d.setHours(j,k,0,0),e.setHours(l,m,0,0)):"lastWeek"===b&&(d.setDate(a.fromDate.getDate()-7),e.setDate(a.toDate.getDate()),d.setHours(j,k,0,0),e.setHours(l,m,0,0)),a.getDataBetweenRange(d,e)),a.firstDate=d,a.secondDate=e,c.setFromDate(d),c.setToDate(e)},a.getdpUsersByDate=function(){a.displayDPError=!1,a.showDPUsageStatsGrid=!0,a.loadingDPStats=!0;c.getFromDate(),c.getToDate();2e3===a.lastCount&&(a.startCount=a.startCount+2e3),c.getDPUsersByDate(a.firstDate,a.secondDate,a.startCount).then(function(b){a.lastCount=b.length,a.lastCount<2e3?a.showMore=!1:a.showMore=!0,a.userDataFromDp=b,angular.forEach(a.userDataFromDp,function(b,c){angular.forEach(a.userDataFromDp[c].states,function(b,d){a.userDataFromDp[c].states[d].createDate=i("date")(a.userDataFromDp[c].states[d].createDate,"yyyy-MM-dd HH:mm:ss")})}),a.usageStatsfromDP.data=a.userDataFromDp,a.loadingDPStats=!1},function(b){a.loadingDPStats=!1,a.displayDPError=!0,a.showDPUsageStatsGrid=!1,a.showMore=!1,a.errorMessage="The system cannot process your request now. Please try again."})},a.getDataBetweenRange=function(c,d){b.getUsersByDate(c,d).then(function(b){a.userData=b,angular.forEach(a.userData,function(b,c){angular.forEach(a.userData[c].states,function(b,d){a.userData[c].states[d].createDate=i("date")(a.userData[c].states[d].createDate,"yyyy-MM-dd HH:mm:ss")})}),a.usageStatsTable.setCurrentData(a.userData),a.usageStatsTable.reload(),a.init||(a.init=!0),a.loadingStats=!1},function(b){a.loadingStats=!1,a.init=!0,a.displayError=!0,a.errorMessage="The system cannot process your request now. Please try again."})},a.getUsersByCustomDateRange=function(b,d){a.showDPUsageStats=!0,a.showDPUsageStatsGrid=!1;var e=moment(b).format("YYYY-MM-DD"),f=moment(d).format("YYYY-MM-DD");a.firstDate=moment(e).toDate(),a.secondDate=moment(f).toDate(),a.secondDate.setHours(23,59,0,0),a.firstDate.setHours(j,k,0,0),a.secondDate.setHours(l,k,0,0),a.loadingStats=!0;var g=Math.round(Date.parse(f)-Date.parse(e))/864e5;g>=30?(a.loadingStats=!1,a.showError=!0,a.errorMessage="The range cannot be greater than 30 days"):(a.showError=!1,a.errorMessage="",a.getDataBetweenRange(a.firstDate,a.secondDate)),c.setFromDate(b),c.setToDate(d)},a.columns=[{title:"ID",dataField:"userId",displayField:"userId",fixed:!0,default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!0,sortDir:null},{title:"FIRST NAME",dataField:"firstName",displayField:"firstName",fixed:!0,default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!0,sortDir:null},{title:"LAST NAME",dataField:"lastName",displayField:"lastName",fixed:!0,default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!0,sortDir:null},{title:"USER TYPE",dataField:"userType",displayField:"userType",default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!0,sortDir:null},{title:"EMAIL",dataField:"emailId",displayField:"emailId",default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!0,sortDir:null},{title:"LOB",dataField:"lob",displayField:"lob",default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!0,sortDir:null},{title:"CLIENT ID",dataField:"clientId",displayField:"clientId",default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!0,sortDir:null},{title:"State Changes",dataField:"stateCount",displayField:"stateCount",default:!0,isSelected:!0,class:"text-center",visible:!0,sortable:!0,sortDir:null}],a.sortColumns=function(b){var c,d={};for(c=0;c<a.columns.length;c++)a.columns[c].dataField===b?(null===a.columns[c].sortDir?a.columns[c].sortDir="+":a.columns[c].sortDir="+"===a.columns[c].sortDir?"-":"+",d[b]="+"===a.columns[c].sortDir?"asc":"desc",a.usageStatsTable.sorting(d)):a.columns[c].sortDir=null;a.usageStatsTable.reload()};var n=function(c,d){var e=d.offset?d.offset:0;b.getUsersByDate(a.firstDate,a.secondDate).then(function(a){c.resolve({data:a,time:moment().format(),offset:e})},function(a){c.reject()})},o={heading:"Usage Stats By Date",columns:["ID","FIRST NAME","LAST NAME","USER TYPE","EMAIL","LOB","CLIENT ID","STATE COUNT"],pdf:[{value:"userId",align:"left"},{value:"firstName",align:"left"},{value:"lastName",align:"left"},{value:"userType",align:"left"},{value:"emailId",align:"left"},{value:"lob",align:"left"},{value:"clientId",align:"left"},{value:"stateCount",align:"left"}],xls:[{value:"userId"},{value:"firstName"},{value:"lastName"},{value:"userType"},{value:"emailId"},{value:"lob"},{value:"clientId"},{value:"stateCount"}]};a.usageStatsTable=e.get({sorting:{ID:"asc"}},{},!1,a.userData,moment().format()),a.usageStatsTable.setGroupedTable(!0),a.usageStatsTable.setExportTableData(!0),a.usageStatsTable.setExportDesc(o),a.usageStatsTable.setServerDataFn(n),a.usageStatsTable.setColumns(a.columns),a.$watch("usageStatsTable.searchText",function(b,c){b!==c&&(a.filteredDetails=f.filterData(a.userData,a.usageStatsTable.searchText,["userId","firstName","lastName","userType","emailId","clientId"]),a.usageStatsTable.setCurrentData(a.filteredDetails),a.usageStatsTable.reload())}),a.$watch("$scope.firstDate",function(b,c){b!==c&&(a.showMore=!1,a.startCount=0,a.lastCount=0)}),a.showModal=function(c){a.loadingDPModal=!0,b.getStateDetailByUser(a.firstDate,a.secondDate,c).then(function(b){var c={};c.headerText="States",c.states=b,c.bodyUrl="partials/common/usageStats/states.html",c.internalTab=!0;var e={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};a.loadingDPModal=!1,d.showModal(e,c)})},a.showDPModal=function(b){var e=h.showModal(),f=function(a){var b=a.opened;b.then(function(){a.dismiss("cancel")})};c.getDPStateDetailByUser(a.firstDate,a.secondDate,b).then(function(a){f(e);var b={};b.headerText="States",b.states=a,b.bodyUrl="partials/common/usageStats/states.html",b.internalTab=!0;var c={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};d.showModal(c,b)},function(a){f(e),g.show("ERROR","There is no data available for the requested timeline.")})},a.customFromOpen=function(a,b){a.preventDefault(),a.stopPropagation(),b.fromOpened?b.fromOpened=!1:b.fromOpened=!0},a.customOpenTo=function(a,b){a.preventDefault(),a.stopPropagation(),b.toOpened?b.toOpened=!1:b.toOpened=!0},a.customDatePicker={id:0,label:"Date Picker",fromDate:moment().subtract(1,"days"),toDate:moment().format("L"),fromDateMin:moment().subtract(60,"days"),fromOpened:!1,toOpened:!1},a.customDatePickerReplicated={id:0,label:"Date Picker",fromDate:moment().subtract(1,"days"),toDate:moment().format("L"),fromDateMin:moment().subtract(60,"days"),fromOpened:!1,toOpened:!1},a.$watchCollection("customDatePicker",function(b){a.customDatePickerReplicated.fromDate=moment(b.fromDate).format("YYYY-MM-DD"),a.customDatePickerReplicated.toDate=moment(b.toDate).format("YYYY-MM-DD")}),a.$watchCollection("customDatePickerReplicated",function(b){a.customDatePicker.fromDate=moment(b.fromDate).format("YYYY-MM-DD"),a.customDatePicker.toDate=moment(b.toDate).format("YYYY-MM-DD")}),a.customDatePicker.fromDate=a.customDatePicker.fromDate.format("L"),a.customDatePickerReplicated.fromDate=a.customDatePickerReplicated.fromDate.format("L"),a.maxRange=new Date-864e5,a.minRange=a.maxRange-5184e6,a.toDateMax=new Date,a.toDateMin=a.customDatePicker.fromDate}]),myApp.controller("httpUsageStatsController",["$filter","$scope","$controller","dpStateUsageStats","$interval","httpUsageStats","ModalService","nxnAlertService",function(a,b,c,d,e,f,g,h){b.tabName="successTab",b.showAvgTimeElapsedByDate=!1,b.timeElapsedThreshold=5e3,b.loadingStats=!1,b.showAvgStateTimeElapsedByDate=!1,b.reportType="daily",b.openedFrom={},b.openedTo={},b.gridOptionsData=[],b.showModalFlag=!1,b.displayGrid=!0,b.showDPStats=!1,b.showDPStateStats=!1,b.showDPStatsgrid=!1,b.showDPStateStatsgrid=!1,b.showMore=!1,b.startCount=0,b.lastCount=0,b.showMoreByState=!1,b.startCountByState=0,b.lastCountByState=0,b.success=!0,b.failure=!1,b.openFrom=function(a){a.preventDefault(),a.stopPropagation(),b.openedFrom.value=!0},b.openTo=function(a){a.preventDefault(),a.stopPropagation(),b.openedTo.value=!0},b.dateOptions={formatYear:"yy",startingDay:1},b.format="dd-MMMM-yyyy";c("showModalAndChartCtrl",{$scope:b});b.avgTimeElasedDPGridOptionsSuccess={rowHeight:45,saveGridSettings:!0,columnDefs:[{name:"service",displayName:"Service",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\': row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"requestUri",displayName:"Request Uri",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\': row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"successAvgTime",displayName:"Average Time Elapsed",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\': row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD| number:0}}</div>'},{name:"requestCount",displayName:"# of Successful Requests",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}"><a data-ng-click = "showDPModal(row.entity.requestUri,null,true)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a></div>'},{name:"successPercent",displayName:"Success Percent",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\': row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD | number:0 }}%</div>'},{name:"Chart",cellTemplate:'<a ng-controller="showModalAndChartCtrl" data-ng-click="showDPChartModal(row.entity.requestUri)" class="nxn-cursor-pointer fa fa-1x fa-bar-chart-o"></a>'}]},b.avgTimeElasedDPGridOptionsFailure={rowHeight:45,saveGridSettings:!0,columnDefs:[{name:"service",displayName:"Service",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{COL_FIELD}}</div>"},{name:"requestUri",displayName:"Request Uri",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{COL_FIELD}}</div>"},{name:"failureAvgTime",displayName:"Average Time Elapsed",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD| number:0 }}</div>"},{name:"failedRequestCount",displayName:"# of Failed Requests",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.failurePercent > 1}"><a data-ng-click = "showDPModal(row.entity.requestUri,null,false)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a></div>'},{name:"failurePercent",displayName:"Percent Failed",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{COL_FIELD | number:0 }}%</div>"}]},b.avgStateTimeElasedDPGridOptionsSuccess={rowHeight:45,saveGridSettings:!0,columnDefs:[{name:"state",displayName:"state",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"service",displayName:"Service",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"requestUri",displayName:"Request Uri",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"successAvgTime",displayName:"Average Time Elapsed",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD | number:0 }}</div>'},{name:"requestCount",displayName:"# of Successful Requests",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}"><a data-ng-click = "showDPModal(row.entity.requestUri,row.entity.state,true)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a></div>'},{name:"successPercent",displayName:"Percent Successful",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD | number:0 }}%</div>'},{name:"Chart",cellTemplate:'<a ng-controller="showModalAndChartCtrl" data-ng-click="showDPChartModal(row.entity.requestUri,row.entity.state)" class="nxn-cursor-pointer fa fa-1x fa-bar-chart-o"></a>'}]},b.avgStateTimeElasedDPGridOptionsFailure={rowHeight:45,saveGridSettings:!0,columnDefs:[{name:"state",displayName:"state",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD}}</div>"},{name:"service",displayName:"Service",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD}}</div>"},{name:"requestUri",displayName:"Request Uri",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD  }}</div>"},{name:"failureAvgTime",displayName:"Average Time Elapsed",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD | number:0 }}</div>"},{name:"failedRequestCount",displayName:"# of Failed Requests",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.failurePercent > 1}"><a data-ng-click="showDPModal(row.entity.requestUri,row.entity.state,false)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a></div>'},{name:"failurePercent",displayName:"Percent Failed",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD | number:0 }}%</div>"}]},b.avgTimeSuccessGridOptions={rowHeight:45,saveGridSettings:!0,enableSorting:!0,columnDefs:[{name:"requestUri",displayName:"Request Uri",pinnedLeft:!0,enableColumnMenu:!1,enablePinning:!1,cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\': row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"service",displayName:"Service",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\': row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"successAvgTime",displayName:"Average Time Elapsed",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\': row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD| number:0}}</div>'},{name:"requestCount",displayName:"# of Successful Requests",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}"><a data-ng-click = "showModal(row.entity.requestUri,null,true)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a></div>'},{name:"successPercent",displayName:"Percent Successful",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD | number:0 }}%</div>'},{name:"Chart",cellTemplate:'<a ng-controller="showModalAndChartCtrl" data-ng-click="showChartModal(row.entity.requestUri)" class="nxn-cursor-pointer fa fa-1x fa-bar-chart-o"></a>'},{name:"successTrend",displayName:"Trending",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}"><div ng-if="row.entity.successTrend==\'Up\'" class="text-center"><span class="glyphicon glyphicon-arrow-up nxn-cursor-pointer" popover="Decreased by {{ row.entity.sMeasure | number:2}} secs"  popover-placement="left" popover-trigger="mouseenter"></span></div><div ng-if="row.entity.successTrend==\'Down\'" class="text-center"><span class="glyphicon glyphicon-arrow-down nxn-cursor-pointer" popover="Increased by {{row.entity.sMeasure | number:2}} secs"  popover-placement="left" popover-trigger="mouseenter"></span></div><div ng-if="row.entity.successTrend==\'Neutral\'" class="text-center"><span class="glyphicon glyphicon-minus"></span></div><div ng-if="row.entity.successTrend==\'N/A\'" class="text-center">{{ COL_FIELD }}</div></div>'}]},b.avgTimeFailureGridOptions={rowHeight:45,saveGridSettings:!0,enableSorting:!0,columnDefs:[{name:"requestUri",displayName:"Request Uri",pinnedLeft:!0,enableColumnMenu:!1,enablePinning:!1,cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD}}</div>"},{name:"service",displayName:"Service Id",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{COL_FIELD}}</div>"},{name:"failureAvgTime",displayName:"Average Time Elapsed",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD | number:0 }}</div>"},{name:"failedRequestCount",displayName:"# of Failed Requests",cellTemplate:'<div  ng-class="{ \'exceeded-threshold\':row.entity.failurePercent > 1}"><a ng-controller="showModalAndChartCtrl" data-ng-click = "showModal(row.entity.requestUri,null,false)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a></div>'},{name:"failurePercent",displayName:"Percent Failed",cellTemplate:"<div ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD | number:0 }}%</div>"},{name:"failureTrend",displayName:"Trending",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.failurePercent > 1}"><div ng-if="row.entity.failureTrend==\'Up\'" class="text-center"><span class="glyphicon glyphicon-arrow-up nxn-cursor-pointer" popover="Decreased by {{row.entity.sMeasure | number:2 }}secs"  popover-placement="left" popover-trigger="mouseenter"></span></div><div ng-if="row.entity.failureTrend==\'Down\'" class="text-center"><span class="glyphicon glyphicon-arrow-down nxn-cursor-pointer" popover="Increased by {{row.entity.sMeasure | number:2}} secs"  popover-placement="left" popover-trigger="mouseenter"></span></div><div ng-if="row.entity.failureTrend==\'Neutral\'" class="text-center"><span class="glyphicon glyphicon-minus"></span></div><div ng-if="row.entity.failureTrend==\'N/A\'" class="text-center">{{ COL_FIELD }}</div></div>'}]},b.avgStateTimeSuccessGridOptions={rowHeight:45,saveGridSettings:!0,enableSorting:!0,columnDefs:[{name:"requestUri",displayName:"Request Uri",pinnedLeft:!0,enableColumnMenu:!1,enablePinning:!1,cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"state",displayName:"Screen",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"service",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD}}</div>'},{name:"successAvgTime",displayName:"Average Time Elapsed",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD | number:0 }}</div>'},{name:"requestCount",displayName:"# of Successful Requests",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}"><a data-ng-click="showModal(row.entity.requestUri,row.entity.state,true)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a></div>'},{name:"successPercent",displayName:"Percent Successful",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}">{{ COL_FIELD | number:0 }}%</div>'},{name:"Chart",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}"><a data-ng-click="showChartModal(row.entity.requestUri,row.entity.state)" class="nxn-cursor-pointer fa fa-1x fa-bar-chart-o"></a></div>'},{name:"successTrend",displayName:"Trending",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.successAvgTime > timeElapsedThreshold}"><div ng-if="row.entity.successTrend==\'Up\'" class="text-center"><span class="glyphicon glyphicon-arrow-up nxn-cursor-pointer" popover="Decreased by {{row.entity.sMeasure | number:2 }}secs"  popover-placement="left" popover-trigger="mouseenter"></span></div><div ng-if="row.entity.successTrend==\'Down\'" class="text-center"><span class="glyphicon glyphicon-arrow-down nxn-cursor-pointer" popover="Increased by {{row.entity.sMeasure | number:2 }}secs"  popover-placement="left" popover-trigger="mouseenter"></span></div><div ng-if="row.entity.successTrend==\'Neutral\'" class="text-center"><span class="glyphicon glyphicon-minus"></span></div><div ng-if="row.entity.successTrend==\'N/A\'" class="text-center">{{ COL_FIELD }}</div></div>'}]},b.avgStateTimeFailureGridOptions={rowHeight:45,saveGridSettings:!0,enableSorting:!0,columnDefs:[{name:"requestUri",displayName:"request Uri",pinnedLeft:!0,enableColumnMenu:!1,enablePinning:!1,cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold': row.entity.failurePercent > 1}\">{{ COL_FIELD}}</div>"},{name:"state",displayName:"Screen",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD}}</div>"},{name:"service",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD}}</div>"},{name:"failureAvgTime",displayName:"Average Time Elapsed",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD | number:0 }}</div>"},{name:"failedRequestCount",displayName:"# of Failed Requests",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.failurePercent > 1}"><a data-ng-click="showModal(row.entity.requestUri,row.entity.state,false)" class="nxn-cursor-pointer">{{ COL_FIELD }}</a></div>'},{name:"failurePercent",displayName:"Percent Failed",cellTemplate:"<div  ng-class=\"{ 'exceeded-threshold':row.entity.failurePercent > 1}\">{{ COL_FIELD | number:0 }}%</div>"},{name:"failureTrend",displayName:"Trending",cellTemplate:'<div ng-controller="showModalAndChartCtrl" ng-class="{ \'exceeded-threshold\':row.entity.failurePercent > 1}"><div ng-if="row.entity.failureTrend==\'Up\'" class="text-center"><span class="glyphicon glyphicon-arrow-up nxn-cursor-pointer" popover="Decreased by {{row.entity.sMeasure | number:2 }}secs"  popover-placement="left" popover-trigger="mouseenter"></span></div><div ng-if="row.entity.failureTrend==\'Down\'" class="text-center"><span class="glyphicon glyphicon-arrow-down nxn-cursor-pointer" popover="Increased by {{row.entity.sMeasure | number:2}} secs"  popover-placement="left" popover-trigger="mouseenter"></span></div><div ng-if="row.entity.failureTrend==\'Neutral\'" class="text-center"><span class="glyphicon glyphicon-minus"></span></div><div ng-if="row.entity.failureTrend==\'N/A\'" class="text-center">{{ COL_FIELD }}</div></div>'}]},b.getDPAvgTimeElasedByDate=function(){b.tabName="successTab",b.showDPStats=!0,b.loadingDPStats=!0,b.showAvgStateTimeElapsedByDate=!1,b.showAvgTimeElapsedByDate=!0;var c=new Date(b.dt.getTime()),e=new Date(b.dt.getTime());"range"===b.reportType&&(e=new Date(b.dtTo.getTime())),c.setHours(0,0,0,0),e.setHours(24,0,0,0),d.setFromDate(c),d.setToDate(e),2e3===b.lastCount&&(b.startCount=b.startCount+2e3),d.getDPAvgTimeElasedByDate(d.getFromDate(),d.getToDate(),b.startCount).then(function(c){null!=c?(b.lastCount=c.length,b.lastCount<2e3?b.showMore=!1:b.showMore=!0,angular.forEach(c,function(a,c){a.requestCount>0&&b.gridOptionsData.push(a)}),b.avgTimeElasedDPGridOptionsSuccess.data=a("orderObjectByAverage")(b.gridOptionsData,"timeElapsed","requestCount"),b.gridOptionsData=[],angular.forEach(c,function(a,c){a.failedRequestCount>0&&b.gridOptionsData.push(a)}),b.avgTimeElasedDPGridOptionsFailure.data=a("orderObjectByAverage")(b.gridOptionsData,"failedRequestCount","totalRequestCount"),b.gridOptionsData=[],b.loadingDPStats=!1,b.showDPStatsgrid=!0):(b.showAvgTimeElapsedByDate=!1,b.showDPStatsgrid=!1,b.showDPStats=!1,h.show("ERROR","There is no data available for the requested timeline."))},function(a){b.loadingDPStats=!1,b.showDPStatsgrid=!1,b.showAvgStateTimeElapsedByDate=!1,b.showDPStats=!1,h.show("ERROR","There is no data available for the requested timeline.")})},b.getDPAvgStateTimeElasedByDate=function(){b.tabName="successTab",b.loadingDPStats=!0,b.showAvgStateTimeElapsedByDate=!0,b.showAvgTimeElapsedByDate=!1,b.showDPStateStats=!0;var c=new Date(b.dt.getTime()),e=new Date(b.dt.getTime());"range"===b.reportType&&(e=new Date(b.dtTo.getTime())),c.setHours(0,0,0,0),e.setHours(24,0,0,0),d.setFromDate(c),d.setToDate(e),2e3===b.lastCountByState&&(b.startCountByState=b.startCountByState+2e3),d.getDPAvgStateTimeElasedByDate(d.getFromDate(),d.getToDate(),b.startCountByState).then(function(c){null!=c?(b.lastCountByState=c.length,b.lastCountByState<2e3?b.showMoreByState=!1:b.showMoreByState=!0,angular.forEach(c,function(a,c){a.requestCount>0&&b.gridOptionsData.push(a)}),b.avgStateTimeElasedDPGridOptionsSuccess.data=a("orderObjectByAverage")(b.gridOptionsData,"timeElapsed","requestCount"),b.gridOptionsData=[],angular.forEach(c,function(a,c){a.failedRequestCount>0&&b.gridOptionsData.push(a)}),b.avgStateTimeElasedDPGridOptionsFailure.data=a("orderObjectByAverage")(b.gridOptionsData,"failedRequestCount","totalRequestCount"),b.gridOptionsData=[]):(b.showAvgStateTimeElapsedByDate=!1,b.showDPStateStatsgrid=!1,b.showDPStateStats=!1,h.show("ERROR","There is no data available for the requested timeline.")),b.loadingDPStats=!1,b.showDPStateStatsgrid=!0},function(a){b.loadingDPStats=!1,b.showDPStatsgrid=!1,b.showDPStateStats=!1,b.showAvgTimeElapsedByDate=!1,h.show("ERROR","There is no data available for the requested timeline.")})},b.getAvgTimeElasedByDate=function(){if(b.lastCount=0,b.showDPStats=!1,b.showDPStatsgrid=!1,b.showDPStateStats=!1,b.showDPStateStatsgrid=!1,b.displayGrid=!0,b.errorMsg="","range"===b.reportType){if(!b.dtTo)return void(b.errorMsg="ToDate cannot be empty.");var c=i(b.dt,b.dtTo);if(c&&""!==c)return void(b.errorMsg=c)}b.loadingStats=!0;var d=new Date(b.dt.getTime()),e=new Date(b.dt.getTime());"range"===b.reportType&&(e=new Date(b.dtTo.getTime())),d.setHours(0,0,0,0),e.setHours(24,0,0,0),f.setFromDate(d),f.setToDate(e),f.getAvgTimeElasedByDate(d,e).then(function(c){if(b.loadingStats=!1,b.showAvgTimeElapsedByDate=!0,b.showAvgStateTimeElapsedByDate=!1,null!=c){for(var d=0;d<c.length;d++)c[d].requestCount>0&&b.gridOptionsData.push(c[d]);for(b.avgTimeSuccessGridOptions.data=a("orderObjectByAverage")(b.gridOptionsData,"timeElapsed","requestCount"),b.gridOptionsData=[],d=0;d<c.length;d++)c[d].failedRequestCount>0&&b.gridOptionsData.push(c[d]);b.avgTimeFailureGridOptions.data=a("orderObjectByAverage")(b.gridOptionsData,"failedRequestCount","totalRequestCount"),b.gridOptionsData=[]}else b.showAvgTimeElapsedByDate=!1,b.displayGrid=!1,h.show("ERROR","There is no data available for the requested timeline.");null!==b.avgTimeSuccessGridOptions.data&&null!==b.avgTimeFailureGridOptions.data||(b.showAvgTimeElapsedByDate=!1,b.displayGrid=!1,h.show("ERROR","There is no data available for the requested timeline."))})};var i=function(a,b){var c=Math.floor((b-a)/864e5);return c<0?"The from date must come before the to date.":c>6?"The range cannot be greater than seven days apart.":void 0};b.getAvgStateTimeElasedByDate=function(){if(b.lastCountByState=0,b.displayGrid=!0,b.showDPStateStats=!1,b.errorMsg="","range"===b.reportType){if(!b.dtTo)return void(b.errorMsg="ToDate cannot be empty.");
var c=i(b.dt,b.dtTo);if(c&&""!==c)return void(b.errorMsg=c)}b.loadingStats=!0;var e=new Date(b.dt.getTime()),g=new Date(b.dt.getTime());"range"===b.reportType&&(g=new Date(b.dtTo.getTime())),e.setHours(0,0,0,0),g.setHours(24,0,0,0),f.setFromDate(e),f.setToDate(g),d.setFromDate(e),d.setToDate(g),f.getAvgStateTimeElasedByDate(e,g).then(function(c){if(b.loadingStats=!1,b.showAvgStateTimeElapsedByDate=!0,b.showAvgTimeElapsedByDate=!1,null!=c){for(var d=0;d<c.length;d++)c[d].requestCount>0&&b.gridOptionsData.push(c[d]);for(b.avgStateTimeSuccessGridOptions.data=a("orderObjectByAverage")(b.gridOptionsData,"timeElapsed","requestCount"),b.gridOptionsData=[],d=0;d<c.length;d++)c[d].failedRequestCount>0&&b.gridOptionsData.push(c[d]);b.avgStateTimeFailureGridOptions.data=a("orderObjectByAverage")(b.gridOptionsData,"failedRequestCount","totalRequestCount"),b.gridOptionsData=[]}else b.showAvgStateTimeElapsedByDate=!1,b.displayGrid=!1,h.show("ERROR","There is no data available for the requested timeline.");null!==b.avgStateTimeSuccessGridOptions.data&&null!==b.avgStateTimeFailureGridOptions.data||(b.showAvgTimeElapsedByDate=!1,b.displayGrid=!1,h.show("ERROR","There is no data available for the requested timeline."))})},b.onTabSelect=function(a){b.tabName=a},b.$watch("[tabName,dt,dtTo,showAvgTimeElapsedByDate,reportType]",function(a,c){a[0]!==c[0]?b.showAvgTimeElapsedByDate?"successTab"===a[0]?(b.success=!0,b.failure=!1):(b.failure=!0,b.success=!1):"successTab"===a[0]?(b.success=!0,b.failure=!1):(b.failure=!0,b.success=!1):a[1]===c[1]?(b.showMore=!1,b.startCount=0,b.showMoreByState=!1,b.startCountByState=0,2e3===b.lastCount?b.showMore=!0:b.showMore=!1,2e3===b.lastCountByState?b.showMoreByState=!0:b.showMoreByState=!1):a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]||(b.showMore=!1,b.startCount=0,b.lastCount=0,b.showMoreByState=!1,b.startCountByState=0,b.lastCountByState=0)},!0),b.today=function(){b.dt=new Date},b.today(),b.clear=function(){b.dt=null},b.maxDate=new Date,b.getAvgTimeElasedByDate()}]),myApp.controller("httpRequestAvgByDateChartCtrl",["$scope","ModalService","modalOptionObj","$modalInstance","getHttpRequestAvgByDateChart",function(a,b,c,d,e){a.chartData=e,a.modalOptions=c,a.ifBelow5k=null,a.ifAbove5k=null,a.generateChart=function(){for(var b=[],c=[],d=0,e=5e3,f=0;f<a.chartData.length;f++){var g=a.chartData[f].date,h=new Date(g),i=h.toLocaleDateString(),j=a.chartData[f].avgTimeElapsed/1e3,k={y:j,count:a.chartData[f].requestCount};b.push(i),c.push(k),a.chartData[f].avgTimeElapsed>d&&(d=a.chartData[f].avgTimeElapsed),a.chartData[f].avgTimeElapsed<e&&(e=a.chartData[f].avgTimeElapsed)}d<5e3?a.ifBelow5K=6:a.ifBelow5k=null,5e3===e?a.ifAbove5k=4:a.ifAbove5k=null,$(function(){a.httpRequestChartConfig={options:{chart:{type:"line"},credits:{enabled:!1},tooltip:{enabled:!0,pointFormat:"{series.name}: <b>{point.y}</b><br/>Count: <b>{point.count}</b></br>",valueSuffix:" sec",useHTML:!0},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},plotOptions:{line:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!1}}},title:{text:"HTTP Request Averages for: "+a.chartData[0].requestUri,x:-20},series:[{name:"Avg",data:c,color:"#f4bd0c",showInLegend:!1}],xAxis:{categories:b,labels:{rotation:45}},yAxis:{title:{text:"Average Time Elapsed (sec)"},plotLines:[{value:5,width:2,color:"red",dashStyle:"longdash",label:{text:"5 seconds"}}],max:a.ifBelow5K,min:a.ifAbove5k,gridLineWidth:1}}})},a.modalOptions.close=function(a){d.dismiss("cancel")}}]),myApp.controller("showModalAndChartCtrl",["$scope","httpUsageStats","ModalService","nxnAlertService",function(a,b,c,d){a.timeElapsedThreshold=5e3,a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.showModal=function(e,f,g){var h={};h.headerText="HTTP Request Details";var i=b.getFromDate(),j=b.getToDate();h.bodyUrl="partials/common/usageStats/requestDetail.html",h.internalTab=!0;var k={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html",controller:"requestDetailsCtrl",resolve:{modalOptionObj:function(){return a.modalDetail=h,a.modalDetail},getReqeustDetails:["httpUsageStats","ModalSpinnerService","$rootScope",function(a,b,c){var h=b.showModal(),k=function(){if(angular.isDefined(h)&&null!==h){var a=h.opened;a.then(function(){h.dismiss("cancel")})}};return a.getRequestDetails(i,j,e,f,g).then(function(a){return k(h),a.data}).catch(function(a){var b=a;k(h);var c="";if(b.errors&&b.errors.length>0)for(var e=0;e<b.errors.length;e++)c+=" Error: "+b.errors[e].code+" - "+b.errors[e].message+".";d.show("ERROR","An error ocurred when contacting the backend service."+c)})}]}};c.showModal(k,h)},a.showDPModal=function(b,e,f){var g={};g.headerText="HTTP Request Details",g.bodyUrl="partials/common/usageStats/requestDetail.html",g.internalTab=!0;var h={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html",controller:"requestDetailsCtrl",resolve:{modalOptionObj:function(){return a.modalDetail=g,a.modalDetail},getReqeustDetails:["dpStateUsageStats","ModalSpinnerService","$rootScope",function(a,c,g){var h=c.showModal(),i=function(){if(angular.isDefined(h)&&null!==h){var a=h.opened;a.then(function(){h.dismiss("cancel")})}};return a.getDPRequestDetails(a.getFromDate(),a.getToDate(),b,e,f).then(function(a){return i(h),a}).catch(function(a){var b=a;i(h);var c="";if(b.errors&&b.errors.length>0)for(var e=0;e<b.errors.length;e++)c+=" Error: "+b.errors[e].code+" - "+b.errors[e].message+".";d.show("ERROR","An error ocurred when contacting the backend service."+c)})}]}};c.showModal(h,g)},a.showChartModal=function(b,e){var f={};f.headerText="HTTP Request Chart";var g=new Date(a.dt.getTime());g.setDate(a.dt.getDate()-30);var h=new Date(a.dt.getTime());f.bodyUrl="partials/common/usageStats/httpRequestAvgByDateChart.html",f.internalTab=!0;var i={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html",controller:"httpRequestAvgByDateChartCtrl",resolve:{modalOptionObj:function(){return a.modalDetail=f,a.modalDetail},getHttpRequestAvgByDateChart:["httpUsageStats","ModalSpinnerService","$rootScope",function(a,c,f){var i=c.showModal(),j=function(a){var b=a.opened;b.then(function(){a.dismiss("cancel")})};return a.getHttpRequestAvgByDay(g,h,b,e).then(function(a){return j(i),a.data}).catch(function(a){var b=a.data;j(i);var c="";if(b.errors&&b.errors.length>0)for(var e=0;e<b.errors.length;e++)c+=" Error: "+b.errors[e].code+" - "+b.errors[e].message+".";d.show("ERROR","An error ocurred when contacting the backend service."+c)})}]}};c.showModal(i,f)},a.showDPChartModal=function(b,e){var f={};f.headerText="HTTP Request Chart",f.bodyUrl="partials/common/usageStats/httpRequestAvgByDateChart.html",f.internalTab=!0;var g={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html",controller:"httpRequestAvgByDateChartCtrl",resolve:{modalOptionObj:function(){return a.modalDetail=f,a.modalDetail},getHttpRequestAvgByDateChart:["dpStateUsageStats","ModalSpinnerService","$rootScope",function(a,c,f){var g=c.showModal(),h=function(a){var b=a.opened;b.then(function(){a.dismiss("cancel")})},i=new Date(a.getFromDate().getTime());i.setDate(a.getFromDate().getDate()-30);var j=a.getToDate();return a.getDPHttpRequestAvgByDay(i,j,b,e).then(function(a){return h(g),a}).catch(function(a){var b=a;h(g);var c="";if(b.errors&&b.errors.length>0)for(var e=0;e<b.errors.length;e++)c+=" Error: "+b.errors[e].code+" - "+b.errors[e].message+".";d.show("ERROR","An error ocurred when contacting the backend service."+c)})}]}};c.showModal(g,f)}}]),myApp.controller("requestDetailsCtrl",["$scope","httpUsageStats","ModalService","modalOptionObj","$modalInstance","getReqeustDetails",function(a,b,c,d,e,f){a.requestDetails=f,a.timeElapsedThreshold=5e3,a.requestDetails&&(a.modalOptions=d),a.modalOptions.close=function(a){e.dismiss("cancel")}}]),myApp.controller("navExportController",["$scope","NavBar","ExportService","nxn.Router",function(a,b,c,d){for(var e=b.getUnfilteredNavbar(),f=d.getStatesWithStepupRequired(),g=[],h=0;h<e.length;h++){var i=e[h],j=i.name,k=i.id;if(i.first_level)for(var l=0;l<i.first_level.length;l++){var m=i.first_level[l];if(m.second_level)for(var n=0;n<m.second_level.length;n++){var o=m.second_level[n];if(o.navLevelItem=j,o.navLevelId=k,o.firstLevelItem=m.name,o.firstLevelId=m.id,o.columns)for(var p=0;p<o.columns.length;p++){var q=o.columns[p];o.columnTitle=q.title,o.columnId=q.id;for(var r=0;r<q.items.length;r++){var s=q.items[r],t=angular.copy(o);t.id=s.id,t.name=s.name,t.state=s.state,g.push(t)}}else g.push(o)}else{var u=angular.copy(m);u.navLevelItem=j,u.navLevelId=k,u.id="",u.name="",u.state=m.state,u.firstLevelItem=m.name,u.firstLevelId=m.id,g.push(u)}}}angular.forEach(g,function(a){angular.forEach(f,function(b,c){angular.isDefined(a.state)&&a.state===c&&""!==b&&(a.isStepUpRequired=!0)})}),a.flattenedNavBar=g;a.dataExportFunction={pdf:function(a,b){b.push(a.navLevelId+""),b.push(a.navLevelItem?a.navLevelItem:""),b.push(a.firstLevelId+""),b.push(a.firstLevelItem?a.firstLevelItem:""),b.push(a.id+""),b.push(a.name?a.name:""),b.push(a.isStepUpRequired?"Yes":"No"),b.push(a.state?a.state:""),b.push(a.columnId?a.columnId+"":""),b.push(a.columnTitle?a.columnTitle:"")},xls:function(a,b){b.push(a.navLevelId),b.push(a.navLevelItem),b.push(a.firstLevelId),b.push(a.firstLevelItem),b.push(a.id),b.push(a.name),b.push(a.isStepUpRequired?"Yes":"No"),b.push(a.state),b.push(a.columnId),b.push(a.columnTitle)}}}]),myApp.controller("nxnCurrentDateCtrl",["$scope","nxnDateService",function(a,b){a.nxnCurrentDate=b.getCurrentDate()}]),angular.module("NexenCommon").directive("nxnDynamicDirective",["$compile","$log","PluginLoader",function(a,b,c){function d(b,c,d){var f=e(d.scopeVar,b);if(angular.isDefined(f)){var g=a("<"+f+"/>")(b);c.append(g)}}function e(a,b){return a.split(".").reduce(function(a,b){return a[b]},b)}return{scope:!0,restrict:"E",link:function(a,e,f){if(!angular.isDefined(f.scopeVar))throw"nxnDynamicDirective requires scope-var to be set";angular.isString(f.a1Plugin)&&f.a1Plugin.length>0?c.loadPluginFully(f.a1Plugin).then(function(){d(a,e,f)},function(a){b.error("Error downloading app file for plugin ",f.a1Plugin,a)}):d(a,e,f)}}}]).directive("validateTime",function(){return{restrict:"A",scope:!1,link:function(a,b,c,d){var e,f;a.$watch("maximumVal",function(b,d){angular.equals(b,d)||(a.toDate=b,c.$set("max","toDate"))}),a.$watch("minimumVal",function(b,d){angular.equals(b,d)||(a.fromDate=b,c.$set("min","fromDate"))}),a.$watch(c.min,function(b,c){angular.equals(b,c)||(e=b,e>a.toDate&&(a.fromDate=c,a.changed()))}),a.$watch(c.max,function(b,c){angular.equals(b,c)||(f=b,f<a.fromDate&&(a.toDate=c,a.changed()))})}}}).directive("nxnMouseWheel",function(){return{restrict:"A",link:function(a,b,c,d){b.bind("mousewheel",function(a,b){a.shiftKey&&(this.scrollLeft-=30*b,a.preventDefault())})},scope:{}}}).directive("nxnIframeOnload",["$rootScope","ModalSpinnerService","$window","$document",function(a,b,c,d){return{restrict:"A",scope:{close:"&callbackFn"},link:function(a,b,e){function f(a){var b="#"+a,c=d.find(b),e=c.prop("offsetHeight");return parseInt(e,10)}var g=angular.element(b)[0],h=d[0];g.style.visibility="hidden",h.body.style.overflow="hidden",b.on("load",function(b){var d=f("nxnHeaderId"),e=f("nxnFooterId"),i=c.innerHeight,j=i-(d+e);g.style.height=j+"px",g.style.visibility="visible",angular.element(h).find("div.container").addClass("nxn-iframed-page"),angular.element(h).find("div#nxnUiViewId").addClass("nxn-iframed-page-content"),a.close()}),a.$on("$destroy",function(){document.body.style.overflow="visible",angular.element(h).find("div.container").removeClass("nxn-iframed-page"),angular.element(h).find("div#nxnUiViewId").removeClass("nxn-iframed-page-content")})}}}]).directive("nxnIframeAutoResizer",function(){return{restrict:"A",scope:{heightCalMethod:"@heightCalculationMethod",close:"&callbackFn",resizeFn:"&resizeCallbackFn"},link:function(a,b,c){var d="offset";angular.isDefined(a.heightCalMethod)&&""!==a.heightCalMethod&&(d=a.heightCalMethod),iFrameResize({log:!1,heightCalculationMethod:d,resizedCallback:function(b){var c=angular.element(b.iframe)[0];c.style.height=b.height+"px",a.resizeFn()}}),b.on("load",function(b){a.close()})}}}).directive("nxnNumber",["$window","$filter",function(a,b){return{require:"ngModel",scope:{modal:"=ngModel"},controller:["$scope",function(a){a.number=""}],link:function(a,b,c,d){function e(a){a+="";for(var b=a.split("."),c=b[0],d=b.length>1?"."+b[1]:"",e=/(\d+)(\d{3})/;e.test(c);)c=c.replace(e,"$1,$2");return c+d}d.$parsers.push(function(a){if(angular.isUndefined(a))return"";var b=/[^0-9m\.]+/g,c=a.replace(b,"");return c!==a&&(d.$setViewValue(c),d.$render()),c}),b.on("focusout",function(c){var d=/^[0-9]+m{2}$/,f=/^[0-9]+\.[0-9]+$/,g=/^[0-9]+\.[0-9]+m{2}$/,h=/^[0-9]+$/,i=b.val();if(d.test(i)||f.test(i)||g.test(i)||h.test(i)){var j="";if(/mm$/.test(i)){var k=i.substring(0,i.length-2);return k=1e6*parseFloat(k),a.modal=k.toFixed(2),j=e(a.modal),a.modal=j,b.val(j)}return a.modal=parseFloat(i).toFixed(2),j=e(a.modal),a.modal=j,b.val(j)}return b.val()})}}}]).directive("nxnPopover",["$compile","$templateCache",function(a,b){return{restrict:"AE",link:function(c,d,e){var f=b.get(e.name),g=a(f)(c),h={content:g,html:!0};$(d).popover(h)}}}]).directive("nxnPopoverClick",["$compile","$templateCache",function(a,b){return{restrict:"AE",link:function(c,d,e){d.bind("click",function(){var f=b.get(e.name),g=a(f)(c),h={content:g,html:!0};$(d).popover(h),c.$apply(),$(d).popover("show"),$(d).unbind("click")})}}}]).directive("nxnDatePopover",["$compile","$templateCache",function(a,b){return{restrict:"AE",link:function(b,c,d){c.bind("click",function(){var d=$(c).children(),e=$(d[0]).attr("init-date"),f=$(d[0]).attr("datepicker-popup"),g=!1;angular.isDefined(e)&&(g=!0,$(d[0]).removeAttr("init-date")),angular.isUndefined(f)&&(g=!0,$(d[0]).attr("datepicker-popup","MM/dd/yyyy")),g&&(a(d[0])(b),a(c.contents())(b),b.$apply())})}}}]).directive("initDate",["$filter",function(a){return{restrict:"A",require:"?ngModel",link:function(b,c,d,e){e&&e.$formatters.push(function(b){return a("date")(b,"MM/dd/yyyy")})}}}]).directive("nxnDate",function(){return{restrict:"AE",scope:{},link:function(a,b,c){return angular.isUndefined(c.nxnDate)||""===c.nxnDate?b.html(moment().locale(c.locale).format(c.format)):b.html(moment(c.nxnDate).locale(c.locale).format(c.format))}}}).directive("uiSrefActiveSibling",["$state","$stateParams","$interpolate",function(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){var f,g;f=c(e.uiSref||"",!1)(b),g=c(e.uiSrefActiveSibling||"",!1)(b),b.$on("$stateChangeSuccess",function(b,c,e,h,i){var j,k=a.current.name,l=f.match(/^\s*({[^}]*})\s*$/);if(l&&(f=k+"("+l[1]+")"),j=f.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!j||4!==j.length)throw new Error("Invalid state ref '"+f+"'");var m=(j[3]||null,a.get(j[1]));m.name===c.name?d.addClass(g):angular.isDefined(m.parent)&&angular.isDefined(c.parent)&&m.parent===c.parent?d.addClass(g):d.removeClass(g)})}]}}]).directive("nxnOnFileLoad",[function(){var a=function(a,b,c){a.fileLoadListener=a.fileLoadListener(),a.fileLoadErrorListener=a.fileLoadErrorListener(),a.onFailure=b.on("click",function(a){b[0].value=null}),b.on("change",function(c){var d=b[0].files[0];if(angular.isDefined(d)){var e=a.fileFormat||"csv",f=!1,g=d.name.split(".").pop().toLowerCase();if(f=e.indexOf(g)>-1)a.fileLoadListener(d);else{var h={};h.message="Import trade file should be in "+e.toUpperCase()+" format",a.fileLoadErrorListener(h)}}}),b.on("focus",function(a){})};return{link:a,scope:{fileLoadListener:"&nxnOnFileLoad",fileFormat:"@nxnFileFormat",fileLoadErrorListener:"&nxnOnFileLoadError"}}}]).directive("nxnValidateOnNgModelLoad",["$parse",function(a){var b=function(b,c,d,e){var f=a(d.ngModel),g=f(b);e.$setViewValue(g);for(var h=e.$formatters,i=h.length;i--;)g=h[i](g);e.$viewValue=g,e.$render(),b.$emit("onNgModelLoad",e)};return{link:b,require:"ngModel",priority:2}}]).directive("nxnShowErrorOnInputOrLoad",["$parse","aaFormExtensions","aaUtils",function(a,b,c){var d=function(a,d,e,f){var g=f[0],h=f[1];b.defaultFieldName;if(h&&g.$name){c.ensureaaFormExtensionsFieldExists(h,g.$name);var i=h.$aaFormExtensions[g.$name];i.showErrorReasons.push("onNgModelLoad"),d.on("input",function(){i.showErrorReasons.push("hadInput")})}};return{link:d,require:["ngModel","?^form"],priority:-1}}]).directive("nxnFireEventOnValid",function(){return{require:"ngModel",link:function(a,b,c,d){a.inputCtrl=d,a.$watch(function(){return d.$valid},function(b,c){a.$emit("onModelValidityChange",d.$name,b)})}}}).directive("nxnCapitalize",function(){return{restrict:"A",require:"ngModel",priority:-1,link:function(a,b,c,d){d.$parsers.push(function(a){return a?a.toUpperCase():""}),b.css("text-transform","uppercase")}}}).directive("nxnFileInputButton",function(){return{restrict:"A",link:function(a,b,c){var d=b[0].previousSibling;d&&(d=d.previousSibling),b.on("click",function(a){a.preventDefault(),d&&d.click()})}}}).directive("nxnFieldMask",function(){var a=function(a,b,c){b.on("focus",function(a){c.$set("type","text")}),b.on("blur",function(a){c.$set("type","password")})};return{link:a}}).directive("nxnDropdown",["$document","$window",function(a,b){return{restrict:"A",transclude:!0,scope:{classmenu:"@",classlink:"@",linktext:"@",menualign:"@"},template:'<span class="nxn-custom-dropdown-menu-container"><a ng-click="isShowMenu = !isShowMenu" ng-class="classlink" href="javascript:void(0);">{{ linktext }}&nbsp;<span class="fa fa-caret-down"></span></a><div style="position: absolute" class="nxn-dropdown-inner-container" ng-click="isShowMenu = false"><span ng-if="isShowMenu" ng-class="classmenu" ng-style="menuStyle" ng-transclude></span><div ng-show="isShowMenu" class="nxn-custom-menu-arrow-under"></div><div ng-show="isShowMenu" class="nxn-custom-menu-arrow-ontop"></div><div></span>',link:function(a,c,d){function e(){angular.element(b).on("click",g)}function f(){angular.element(b).off("click",g)}a.menuStyle={position:"absolute"},a.isShowMenu=!1,a.positionMenu=function(){a.arrowUnder=c.find(".nxn-custom-menu-arrow-under"),a.arrowOnTop=c.find(".nxn-custom-menu-arrow-ontop"),a.dropdownLink=c.find(".nxn-dropdown-link"),a.dropdownLinkWidth=a.dropdownLink.prop("offsetWidth"),a.menuStyle.top=5,"right"===a.menualign?(a.menuStyle.left="auto",a.menuStyle.right=-a.dropdownLinkWidth-15+"px",a.arrowUnder.css({left:"auto",right:-a.dropdownLinkWidth-6+"px"}),a.arrowOnTop.css({left:"auto",right:-a.dropdownLinkWidth-4+"px"})):(a.menuStyle.left=a.dropdownLinkWidth-30+"px",a.menuStyle.right="auto",a.arrowUnder.css({left:a.dropdownLinkWidth-14+"px",right:"auto"}),a.arrowOnTop.css({left:a.dropdownLinkWidth-12+"px",right:"auto"})),a.$digest()},c.bind("click",a.positionMenu);var g=function(b){var d=c.find(b.target).length>0;d||(a.isShowMenu=!1,a.$apply())};a.$watch("isShowMenu",function(a,b){a?e():f()}),a.$on("$destroy",function(){f()})}}}]).directive("bindHtmlCompile",["$compile",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(){return b.$eval(d.bindHtmlCompile)},function(d){c.html(d),a(c.contents())(b)})}}}]).directive("nxnCustomScroll",["$timeout","$window","nxnWindowSizeService",function(a,b,c){return{restrict:"A",scope:{},link:function(d,e,f){var g=angular.element(b),h=c.getWindowSize(g.width());if("extra small"!==h){e.wrapInner('<div class="inner-div2" />'),e.wrapInner('<div class="wrapper2" />'),e.prepend('<div class="wrapper1"><div class="inner-div1"></div></div>');var i=e.find(".wrapper1"),j=e.find(".inner-div1"),k=e.find(".wrapper2"),l=e.find(".inner-div2");i.css({width:"100%",border:"0",borderRadius:"0 !important",overflowX:"auto",overflowY:"hidden",height:"18px"}),j.css({height:"18px"}),k.css({width:"100%",overflowX:"auto"});var m=e.find("table.nxn-resp-table"),n=function(){var a=m.prop("offsetWidth"),b=e.prop("offsetWidth");a<=b&&(l.width("100%"),i.css({height:"0"})),a>b&&(m.css({width:"auto"}),l.width(m.width()),i.css({height:"18px"})),j.width(l.width())},o=function(){i.scrollLeft(k.scrollLeft())},p=function(){k.scrollLeft(i.scrollLeft())},q=function(){a(function(){n()},500)},r=function(){a(function(){k.scrollLeft(0),n()},200)},s=a(function(){n()},1500);i.bind("scroll",p),k.bind("scroll",o),angular.element(b).bind("resize",q),d.$watch(function(){return m.is(":visible")},r),d.$watch(function(){return m.width()},n),d.$on("$destroy",function(c){a.cancel(s),a.cancel(q),a.cancel(r),angular.element(b).off("resize",n),angular.element(b).off("scroll",o),angular.element(b).off("scroll",p)})}}}}]).directive("nxnAutoFocus",["$timeout",function(a){return{restrict:"A",link:function(b,c){a(function(){c[0].focus()})}}}]),function(){"use strict";var a=angular.module("NexenCommon");a.filter("nexenCurrency",["$filter",function(a){return function(b,c){return a("currency")(b,c+" ")}}])}(),angular.module("NexenCommon").run(["$templateCache",function(a){"use strict";a.put("partials/common/accumulator/accumulator.html",'<div class="row no-margin">\r\n\t<div class="nxn-accumulator-container nxn-mar-top-10 clearfix">\r\n\t\t<div class="accumulator-content">\r\n\t\t\t<div class="left-content nxn-accumulator-col-5 col-sm-12 col-xs-12 nxn-no-pad">\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col-md-12 text-right">\r\n\t\t\t\t\t\tAvailable: {{allData.length}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nxn-form-group-search nxn-mar-bot-15">\r\n\t\t\t\t\t<input class="form-control nxn-mar-top-10" placeholder="Search" type="text" ng-model="filterL.$" />\r\n\t\t\t\t\t<a class="nxn-search-icon"><span class="fa fa-search"></span></a>\r\n\t\t\t\t</div>\t\t\t\r\n\t\t\t\t<div class="nxn-acc-main">\r\n\t\t\t\t\t<table ng-table="tableLeft" class="table nxn-data-grid nxn-hide-pagination nxn-table-border">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th ng-repeat="field in visibleFields" ng-show="true"\r\n\t\t\t\t\t\t\t\tclass="text-left {{allowSortableHeader ? \'sortable\' : \'\' }}" ng-class="{\r\n\t\t\t\t\t\t\t\t\t  \'sort-asc\': tableLeft.isSortBy(field.dataField, \'asc\'),\r\n\t\t\t\t\t\t\t\t\t  \'sort-desc\': tableLeft.isSortBy(field.dataField, \'desc\')\r\n\t\t\t\t\t\t\t\t\t}"\r\n\t\t\t\t\t\t\t\tng-click="!allowSortableHeader || tableLeft.sorting(field.dataField, tableLeft.isSortBy(field.dataField, \'asc\') ? \'desc\' : \'asc\')">\r\n\t\t\t\t\t\t\t\t<div>{{field.headerName}}</div>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t\t<div class="nxn-acc-inner">\r\n\t\t\t\t\t\t<table ng-table="tableLeft" class="table ng-table-rowselected nxn-data-grid no-heading nxn-thead-hide" template-pagination="ng-table/new-pager-accumulator.html" show-filter="true">\r\n\t\t\t\t\t\t\t<tbody> \r\n\t\t\t\t\t\t\t\t<tr ng-repeat="row in $data" ng-click="row.$selected = !row.$selected;" ng-dblclick="row.$selected = !row.$selected; move(\'right\');" ng-class="{\'active\': row.$selected}">\r\n\t\t\t\t\t\t\t\t\t  <td ng-repeat ="field in visibleFields"> {{row[field.dataField]}}</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\t           \r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="accumulator-controls nxn-accumulator-col-2 col-sm-12 col-xs-12">\r\n\t\t\t\t<ul class="accumulator-btn-controls hidden-sm hidden-xs">\r\n\t\t\t\t\t<li class="btn btn-primary" data-ng-click="move(\'right\')" ng-disabled = "enableRight()"><span class="fa fa-angle-right fa-lg" ></span></li>\r\n\t\t\t\t\t<li ng-if="!isInternal" class="btn btn-primary" data-ng-click="move(\'right\',\'all\')"><span href="" class="fa fa-angle-double-right fa-lg"></span></li>\r\n\t\t\t\t\t<li class="btn btn-primary" data-ng-click="move(\'left\')" ng-disabled = "enableLeft()"><span href="" class="fa fa-angle-left fa-lg"></span></li>\r\n\t\t\t\t\t<li class="btn btn-primary" data-ng-click="move(\'left\',\'all\')"><span href="" class="fa fa-angle-double-left fa-lg"></span></li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul class="accumulator-btn-controls hoz-view visible-sm visible-xs">\r\n\t\t\t\t\t<li class="btn btn-primary" data-ng-click="move(\'right\')" ng-disabled = "enableRight()"><span class="fa fa-angle-down fa-lg"></span></li>\r\n\t\t\t\t\t<li ng-if="!isInternal" class="btn btn-primary" data-ng-click="move(\'right\',\'all\')"><span href="" class="fa fa-angle-double-down fa-lg"></span></li>\r\n\t\t\t\t\t<li class="btn btn-primary" data-ng-click="move(\'left\')"  ng-disabled = "enableLeft()"><span href="" class="fa fa-angle-up fa-lg"></span></li>\r\n\t\t\t\t\t<li class="btn btn-primary" data-ng-click="move(\'left\',\'all\')"><span href="" class="fa fa-angle-double-up fa-lg"></span></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div class="right-content nxn-accumulator-col-5 col-sm-12 col-xs-12 nxn-no-pad">\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col-md-12 text-right ">\r\n\t\t\t\t\t\tSelected: {{selectedData.length}}<span class="nxn-error-message" >*</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nxn-form-group-search nxn-mar-bot-15">\r\n\t\t\t\t\t<input class="form-control nxn-mar-top-10" placeholder="Search" type="text" ng-model="filterR.$" />\r\n\t\t\t\t\t<a class="nxn-search-icon"><span class="fa fa-search"></span></a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nxn-acc-main">\r\n\t\t\t\t\t<table ng-table="tableRight" class="table nxn-data-grid nxn-hide-pagination nxn-table-border">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th ng-repeat="field in visibleFields" ng-show="true"\r\n\t\t\t\t\t\t\t\tclass="text-left {{allowSortableHeader ? \'sortable\' : \'\' }}" ng-class="{\r\n\t\t\t\t\t\t\t\t\t\t  \'sort-asc\': tableRight.isSortBy(field.dataField, \'asc\'),\r\n\t\t\t\t\t\t\t\t\t\t  \'sort-desc\': tableRight.isSortBy(field.dataField, \'desc\')\r\n\t\t\t\t\t\t\t\t\t\t}"\r\n\t\t\t\t\t\t\t\tng-click="!allowSortableHeader || tableRight.sorting(field.dataField, tableRight.isSortBy(field.dataField, \'asc\') ? \'desc\' : \'asc\')">\r\n\t\t\t\t\t\t\t\t<div>{{field.headerName}}</div>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t\t<div class="nxn-acc-inner" nxn-spinner start-spinner="isAccountGroupSpinner">\r\n\t\t\t\t\t\t<table ng-table="tableRight" class="table ng-table-rowselected nxn-data-grid nxn-thead-hide" template-pagination="ng-table/new-pager-accumulator.html" show-filter="true">\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t   <tr ng-repeat="row in $data" ng-click="row.$selected = !row.$selected;" ng-dblclick="row.$selected = !row.$selected; move(\'left\');" ng-class="{\'active\': row.$selected}">\r\n\t\t\t\t\t\t\t\t\t  <td ng-repeat ="field in visibleFields"> {{row[field.dataField]}}</td>\r\n\t\t\t\t\t\t\t\t  </tr>\r\n\t\t\t\t\t\t\t   </tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<script id="extender_header_template_1" type="text/ng-template">\r\n        <tr>\r\n           <th ng-repeat ="field in visibleFields"> <p>{{field.headerName}}</p></th>\r\n        </tr>\r\n</script>\r\n'),a.put("partials/common/alert-window.html",'<style type="text/css">\r\n\r\n/*\r\n    .modal-header\r\n    {\r\n        border-bottom: none; !important;\r\n    }\r\n\r\n    .modal-footer {\r\n        border-top: none;  !important;\r\n    }\r\n*/\r\n/*.modal-body {\r\n    position: relative;\r\n    overflow-y: auto;\r\n    max-height: 400px;\r\n    padding: 15px;\r\n}*/\r\n\r\n.modal-footer {\r\n    border-top: none;  !important;\r\n}\r\n\r\n</style>\r\n    <div class="modal-content">\r\n    <div class="nxn-modal-dialog-alert">\r\n\r\n        <div class="modal-header row" style="margin: 0">\r\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="false"></button>\r\n\r\n            <h3 class="modal-title"><span ng-show="errorType === \'INFO\'" class="glyphicon glyphicon-info-sign"></span>\r\n                <span ng-show="errorType === \'WARN\'" class="glyphicon glyphicon-warning-sign"></span>\r\n                <span ng-show="errorType === \'CONFIRM\'" class="glyphicon glyphicon-hand-down"></span>\r\n                <span ng-show="errorType === \'ERROR\'" class="glyphicon glyphicon-remove-sign"></span>\r\n                {{headerText}} <button type="button" class="close" data-ng-click="close()">&times;</button>\r\n            </h3>\r\n        </div>\r\n\r\n        <div class="modal-body">\r\n            <div>\r\n                <p>{{message}}</p>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="modal-footer">\r\n            <button type="button" class="btn btn-primary"\r\n                    data-ng-click="close()">{{closeButtonText}}\r\n            </button>\r\n            <button type="submit" class="btn btn-primary" ng-show="showActionButton()"\r\n                    data-ng-click="ok(result);">{{actionButtonText}}\r\n            </button>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n'),a.put("partials/common/broadcast/broadcast-grid.html",'<div id="{{id}}" nxn-ui-grid="gridOptions" ui-grid-pinning ui-grid-selection></div>'),a.put("partials/common/broadcast/broadcast.html",'<style>\r\n    /*TODO: move the styling to CSS*/\r\n    .table.nxn-broad-widget-table > tbody > tr > td,\r\n    .table.nxn-broad-widget-table  thead > tr > th{\r\n        padding: 10px 15px 10px 15px;\r\n\r\n    /*TODO: adjust the styling of the filter in CSS and in the partial.*/\r\n    div[ng-model="bcastDateSelectFilter"] {\r\n        padding: 0;\r\n        margin-top: 0 !important;\r\n        margin-bottom: 15px !important;\r\n    }\r\n</style>\r\n\r\n<div class="row nxn-mar-top-15">\r\n    <div class="table-responsive nxn-table-responsive nxn-broadcast-widget nxn-broad-widget-table"  ng-if="dashboardComponent">\r\n        <div class="nxn-mar-top-10" ng-show="filteredBroadcastMessages.length == 0">\r\n            <alert type="warning">There are no broadcasts to display.</alert>\r\n        </div>\r\n        <table id="broadcastWidget" ng-table="broadcastTable"\r\n               class="table table-hover nxn-data-grid nxn-broad-widget-table broadcast-table nxn-no-mar"\r\n               ng-hide="filteredBroadcastMessages.length == 0"\r\n               template-pagination="ng-table/dummy.html" toppagination="suppress">\r\n            <thead>\r\n            <tr>\r\n                <th class="text-left nxn-width-100 nxn-broadcast-priority-col"\r\n                    ng-class="{\'sortable sort-asc\': broadcastTable.isSortBy(broadcastMessageFields[0].sortField, \'asc\'),\r\n                               \'sortable sort-desc\': broadcastTable.isSortBy(broadcastMessageFields[0].sortField, \'desc\')}"\r\n                    ng-click="sortBroadcastMessage(broadcastMessageFields[0].dataField,broadcastMessageFields[0].sortField)">\r\n                    <div>{{broadcastMessageFields[0].title}}</div>\r\n                </th>\r\n                <th class="text-left">\r\n                    <div>{{broadcastMessageFields[2].title}}</div>\r\n                </th>\r\n\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="message in $data | orderBy:displayOrder():true">\r\n                <td ng-click="showBroadcastMessage(message)" class="nxn-cursor-pointer">\r\n                    <span ng-class="{\'label label-danger\': message.msgType == \'URGENT\' ||  message.msgType == \'INCLUDE EARLY CLOSINGS\',\r\n                                     \'label label-warning\': message.msgType == \'INFORMATIONAL\',\r\n                                     \'label label-info\':message.msgType != \'INFORMATIONAL\' && message.msgType != \'URGENT\'}"\r\n                          class="bolt-span">\r\n                          <span> {{ getPriority(message.msgType) }} </span>\r\n                    </span>\r\n                </td>\r\n                <td  ng-click="showBroadcastMessage(message)" class="nxn-cursor-pointer text-primary">\r\n                    <span ng-bind="message.msgTitle" class="broadcast-message nxn-mar-left-0"></span>\r\n                </td>\r\n\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <div class="nxn-bor-top-1-pad-top-15 broadcast-view-all" ng-hide="filteredBroadcastMessages.length == 0">\r\n            <a href="" ui-sref="alertsDashboard.broadcasts" ng-click="modalInstance.close()">View All</a>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>'),
a.put("partials/common/broadcast/expand/broadcastEarlyFundClosings.html",'<style>\r\n    #earlyFundClosingTable th,\r\n    #earlyFundClosingTable td {\r\n        padding: 5px;\r\n    }\r\n    \r\n    #earlyFundClosingTable .closed {\r\n        color: GREEN;\r\n    }\r\n\r\n    #earlyFundClosingTable .timeCells {\r\n        text-align: center;\r\n    }\r\n</style>\r\n\r\n<p ng-bind-html="broadcastMessage.msgText"></p>\r\n\r\n<div class="row" ng-if="errorMessage">\r\n    <div class="col-md-12">\r\n        <div nxn-alert nxn-alert-type="alert-warning">\r\n            {{errorMessage}}\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div ng-show="broadcastMessage.keyValueAttributes.includeFundsTable">\r\n<div nxn-spinner start-spinner="isStartSpinner" ng-if="!errorMessage && !(timeColumns && funds)" style="position: relative; height: 50px;">\r\n    <!-- Show a spinner while we retrieve the data -->\r\n</div>\r\n\r\n<div ng-if="!errorMessage && timeColumns && funds">    \r\n    <div style="min-height:35px;">\r\n    \t<span ng-if="hasEarlyFundClosing">* Early Cut Off Time</span>\r\n\t    <span class="pull-right" nxn-export\r\n\t\t\tnxn-export-fields="fieldNames"\r\n\t\t\tnxn-export-heading="heading"\r\n\t\t\tnxn-export-data="funds"\r\n\t\t\tnxn-export-transform-fn="exportDataTransformFn">\r\n\t\t</span>\r\n    </div>\r\n    <div style="max-height: 400px; overflow: auto;">\r\n        <table id="earlyFundClosingTable" class="table" ng-if="!errorMessage">\r\n            <thead>\r\n            <tr>\r\n                <th>Fund Name</th>\r\n                <th>Fund Number</th>\r\n                <th class="timeCells" ng-repeat="column in timeColumns">\r\n                    <div style="display: inline-block; text-align: left;">\r\n                        <span style="white-space: nowrap; width: 100%">\r\n                            <span ng-if="!column.isToday">Early </span>Cut Off Time\r\n                        </span><br/>\r\n                        <span style="white-space: nowrap;">{{column.date | date: \'dd MMM yyyy\'}}</span>\r\n                    </div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="entry in funds">\r\n                <td>{{entry.fundName}}</td>\r\n                <td>{{entry.fundNo}}</td>\r\n                <td class="timeCells" ng-repeat="column in timeColumns" ng-class="{closed: entry[column.lookup] == \'CLOSED\'}">\r\n                    <span style="white-space: nowrap;">\r\n                        {{entry[column.lookup] == "CLOSED" ? "Closed" : (entry[column.lookup] || \'-\')}}\r\n                        <span ng-if="entry.earlyCutoffFlag && column.isToday && isValidCutOff(entry[column.lookup])">*</span>\r\n                    </span>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n    </div>'),a.put("partials/common/broadcast/expand/componentExpandedView.html",'<div id="logoForPrint" class="nxn-print-only nxn-print-logo-container"><img src="img/whitelabel/nxn/nxn_logo_black.svg" width="100%" alt="Logo Image"></div>\r\n<div class="modal-header">\r\n    <a href="" class="nxn-modal-print-icon" nxn-print title=Print><span class="fa fa-print nxn-mar-right-20 nxn-mar-top-5"></span></a>\r\n    <button type="button" class="close" data-dismiss="modal" ng-click="close()"><span\r\n            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\r\n    <h3 class="modal-title" id="modalHeaderText">{{broadcastMessage.msgTitle}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n\r\n    <pre class="nxn-broadcast-msg" ng-if="!broadcastMessage.componentExpandedViewDirective" ng-bind-html="broadcastMessage.msgText | nxnTrustAsHtml"></pre>\r\n    <nxn-dynamic-directive scope-var="broadcastMessage.componentExpandedViewDirective" />\r\n</div>\r\n<div class="modal-footer">\r\n  <button type="submit" class="btn btn-primary" ng-click="close()">\r\n      Close\r\n  </button>\r\n</div>'),a.put("partials/common/broadcast/priority-grid-cell.html","<div class=\"ui-grid-cell-contents\">\r\n    <span ng-class=\"{'URGENT': 'label label-danger', 'MEDIUM': 'label label-warning', 'LOW': 'label label-info'}[grid.getCellValue(row, col)]\" style=\"padding: 3px\">\r\n        {{grid.getCellValue(row, col) | nxnBroadcastPriorityTitleCase}}\r\n    </span>\r\n</div>"),a.put("partials/common/categoryFilters.html",'<div class="nxn-documents-category-panel-border lpanel clearfix">\r\n    <div class="col-md-12 nxn-mar-top-20 nxn-mar-bot-20" ng-show="categoryFilters.hideCategories()">\r\n        <div class="pull-left nxn-mar-right-5 nxn-mar-top-5">\r\n            View By:\r\n        </div>\r\n        <div class="col-md-9" ng-disabled="categoryFilters.disableParentGroup" ui-select theme="selectize" ng-model="categoryFilters.selectedParentGrp"\r\n             ng-change="categoryFilters.parentGrpChanged()">\r\n            <div ui-select-match placeholder="{{categoryFilters.placeholder}}">\r\n                {{categoryFilters.selectedParentGrp.display}}\r\n            </div>\r\n            <div ui-select-choices repeat="item in categoryFilters.data | filter:categoryFilters.showGroup">\r\n                {{item.display}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="nxn-documents-category-left-filter">\r\n        <div class="ng-scope">\r\n            <ul class="list-group">\r\n                <li ng-show="!categoryFilters.hideDefaultSubGrp" class="list-group-item">\r\n                    <a class="nxn-no-underline" ng-click="categoryFilters.subGrpSelected(categoryFilters.defaultSubGrp)"\r\n                       ng-class="{\'active\' : (categoryFilters.defaultSubGrp.key === categoryFilters.selectedSubGrp.key)}">\r\n                        <span>{{categoryFilters.defaultSubGrp.display}}</span>\r\n                    </a>\r\n                </li>\r\n                <li id="subCategoryGroup"  class="list-group-item"\r\n                    ng-repeat="item in categoryFilters.selectedParentGrp.subGroupCategory | orderBy: \'toString()\'"\r\n                    ng-if="categoryFilters.showGroup(item)">\r\n                    <a class="nxn-no-underline" ng-click="categoryFilters.subGrpSelected(item)"\r\n                       ng-class="{\'active\' : item.key === categoryFilters.selectedSubGrp.key}">\r\n                        <span>{{ item.display }}</span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/createDashboardModal.html",'<form name="modalForm" ng-submit="modalOptions.submit()">\r\n    <div class="modal-body">\r\n        <div class="container-fluid">\r\n            <div class="row">\r\n                <span class="label nxn-label"> Name:</span>\r\n                <input type="text" data-ng-model="result.name" size="25" class="form-control fixed-width">\r\n            </div>\r\n       </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button id="dashboardCloseBtn" type="button" class="btn btn-primary"\r\n                    data-ng-click="modalOptions.close()">{{modalOptions.closeButtonText}}\r\n        </button>\r\n        <button type="submit" class="btn btn-primary"\r\n                   data-ng-click="modalOptions.ok(result);">{{modalOptions.actionButtonText}}\r\n        </button>\r\n    </div>\r\n\r\n</form>\r\n'),a.put("partials/common/customizeColumns.html",'<style>\r\n    .nxn-settings-col-label{font-weight:normal;}\r\n    ul.iconActions\t\t\t\t\t{ float:right; list-style:none; margin-left:20px;}\r\n    ul.iconActions li\t\t\t\t{ float:left; display:block; height:23px; text-align:center; border-right:1px solid #d4d4d4; padding:0 5px; background:none; position: relative;}\r\n    ul.iconActions li.lastchild\t\t{ border-right:none !important; padding-right:0px;}\r\n    li.exporticon span\t\t\t\t{ float:left; margin-right:10px;}\r\n    li.exporticon span:last-child\t{  margin-right:0px;}\r\n    li.lastchild span\t\t\t\t{ float:left; margin-right:10px;}\r\n    li.exporticon span.tpad\t\t{ padding:4px 0 0; color:#4b4b4b; font-weight:normal; }\r\n    .grid-settings-dropdown li\t{ float:left;clear:both;}\r\n    .grid-settings-dropdown \t{width:300px;position:absolute;right:0px;left:auto;background:#f7f7f7;margin-top:20px; z-index:10; padding:10px; text-align:left;}\r\n    .grid-settings-dropdown ul\t{ overflow-y:auto;height:200px;margin:0;padding:0;}\r\n    ul.settingDropdown > li\t\t{ float:none; text-align:left; }\r\n    ul.settingDropdown \t\t\t{ margin-bottom:10px; background:#ffffff;padding-left: 5px;\r\n    /*box-shadow:0px 1px 3px #888888;*/box-shadow: none;}\r\n    .nxn-col-search-icon{\r\n        position: relative;\r\n        float: right;\r\n        top: -26px;\r\n        cursor: pointer;\r\n        right: 5px;\r\n    }\r\n    .nxn-padd-right25{\r\n        padding-right: 25px;\r\n    }\r\n</style>\r\n\r\n\r\n<div class="pull-right">\r\n\r\n    <ul class="nxn-icon-actions">\r\n        <li class="lastchild">\r\n            <span> |</span>\r\n            <span><a href="" ng-click="customizeColumns()" class="efi-table-settings-icon"><i class="fa fa-cog fa-lg"></i></a></span>\r\n\r\n            <div ng-show="showDropdown" class="grid-settings-dropdown">\r\n                <div class="form">\r\n                    <input type="text" placeholder="Search" name="srch-term" class="form-control nxn-padd-right25">\r\n                    <a class="nxn-col-search-icon"><span class="fa fa-search"></span></a>\r\n                </div>\r\n                <div class="nxn-mar-top-10">\r\n                    <div class="check-all nxn-mar-left-10">\r\n                        <label>\r\n                            <span class="nxn-mar-right-20"><input type="checkbox" ng-model="allColumnsSelected" ng-change="selectAll(allColumnsSelected)"/></span>\r\n                            <span class="">All</span>\r\n                        </label>\r\n                    </div>\r\n                    <ul class="clearfix settingDropdown">\r\n                        <li ng-repeat="column in displayColumns">\r\n                            <label>\r\n                                <span class="nxn-mar-right-20"><input type="checkbox" ng-model="column.isSelected" ng-disabled="column.fixed" ng-click="setAllSelected(column)"/></span>\r\n                                <span class="nxn-settings-col-label">{{column.title}}</span>\r\n                            </label>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="footer-control">\r\n                        <button class="btn btn-warning apply-btn nxn-mar-right-10" ng-click="applySettings(displayColumns)">APPLY</button>\r\n                        <button class="btn btn-warning" ng-click="reset()">RESET</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </li>\r\n    </ul>\r\n</div>\r\n\r\n'),a.put("partials/common/disclaimers/disclaimer.html",'<div class="modal-content">\r\n    <div class="modal-header">\r\n        <h3 class="modal-title" id="modalHeaderText">Disclaimer\r\n            <button type="button" class="close" ng-click="modalOptions.dismiss()" ng-show="!modalOptions.hideHeaderClose">&times;</button>\r\n        </h3>\r\n    </div>\r\n\r\n    <!-- set the parent variable to the this scope.   -->\r\n    <div ng-if="modalOptions.bodyUrl" ng-include="modalOptions.bodyUrl"></div>\r\n    <div ng-if="!modalOptions.bodyUrl">\r\n        <div class="modal-body">\r\n            <div>{{modalOptions.body}}</div>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="submit" class="btn btn-primary"\r\n                    data-ng-click="modalOptions.accept();">Accept\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/disclaimers/fundIQ-disclaimer.html",'<div class="modal-content">\r\n    <div class="modal-header">\r\n        <h3 class="modal-title" id="modalHeaderText"><b>Disclaimer</b>\r\n            <button type="button" class="close" ng-click="modalOptions.dismiss()" ng-show="!modalOptions.hideHeaderClose">&times;</button>\r\n        </h3>\r\n    </div>\r\n    <!-- set the parent variable to the this scope.   -->\r\n    <div ng-if="modalOptions.bodyUrl" ng-include="modalOptions.bodyUrl"></div>\r\n    <div ng-if="!modalOptions.bodyUrl">\r\n        <div class="modal-body">\r\n            You are now being redirected to the Capital Advisors Group,Inc. FundIQ&reg website.\r\n            <div class="nxn-boldFont nxn-mar-top-15">Note</div>\r\n            <div>\r\n                {{modalOptions.body}}\r\n            </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="submit" class="btn btn-primary"\r\n                    data-ng-click="modalOptions.accept();">Accept\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/iframe/iframe.html",'<div ng-if="contentSource === \'CONTENT_PROVIDERS\' && stateInfo.isDisabled">\r\n    <h1>This is the default maintenance page for the below application</h1>\r\n    <h2>Application Mnemonic: {{stateInfo.appMnemonic}}</h2>\r\n    <h2>Team name: {{stateInfo.teamName}}</h2>\r\n    <h2>Contact Email: {{stateInfo.contactEmail}}</h2>\r\n</div>\r\n\r\n<div nxn-spinner start-spinner="isShowSpinner" ng-show="isShowFrame" >\r\n    <iframe id="iFrameId" ng-src="{{url}}" width="100%" frameborder="0" nxn-iframe-onload callback-fn="close()"></iframe>\r\n</div>\r\n\r\n<script type="text/javascript">\r\n\r\n    var scope = angular.element($(\'#iFrameId\')).scope();\r\n\r\n    $(\'#iFrameId\').load(function() {\r\n\r\n        scope.isShowSpinner = false;\r\n        scope.$apply();\r\n\r\n        // if same domain, no issue to trigger mouse move event\r\n        // the mouse move event triggered here would be captured by parent window to keep up session\r\n        // for same domain iframe content\r\n        if (!scope.isCrossDomain) {\r\n'+"            $('#iFrameId').contents().on('mousemove', function (event) {\r\n                $(document).trigger(event);\r\n            });\r\n        } else {\r\n            // event listener for PostMessage events coming from content providers of CROSS DOMAIN\r\n            // the incoming evt payload would have details of mouse coordinates from iframe contents\r\n            // the PostMessageEvent triggered here would be captured by parent window in order to keep up session\r\n            // for cross domain iframe content\r\n            window.addEventListener('message', function (evt) {\r\n                if (evt.origin === scope.contentOrigin) {\r\n                    const POST_MESSAGE_EVENT = \"PostMessageEvent\";\r\n                    var event = new CustomEvent(POST_MESSAGE_EVENT);\r\n                    event.initCustomEvent(POST_MESSAGE_EVENT, false, false, evt);\r\n                    document.dispatchEvent(event);\r\n                }\r\n            });\r\n        }\r\n    });\r\n</script>\r\n"),a.put("partials/common/legacylinks/legacylinks.html",'<ul class="utilnav pull-right">\r\n    <li class="nxn-emulation-logo" ng-if="legacylinks.isEmulationOn">E</li>\r\n\r\n    <li id="detective_icon" ng-if="legacylinks.previewMode" class="legacy-service">\r\n        <a id="pluginConfigMode" class="nxn-cursor-pointer" ui-sref="pluginConfig" >\r\n            <span class="fa fa-user-secret fa-lg"></span>\r\n        </a>\r\n        <div class="popover bottom nxn-width-180">\r\n            <div class="arrow-up-white"></div>\r\n            <div class="popover-content">\r\n                <h6 class="title" id="previewMode">\r\n                    Plugin Preview Mode\r\n                </h6>\r\n            </div>\r\n        </div>\r\n    </li>\r\n\r\n    <li  ng-if="legacylinks.displayLegacy && legacylinks.connectLinkName !== \'\'" class="legacy-service">\r\n        <a ng-if="!legacylinks.isUserEmulationMode" class="nxn-cursor-pointer" ng-href="{{legacylinks.envSpecificConnectUrl}}" target="_blank" nxn-event-metrics-on="click" nxn-event-metrics-value="Connect Links">{{legacylinks.connectLinkName}}<span class="fa fa-external-link nxn-mar-left-5"></span></a>\r\n        <div ng-if="!legacylinks.isUserEmulationMode" class="popover bottom">\r\n            <div class="arrow-up-white"></div>\r\n            <div class="popover-content">\r\n                <h6 class="title">\r\n                    Services will launch in a new window\r\n                </h6>\r\n            </div>\r\n        </div>\r\n\r\n        <a ng-if="legacylinks.isUserEmulationMode" class="ui-state-disabled nxn-no-underline" href="javascript:void(0);">{{legacylinks.connectLinkName}}<span class="fa fa-external-link nxn-mar-left-5"></span></a>\r\n\r\n    </li>\r\n\r\n    <li ng-if="legacylinks.displayFeedback">\r\n        <a id="nxnFeedback" ng-if="!legacylinks.isUserEmulationMode" href="javascript:void(0);"><nxn-feedback></nxn-feedback></a>\r\n\r\n        <a ng-if="legacylinks.isUserEmulationMode" class="ui-state-disabled nxn-no-underline" href="javascript:void(0);">Feedback</a>\r\n    </li>\r\n\r\n   <li class="legacy-service">\r\n        <a ng-if="!legacylinks.isUserEmulationMode" support-link-modal="Support" nxn-event-metrics-on="click" nxn-event-metrics-value="Support"></a>\r\n\r\n        <a ng-if="legacylinks.isUserEmulationMode" class="ui-state-disabled nxn-no-underline" href="javascript:void(0);">Support</a>\r\n    </li>\r\n</ul>\r\n'),a.put("partials/common/modal-spinner.html",'<style type="text/css">\r\n\t\r\n\t.modal {\r\n\t\r\n\t\tdisplay: block;\r\n\t}\r\n    .modal-overlay {\r\n        /* A dark translucent div that covers the whole screen */\r\n        position:absolute;\r\n        z-index:9999;\r\n        top:0;\r\n        left:0;\r\n        margin-top:200px;\r\n        width:100%;\r\n        height:100%;\r\n        background-color:#000000;\r\n        opacity: 0.8;\r\n        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";\r\n    }\r\n\t\r\n\t.modal-header\r\n\t{\r\n\t\tborder-bottom: none; !important; \r\n\t}\r\n\r\n\t.modal-content\r\n\t{\r\n\t\tborder: none;\r\n\t}\r\n\t.modal-footer {\r\n\t  border-top: none;  !important;\r\n\t}\r\n\t\r\n\t.modal-dialog-center { /* Edited classname 10/03/2014 */\r\n    margin: 0;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    \r\n}\r\n\t  \r\n</style>\r\n\r\n\r\n<div class="modal-overlay">\r\n\t\r\n\t<div class="modal-header" style="border-bottom:none;">\r\n\t</div>\r\n\t<div class="modal-body">\r\n\t\t<div nxn-spinner spinner-key="modalSpinner" start-spinner="true">\r\n\t    </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/nav-quick-access.html",'<a id = "staricon" class="dropdown-toggle nxn-cursor-pointer hidden-sm hidden-xs" ng-show="qanav.fpsRegistered && qanav.quickAccessNavbar.length > 0">\r\n    <i class="fa fa-th nxn-fa-2x"></i>\r\n</a>\r\n<a data-toggle="dropdown" class="dropdown-toggle nxn-cursor-pointer visible-sm-inline visible-xs-inline" ng-show="qanav.fpsRegistered">\r\n    <i class="fa fa-th nxn-fa-2x"></i>\r\n</a>\r\n<div class="dropdown-menu" ng-show="qanav.fpsRegistered">\r\n    <div class="arrow-up-white"></div>\r\n    <div class="row nxn-apptray-margin">\r\n        <div class="grid-dropdown col-xs-4" ng-repeat="dataObj in qanav.quickAccessNavbar track by dataObj.id" ng-if="!(dataObj.mobileIncompatible && windowResizedForMobile)">\r\n            <div class="cell">\r\n                <a ng-if="dataObj.state" ui-sref="{{dataObj.state}}" ui-sref-opts="{reload: true}" nxn-event-metrics-on="click" nxn-event-metrics-value={{dataObj.name}}><div class="grid-items"><i class="{{dataObj.class}}"></i><h6>{{dataObj.name}}</h6></div></a>\r\n                <div ng-if="!dataObj.state  && dataObj.ngClick" ng-click="$eval(dataObj.ngClick)()">\r\n                    <div class="grid-items"><i class="{{dataObj.class}}"></i><h6>\r\n                        {{dataObj.name}}</h6></div>\r\n                </div>\r\n                <a ng-if="!dataObj.state  && !dataObj.ngClick" nxn-event-metrics-on="click" nxn-event-metrics-value={{dataObj.name}}><div class="grid-items"><i class="{{dataObj.class}}"></i><h6>{{dataObj.name}}</h6></div></a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/navExport.html",'<div class="row nxn-row-table-tools" >\r\n    <div class="col-md-12">\r\n        <div class="pull-right">\r\n            <ul class="nxn-icon-actions">\r\n                <div nxn-export\r\n                     nxn-export-fields="[\'Parent ID\',\'Parent Nav Item\',\'First Level ID\',\'First Level Nav Item\',\'Second Level ID\',\'Second Level Nav Item\',\'Step Up Required?\',\'State\',\'Column ID\',\'Column Title\']"\r\n                     nxn-export-heading="\'Nav Taxonomy\' "\r\n                     nxn-export-data="flattenedNavBar"\r\n                     nxn-export-transform-fn="dataExportFunction">\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="row nxn-mar-bot-20">\r\n    <div class="col-md-12">\r\n        <div class="table-responsive nxn-table-responsive ">\r\n            <table ng-table="activityTableParams" class="table table-hover nxn-data-grid">\r\n                <thead>\r\n                <tr>\r\n                    <th class="text-left">Parent ID</th>\r\n                    <th class="text-left">Parent Nav Item</th>\r\n                    <th class="text-left">First Level ID</th>\r\n                    <th class="text-left">First Level Nav Item</th>\r\n                    <th class="text-left">Second Level ID</th>\r\n                    <th class="text-left">Second Level Nav Item</th>\r\n                    <th class="text-left">Step Up Required?</th>\r\n                    <th class="text-center">State</th>\r\n                    <th class="text-left">Column ID</th>\r\n                    <th class="text-left">Column Title</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="navBarItem in flattenedNavBar">\r\n                    <td class="text-left">{{navBarItem.navLevelId}}</td>\r\n                    <td class="text-left">{{navBarItem.navLevelItem}}</td>\r\n                    <td class="text-left">{{navBarItem.firstLevelId}}</td>\r\n                    <td class="text-left">{{navBarItem.firstLevelItem}}</td>\r\n                    <td class="text-left">{{navBarItem.id}}</td>\r\n                    <td class="text-left">{{navBarItem.name}}</td>\r\n                    <td class="text-left">{{navBarItem.isStepUpRequired ? \'Yes\' : \'No\'}}</td>\r\n                    <td class="text-left">{{navBarItem.state}}</td>\r\n                    <td class="text-left">{{navBarItem.columnId}}</td>\r\n                    <td class="text-left">{{navBarItem.columnTitle}}</td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("partials/common/nxnPersistentannouncements/announcement.modal.html",'<div>\r\n<div class="modal-header">\r\n    <button type="button" class="close" data-dismiss="modal" ng-click="closeAnnouncementModal()">\r\n    <span aria-hidden="true">&times;</span>\r\n    <span class="sr-only">Close</span>\r\n    </button>\r\n    <h3 class="modal-title">\r\n    {{selectedAnnouncement.title}}\r\n    </h3>\r\n</div>\r\n<div class="modal-body">\r\n    <p>\r\n    {{selectedAnnouncement.text}}\r\n    </p>\r\n</div>\r\n<div class="modal-footer">\r\n  <button type="submit" class="btn btn-primary" ng-click="closeAnnouncementModal()">\r\n      Close\r\n  </button>\r\n</div>\r\n</div>'),a.put("partials/common/nxnPersistentannouncements/persistent.announcements.html",'<div ng-if="isMainApp && displayPrivateContent">\r\n    <div ng-show="shouldDisplayAnnouncements">\r\n        <div nxn-spinner start-spinner="isPersistentAnnouncementsSpinner">\r\n            <div id="nxn-persistent-announcements-container" ng-if="announcements.length > 0 && !isPersistentAnnouncementsError" nxn-info-extender="" class="nxn-persistent-announcements nxn-info-box nxn-filter"\r\n                     toggle-text-open="Announcements ({{announcements.length}})" toggle-text-closed="Announcements ({{announcements.length}})"\r\n                     extended="open" extension-location="below">\r\n                 <div name = "info-extension">\r\n                    <div id= "nxn-persistent-announcements-message">\r\n                        <ul class="list-unstyled">\r\n                            <li ng-repeat="announcement in announcements">\r\n                                <a href="javascript:void(0)" ng-click = "showAnnouncementModal(announcement)">{{announcement.title}}\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                 </div>\r\n            </div>\r\n            <div ng-if = "isPersistentAnnouncementsError" nxn-alert nxn-alert-type="alert-warning">\r\n                {{persistentAnnouncementsErrorMessage}}&nbsp\r\n                <a href="javascript:void(0)" ng-click="fetchAndSetAnnouncements(true,false)">\r\n                  <span class="fa fa-refresh nxn-fa-xl"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/nxnTab.html","<script>\r\n    var TabDataCtrl = function ($scope) {\r\n\r\n        $scope.tabs = [\r\n            {heading: 'One', stuff: 'junk'},\r\n            {heading: 'Two', stuff: 'junk for you', active: true},\r\n            {heading: 'Three', stuff: 'junk for me'},\r\n            {heading: 'Four', stuff: 'junk for all'}\r\n        ];\r\n\r\n\r\n        var selectedTradeFields = [\r\n            {dataField: 'fundName', title: 'Fund Name'},\r\n            {dataField: 'fundNo', title: 'Fund Number'},\r\n            {dataField: 'tradeType', title: 'Type'},\r\n        ];\r\n\r\n        $scope.tabs[0].selectedFields = selectedTradeFields;\r\n\r\n        $scope.go = function(){\r\n"+'            $scope.tabs.push({heading: "Five", stuff: "Mike"});\r\n        }\r\n\r\n    }\r\n\r\n</script>\r\n\r\n<div nxn-tabset-parent ng-controller="TabDataCtrl">\r\n    <div nxn-tabset>\r\n        <div  nxn-tab>\r\n            <div tab-heading>A</div>\r\n            AA\r\n        </div>\r\n        <div  nxn-tab>\r\n            <div tab-heading>B</div>\r\n            BB\r\n        </div>\r\n        <div  nxn-tab>\r\n            <div tab-heading>C</div>\r\n            CC\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/playVideo.html",'\r\n<div class="modal-body">\r\n    <div class="row">\r\n        <div class="col-sm-12"> \r\n\t\t\t<video id="videoLink" width="950" height="500" controls autoplay \r\n            oncontextmenu="return false;" controlsList="nodownload" \r\n            ng-src="{{ modalOptions.videoLink | trustVideo }}" type="video/mp4">\r\n\t\t\t  Your browser does not support the video tag.\r\n\t\t\t</video>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button type="button" class="btn btn-primary" data-dismiss="modal" data-ng-click="modalOptions.close()">Close\r\n    </button>\r\n</div>\r\n\r\n<script type="text/javascript">\r\n    var video = document.getElementById(\'videoLink\')\r\n    // When the \'ended\' event fires\r\n    video.addEventListener(\'ended\', function(){\r\n      // Reset the video to 0\r\n      video.currentTime = 0;\r\n    });\r\n</script>'),a.put("partials/common/pluginStateMap/pluginStateMap.html",'<h1>Plugin State Lookup</h1>\r\n<div nxn-spinner start-spinner="loadingPluginStates"></div>\r\n<div ng-show="displayError">\r\n    <div class="alert alert-warning" role="alert"><span class="fa fa-warning"></span> {{errorMessage}} </div>\r\n</div>\r\n<div ng-hide="displayError">\r\n    <div id="pluginStateMapGrid" nxn-ui-grid="pluginStateMapGridOptions"></div>\r\n</div>\r\n'),a.put("partials/common/refresh/refresh.html",'<a ui-sref="{{stateName}}" ui-sref-opts="{reload: true, notify: true}"><img src="img/refresh.png" height="30px" width="30px">as of {{refreshTime}}</a>\r\n'),a.put("partials/common/supportLink/nxnSupportLink.html",'<!-- Live Chat -->\r\n<script type="text/javascript" src="third_party/external/le-mtagconfig.js"></script>\r\n<!-- Live Chat End -->\r\n<div nxn-tabset>\r\n    <div nxn-tab active="!supportLinkOptions.showInternalTab">\r\n        <div tab-heading>\r\n            Clients\r\n        </div>\r\n        <h5>Hours of Operation:</h5>\r\n        <p>Sunday 8:00 p.m. through Friday 8:00 p.m. Eastern Time</p>\r\n        <div ng-if="loggedIn">\r\n            <div id="lpNexenButton"></div>\r\n        </div>\r\n        <h5>Email:</h5>\r\n        <p><a id="bnymSupport" href="mailto:support@bnymellon.com"><span class="fa fa-envelope fa-fw"></span>support@bnymellon.com</a>\r\n        </p>\r\n        <h5>Phone:</h5>\r\n        <dl class="nexen-contact-list">\r\n            <div class="row">\r\n                    <div class="col-md-6">\r\n            <dt>Americas:</dt>\r\n            <dd>\r\n                <a href="tel:18552849065" class="tel phone-call">(855) 284 9065 (Toll Free)</a>\r\n                <span class="tel phone-display">(855) 284 9065 (Toll Free)</span>\r\n                <a href="tel:+161545755895" class="tel phone-call">+1 615-457-5589</a>\r\n                <span class="tel phone-display">+1 615-457-5589</span>\r\n            </dd>\r\n            <dt>Asia Pacific:</dt>\r\n            <dd>\r\n                <a href="tel:+80022656369" class="tel phone-call">+800 2265 6369 (Toll Free)</a>\r\n                <span class="tel phone-display">+800 2265 6369 (Toll Free)</span>\r\n                <a href="tel:+6564320314" class="tel phone-call">+65 6432 0314</a>\r\n                <span class="tel phone-display">+65 6432 0314</span>\r\n            </dd>\r\n            <dt>Canada</dt>\r\n            <dd>\r\n                    <a href="mailto:support@bnymellon.com">support@bnymellon.com</a>\r\n                    <span class="phone-display">(888) 439-2457 (Toll Free)</span>\r\n                    <span class="phone-display">1-416-643-5360</span>\r\n            </dd>\r\n            </div>\r\n            <div class="col-md-6">\r\n\r\n            <dt>Europe, Middle East, Africa:</dt>\r\n            <dd>\r\n                <a href="tel:+4402079646161" class="tel phone-call">+44 (0) 20 7964 6161</a>\r\n                <span class="tel phone-display">+44 (0) 20 7964 6161</span>\r\n            </dd>\r\n            <dt id="clientsGermanyRegion">Germany</dt>\r\n            <dd id="clientsGermanyNumber">\r\n                <a href="tel:+49 (0) 69 12014-2014" class="tel phone-call">+49 (0) 69 12014-2014</a>\r\n                <span class="tel phone-display">+49 (0) 69 12014-2014</span>\r\n            </dd>\r\n            <dt id="clientsNetherlandRegion">Netherlands</dt>\r\n            <dd id="clientsNetherlandNumber">\r\n                <a href="tel:+31 (0) 76 760 2333" class="tel phone-call">+31 (0) 76 760 2333</a>\r\n                <span class="tel phone-display">+31 (0) 76 760 2333</span>\r\n            </dd>\r\n            </div>\r\n            </div>\r\n        </dl>\r\n    </div>\r\n\r\n    <div nxn-tab active="supportLinkOptions.showInternalTab">\r\n        <div tab-heading>\r\n            Internal Employees\r\n        </div>\r\n        <h5>Hours of Operation:</h5>\r\n        <p>24 hours a day, 7 days a week</p>\r\n        <div ng-if="loggedIn">\r\n            <div id="lpConnectButton"></div>\r\n        </div>\r\n        <h5>Phone:</h5>\r\n        <dl class="nexen-contact-list">\r\n            <div class="row">\r\n            <div class="col-md-6">\r\n            <dt>US Toll Free:</dt>\r\n            <dd><a href="tel:18554354357" class="tel phone-call">1 (855) 435 4357</a>\r\n                <span class="tel phone-display">1 (855) 435 4357</span>\r\n            </dd>\r\n            <dt>Asia Pacific:</dt>\r\n            <dd><a href="tel:+6564240399" class="tel phone-call">+65 6424 0399</a>\r\n                <span class="tel phone-display">+65 6424 0399</span>\r\n            </dd>\r\n            </div>\r\n        <div class="col-md-6">\r\n            <dt>Canada:</dt>\r\n            <dd><a href="tel:18554354357" class="tel phone-call">1 (416) 643 5555</a>\r\n                <span class="tel phone-display">1 (416) 643 5555</span>\r\n            </dd>\r\n            <dt>Europe:</dt>\r\n            <dd>\r\n                <a href="tel:+4402079646161" class="tel phone-call">+44207 163 4357</a>\r\n                <span class="tel phone-display">+44207 163 4357</span>\r\n            </dd>\r\n        </dl>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),
a.put("partials/common/supportLink/supportLink.html",'<div>\r\n    <nxn-support-link ng-if="!useWhiteLabelSupport" support-link-options="supportLinkOptions"\r\n                      logged-in="loggedIn" lp-site-no="lpSiteNo" saml-redirect-domain="samlRedirectDomain"></nxn-support-link>\r\n    <white-label-support-link ng-if="useWhiteLabelSupport" content="content"></white-label-support-link>\r\n</div>'),a.put("partials/common/supportLink/supportLinkModal.html",'<div class="modal-body">\r\n    <div class="row">\r\n        <div class="col-sm-12">\r\n            <support-link support-link-options="modalOptions.options.supportLinkOptions"></support-link>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n  <button type="button" class="btn btn-primary" data-dismiss="modal" data-ng-click="modalOptions.close()">Close </button>\r\n</div>\r\n'),a.put("partials/common/supportLink/whiteLabelSupportLink.html",'<div ng-bind-html="content"></div>'),a.put("partials/common/termsOfUse.html",'<style>\r\n@media (max-width: 767px  ){ \r\n  #useAndAcceptance {\r\n\t\t margin-top: 15px;\r\n  }\r\n}\r\n</style>\r\n<div id="login-nav" class="nxn-mar-bot-20">\r\n    <div class="navbar navbar-default nexen-navbar" role="navigation">\r\n        <div class="navbar-collapse" style="padding-left:0;">\r\n            <ul class="nav navbar-nav">\r\n                <li><a id="homeLink" class="dropdown-toggle" href="/apps/home" style="border-bottom:0">HOME</a></li>\r\n                <li class="active hidden-xs"><a href="">{{header.title}}</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="nxn-content-based-page container">\r\n\r\n    <h1 id="headerTermsOfUse">Terms of Use</h1>\r\n\r\n    <div class="row" ng-controller="ScrollTopController">\r\n\r\n        <div class="col-sm-4 col-sm-push-8" id="navCol">\r\n            <div id="sidebar" class="spy-nav-container">\r\n             <ul class="nav nav-stacked spy-nav">\r\n              <li><a href="termsOfUse#useAndAcceptance">Use and Acceptance</a></li>\r\n              <li><a href="termsOfUse#modification">Modification</a></li>\r\n              <li><a href="termsOfUse#propInfoAndMat">Proprietary Information and Materials</a></li>\r\n              <li><a href="termsOfUse#proprietarySoftware">Proprietary Software</a></li>\r\n              <li><a href="termsOfUse#internalUse">Internal Use</a></li>\r\n              <li><a href="termsOfUse#disclaimers">Disclaimers</a></li>\r\n              <li><a href="termsOfUse#submissions">Submissions</a></li>\r\n              <li><a href="termsOfUse#linksToOtherWebSites">Links To Other Web Sites</a></li>\r\n              <li><a href="termsOfUse#protectingYourInfo">Protecting Your Information</a></li>\r\n            </ul>\r\n          </div>\r\n        </div><!--/.col-->\r\n\r\n\r\n        <div class="col-sm-8 col-sm-pull-4">\r\n\r\n            <h2 id="useAndAcceptance" class="nxn-mar-top-0">Use and Acceptance</h2>\r\n\r\n          <p>This Web site (the “Site”), and any tools and/or services offered and/or provided by The Bank of\r\n             New York Mellon Corporation and/or its subsidiaries through this Site (collectively, the “Services”),\r\n             are offered to you conditioned upon your acceptance without modification of these Terms of Use. By using this Site or any Services,\r\n             you agree to these Terms of Use. Please read these Terms of Use carefully. If you do not agree to these Terms of Use, you\r\n             may not use this Site or any Services offered or provided through this Site.\r\n          </p>\r\n\r\n          <h2 id="modification">Modification</h2>\r\n\r\n          <p>We may change these Terms of Use from time to time without notice to you. You should review these Terms\r\n             of Use each time you use this Site or a Service to make sure you agree to them. By using this Site or\r\n             Services or engaging in any of the activities described in these Terms of Use after changes have been\r\n             made to these Terms of Use, you are agreeing to accept and comply with those changes.\r\n          </p>\r\n\r\n          <h2 id="propInfoAndMat">Proprietary Information and Materials</h2>\r\n\r\n            <p>The Sites and services accessed through BNY Mellon Connect contain Proprietary Information and Materials and Client Data.\r\n             “Client Data” is data or information that is unique to your account(s) or portfolio(s) (such as number of shares and holdings),\r\n             but does not include any Proprietary Information and Materials which may be associated with it. “Proprietary Information and Materials”\r\n             is information, data (including, but not limited to copyrighted works, trademarks, software, text, graphics, files,\r\n             scripts or other content or materials, any database and any Licensed Data, processes, information and documentation)\r\n             made available to you in which BNY Mellon or third party information providers (“Information Providers”) have a proprietary interest.\r\n             “Licensed Data” is data supplied to BNY Mellon by an Information Provider that is subject to a license, non-disclosure agreement,\r\n             other form of contract or other conditions under which such data may be supplied to you, including without limitation\r\n             security identifiers and classification data. Depending on the types of Licensed Data provided to you through the BNY Mellon Connect,\r\n             your use of Licensed Data may be subject to additional requirements and/or restrictions in licenses BNY Mellon has with the\r\n             Information Providers. These requirements and restrictions are included at: http://www.bnymellon.com/products/assetservicing/vendoragreement.pdf).\r\n             You are required to abide by these requirements and restrictions. The availability of Licensed\r\n             Data through this Site is not to be used as a substitute for a license or services agreement directly with an Information\r\n             Provider in order to use Licensed Data for purposes not covered or permitted under BNY Mellon\'s licenses.\r\n          </p>\r\n\r\n           <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n\r\n           <h2 id="proprietarySoftware">Proprietary Software</h2>\r\n\r\n           <p>Depending upon the services you select, you may be provided software owned by BNY Mellon (the “Proprietary Software”).\r\n              You shall have no rights in or to the Proprietary Software except to the extent of the license granted herein.\r\n              You are granted a limited, non-exclusive, non-transferable license to install the Proprietary Software on your company\'s\r\n              authorized computer system (including mobile devices registered with BNY Mellon) to use such Proprietary Software solely in\r\n              connection with BNY Mellon Connect.\r\n           </p>\r\n\r\n           <h2 id="internalUse">Internal Use</h2>\r\n\r\n           <p>Proprietary Information and Materials is solely for the internal use of your company. “Internal use” may include making Proprietary\r\n               Data available to your employer\'s third party professional advisors. You may print copies of pages from this Site for\r\n               your personal purposes, provided that each copy includes any copyright, trademark or service mark notice or attribution as they appear,\r\n               on the pages copied. You will not and will not authorize any other person to (i) reproduce or repackage, retransmit, disseminate, sell,\r\n               distribute, publish, broadcast, or circulate to third parties not covered by “internal use” or otherwise commercially exploit\r\n               Proprietary Information and Materials, (ii) identify and extract Proprietary Information and Materials from BNY Mellon\r\n               Connect independent of any Client Data, (iii) use Proprietary Information and Materials in any software application not\r\n               approved by BNY Mellon, (iv) use Proprietary Information and Materials in an environment shared with third parties\r\n               without the express written consent of BNY Mellon and without first obtaining any licenses needed from the relevant\r\n               Information Provider(s), (v) modify, alter, revise, paraphrase, omit, or change any material or images on or from this\r\n               Site without Permission, (vi) create derivative works, whether based in whole or in part upon the information on BNY Mellon\r\n               Connect sites or any portion thereof without Permission, or (vii) modify, amend, reduce the size of or in any way obscure\r\n               any warning, notice, liability limitation, or other license provision in material or images on or from this Site.\r\n            </p>\r\n\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n\r\n            <h2 id="disclaimers">Disclaimers</h2>\r\n\r\n            <p>THE INFORMATION PROVIDED IN ANY SERVICE OR IN THIS SITE IS NOT INVESTMENT OR LEGAL ADVICE. INFORMATION RECEIVED VIA THIS SITE\r\n               OR THE SERVICES SHOULD NOT BE RELIED UPON FOR PERSONAL, LEGAL OR FINANCIAL DECISIONS AND YOU SHOULD CONSULT AN APPROPRIATE\r\n               PROFESSIONAL FOR SPECIFIC ADVICE TAILORED TO YOUR SITUATION. THE INFORMATION CONTAINED IN THIS SITE, INCLUDING THE\r\n               INVESTOR RELATIONS SECTION (INCLUDING, WITHOUT LIMITATION, STOCK QUOTES, STOCK CHARTS, AND SEC FILINGS) AND ANY\r\n               ADDITIONAL CONTENT IS PUBLISHED SOLELY FOR INFORMATION PURPOSES AND IS NOT A SOLICITATION NOR AN OFFER TO BUY OR SELL\r\n               ANY STOCK, MUTUAL FUND, OR OTHER SECURITY, NOR SHOULD IT BE USED IN CONNECTION WITH ANY SALE, OFFER FOR SALE OR SOLICITATION\r\n               OF AN OFFER TO BUY SECURITIES OR ANY OTHER INSTRUMENT. SUCH INFORMATION DO NOT ATTEMPT OR CLAIM TO BE A COMPLETE\r\n               DESCRIPTION OF THE SECURITIES, MARKETS, OR DEVELOPMENTS REFERRED TO IN THE MATERIAL. ALL EXPRESSIONS OF OPINION\r\n               ARE SUBJECT TO CHANGE WITHOUT NOTICE. SUCH INFORMATION ARE OBTAINED FROM INTERNAL AND EXTERNAL SOURCES WHICH WE\r\n               CONSIDERS RELIABLE, BUT WE HAVE NOT INDEPENDENTLY VERIFIED SUCH INFORMATION AND WE DO NOT GUARANTEE THAT IT IS\r\n               ACCURATE OR COMPLETE. WE, OUR EMPLOYEES, AND OFFICERS AND DIRECTORS, MAY FROM TIME TO TIME HAVE POSITIONS IN THE\r\n               SECURITIES MENTIONED AND MAY SELL OR BUY SUCH SECURITIES. INVESTMENT PRODUCTS ARE NOT BANK DEPOSITS OR INSURED BY\r\n               THE FDIC OR OTHER ENTITY AND ARE SUBJECT TO INVESTMENT RISKS, INCLUDING LOSS OF THE PRINCIPAL AMOUNT INVESTED.\r\n            </p>\r\n\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n\r\n            <p>WE ARE NOT PROVIDING INVESTMENT ADVICE, ACTING AS A FIDUCIARY OR ENDORSING ANY COMPANY, PRODUCTS, SERVICES OR SECURITIES\r\n               BY PUBLISHING ANY INFORMATION CONTAINED IN THIS SITE. SUCH INFORMATION IS NOT INTENDED FOR TRADING PURPOSES OR FOR ANY\r\n               PURPOSE OTHER THAN YOUR PERSONAL USE. IN PARTICULAR, STOCK QUOTES APPEARING IN THIS SITE MAY BE DELAYED BY AT LEAST 20 MINUTES.\r\n               WE MAKE NO REPRESENTATION REGARDING THE ACCURACY OR TIMELINESS OF ANY SUCH INFORMATION AND SHALL HAVE NO LIABILITY FOR\r\n               INVESTMENT OR OTHER DECISIONS BASED UPON THIS INFORMATION. ANY DATED INFORMATION IS PUBLISHED AS OF ITS DATE ONLY,\r\n               AND WE DO NOT UNDERTAKE ANY OBLIGATION OR RESPONSIBILITY TO UPDATE OR AMEND ANY SUCH INFORMATION. WE SPECIFICALLY\r\n               DISCLAIM ANY AND ALL LIABILITY OR LOSS ARISING OUT OF ANY ACTION TAKEN IN RELIANCE ON THIS INFORMATION, INCLUDING\r\n               MARKET VALUE LOSS ON THE SALE OR PURCHASE OF SECURITIES OR OTHER INSTRUMENTS OR OBLIGATIONS.\r\n            </p>\r\n\r\n            <p>SOME JURISDICTIONS DO NOT ALLOW LIMITATIONS ON HOW LONG IMPLIED WARRANTIES LAST OR THE EXCLUSION OF CERTAIN\r\n               IMPLIED WARRANTIES, SO THAT THESE DISCLAIMERS AND LIMITATIONS MAY NOT APPLY TO YOU. IN SUCH EVENT,\r\n               SUCH DISCLAIMERS SHALL APPLY TO THE FULLEST EXTENT PERMITTED BY LAW.\r\n            </p>\r\n\r\n            <h2 id="submissions">Submissions</h2>\r\n\r\n            <p>You must provide true, accurate, current and complete information about yourself when you elect to provide personal\r\n               information to us. You also must maintain and promptly update any such information to keep it accurate.\r\n               Other than information addressed under our Online Privacy Policy, any and all comments, suggestions, ideas, graphics,\r\n               or other information that you transmit or post to the Site becomes and will remain our property and may be used by\r\n               us anywhere, anytime and for any reason whatsoever. Except as may be provided in the Online Privacy Policy, any information\r\n               or materials submitted to us will be treated as non-confidential and non-proprietary, and we will not have any obligation to\r\n               use or evaluate any information we receive from you. We will not have to pay you or anyone else for using any ideas or\r\n               other materials that you may transmit to or post on the Site.\r\n            </p>\r\n\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n\r\n            <h2 id="linksToOtherWebSites">Links To Other Web Sites</h2>\r\n\r\n            <p>This Site provides links to other Web sites that we think might be of interest to our users (“Linked Sites“).\r\n               Please note that when you click on one of these links, you may be moving to another provider\'s Web site.\r\n               These Linked Sites and their providers are not controlled by us, and we are not responsible for the contents or the proper\r\n               operation of any Linked Site. The inclusion of any link does not imply our endorsement.\r\n               We encourage you to read the terms of use and privacy statements of these Linked Sites as their policies may differ from ours.\r\n            </p>\r\n\r\n            <h2 id="protectingYourInfo">Protecting Your Information</h2>\r\n            <p>We utilize reasonable security technologies to protect sensitive information. However, the security of this information\r\n               depends in part on the security of the computer you use to communicate with us, the security you use to protect\r\n               User IDs and passwords, and the security provided by your internet access services provider. We are not responsible\r\n               for the security of your internet access services provider; you should review the security and privacy policies of\r\n               your internet access services provider carefully. Information that you access via this Site may be stored on your\r\n               computer during your session for your convenience. If others have access to your computer or your User ID and password,\r\n               they may be able to access this information. In any area of the Site requiring a password, you should log off the Site\r\n               when you are done viewing information or whenever you leave your computer. We are not responsible for the security or\r\n               privacy of information communicated to or from such a computer. Finally, you should keep any correspondence you\r\n               receive relating to this Site or the Services (including, but not limited to, your User ID, passwords, other\r\n               registration information, emails, order information, or any other information) confidential and in a safe place.\r\n            </p>\r\n\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n\r\n        </div><!--/.col-->\r\n\r\n    </div>\r\n\r\n</div>'),a.put("partials/common/test.html","Hi There"),a.put("partials/common/usageStats/httpRequestAvgByDateChart.html",'<div class="modal-body" ng-init="generateChart()">\r\n    <div class="row">\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-controller="nxn.HighchartsController" >\r\n            <highchart id="httpRequestChart" config="httpRequestChartConfig"></highchart>\r\n        </div>\r\n       \r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button type="button" class="btn btn-primary" data-dismiss="modal" data-ng-click="modalOptions.close()">Close\r\n    </button>\r\n</div>\r\n'),a.put("partials/common/usageStats/httpUsageStats.html",'<h1>HTTP Usage Stats</h1>\r\n<!-- row with simple Infobox - start -->\r\n<div class="row nxn-mar-bot-20">\r\n    <div class="col-md-12">\r\n        <h2>Generate Report of Average Time Elapsed By Date</h2>\r\n\r\n        <div class="nxn-info-box nxn-filter">\r\n            <div class="row">\r\n                <div class="col-md-2">\r\n                    <div class="form-group">\r\n                        <label ng-show="reportType===\'range\'">From:</label>\r\n                        <div class="input-group">\r\n                            <input type="text" class="form-control" datepicker-popup="yyyy/MM/dd" ng-model="dt"\r\n                                   is-open="openedFrom.value"\r\n                                   min-date="\'2014-12-01\'" max-date="maxDate" datepicker-options="dateOptions"\r\n                                   ng-required="true" close-text="Close"/>\r\n                                          <span class="input-group-btn">\r\n                                            <button type="button" class="btn btn-default" ng-click="openFrom($event)"><i\r\n                                                    class="glyphicon glyphicon-calendar"></i></button>\r\n                                          </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-2" ng-show="reportType===\'range\'">\r\n                    <div class="form-group">\r\n                        <label>To:</label>\r\n                        <div class="input-group">\r\n\r\n                            <input type="text" class="form-control" datepicker-popup="yyyy/MM/dd" ng-model="dtTo"\r\n                                   is-open="openedTo.value"\r\n                                   min-date="\'2014-12-01\'" max-date="maxDate" datepicker-options="dateOptions"\r\n                                   ng-required="true" close-text="Close"/>\r\n                                          <span class="input-group-btn">\r\n                                            <button type="button" class="btn btn-default" ng-click="openTo($event)"><i\r\n                                                    class="glyphicon glyphicon-calendar"></i></button>\r\n                                          </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-3 ">\r\n                    <input type="radio" ng-model="reportType" value="daily">Daily\r\n                    <input type="radio" ng-model="reportType" value="range">Range\r\n                </div>\r\n                <div>\r\n                  <div ng-show="errorMsg && errorMsg!=\'\'" class="error">{{errorMsg}}</div>\r\n                </div>\r\n                <div class="col-md-5 col-md-pull-1">\r\n                    <button class="btn btn-primary" data-ng-click="getAvgTimeElasedByDate()">Generate Report</button>\r\n                    <button class="btn btn-primary" data-ng-click="getAvgStateTimeElasedByDate()">Generate Report By Screen\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        \r\n        </div>\r\n        <div nxn-spinner start-spinner="loadingStats"\r\n             ng-show=" !showAvgTimeElapsedByDate && !showAvgStateTimeElapsedByDate"></div>\r\n        <div nxn-tabset ng-show="showAvgTimeElapsedByDate || showAvgStateTimeElapsedByDate">\r\n                <div nxn-tab ng-click="onTabSelect(\'successTab\')" > \r\n                    <div tab-heading >Success</div>\r\n                    <div><span style="color:red">Performance Threshold</span>: Average time elapsed > 5 seconds</div>\r\n                    \r\n                    <div nxn-spinner start-spinner="loadingStats"></div>\r\n\r\n                </div>\r\n\r\n                <div nxn-tab ng-click="onTabSelect(\'failureTab\')" >\r\n                    <div tab-heading >Failure</div>\r\n                    <div><span style="color:red">Failure Threshold</span>: Percent Failed > 1%</div>\r\n                                 \r\n                </div> \r\n        </div>\r\n        <div ng-show="displayGrid">\r\n            <div ng-if="showAvgTimeElapsedByDate && success">\r\n                <div nxn-spinner start-spinner="loadingStats"></div>\r\n                            <div nxn-ui-grid="avgTimeSuccessGridOptions" id="httpUsageStatsGridAvgTimeSuccess" ui-grid-pinning></div>\r\n            </div>      \r\n            <div ng-if="showAvgTimeElapsedByDate && failure">\r\n                <div nxn-spinner start-spinner="loadingStats"></div>\r\n                            <div nxn-ui-grid="avgTimeFailureGridOptions" id="httpUsageStatsGridAvgTimeFailure" ui-grid-pinning></div>\r\n            </div> \r\n            <div ng-if="showAvgStateTimeElapsedByDate && success">\r\n                <div nxn-spinner start-spinner="loadingStats"></div>\r\n                            <div nxn-ui-grid="avgStateTimeSuccessGridOptions" id="httpUsageStatsGridAvgStateTimeSuccess" ui-grid-pinning></div>\r\n            </div>     \r\n            <div ng-if="showAvgStateTimeElapsedByDate && failure">\r\n                <div nxn-spinner start-spinner="loadingStats"></div>\r\n                            <div nxn-ui-grid="avgStateTimeFailureGridOptions" id="httpUsageStatsGridAvgStateTimeFailure" ui-grid-pinning></div>\r\n            </div>          \r\n        </div>\r\n    </div>\r\n    <div class="col-md-12">        \r\n            <div ng-if="showAvgTimeElapsedByDate">\r\n                <div id="httpDPData" nxn-present-entitlement nxn-entitlement="SYS_ADMIN"> \r\n                    <button class="btn btn-primary" data-ng-click="getDPAvgTimeElasedByDate()">\r\n                        Generate Data from DP \r\n                    </button>\r\n                </div>\r\n                <br>\r\n                \r\n                <div nxn-tabset ng-if="showDPStats">\r\n                <div nxn-tab ng-click="onTabSelect(\'successTab\')" > \r\n                    <div tab-heading >Success</div>\r\n                    <div><span style="color:red">Performance Threshold</span>: Average time elapsed > 5 seconds</div>\r\n                    \r\n                    <div nxn-spinner start-spinner="loadingDPStats"></div>\r\n\r\n                </div>\r\n\r\n                <div nxn-tab ng-click="onTabSelect(\'failureTab\')" >\r\n                    <div tab-heading >Failure</div>\r\n                    <div><span style="color:red">Failure Threshold</span>: Percent Failed > 1%</div>\r\n                                 \r\n                </div> \r\n                </div>\r\n\r\n                <div ng-if="showDPStatsgrid">\r\n                <div ng-if="showAvgTimeElapsedByDate && success">\r\n                    <div nxn-spinner start-spinner="loadingDPStats"></div>\r\n                                <div nxn-ui-grid="avgTimeElasedDPGridOptionsSuccess" id="avgTimeElasedDPGridOptionsSuccess"></div>\r\n                </div>      \r\n                <div ng-if="showAvgTimeElapsedByDate && failure">\r\n                    <div nxn-spinner start-spinner="loadingDPStats"></div>\r\n                                <div nxn-ui-grid="avgTimeElasedDPGridOptionsFailure" id="avgTimeElasedDPGridOptionsFailure"></div>\r\n                </div> \r\n                </div>\r\n\r\n            </div>\r\n            <div ng-if="showAvgStateTimeElapsedByDate">\r\n                <div id="httpStateDPData" nxn-present-entitlement nxn-entitlement="SYS_ADMIN"> \r\n                    <button class="btn btn-primary" data-ng-click="getDPAvgStateTimeElasedByDate()">\r\n                        Generate Data from DP By State\r\n                    </button>\r\n                </div>\r\n                <br>\r\n                \r\n                <div nxn-tabset ng-show="showDPStateStats">\r\n                <div nxn-tab ng-click="onTabSelect(\'successTab\')" > \r\n                    <div tab-heading >Success</div>\r\n                    <div><span style="color:red">Performance Threshold</span>: Average time elapsed > 5 seconds</div>\r\n                    \r\n                    <div nxn-spinner start-spinner="loadingDPStats"></div>\r\n\r\n                </div>\r\n\r\n                <div nxn-tab ng-click="onTabSelect(\'failureTab\')" >\r\n                    <div tab-heading >Failure</div>\r\n                    <div><span style="color:red">Failure Threshold</span>: Percent Failed > 1%</div>\r\n                                 \r\n                </div> \r\n                </div>\r\n\r\n                <div ng-if="showDPStateStatsgrid"> \r\n                <div ng-if="!showAvgTimeElapsedByDate && success">\r\n                    <div nxn-spinner start-spinner="loadingDPStats"></div>\r\n                                <div nxn-ui-grid="avgStateTimeElasedDPGridOptionsSuccess" id="avgStateTimeElasedDPGridOptionsSuccess"></div>\r\n                </div>     \r\n                <div ng-if="!showAvgTimeElapsedByDate && failure">\r\n                    <div nxn-spinner start-spinner="loadingDPStats"></div>\r\n                                <div nxn-ui-grid="avgStateTimeElasedDPGridOptionsFailure" id="avgStateTimeElasedDPGridOptionsFailure"></div>\r\n                </div>          \r\n                </div>\r\n            </div>           \r\n            <div ng-if="showMore">\r\n                 <button class="btn btn-primary" data-ng-click="getDPAvgTimeElasedByDate()">\r\n                        Load More Data\r\n                    </button>\r\n            </div>\r\n            <div ng-if="showMoreByState">\r\n                 <button class="btn btn-primary" data-ng-click="getDPAvgStateTimeElasedByDate()">\r\n                        Load More Data By State\r\n                    </button>\r\n            </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/usageStats/requestDetail.html",'<div class="modal-body">\r\n    <div class="row">\r\n        <div class="col-sm-12">\r\n            <table class="table table-hover nxn-data-grid">\r\n                <tr>\r\n                    <th class="text-left">User ID</th>\r\n                    <th class="text-left">State</th>\r\n                    <th class="text-left">Method Type</th>\r\n                    <th class="text-center">Screen Resolution</th>\r\n                    <th class="text-center">Time Elapsed</th>\r\n                    <th class="text-center">HTTP Status</th>\r\n                    <th class="text-left">Create Date</th>\r\n                </tr>\r\n                <tbody>\r\n                <tr ng-repeat="request in requestDetails" ng-class="{ \'exceeded-threshold\': request.timeElapsed > timeElapsedThreshold}">\r\n                    <td class="text-left">{{request.userId}}</td>\r\n                    <td class="text-left">{{request.state}}</td>\r\n                    <td class="text-left">{{request.methodType}}</td>\r\n                    <td class="text-center">{{request.screenResolution}}</td>\r\n                    <td class="text-center">{{request.timeElapsed}}</td>\r\n                    <td class="text-center">{{request.httpStatus}}</td>\r\n                    <td class="text-left">{{request.createDate | date:\'yyyy-MM-dd HH:mm:ss\'}}</td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button type="button" class="btn btn-primary" data-dismiss="modal" data-ng-click="modalOptions.close()">Close\r\n    </button>\r\n</div>\r\n'),a.put("partials/common/usageStats/states.html",'<div class="modal-body">\r\n    <div nxn-spinner start-spinner="loadingDPModal"></div>\r\n    <div class="row">\r\n        <div class="col-sm-12">\r\n            <table class="table table-hover nxn-data-grid">\r\n                <tr>\r\n                    <th class="text-left">State</th>\r\n                    <th class="text-left">Status</th>\r\n                    <th class="text-left">From State</th>\r\n                    <th class="text-center">Screen Resolution</th>\r\n                    <th class="text-center">Time Elapsed</th>\r\n                    <th class="text-left">Create Date</th>\r\n                </tr>\r\n                <tbody>\r\n                <tr ng-repeat="state in modalOptions.states">\r\n                    <td class="text-left">{{state.state}}</td>\r\n                    <td class="text-left">{{state.status}}</td>\r\n                    <td class="text-left">{{state.fromState}}</td>\r\n                    <td class="text-center">{{state.screenResolution}}</td>\r\n                    <td class="text-center">{{state.timeElapsed}}</td>\r\n                    <td class="text-left">{{state.createDate | date:\'yyyy-MM-dd HH:mm:ss\'}}</td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button type="button" class="btn btn-primary" data-dismiss="modal" data-ng-click="modalOptions.close()">Close\r\n    </button>\r\n</div>\r\n'),a.put("partials/common/usageStats/usageStats.html",'<h1 id="usageStatLabel">Usage Stats</h1>\r\n<h2>Generate Report of Users By Date</h2>\r\n<div class="row">\r\n    <div class="col-xs-12 col-sm-12 col-md-12">\r\n        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-5">\r\n            <div class="btn-group">\r\n                <button id="todayOption" class="btn btn-default" data-ng-click="getUsersByDate(\'today\')" ng-class="selected===\'today\'?\'active\':null">Today</button>\r\n                <button id="yesterdayOption" class="btn btn-default" data-ng-click="getUsersByDate(\'yesterday\')" ng-class="selected===\'yesterday\'?\'active\':null">Yesterday</button>\r\n                <button id="pastDaysOption" class="btn btn-default" data-ng-click="getUsersByDate(\'lastWeek\')" ng-class="selected===\'lastWeek\'?\'active\':null">Past 7 Days</button>\r\n                <button id="customDateOption" class="btn btn-default" data-ng-click="getUsersByDate(\'custom\')" ng-class="selected===\'custom\'?\'active\':null">Custom Date Range</button>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <hr>\r\n        <div ng-if="showError" class="alert alert-warning" role="alert"><span class="fa fa-warning"></span>{{errorMessage}}</div>\r\n            <div class="row clearfix" ng-show = "filter && !displayError">\r\n                <div class="col-md-2" ng-show="selected===\'custom\'">\r\n                <label class="nxn-mar-top-5" nxn-present nxn-breakpoint="extra small,small">From Date&nbsp;</label><br><br><br>\r\n                <div class="nxn-datepicker-cell form-inline">\r\n                    <div class="input-group nxn-datepicker-group">\r\n                        <input type="text" style="width:90px" class="form-control input-sm" datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="false" ng-model="customDatePicker.fromDate"is-open="customDatePicker.fromOpened" min-date="customDatePicker.fromDateMin" max-date="customDatePicker.toDate"close-text="Close" />\r\n                        <span>\r\n                        <button type="button" class="btn btn-default btn-sm"ng-click="customFromOpen($event, customDatePicker)"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id="fromTimePicker" class="col-md-2">\r\n                <div class="form-group">\r\n                    <label>From Time</label>\r\n                    <timepicker id="fromTime" validate-time min="fromDate" max="toDate" ng-model="fromDate" ng-change="changed()" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian" max-time="toDate">{{fromDate}}</timepicker>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-2" ng-show="selected===\'custom\'">\r\n                <label class="nxn-mar-top-5" nxn-present nxn-breakpoint="extra small,small">To Date&nbsp;</label><br><br><br>\r\n                <div class="nxn-datepicker-cell form-inline">\r\n                    <div class="input-group nxn-datepicker-group">\r\n                        <input type="text" style="width:90px" class="form-control input-sm" datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="false" ng-model="customDatePicker.toDate" is-open="customDatePicker.toOpened" min-date="customDatePicker.fromDate" max-date="toDateMax" close-text="Close"/>\r\n                    <span>\r\n                    <button type="button" class="btn btn-default btn-sm"\r\n                    ng-click="customOpenTo($event, customDatePicker)"><i\r\n                    class="glyphicon glyphicon-calendar"></i></button>\r\n                    </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id="toTimePicker" class="col-md-2">\r\n            <div class="form-group">\r\n                <label>To Time</label>\r\n                <timepicker id="toTime" validate-time min="fromDate" max="toDate" ng-model="toDate" ng-change="changed()" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></timepicker>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-2" ng-show="selected===\'custom\'"><br><br><br>\r\n        <button type="button" class="btn btn-sm btn-primary nxn-mar-left-10"\r\n            style="text-transform:none !important;"\r\n            ng-click="getUsersByCustomDateRange(customDatePicker.fromDate, customDatePicker.toDate)">Apply\r\n        </button>\r\n        </div>\r\n        <div class="col-md-2" ng-show="selected!==\'custom\'"><br><br><br>\r\n        <button type="button" class="btn btn-sm btn-primary nxn-mar-left-10" style="text-transform:none !important;" ng-click="applyTime()">Apply\r\n        </button>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    <br/>\r\n    <br/>\r\n    <div class="col-md-12" nxn-spinner start-spinner="loadingStats">\r\n        <div class="nxn-mar-top-10 nxn-mar-left-0 nxn-mar-right-0" ng-show="!loadingStats && init">\r\n            <div ng-show="displayError">\r\n                <div class="alert alert-warning" role="alert"><span class="fa fa-warning"></span>{{errorMessage}}</div>\r\n            </div>\r\n            <div ng-show="usersByDate.length === 0 && !displayError">\r\n                <div class="alert alert-warning" role="alert"><span class="fa fa-warning"></span> There is no usage stats to display.</div>\r\n            </div>\r\n            <div class="nxn-resp-table-container-outer" ng-hide="usersByDate.length === 0 || displayError">\r\n                <table id="usageStats" class="table nxn-data-grid nxn-table-responsive nxn-no-mar nxn-resp-table nxn-row-selection ng-cloak" ng-table="usageStatsTable" template-pagination="custom/table-footer"\r\n                       toppagination="custom/table-header">\r\n                    <thead>\r\n                        <tr>\r\n                            <th ng-repeat="column in columns" ng-show="column.visible" sort-indicator="\'span\'"\r\n                                class="{{column.class}} {{column.sortable ? \'sortable\' : \'\'}}" ng-class="{\r\n                                            \'sort-asc\': (column.sortDir ===  \'+\'),\r\n                                            \'sort-desc\': (column.sortDir === \'-\')\r\n                                        }"\r\n                                ng-click="sortColumns(column.dataField)">\r\n                                <div>{{column.title}}</div>\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr ng-repeat="user in $data"class="nxn-resp-row">\r\n                            <td ng-repeat="column in columns" sortable="column.dataField"\r\n                                class="{{column.class}}" ng-show="column.visible">\r\n                                <div ng-if="column.title ===\'State Changes\'">\r\n                                    <a data-ng-click="showModal(user.userId)" class="nxn-cursor-pointer">{{user[column.displayField]}}</a>\r\n                                </div>\r\n                                <div ng-if="column.title !== \'State Changes\'">\r\n                                    {{user[column.displayField]}}\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="col-md-12">\r\n        <div ng-show="showDPUsageStats" >\r\n            <div  nxn-present-entitlement nxn-entitlement="SYS_ADMIN" id = "statsDPData">\r\n            <button  class="btn btn-primary" data-ng-click="getdpUsersByDate()">Generate DP Report\r\n            </button>\r\n            </div>\r\n        </div>\r\n        <br><br>\r\n        <div ng-show="displayDPError">\r\n                <div class="alert alert-warning" role="alert"><span class="fa fa-warning"></span>{{errorMessage}}</div>\r\n        </div>\r\n        <div ng-if="showDPUsageStatsGrid">\r\n            <div nxn-spinner start-spinner="loadingDPStats"></div>\r\n                <div nxn-ui-grid="usageStatsfromDP" id="usageStatsfromDP"></div>\r\n        </div>  \r\n        <div ng-if="showMore ">\r\n                 <button class="btn btn-primary" data-ng-click="getdpUsersByDate()">\r\n                        Load More Data\r\n                    </button>\r\n            </div>\r\n</div>\r\n\r\n'),
a.put("partials/common/userGuide/userGuide.html",'<style>\r\n    .help_title {\r\n        font-size: 22px;\r\n        font-weight: bold;\r\n        padding-top: 5px;\r\n        margin-bottom:20px;\r\n    }\r\n    .help_subtitle{\r\n        font-size: 18px;\r\n        margin-bottom: 8px;\r\n        font-weight: normal ;\r\n    }\r\n    .help_title, label, ul a {\r\n        font-family: Arial !important;\r\n    }\r\n\r\n</style>\r\n<div class="row">\r\n    <div class="col-md-12">\r\n        <h1 class="help_title">User Guides</h1>\r\n    </div>\r\n\r\n    <div nxn-spinner start-spinner="showSpinner" >\r\n    <div class="col-md-4" ng-repeat="guide in guidesList.data.guides">\r\n        <!--Splitting into columns-->\r\n        <div ng-repeat="(val,sec) in guide">\r\n            <div class="nxn-mar-bot-20" ng-repeat="(val,subSec) in sec">\r\n                <!--Display Headings-->\r\n                <b>{{val}}</b>\r\n                <div ng-repeat="(key,rootSection) in subSec">\r\n                    <div ng-if="key == \'root\'" ng-repeat="rootguides in rootSection">\r\n                        <a id = "guide_doc" ng-href="{{rootguides.guideUpload}}" target="_blank" align="left">{{rootguides[\'guideName\']}}</a>\r\n                        <span class="fa fa-external-link" style="font-size:12px;"></span>\r\n                    </div>\r\n                </div>\r\n                <!--For Sub Section-->\r\n                <div class="nxn-mar-left-20" ng-repeat="(key,rootSection) in subSec">\r\n                    <span ng-if="key !== \'root\'"><h6><u><b>{{key}}</b></u></h6></span>\r\n                    <div ng-if="key !== \'root\'" ng-repeat="subSectionguides in rootSection">\r\n                        <h6><a ng-href="{{subSectionguides.guideUpload}}" target="_blank" align="left">{{subSectionguides[\'guideName\']}}</a>\r\n                        </h6>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n\r\n    <div class="col-md-4" ng-repeat="guide in WLUserGuides" ng-if="!isMainApp">\r\n        <div class="nxn-mar-bot-20" ng-repeat="sec in guide.section" id="{{sec.id}}" nxn-present-entitlement nxn-entitlement="{{sec.entitlement}}">\r\n            <label class="help_subtitle">{{sec.title}}</label>\r\n            <div ng-repeat="doc in sec.documents">\r\n                <a id="guide_doc" ng-href="{{doc.url}}" target="_blank">{{doc.title}}</a>\r\n                <span class="fa fa-external-link" style="font-size:12px;"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/userGuide/userGuideTemplate.html",'<div ng-if="displayPrivateContent && isUserGuideAvailable">\r\n    <div class="row">\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <div class="col-xs-12 col-sm-12 col-md-7 col-lg-7 pull-right">\r\n                <a nxn-present\r\n                   class="nxn-cursor-pointer pull-right"\r\n                   nxn-breakpoint="extra small,small,medium,large"\r\n                   ng-click="openUserGuide()"\r\n                   popover="Help"\r\n                   popover-placement="bottom"\r\n                   popover-trigger="mouseenter">\r\n                    <i class="fa fa-question fa-2x"></i></a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/common/videoTutorials.html",'<div class="row">\r\n    <div class="col-md-12">\r\n        <h1 id="videoId" class="help_title">Video Tutorials</h1>\r\n    </div>\r\n\t<div ng-repeat="videoguide in videoList">\r\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="video_guide" popover-placement="right" popover="{{videoguide.description}}"\r\n\t\tpopover-trigger="mouseenter" ng-click="playVideo(videoguide)">{{videoguide.title}}\r\n\t\t<span class="fa fa-play-circle-o"></span> \r\n\t\t</a>\r\n    </div>\r\n\t<div class="col-md-8" ng-show="showalert">\r\n        <div nxn-alert nxn-alert-type="alert-warning" type="warning">{{showMessage}}</div>\r\n    </div>\r\n</div>'),a.put("partials/content/appFooter.html",'<div ng-if="displayFooter">\r\n    <div nxn-footer\r\n         class="container"\r\n         id="nxnFooterId"\r\n         nxn-footer-opts="{\r\n    \t    copyrightPrefix: wlResources.copyrightPrefix,\r\n    \t    copyrightSuffix: wlResources.copyrightSuffix,\r\n    \t    displayPrivacyPolicy: wlResources.displayPrivacyPolicy,\r\n    \t    displaySysRequirements: wlResources.displaySysRequirements,\r\n    \t    displayTermsOfUse: wlResources.displayTermsOfUse,\r\n            displayCookiePolicyFooter: wlResources.displayCookiePolicyFooter,\r\n    \t    footerLogoAlt: wlResources.footerLogoAlt,\r\n    \t    footerLogoSrc: wlResources.footerLogoSrc,\r\n    \t    linkPrivacyPolicy: wlResources.linkPrivacyPolicy,\r\n    \t    linkSysRequirements: wlResources.linkSysRequirements,\r\n    \t    linkTermsOfUse: wlResources.linkTermsOfUse,\r\n            linkCookiePolicyFooter: wlResources.linkCookiePolicyFooter,\r\n            privacyLinkText: wlResources.privacyLinkText,\r\n    \t    showSecuritiesDisclaimer: false}">\r\n    </div>\r\n</div>\r\n'),a.put("partials/content/appHeader.html",'<div ng-if="displayPublicHeader">\r\n    <div nxn-header\r\n         class="container"\r\n         id="nxnHeaderId"\r\n         nxn-header-opts="{\r\n             showUtilNav: false,\r\n             showNav: false,\r\n             showRightIcons: false,\r\n             showRightSmIcons: false,\r\n             showStepupNav: false,\r\n             logoutLabel: wlResources.logoutLabel}">\r\n    </div>\r\n</div>\r\n\r\n<div ng-if="displayPrivateHeader">\r\n    <div nxn-header\r\n         class="container"\r\n         id="nxnHeaderId"\r\n         right-icons="headerIcons"\r\n         right-icons-sm="headerIconsSm"\r\n         nxn-header-opts="{\r\n             showUtilNav: true,\r\n             showNav: true,\r\n             showRightIcons: true,\r\n             showRightSmIcons: true,\r\n             showStepupNav: false,\r\n             logoutLabel: wlResources.logoutLabel}"\r\n         util-nav="<ul nxn-legacy-links></ul>">\r\n    </div>\r\n</div>\r\n\r\n<div ng-if="displayTokenHeader">\r\n    <div nxn-header\r\n         class="container"\r\n         id="nxnHeaderId"\r\n         nxn-header-opts="{\r\n             showUtilNav: false,\r\n             showNav: true,\r\n             showRightIcons: false,\r\n             showRightSmIcons: false,\r\n             showStepupNav : true,\r\n             logoutLabel: wlResources.logoutLabel}">\r\n    </div>\r\n</div>\r\n<div ng-if="isEmbedded" class="container text-center" style="margin-bottom: 8px; margin-top: 5px;">\r\n    Powered by <img src="/apps/img/%62%6E%79%6D%5F%6C%6F%67%6F.png" style="width: 115px;">\r\n</div>\r\n'),a.put("partials/login/browser-out-of-date.html",'<div class="container">\r\n    <div class="well well-sm nxn-pad-top-0 cookie-bar nxn-no-pad-right" ng-if="vm.displayMessage">\r\n        <div nxn-alert\r\n             dismissible="true"\r\n             close="vm.close()"\r\n             nxn-alert-type="alert-warning">\r\n            <p ng-bind-html="vm.warningMessage"></p>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/login/browser-support-message.html",'<div class="modal-content">\r\n    <div class="modal-header">\r\n        <h3 class="modal-title" id="modalHeaderText">Please upgrade your browser to use this website</h3>\r\n    </div>\r\n\r\n    <div class="modal-body">\r\n        <div>You are using an unsupported <a link-target href="https://www.microsoft.com/en-us/WindowsForBusiness/End-of-IE-support">Microsoft</a><sup>&reg;</sup> browser. To continue working in a safe and stable environment and prevent login issues, please upgrade your browser to Internet Explorer 11 or any of the other modern browsers: \r\n        <br><br>\r\n        <ul><li>Chrome - 48.0 and above </li><li>Firefox - 44.0 and above </li><li>Safari - 9.0</li></ul></div>\r\n    </div>\r\n    \r\n    <div class="modal-footer">\r\n        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="modalOptions.close()">Close</button>\r\n    </div>\r\n</div>'),a.put("partials/login/eu-cookie.html",'<div class="container" ng-if="eu.showEUCookieBar">\r\n    <div class="cookie-bar show" id="cookieBar">\r\n        <div class="well well-sm">\r\n            <span class="nxn-login-eu-msg">This site uses cookies. By continuing to browse this site you are agreeing to our use of cookies.</span>\r\n            <a class="nxn-login-eu-findout"\r\n               href="{{eu.wlResources.cookiePolicyLink}}"\r\n               ng-if="eu.wlResources.displayCookiePolicyLink"\r\n               target="new">Find out more</a> <span class="hidden-md hidden-lg">| </span>\r\n            <a class="nxn-login-eu-close" href="" ng-click="eu.createEUCookie()">Close (Sets Cookie)</a>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("partials/login/header-login.html",'<div class="container">\r\n    <div ng-show="showEUCookieBar && state.includes(\'login\')">\r\n        <div class="cookie-bar show" id="cookieBar">\r\n            <div ng-hide="loggedIn" class="well well-sm">\r\n                <span class="nxn-login-eu-msg">This site uses cookies. By continuing to browse this site you are agreeing to our use of cookies.</span>\r\n                <a href="http://www.bnymellon.com/privacy/cookies.html" target="new" class="nxn-login-eu-findout">Find out more</a> <span class="hidden-md hidden-lg">| </span>\r\n                <a href="" ng-click="createEUCookie()" class="nxn-login-eu-close">Close (Sets Cookie)</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="nexen-header login-header">\r\n        <div class="logobar">\r\n            <div class="nexen-logo">\r\n                <div nxn-logo></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("partials/login/header-outage.html",'<div class="nexen-header login-header">\r\n    <div class="logobar">\r\n        <div class="nexen-logo">\r\n            <div nxn-logo></div>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("partials/login/login.html",'<style>\r\n    @media (min-width: 1280px) {\r\n        .container {\r\n            width: 1260px !important;\r\n        }\r\n    }\r\n</style>\r\n<!-- Main Content -->\r\n<div class="{{login.wlResources.jumbotronClass}}" role="main">\r\n    <div class="jumbotron">\r\n        <div class="row">\r\n            <div ng-if="!login.isOutageState" id="loginContainer" class="login-box col-sm-6 col-sm-push-6 col-md-4 col-md-push-8" nxn-login-form></div>\r\n            <div ng-if="login.isOutageState" id="loginContainer" class="login-box col-sm-6 col-sm-push-6 col-md-4 col-md-push-8">\r\n                <form id="loginForm" name="loginForm" class="login-form " method="post">\r\n                    <div class="currently-not-available">\r\n                        <p ng-if="login.isMainApp"><img id="outageImage" ng-src="{{login.sorryPageImg}}"></p>\r\n                        <p id="outageMessage">{{login.outageMessage}}</p>\r\n                        <p>Please try again later.</p>\r\n                    </div>\r\n                </form>\r\n            </div><!--/.login-box-->\r\n            <div class="hero-text-container col-sm-6 col-sm-pull-6 col-md-8 col-md-pull-4">\r\n                <div class="heroText">\r\n                    <div class="nxn-herotext-tagline1" ng-show="login.wlResources.heroText1" ng-bind-html = "login.wlResources.heroText1">\r\n                    </div>\r\n                    <div class="nxn-herotext-tagline2" ng-show="login.wlResources.heroText2" ng-bind-html = "login.wlResources.heroText2">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div><!--/.jumbotron-->\r\n</div><!--/.container-->\r\n<div class="nxn-login-features-container">\r\n\r\n    <!-- White Label -->\r\n    <div ng-if="!login.isMainApp" class="login-features row">\r\n        <div class="login-feature col-md-6 col-md-push-6">\r\n            <div id="login-support" ng-if="login.wlResources.displayLoginSupport">\r\n                <h2>Support</h2>\r\n                <div>\r\n                    <div id="wlSupport" class="row" ng-include="\'partials/login/wl-support.html\'"/>\r\n                </div>\r\n            </div>\r\n        </div><!--/.col-->\r\n\r\n        <div class="login-feature col-md-6 col-md-pull-6">\r\n            <div class="row">\r\n                <div id="marketingSelection" class="col-xs-4 col-sm-6 col-md-6" ng-switch="login.wlResources.marketingSelection">\r\n                    <div ng-controller="LoginVideoCtrl" ng-switch-when="video">\r\n                        <a href="" data-ng-click="showModal()">\r\n                            <img ng-src="{{login.wlResources.marketingVideoLink}}" class="img-responsive" title="Click to launch video viewer">\r\n                        </a>\r\n                    </div>\r\n                    <div ng-switch-when="logo">\r\n                        <img ng-src="{{login.wlResources.marketingLogoSrc}}" class="img-responsive" alt="{{login.wlResources.marketingLogoAlt}}">\r\n                    </div>\r\n                    <div ng-switch-default></div>\r\n                </div>\r\n                <div id="marketingContent" class="col-xs-8 col-sm-6 col-md-6">\r\n                    <h2>{{login.wlResources.marketingHeader}}</h2>\r\n                    <div class="nxn-mar-bot-15" ng-bind-html="login.wlResources.marketingText"></div>\r\n                </div>\r\n            </div>\r\n        </div><!--/.col-->\r\n    </div>\r\n\r\n    <div ng-if="login.isMainApp" class="login-features row row-eq-height">\r\n        <!-- NEXEN -->\r\n            <div class="col-md-5 col-md-push-7">\r\n                <div id="login-support" ng-if="login.wlResources.displayLoginSupport" class="nxn-panel">\r\n                    <h2>Support</h2>\r\n                    <div>\r\n                        <div id="nxnSupport" class="row" ng-include="\'partials/login/nxn-support.html\'"/>\r\n                    </div>\r\n                </div>\r\n            </div><!--/.col-->\r\n\r\n            <div class="col-md-7 col-md-pull-5">\r\n                <div class="nxn-panel">\r\n                    <div class="row" ng-include="\'partials/login/nxn-promotional-content.html\'"/>\r\n                </div>\r\n            </div><!--/.col-->\r\n    </div><!--/.login-features row-->\r\n</div><!--nxn-login-features-container end-->\r\n<!-- script for video -->\r\n\r\n\r\n'),a.put("partials/login/loginForm.html",'\r\n<form id="loginForm" name="loginForm" class="login-form " method="post" autocomplete="off" action="{{vm.loginUrl}}">\r\n\r\n    <fieldset>\r\n        <input type="hidden" name="SMENC" value="UTF-8">\r\n\r\n        <div id="userIdFormGroup" class="form-group">\r\n            <label for="USER">User ID</label>\r\n            <input type="text" name="USER" id="USER" class="nxn-login-form-control" placeholder="Enter User ID" ng-model="vm.USER" nxn-login-required="true" autocomplete="off"\r\n                   aa-field=\'vm.USER\'\r\n                   nxn-no-space-validator\r\n                   nxn-login-fields-validator nxn-auto-focus>\r\n        </div>\r\n\r\n        <div id="passwordFormGroup" class="form-group">\r\n            <label for="PASSWORD">Password</label>\r\n            <input type="password" name="PASSWRD" id="PASSWORD" class="nxn-login-form-control" placeholder="Enter Password" ng-model="vm.password" nxn-login-required="true" autocomplete="off"\r\n                   aa-field=\'vm.password\'\r\n                   nxn-no-space-validator\r\n                   nxn-login-fields-validator>\r\n        </div>\r\n\r\n        <div class="error-container" ng-class="{\'show\': vm.message}">\r\n            <div class="error-content">\r\n                <p><span class="fa fa-warning fa-fw"></span> {{vm.message}}</p>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group button-container">\r\n            <button id="signIn" type="submit" class="btn btn-primary" ng-click="vm.submit($event)" nxn-event-metrics-on="click" nxn-event-metrics-user="{{vm.USER}}" ng-disabled="vm.loginStarted || isDisabled">Sign In</button>\r\n            <input type="hidden" name="postpreservationdata" />\r\n            <input type="hidden" name="SUBMIT" value="Login" />\r\n        </div>\r\n\r\n        <ul class="links-list">\r\n            <li ng-if="!vm.hideFPSLink"><a href="fps" ng-click="vm.createFPCookie()">Forgot Password</a></li>\r\n            <li ng-if="vm.displayRegistrationLink" ng-controller="NexenRegisterController" ng-show="isLowerEnv"><a data-ng-click="showModal()" class="nxn-cursor-pointer">Register</a></li>\r\n            <li ng-if="vm.isTestingEnv"><white-label-test></white-label-test></li>\r\n        </ul>\r\n\r\n    </fieldset>\r\n\r\n</form>'),a.put("partials/login/logout.html",'<div id="GoToLogin" class="nxn-large-message">\r\n\t<h1><span class="fa fa-sign-out"></span> You have been successfully logged out</h1>\r\n    <p><a href="/login/logout.html">Go To Login &raquo;</a></p>\r\n</div>\r\n'),a.put("partials/login/nav-login.html",""),a.put("partials/login/nav-outage.html",""),a.put("partials/login/nxn-promotional-content.html",'<div class="col-xs-12 col-sm-4">\r\n    <div class="nxn-promotional-img nxn-pad-bot-15"></div>\r\n</div>\r\n<div id="marketingContent" class="col-xs-12 col-sm-8">\r\n    <h2>{{login.wlResources.marketingHeader}}</h2>\r\n    <div>{{login.wlResources.marketingText}}</div>\r\n    <ul class="list-unstyled nxn-mar-top-15">\r\n        <li>\r\n            <a href="https://www.bnymellon.com/us/en/our-thinking/index.jsp?cid=Nex_INT_gatewayculture#culture-and-society"\r\n                target="_blank">Culture and Society</a>\r\n        </li>\r\n        <li>\r\n            <a href="https://www.bnymellon.com/us/en/our-thinking/index.jsp?cid=Nex_INT_gatewayinvestment#investment-insight"\r\n                target="_blank">Investment Insights</a>\r\n        </li>\r\n        <li>\r\n            <a href="https://www.bnymellon.com/us/en/our-thinking/index.jsp?cid=Nex_INT_gatewayrisk#risk-and-regulation"\r\n                target="_blank">Regulation and Risk</a>\r\n        </li>\r\n        <li>\r\n            <a href="https://www.bnymellon.com/us/en/our-thinking/index.jsp?cid=Nex_INT_gatewaytransformation#transformation"\r\n                target="_blank">Transformation</a>\r\n        </li>\r\n    </ul>\r\n</div>'),a.put("partials/login/nxn-support.html",'<div class="col-sm-12">\r\n    <dl class="nexen-contact-list">\r\n        <dt>Hours of Operation</dt>\r\n        <dd>\r\n            <p>\r\n                Sunday 8:00 p.m. through Friday 8:00 p.m.<br>\r\n                Eastern Time<br>\r\n                <a id="bnymSupport" href="mailto:support@bnymellon.com">support@bnymellon.com</a>\r\n            </p>\r\n        </dd>\r\n        <dt>Internal Employees</dt>\r\n        <dd><a support-link-modal="Internal Employee Support" support-link-options="{showInternalTab: true}"></a></dd>\r\n    </dl>\r\n</div>\r\n<div class="col-sm-12">\r\n    <dl class="nexen-contact-list">\r\n        <div class="col-xs-12 col-sm-6 nxn-no-pad">\r\n            <dt>Americas</dt>\r\n            <dd>\r\n                <a href="tel:18552849065" class="phone-call">(855) 284 9065 (Toll Free)</a>\r\n                <span class="phone-display">(855) 284 9065 (Toll Free)</span>\r\n                <a href="tel:+161545755895" class="phone-call">+1 615-457-5589</a>\r\n                <span class="phone-display">+1 615-457-5589</span>\r\n            </dd>\r\n            <dt>Asia Pacific</dt>\r\n            <dd>\r\n                <a href="tel:+80022656369" class="phone-call">+800 2265 6369 (Toll Free)</a>\r\n                <span class="phone-display">+800 2265 6369 (Toll Free)</span>\r\n                <a href="tel:+6564320314" class="phone-call">+65 6432 0314</a>\r\n                <span class="phone-display">+65 6432 0314</span>\r\n            </dd>\r\n            <dt id="canadaRegion">Canada</dt>\r\n            <dd id="canadaNumber">\r\n                    <a href="mailto:support@bnymellon.com">support@bnymellon.com</a>\r\n                    <a href="tel:18884392457" class="phone-call">(888) 439-2457 (Toll Free)</a>\r\n                    <span class="phone-display">(888) 439-2457 (Toll Free)</span>\r\n                    <a href="tel:+14166435360" class="phone-call">1-416-643-5360</a>\r\n                    <span class="phone-display">1-416-643-5360</span>\r\n            </dd>\r\n        </div>\r\n        <div class="col-xs-12 col-sm-6 nxn-no-pad">\r\n                <dt>Europe, Middle East, Africa</dt>\r\n                <dd>\r\n                    <a href="tel:+4402079646161" class="phone-call">+44 (0) 20 7964 6161</a>\r\n                    <span class="phone-display">+44 (0) 20 7964 6161</span>\r\n                </dd>\r\n            <dt id="germanyRegion">Germany</dt>\r\n            <dd id="germanyNumber">\r\n                <a href="tel:+49 (0) 69 12014-2014" class="phone-call">+49 (0) 69 12014-2014</a>\r\n                <span class="phone-display">+49 (0) 69 12014-2014</span>\r\n            </dd>\r\n            <dt id="netherlandsRegion">Netherlands</dt>\r\n            <dd id="netherlandsNumber">\r\n                <a href="tel:+31 (0) 76 760 2333" class="phone-call">+31 (0) 76 760 2333</a>\r\n                <span class="phone-display">+31 (0) 76 760 2333</span>\r\n            </dd>\r\n        </div>\r\n    </dl>\r\n</div>'),a.put("partials/login/nxnVideoModal.html",'<div class="modal-body">  \r\n\r\n  <div class="embed-responsive embed-responsive-16by9">\r\n  \r\n    <!--U-Tube player example -->\r\n    <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/Po11eVprl6c?autoplay=0&autohide=0&controls=2&loop=0" frameborder="0" allowfullscreen></iframe>\r\n    <!--U-Tube player example end-->\r\n   \r\n    \r\n      <!-- Start of Brightcove Player -->\r\n\r\n      <!--\r\n      By use of this code snippet, I agree to the Brightcove Publisher T and C \r\n      found at https://accounts.brightcove.com/en/terms-and-conditions/. \r\n      -->\r\n      \r\n     <!--<script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>-->\r\n\r\n      <!-- \r\n      This script tag will cause the Brightcove Players defined above it to be created as soon\r\n      as the line is read by the browser. If you wish to have the player instantiated only after\r\n      the rest of the HTML is processed and the page load is complete, remove the line.\r\n      -->\r\n      \r\n      <!-- End of Brightcove Player -->\r\n    </div>\r\n\r\n</div>\r\n<div class="modal-footer">\r\n  <button type="button" class="btn btn-primary" data-dismiss="modal" data-ng-click="modalOptions.close()">Close</button>\r\n</div>\r\n'),a.put("partials/login/wl-support.html",'<div class="col-sm-12" id="supportContent" ng-bind-html="login.wlResources.loginSupportContent" />'),a.put("partials/public/aisConfirmElectronicAccessServiceAgreement.html",'<div class="modal-content">\r\n    <div class="modal-header">\r\n        <h3 class="modal-title">ELECTRONIC ACCESS SERVICES AGREEMENT\r\n            <button type="button" class="close" ng-click="modalOptions.close()"\r\n                    ng-show="!modalOptions.hideHeaderClose">&times;</button>\r\n        </h3>\r\n    </div>\r\n    <!-- set the parent variable to the this scope. -->\r\n    <div ng-if="modalOptions.bodyUrl" ng-include="modalOptions.bodyUrl"></div>\r\n    <div ng-if="!modalOptions.bodyUrl">\r\n        <div class="modal-body">\r\n            <p>\r\n                Do you want to exit the registration Process?\r\n            </p>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="submit" class="btn btn-primary" data-ng-click="modalOptions.ok(\'yesValue\')">Yes</button>\r\n            <button type="button" class="btn btn btn-default" data-ng-click="modalOptions.ok(\'noValue\')">No</button>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("partials/public/aisElectronicAccessAgreement.html",'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>ELECTRONIC ACCESS SERVICES AGREEMENT</title>\r\n    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\r\n    <style type="text/css">\r\n        <!--\r\n        p {\r\n            margin: 0;\r\n            padding: 0;\r\n        }\r\n\r\n        .ft00 {\r\n            font-size: 15px;\r\n            font-family: Times;\r\n            color: #000000;\r\n        }\r\n\r\n        .ft01 {\r\n            font-size: 15px;\r\n            font-family: Times;\r\n            color: #000000;\r\n        }\r\n\r\n        .ft02 {\r\n            font-size: 12px;\r\n            font-family: Times;\r\n            font-weight: normal;\r\n            color: #000000;\r\n            text-align: justify;\r\n        }\r\n\r\n        .ft03 {\r\n            font-size: 15px;\r\n            font-weight: bold;\r\n            font-family: Times;\r\n            color: #4e81bd;\r\n        }\r\n\r\n        .ft04 {\r\n            font-size: 12px;\r\n            font-family: Times;\r\n            color: #000000;\r\n        }\r\n\r\n        .ft05 {\r\n            font-size: 12px;\r\n            font-family: Symbol;\r\n            color: #000000;\r\n        }\r\n\r\n        .ft06 {\r\n            font-size: 12px;\r\n            font-family: Helvetica;\r\n            color: #000000;\r\n        }\r\n\r\n        .ft07 {\r\n            font-size: 12px;\r\n            line-height: 17px;\r\n            font-family: Times;\r\n            color: #000000;\r\n        }\r\n        .auto-style1 {\r\n            font-size: 12px;\r\n            font-family: Times;\r\n            color: #000000;\r\n            }\r\n        .auto-style3 {\r\n            font-size: 12px;\r\n            line-height: 17px;\r\n            font-family: Times;\r\n            color: #000000;\r\n            text-align: justify;\r\n        }\r\n        .auto-style4 {\r\n            font-size: 15px;\r\n            font-family: Times;\r\n            color: #000000;\r\n            text-align: center;\r\n        }\r\n        .auto-style5 {\r\n            font-size: 12px;\r\n            font-family: Times;\r\n            font-weight: normal;\r\n            color: #000000;\r\n        }\r\n        -->\r\n    </style>\r\n</head>\r\n<body>        \r\n        <p class="auto-style3">&#160;<br />PLEASE READ THE FOLLOWING TERMS AND CONDITIONS CAREFULLY. THEY GOVERN YOUR ACCESS AND USE OF THIS SITE. BEFORE ACCESSING OR USING THIS SITE, YOU MUST AGREE TO BE BOUND BY THESE TERMS AND CONDITIONS AND ACCEPT THEM IN FULL. YOU AGREE THAT THESE TERMS AND CONDITIONS WILL APPLY EACH TIME YOU ACCESS THIS SITE. IF YOU DO NOT AGREE TO ALL OF THE TERMS AND CONDITIONS OF THIS AGREEMENT, YOU ARE NOT AN AUTHORIZED USER AND YOU MAY NOT USE THE SITE. </p>\r\n        <p class="auto-style3">&nbsp;</p>\r\n        <p class="auto-style3">This Electronic Access Services Agreement (“EASA” or “Agreement”) is between you (“you” or “User”) and The Bank of New York Mellon, on behalf of itself and its subsidiaries and affiliates (collectively, “BNYM” or “we”). This EASA is a binding agreement between you and BNYM, and governs your access and use of this website and its related services (“Site”), which includes any information, data, tools, statements, documents, products, materials, services and other content (“Content”) whether available on or downloaded from or through the Site. This EASA incorporates by reference, as though fully set forth herein, the Electronic Access Terms and Conditions in effect as of the date of this EASA (“EATC”), as well as BNYM’s Privacy Policy, both of which can be found on the Site. In the event of a conflict between the terms of this Agreement and the terms of the EATC, this Agreement shall control. </p>\r\n        <p class="auto-style3">&nbsp;</p>\r\n        <p class="auto-style3">BNYM reserves the right to change, modify, add or remove any of the terms and conditions of this EASA for any reason. We suggest that you review these terms periodically for such changes. Such changes shall be effective immediately after posting. You acknowledge that by continuing to access or use the Site following notice of such modifications, you are agreeing to any changes to this EASA.<br />&#160;</p>\r\n        <p class="ft03">Consent&#160;to&#160;Electronic&#160;Delivery&#160;and&#160;Signature</p>\r\n        <p class="ft02">&#160;By clicking “I agree” below, you will be consenting to electronic delivery of this EASA, as well as any statements, reports or other communications from BNYM or its clients. You will also be providing your electronic signature that will affirm that: </p>\r\n        <p class="ft02">&nbsp;</p>\r\n        <ul>\r\n            <li>\r\n                <p class="ft02">\r\n                    You understand that this EASA is a legally binding agreement and the equivalent of a signed, written contract;</p>\r\n            </li>\r\n            <li>\r\n                <p class="ft02">\r\n&nbsp;You have full authority and rights necessary to access the Site and enter into and fully perform your obligations under this Agreement;</p>\r\n            </li>\r\n            <li>\r\n                <p class="ft02">\r\n&nbsp;You are an “Authorized User” as defined in the EATC and will abide by all of the security requirements and other terms applicable to Authorized Users as set forth in the EATC;\r\n                </p>\r\n            </li>\r\n            <li>\r\n                <p class="ft02">\r\n                    You will use the Site in a manner consistent with all applicable laws and regulations (including the federal securities laws) and in accordance with all of the terms and conditions of this EASA; and</p>\r\n            </li>\r\n            <li>\r\n                <p class="ft02">\r\n&nbsp;You understand, accept and have received this EASA and its terms and conditions, as well as BNYM’s Privacy Policy, and acknowledge and demonstrate that you can assess the EASA and other information on the Site.&#160;</p>\r\n            </li>\r\n        </ul>\r\n        <p class="ft04">&#160;</p>\r\n        <p class="ft03">No&#160;Offer&#160;or&#160;Endorsement&#160;&#160; </p>\r\n        <p class="ft02">This Site provides you with certain services, including but not limited to, access to Content regarding certain investment funds and other investment vehicles offered by our clients (each a “Fund” and collectively the “Funds”). BNYM does not endorse, sponsor or otherwise approve any Fund, or any investment in a Fund, and we make information regarding a Fund (including all Content) on the Site available to you solely as a convenience. THE CONTENT ON THIS SITE IS FOR INFORMATION PURPOSES ONLY. ALTHOUGH THE SITE MAY INCLUDE INVESTMENT-RELATED INFORMATION, UNDER NO CIRCUMSTANCES SHALL THE INFORMATION MADE AVAILABLE ON OR DOWNLOADED FROM OR AVAILABLE THROUGH THE SITE CONSTITUTE A DISTRIBUTION, SOLICITATION, RECOMMENDATION, ENDORSEMENT OR OFFER BY BNYM TO BUY OR SELL ANY SECURITY OR INVESTMENT, OR EFFECT ANY TRANSACTIONS, INCLUDING, WITHOUT LIMITATION, ANY SHARES, UNITS OR OTHER INTERESTS IN ANY FUNDS WHICH ARE REFERRED TO ON THIS SITE. MANY OF THE FUNDS REFERRED TO ON THIS SITE \r\n            ARE PRIVATELY OFFERED, AVAILABLE ONLY TO SOPHISTICATED INVESTORS AND/OR INVOLVE SIGNIFICANT RISKS. BNYM MAKES NO RECOMMENDATION OR REPRESENTATION WHATSOEVER CONCERNING THE SUITABILITY OF ANY FUND OR INVESTMENT FOR ANY INVESTOR.</p>\r\n        <p class="ft04">&#160;<br />&#160;</p>\r\n        <p class="ft03">No&#160;Professional&#160;Advice&#160;&#160;</p>\r\n        <p class="ft02">Nothing contained on this Site constitutes legal, accounting, tax, investment or other financial advice, nor should this Site be relied upon in making an investment decision. Users should always obtain relevant and specific professional advice before making any investment decision. Although the Content made available on the Site is believed to be reliable, BNYM cannot and does not represent, endorse, guarantee or warrant the accuracy, reliability, validity, timeliness, completeness or suitability of the Content made available to you for any particular purpose. Investments in a Fund are typically subject to a prospectus, offering memorandum or similar offering document which describes the risks associated with investing in the Fund (“Offering Materials”). BNYM does not endorse, verify or validate the content of any such Offering Materials and under no circumstances shall BNYM be responsible or liable for such Offering Materials or their compliance with applicable laws and \r\n            regulations. The User alone bears sole responsibility for evaluating the merits and risks associated with the use of the Content for any purposes, including investment purposes. Decisions based on any Content are the sole responsibility and risk of the User. ALL FINANCIAL INFORMATION AVAILABLE ON THIS SITE SHOULD BE EVALUATED IN CONSULTATION WITH A LEGAL, ACCOUNTING, TAX, INVESTMENT OR OTHER FINANCIAL SPECIALIST.<br />&#160;</p>\r\n        <p class="ft03">Historical&#160;Information&#160;&#160;</p>\r\n        <p class="ft02">The data made available on the Site is calculated based on historical information and should not be relied upon to predict future values or prices. Unless otherwise specified, values or prices made available on this Site may not reflect actual prices or values that would be available in the market at any given time. All values are provided for information purposes only and are not guaranteed for accuracy or as realizable values. BNYM is under no obligation to update or keep current any pricing information contained on the Site. Past performance is no guarantee of future performance.<br />&#160;</p>\r\n        <p class="ft03">Statements&#160;&#160;</p>\r\n        <p class="ft02">If such option is made available with respect to your Fund, you may receive Fund statements, reports and other communications through the Site. You understand that, if available, by clicking the “Accept” button below, you are consenting to receive such materials electronically over the Internet and that the posting of such materials on the Site constitutes delivery of the materials to you. If you have problems with or questions regarding information contained in any statement or other materials we send to you on behalf of a Fund, you must notify the Fund or us immediately. Absent such notice, we will assume that you have received all statements and other materials sent to you and all information contained therein is correct. While BNYM makes all reasonable efforts to provide accurate, reliable and up-to-date information on this website, BNYM makes no representation as to the accuracy, timeliness or completeness of that information. In addition, BNYM is not responsible or \r\n            liable for information/data that has been manipulated, altered or amended in any manner by the user<br />&#160;</p>\r\n        <p class="ft03">Electronic&#160;Mail&#160;&#160;</p>\r\n        <p class="ft02">If you are receiving Fund statements, reports or other communications electronically, you must provide us with a current, valid email address. It is your responsibility to keep us informed of future e-mail address changes. If we are unable to deliver your electronic document(s) to the specified email address, we reserve the right to terminate the electronic delivery of documents service and deliver the documents to you via mail. Please note that the e-mail address you provide will be kept confidential. </p>\r\n        <p class="ft04">&nbsp;</p>\r\n        <p class="ft02">There are some inherent risks with exchanging e-mails. By exchanging e-mails with us, you understand that we are not, and will not be, responsible for the unauthorized interception, redirection, copying or reading of e-mails including any attachments, nor will we be responsible for the effect on any computer system of any e-mails, attachments or viruses which may be transmitted by this means. Also, we are not, and will not be, responsible for the incorrect or incomplete transmission of information by e-mail.<br />&#160;<br />&#160;</p>\r\n        <p class="ft03">No&#160;Warranties&#160;&#160;</p>\r\n        <p class="ft02">BNYM MAKES NO WARRANTY WHATSOEVER TO YOU, EXPRESS OR IMPLIED, REGARDING THE SECURITY OF THE SITE, INCLUDING WITH RESPECT TO THE ABILITY OF UNAUTHORISED PERSONS TO INTERCEPT OR ACCESS INFORMATION WHICH MAY BE TRANSMITTED BY YOU THROUGH THIS SERVICE. </p>\r\n        <p class="ft02">THE SITE AND ITS CONTENT ARE PROVIDED ON AN “AS IS,” “WHERE IS” AND “WHERE AVAILABLE” BASIS. USE OF THE SITE AND ITS CONTENT IS AT THE USER’S SOLE RISK. USER ACKNOWLEDGES THAT ACCESS TO THE SITE MAY BE INTERRUPTED WITHOUT NOTICE AND THAT OPERATION OF THE SITE MAY NOT BE ERROR-FREE. </p>\r\n        <p class="ft02">THE SITE AND ITS CONTENT ARE PROVIDED WITHOUT ANY REPRESENTATIONS, ENDORSEMENTS, OR WARRANTIES OF ANY KIND WHATSOEVER, EITHER EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, ANY WARRANTIES OF TITLE, ACCURACY, THAT DEFECTS WILL BE CORRECTED, OR THAT THE SITE OR THE SERVERS THAT MAKE THE SITE AVAILABLE WILL BE FREE OF VIRUSES OR OTHER HARMFUL COMPONENTS, AND ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT, WITH THE SOLE EXCEPTION OF WARRANTIES (IF ANY) WHICH CANNOT BE EXPRESSLY EXCLUDED UNDER APPLICABLE LAW. AS NOTED BELOW, BNYM ALSO MAKES NO REPRESENTATIONS, ENDORSEMENTS, OR WARRANTIES, EITHER EXPRESS OR IMPLIED, WITH RESPECT TO ANY SITE OPERATED BY A THIRD PARTY. </p>\r\n        <p class="ft02">NEITHER BNYM NOR ANY OF ITS THIRD PARTY SERVICE PROVIDERS SHALL HAVE ANY RESPONSIBILITY TO MAINTAIN THE CONTENT MADE AVAILABLE ON THIS SITE, OR TO SUPPLY ANY CORRECTIONS, UPDATES OR RELEASES IN CONNECTION THEREWITH. AVAILABILITY OF CONTENT IS SUBJECT TO CHANGE WITHOUT NOTICE. WE DO NOT UNDERTAKE ANY OBLIGATION OR RESPONSIBILITY TO UPDATE OR AMEND ANY INFORMATION ON THE SITE. BNYM DOES NOT WARRANT THE ACCURACY, ADEQUACY OR COMPLETENESS OF THE CONTENT CONTAINED ON THE SITE AND EXPRESSLY DISCLAIMS LIABILITY FOR ANY ERRORS OR OMISSIONS IN THE CONTENT. </p>\r\n        <p class="ft02">ANY DISCLAIMERS APPEARING ON THE SITE WITH RESPECT TO THE INFORMATION CONTAINED THEREIN SHALL BE INCORPORATED BY REFERENCE INTO THIS EASA.<br />&#160;</p>\r\n        <p class="ft03">Limitations&#160;of&#160;Liability&#160;&#160;</p>\r\n        <p class="ft02">BNYM SHALL HAVE NO LIABILITY TO YOU OR ANY OTHER THIRD PARTY IN RELATION TO ANY LOSS SUFFERED BY YOU FROM YOUR USE OF THIS SITE AS A RESULT OF ANY DELAY OR DEFECT IN OR FAILURE OF THE WHOLE OR ANY PART OF (OR ANY COMBINATION OF) THE SITE, THE CONTENT, OR THE SITE SERVER OR AS A RESULT OF MISTRANSLATION OR AS A RESULT OF LOSS OF DATA. </p>\r\n        <p class="ft02">&nbsp;</p>\r\n        <p class="ft02">TO THE EXTENT PERMITTED BY APPLICABLE LAW, BNYM SHALL NOT BE LIABLE FOR ANY LOSS OR DAMAGE WHATSOEVER INCURRED OR EXPERIENCED BY YOU ARISING DIRECTLY OR INDIRECTLY AS A RESULT OF YOUR USE, INABILITY TO USE OR RELIANCE ON THIS SITE OR THE CONTENT, AND BNYM EXPRESSLY DISCLAIMS ALL LIABILITY FOR ERRORS AND OMMISSIONS IN THE CONTENT ON THIS SITE AND FOR THE USE OR INTERPRETATION OF ANY INFORMATION CONTAINED ON THE SITE. </p>\r\n        <p class="ft02">&nbsp;</p>\r\n        <p class="ft02">UNDER NO CIRCUMSTANCES SHALL BNYM BE LIABLE TO YOU IN CONTRACT, TORT OR OTHERWISE FOR ANY LOSSES OR DAMAGE (WHETHER SUCH LOSSES OR DAMAGE WERE FORESEEN, FORESEEABLE, KNOWN OR OTHERWISE), INCLUDING, WITHOUT LIMITATION, ANY SPECIAL, INDIRECT, INCIDENTAL, PUNITIVE, EXEMPLARY OR CONSEQUENTIAL LOSS OR DAMAGE (INCLUDING BUT NOT LIMITED TO LOST PROFITS, LOST OPPORTUNITY, TRADING LOSSES OR DAMAGES THAT RESULT FROM USE OR LOSS OF USE OF THE SITE), WHETHER ARISING OUT OF, OR IN CONNECTION WITH OR IN RELATION TO THIS SITE OR THE CONTENT, OR THE SUPPLY OR NON-SUPPLY OF ANY OF THE FOREGOING OR OTHERWISE UNDER THIS EASA.<br />&#160;</p>\r\n        <p class="ft03">Trademarks,&#160;Copyrights&#160;and&#160;other&#160;Intellectual&#160;Property&#160;&#160;</p>\r\n        <p class="ft02">Except where otherwise expressly noted or as noted below, all Content contained on this Site, including the graphics, icons and overall appearance of the Site, is owned or licensed by BNYM and its third party providers and is protected by applicable copyrights, trademarks, service marks and/or other intellectual property rights. Such Content is solely for the personal, non-commercial use of Users. Unless otherwise specified, you may not copy (other than a copy for personal use), modify, distribute, transmit, display, perform, reproduce, transfer, resell, or republish any of the Content of this Site without the prior written consent of BNYM. </p>\r\n        <p class="ft02">&nbsp;</p>\r\n        <p class="ft02">All copyrights, trademarks, service marks, patents, trade names, logos and other intellectual property (“Intellectual Property”) displayed on the Site are proprietary to BNYM and/or their respective owners (e.g., Funds). Nothing contained on the Site should be construed as granting a license of any kind to use any Intellectual Property. Any unauthorized use of images displayed on the Site may be a violation of federal trademark and copyright laws. The posting of the Content of this Site neither constitutes a waiver of any of BNYM’s proprietary rights (or any Fund’s or other party’s proprietary rights) in the Intellectual Property, nor a transfer by implication, estoppel, or otherwise of any such rights or of any license to the Site user or to any third party. The Content of this Site is protected by international copyright laws, both as individual works and as a collection and by international trademark laws. You agree not to remove or obscure any Intellectual Property or \r\n            other notices or legends from any Content you obtain from the Site. Your use of the Intellectual Property displayed on the Site, except as provided herein, is strictly prohibited.<br />&#160;</p>\r\n        <p class="ft03">Links&#160;to&#160;Other&#160;Websites&#160;&#160;</p>\r\n        <p class="ft02">BNYM may establish links between this Site and one or more websites operated or generated by third parties. BNYM has no control over any such other third-party websites or the contents therein. These links are provided solely as a convenience to you and shall not constitute an endorsement by BNYM of such websites, the contents of those websites, or the operators of those websites. BNYM is not responsible for the content, accuracy, or timelines of any links to other websites, nor is it responsible for any websites that may contain links to this website. Following links to any off-site pages or other websites shall be entirely at your own risk, and BNYM does not make any warranties, expressed or implied, with regard to information obtained from other websites, including without limitation the accuracy or reliability of any information, data, opinions, advice or statements made on such websites or the for the quality of any products or services available on such websites. \r\n            BNYM shall not be liable for any loss or damage arising from your reliance upon or use of such websites. </p>\r\n        <p class="ft02">&nbsp;</p>\r\n        <p class="ft02">You shall not display hyperlinks on your website to any web site owned or operated by BNYM (a “BNYM Site”). If you desire to display on your website a hyperlink to a BNYM Site, you must enter into a written agreement with BNYM governing such display. Access to any BNYM Site does not authorize you to use BNYM’s<br />&#160;</p>\r\n        <p class="ft03">Privacy&#160;&#160;</p>\r\n        <p class="ft02">Please review our Privacy Policy, which is a part of this Agreement and hereby incorporated by reference. BNYM may change the terms of the Privacy Policy at any time by posting changes on line and you should review these terms regularly to ensure that you are aware of any changes made by BNYM. Your continued use of this Site after changes are posted means you agree to be legally bound by the Privacy Policy as updated and/or amended.</p>\r\n        <p class="ft02">&nbsp;</p>\r\n        <p class="ft03">Confidentiality&#160;of&#160;User&#160;Identification&#160;and&#160;Passwords&#160;&#160;</p>\r\n        <p class="ft02">You agree that you will keep your user identification and password confidential. You may not disclose your user identification and password to any other party. You agree to implement security policies and procedures intended to protect the confidentiality of your user identification and password. You shall promptly notify BNYM in the event that you become aware of any actual or potential disclosure of your user name or password to any other party. Because many of the Funds referred to on the Site are privately offered, the Content will also be subject to any confidentiality provisions contained within the applicable Fund documents. You are required to advise BNYM if, at any time, you are no longer authorized to have access to the Site (or a restricted area of the Site), or if the conditions which entitle you to access the Site cease to exist. You are responsible for all uses of your user name and password whether or not you have expressly or impliedly authorized such use.<br />&#160;</p>\r\n        <p class="ft03">Indemnification&#160;&#160;</p>\r\n        <p class="ft02">You agree to indemnify, defend and hold harmless BNYM, its officers, directors, employees, affiliates, licensors, information providers, suppliers and agents (“Indemnified Parties”) from and against any and all claims, liabilities, costs and expenses, including third party claims and expenses and damages that are incurred by Indemnified Parties (including attorneys’ fees and costs), arising out of or in any way connected with your access to or use of this Site or any use of your user name or password, from your breach or violation of any of the terms and conditions of this Agreement, or from any decisions that you make based on information available on the Site.<br />&#160;</p>\r\n        <p class="ft03">Termination&#160;&#160;</p>\r\n        <p class="ft02">The rights granted to you herein terminate immediately upon any violation by you of any of the terms of this Agreement. BNYM reserves the right to terminate or interrupt your access to this Site at any time, without notice, for any reason whatsoever. You agree that BNYM shall not be liable to you or any third party for any termination or interruption of your access to this Site or due to the unavailability of any products or information to any users.<br />&#160;</p>\r\n        <p class="ft03">Jurisdiction&#160;and&#160;Governing&#160;Law&#160;&#160;</p>\r\n        <p class="ft02">The Content of this Site is available only in the United States and other countries where permitted by law. The Site (excluding any linked sites) is controlled by BNYM from its offices within the United States and the State of New York. This EASA is governed by and construed in accordance with the laws of the State of New York without regard to conflict of law provisions. The Site is not intended for distribution to or use by any person or entity in any jurisdiction or country where such distribution or use would be contrary to law or regulation or would subject BNYM to any registration requirements. Accordingly, all persons who access this Site are required to inform themselves of and to comply with any local laws or regulations which prohibit or restrict them from availing of the products and services of BNYM. </p>\r\n        <p class="ft02">Any action against BNYM arising from or relating to your access to and use of the Site and the provisions of this EASA must be brought by you in an appropriate state or federal court located in the County of New York, State of New York, and must be commenced within one (1) year after the claim or cause of action arises. Each party specifically consents to jurisdiction and venue in the State of New York, County of New York. Each party unconditionally waives the right to trial by jury in any action arising out of or relating to this EASA.<br />&#160;</p>\r\n        <p class="ft03">Additional&#160;Terms&#160;and&#160;Conditions&#160;of&#160;Use&#160;</p>\r\n        <p class="auto-style5">To the extent that certain areas of the Site may be subject to additional terms and conditions of use, by using such areas, or any part thereof, you agree to be bound by such additional terms and conditions of use.</p>\r\n        <p class="auto-style1"> </p>\r\n        <p class="ft01">&nbsp;</p>\r\n        <p class="ft03">No&#160;Waiver&#160;&#160;</p>\r\n        <p class="ft02">No waiver by BNYM of any right under or term or provision of this EASA will be deemed a waiver of any other right, term, or provision of this EASA at that time or a waiver of that or any other right, term, or provision of this EASA at any other time. In the event any of the terms or provisions of this EASA shall be held to be unenforceable by a court of competent jurisdiction, the remaining terms and provisions shall continue in full force and effect.</p>\r\n        <p class="auto-style1">&nbsp;</p>\r\n        <p class="auto-style1">&nbsp;</p>\r\n        <p class="ft03">&#160;</p>\r\n</body>\r\n</html>\r\n'),
a.put("partials/public/aisElectronicAccessServicesAgreement.html",'<div class="modal-content nxn-self-registration-easa-model-height">\r\n    <div class="modal-header">\r\n        <h3 class="modal-title">ELECTRONIC ACCESS SERVICES AGREEMENT\r\n            <button type="button" class="close" ng-click="modalOptions.close()" ng-show="!modalOptions.hideHeaderClose">&times;</button>\r\n        </h3>\r\n    </div>\r\n    <!-- set the parent variable to the this scope. -->\r\n    <div ng-if="modalOptions.bodyUrl" ng-include="modalOptions.bodyUrl"></div>\r\n    <div ng-if="!modalOptions.bodyUrl">\r\n        <div class="modal-body" ng-include="\'partials/public/aisElectronicAccessAgreement.html\'"></div>\r\n        <div class="modal-footer">\r\n            <button type="submit" class="btn btn-primary" data-ng-click="modalOptions.ok(\'OkValue\')">Agree</button>\r\n            <button type="button" class="btn btn btn-default" data-ng-click="modalOptions.ok(\'CancelValue\')">Disagree</button>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("partials/public/cttConfirmEscrowElectronicAccessAgreement.html",'<div class="modal-content">\r\n    <div class="modal-header">\r\n        <h3 class="modal-title">Terms of Use and Privacy Statements\r\n            <button type="button" class="close" ng-click="modalOptions.close()"\r\n                    ng-show="!modalOptions.hideHeaderClose">&times;</button>\r\n        </h3>\r\n    </div>\r\n    <!-- set the parent variable to the this scope. -->\r\n    <div ng-if="modalOptions.bodyUrl" ng-include="modalOptions.bodyUrl"></div>\r\n    <div ng-if="!modalOptions.bodyUrl">\r\n        <div class="modal-body">\r\n            <p>\r\n                Do you want to exit the registration Process?\r\n            </p>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="submit" class="btn btn-primary" data-ng-click="modalOptions.ok(\'yesValue\')">Yes</button>\r\n            <button type="button" class="btn btn btn-default" data-ng-click="modalOptions.ok(\'noValue\')">No</button>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("partials/public/cttEscrowElectronicAccessAgreement.html",'<div class="modal-content">\r\n  <div class="modal-header">\r\n      <h3 class="modal-title">Terms of Use and Privacy Statements\r\n          <button type="button" class="close" ng-click="modalOptions.close()"\r\n                  ng-show="!modalOptions.hideHeaderClose">&times;</button>\r\n      </h3>\r\n  </div>\r\n\r\n  <!-- set the parent variable to the this scope. -->\r\n  <div ng-if="modalOptions.bodyUrl" ng-include="modalOptions.bodyUrl"></div>\r\n  <div ng-if="!modalOptions.bodyUrl">\r\n      <div class="modal-body">\r\n          <p>\r\n              BNY Mellon is required to collect certain information and documentation necessary to identify its clients and to provide escrow agent services.  ESCROW ADVANTAGE provides an online platform for our client, or its authorized agent (including, but not limited to, attorneys), to submit the necessary information and documents.  All information provided is subject to further review and acceptance by BNY Mellon.\r\n              Provision of any information or documents via ESCROW ADVANTAGE does not create an escrow agent relationship between BNY Mellon and the client.  Any escrow agent services performed by BNY Mellon shall be subject solely to the terms of a definitive escrow agreement entered into between BNY Mellon the client, and any other interested parties.\r\n              By using ESCROW ADVANTAGE you represent and warrant that (i) any information you provide is true and accurate; and (ii) you are authorized to provide such information.\r\n          </p><br>\r\n          <p>Click Agree below to indicate that you understand and accept these terms.  If you do not agree to these terms you may not use ESCROW ADVANTAGE.</p>\r\n      </div>\r\n      <div class="modal-footer">\r\n          <button type="submit" class="btn btn-primary" data-ng-click="modalOptions.ok(\'OkValue\')">Agree</button>\r\n          <button type="button" class="btn btn btn-default" data-ng-click="modalOptions.ok(\'CancelValue\')">Disagree</button>\r\n      </div>\r\n  </div>\r\n</div>'),a.put("partials/public/header-public.html",'<div class="nexen-header login-header">\r\n    <div class="logobar">\r\n        <div class="nexen-logo">\r\n            <a ui-sref="home" style="text-decoration: none" class="visible-sm visible-md visible-lg"><img class="site-title " alt="NEXEN" src="{{nxnLogo}}"/></a>\r\n            <a ui-sref="home" style="text-decoration: none" class="visible-xs"><img class="site-title " alt="NEXEN" src="{{nxnLogoMobile}}"/></a>\r\n       </div>\r\n    </div>\r\n</div>'),a.put("partials/public/login_container.html",'<div id="login-nav" class="nxn-mar-bot-20">\r\n    <div class="navbar navbar-default nexen-navbar" role="navigation">\r\n      <div class="navbar-collapse" style="padding-left:0;">\r\n          <ul class="nav navbar-nav">\r\n            <li><a class="dropdown-toggle" href="/apps/home" style="border-bottom:0">HOME</a></li>\r\n            <li class="active hidden-xs"><a href="">{{header.title}}</a></li>\r\n          </ul>\r\n      </div>\r\n    </div>\r\n</div>\r\n\r\n<div ui-view="detail"></div>\r\n\r\n\r\n\r\n'),a.put("partials/public/nav-public.html",""),a.put("partials/public/privacyStatement.html",'<div class="nxn-mar-bot-20" id="login-nav">\r\n    <div class="navbar navbar-default nexen-navbar" role="navigation">\r\n        <div class="navbar-collapse" style="padding-left:0;">\r\n            <ul class="nav navbar-nav">\r\n                <li>\r\n                    <a class="dropdown-toggle" href="/apps/home" id="homeLink" style="border-bottom:0">HOME</a>\r\n                </li>\r\n                <li class="active hidden-xs">\r\n                    <a href="">{{header.title}}</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="nxn-content-based-page">\r\n\r\n    <h1 id="headerPrivacyPolicy">Privacy Statement</h1>\r\n\r\n    <div class="row" ng-controller="ScrollTopController">\r\n\r\n        <div class="col-md-4 col-md-push-8" id="navCol">\r\n\r\n            <ul class="list-unstyled">\r\n                <li><a href="public/privacyStatement#OnlinePrivacyStatement">Online Privacy Statement</a></li>\r\n                <li><a href="public/privacyStatement#Applicability">Applicability</a></li>\r\n                <li><a href="public/privacyStatement#modifications">Modifications</a></li>\r\n                <li><a href="public/privacyStatement#CollectionandUseofYourInformation">Collection and Use of Your Information (including via Cookies)</a></li>\r\n                <li><a href="public/privacyStatement#SharingofYourInformation">Sharing of Your Information</a></li>\r\n                <li><a href="public/privacyStatement#ThirdPartyAdvertisers">Third Party Advertisers</a></li>\r\n                <li><a href="public/privacyStatement#ThirdPartySites">Third Party Sites</a></li>\r\n                <li><a href="public/privacyStatement#SecurityofPersonalInformation">Security of Personal Information</a></li>\r\n                <li><a href="public/privacyStatement#ChildrenInformation">Children\'s Information(Children’s Online Privacy Protection Act)</a></li>\r\n                <li><a href="public/privacyStatement#NoticetoCaliforniaUsersRequiredbyState">Notice to California Users Required by State</a></li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div class="col-md-8 col-md-pull-4">\r\n            <h2 class="nxn-terms-of-use-first-heading" id="OnlinePrivacyStatement">Online Privacy Statement</h2>\r\n            <p>The Bank of New York Mellon Corporation and its affiliates (collectively &quot;<b>BNYM</b>&quot;)\r\n                appreciate\r\n                your concerns about the privacy of personal information that you provide to us through this website\r\n                (&quot;<b>Site</b>&quot;). Accordingly, we have posted this OnlinePrivacy Statement to explain how we\r\n                handle such\r\n                information.\r\n            </p>\r\n            <h2 id="Applicability">Applicability</h2>\r\n            <p>If you do not agree to the terms of this Online Privacy Statement, please do not provide us with any\r\n                information\r\n                and do not use the Site. By using the Site and voluntarily providing your personally identifiable\r\n                information to\r\n                us, you consent to the collection and use of such personally identifiable information as set forth in\r\n                this Online\r\n                Privacy Statement.\r\n            </p>\r\n            <p>This Online Privacy Statement applies to this Site. Our online products and services may have different\r\n                Online\r\n                Privacy Statements. To view the Online Privacy Statement for specific products and services please click\r\n                on the\r\n                Privacy link on that site.\r\n            </p>\r\n            <h2 id="modifications">Modifications</h2>\r\n            <p>We may modify this Online Privacy Statement at any time so please check from time to time for such\r\n                modifications.\r\n            </p>\r\n            <h2 id="CollectionandUseofYourInformation">Collection and Use of Your Information (including via Cookies)</h2>\r\n            <p>We use cookies, web beacons and similar technologies (called &quot;Cookies&quot; in this Online Privacy\r\n                Statement) to track information provided to us by your browser and by our software application when you\r\n                use the\r\n                Site. A cookie is a small piece of information that a website stores on the web browser on your device\r\n                and can\r\n                later retrieve. &quot;Session&quot; Cookies are temporary and will expire at the end of a browser\r\n                session; that is,\r\n                when you leave a website. Session Cookies allow a website to recognize you and carry information as you\r\n                navigate\r\n                between pages during a single browser session and allow you to use the website most efficiently.\r\n                &quot;Persistent&quot; Cookies, in contrast, remain in the Cookie file of your browser even after you\r\n                leave a\r\n                website and after the browser is closed. They enable a website to recognize you upon your return,\r\n                remember your\r\n                preferences and provide tailored services to you. A cookie will not contain information that will enable\r\n                us to\r\n                contact you via telephone, e-mail, or other means.\r\n            </p>\r\n            <p>We, and third party service providers acting on our behalf (such as Google Analytics, see\r\n                <a id="google" href="http://www.google.com/policies/privacy/partners/" target="_blank" rel="noopener noreferrer" >here</a>),\r\n                use session and persistent Cookies to:\r\n            </p>\r\n            <ul>\r\n                <li>Remember preferences that you submit as well as those generated from your usage data and your\r\n                    responses to\r\n                    polls and surveys on our Site;\r\n                </li>\r\n                <li>Measure your use of our Site in an effort to improve its quality and enhance your overall\r\n                    experience,\r\n                    including tracking page views, time and date of Site access, and other usage data, and identifying\r\n                    your operating\r\n                    system and browser type (but not other information about your computer or the programs on it) and\r\n                    your general\r\n                    geographic location; and\r\n                </li>\r\n                <li>Allow you to share certain information on our Site via social media bookmarking buttons, email or on\r\n                    social\r\n                    networking sites.\r\n                </li>\r\n            </ul>\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n            <p>The third party service providers mentioned above use any personal information they collect on our behalf\r\n                solely\r\n                for the purpose of providing the contracted service to us. They have also agreed to confidentiality\r\n                restrictions.\r\n            </p>\r\n            <p>Most browsers are initially set to accept Cookies. However, you have the ability to change your browser\r\n                settings. It may also be possible to configure your browser settings to enable acceptance of specific\r\n                Cookies or to\r\n                notify you each time a new Cookie is about to be stored on your device enabling you to decide whether to\r\n                accept or\r\n                reject the Cookie. You can also disable Cookies by configuring your browser setting to reject Cookies.\r\n                Please refer\r\n                to the help section of your browser for instructions on disabling Cookies. For more information about\r\n                Cookies, how\r\n                they work, why they are so useful and how to disable them, you can visit\r\n                <a id="allaboutcookies" href="http://www.allaboutcookies.org/" target="_blank" rel="noopener noreferrer">www.allaboutcookies.org.</a>\r\n            </p>\r\n            <p>If you do not wish to accept Cookies from this Site, please either disable them or refrain from using\r\n                this Site.\r\n                If Cookies are disabled, it may mean that you experience reduced functionality or will be prevented from\r\n                using all\r\n                or part of this Site.\r\n            </p>\r\n            <p>We may use aggregated usage data to track trends and analyze patterns on the Site. You may also\r\n                voluntarily\r\n                submit information, including by responding to our online polls and surveys, requesting information from\r\n                us or\r\n                asking to be contacted by one of our representatives. If you work for one of our institutional\r\n                (business) clients,\r\n                we may obtain your business contact information from your firm. If you register to enter an area of this\r\n                Site, the\r\n                Site will recognize who you are and collect all information that you submit (including subscription to\r\n                emails,\r\n                etc.). Any information collected about you from this Site may be associated with other identifying\r\n                information that\r\n                we have about you.\r\n            </p>\r\n            <p>In addition to the above uses, we may use your information for the purpose of conducting business with\r\n                you,\r\n                managing our relationship with you, and advising you of products and services that we believe might be\r\n                of interest.\r\n                The information collected also is used to provide a record of communications between BNYM and its Site\r\n                visitors and\r\n                to comply with any applicable legal and/or regulatory requirements.\r\n            </p>\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n            <h2 id="SharingofYourInformation">Sharing of Your Information</h2>\r\n            <p>We do not sell or rent your personally identifiable information to third parties. We share your\r\n                information only\r\n                with our (i) affiliates; (ii) service providers that have agreed to confidentiality restrictions and use\r\n                any\r\n                personal information they collect on our behalf solely for the purpose of providing the contracted\r\n                service to us;\r\n                (iii) as otherwise described herein in order to provide you with our services; and (iv) to comply with\r\n                all\r\n                applicable laws, regulations and rules, and requests of law enforcement, regulatory and other\r\n                governmental\r\n                agencies. Also, we may share in aggregate, statistical form, non-personal information regarding the\r\n                visitors to the\r\n                Site, traffic patterns, and Site usage with our partners, affiliates or advertisers.\r\n            </p>\r\n            <p>Your information will be transferred and stored in jurisdictions, including the United States, India and\r\n                other\r\n                jurisdictions that may be subject to differing standards of data protection requirements. BNYM will take\r\n                appropriate steps to ensure that transfers of personally identifiable information are in accordance with\r\n                applicable\r\n                law.\r\n            </p>\r\n            <p>BNYM may, in the future, sell or otherwise transfer some or all of its assets to a third party. Your\r\n                personally\r\n                identifiable information, technical information about your device or browser and/or other anonymous\r\n                information we\r\n                obtain from you via the Site may be disclosed to any potential or actual third party purchasers of such\r\n                assets\r\n                and/or may be among those assets transferred.\r\n            </p>\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n            <h2 id="ThirdPartyAdvertisers">Third Party Advertisers</h2>\r\n            <p>We may use third party advertising companies to serve ads on our behalf on other websites across the\r\n                Internet.\r\n                In order to measure and track the effectiveness of such ads, these companies typically use Cookies; so a\r\n                Cookie may\r\n                be set in the Cookie file of your browser when you click on one of our ads or visit a webpage associated\r\n                with our\r\n                ad campaigns. These companies may also use and measure information about your visits to our Site as part\r\n                of this\r\n                same process. The information provided to us by these companies about you will be de-identified.\r\n            </p>\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n            <h2 id="ThirdPartySites">Third Party Sites</h2>\r\n            <p>This Site may contain links to third party sites (including social media bookmarking buttons that enable\r\n                you to\r\n                share certain content on our Site). Please review the cookie and privacy statements of these third party\r\n                sites to\r\n                understand how they may use Cookies and your information. Our Online Privacy Statement does not apply to\r\n                your use\r\n                of a third party site.\r\n            </p>\r\n            <h2 id="SecurityofPersonalInformation">Security of Personal Information</h2>\r\n            <p>We utilize reasonable security technologies to protect sensitive information. However, the security of\r\n                this\r\n                information depends in part on the security of the computer you use to communicate with us, the security\r\n                you use to\r\n                protect User IDs and passwords, and the security provided by your internet access services provider. We\r\n                are not\r\n                responsible for the security of your internet access services provider; you should review the security\r\n                and privacy\r\n                policies of your internet access services provider carefully. Information that you access via this Site\r\n                may be\r\n                stored on your computer during your session for your convenience. If others have access to your computer\r\n                or your\r\n                User ID and password, they may be able to access this information. We are not responsible for the\r\n                security or\r\n                privacy of information communicated to or from such a computer. Finally, you should keep any\r\n                correspondence you\r\n                receive relating to this Site or the Services (including, but not limited to registration information,\r\n                emails, or\r\n                any other information) confidential and in a safe place.\r\n            </p>\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n            <h2 id="ChildrenInformation">Children Information</h2>\r\n            <p>We respect the privacy of your children and do not knowingly collect or retain personally identifiable\r\n                information from children under the age of 13 through this Site.\r\n            </p>\r\n            <h2 id="NoticetoCaliforniaUsersRequiredbyState">Notice to California Users Required by State</h2>\r\n            <p>We collect, use, retain and share information we receive through this Site in accordance with the above\r\n                section\r\n                entitled &quot;<i>Collection and Use of Your Information</i>&quot;. For information about whether third\r\n                parties may\r\n                collect personal information about your online activities over time and across other websites when you\r\n                use this\r\n                Site, please see the above sections entitled &quot; <i>Collection and Use of Your Information</i>&quot;\r\n                and\r\n                &quot;<i>Third Party Advertisers</i>&quot;. This Site currently does not respond to &quot;do not track&quot;\r\n                signals or similar mechanisms.\r\n            </p>\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("partials/public/public_container.html",'<div ui-view="detail"></div>'),a.put("partials/public/requestAccess.html",'<div id="login-nav" class="nxn-mar-bot-20">\r\n    <div class="navbar navbar-default nexen-navbar" role="navigation">\r\n        <div class="navbar-collapse" style="padding-left:0;">\r\n            <ul class="nav navbar-nav">\r\n                <li><a class="dropdown-toggle" href="/apps/home" style="border-bottom:0">HOME</a></li>\r\n                <li class="active hidden-xs"><a href="">{{header.title}}</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<h1>Request Access</h1>\r\n\r\n<div class="row" ng-controller="ScrollTopController">\r\n\r\n\t<div class="col-sm-6">\r\n  \t<h2>ADR Inform</h2>\r\n      <p>To request access to ADR INFORM, please contact your Depositary Receipts Specialist.</p>\r\n      \r\n      <h2>Alternative Investment Services</h2>\r\n      <p>To request access to Alternative Investment Services within the BNY Mellon Connect Portal, please contact your Relationship Manager.</p>\r\n      \r\n      <h2>Corporate Trust</h2>\r\n      <p>To request access to Corporate Trust within the BNY Mellon Connect Portal, please contact your Relationship Manager.</p>\r\n      \r\n      <h2>Enterprise Financial Messaging</h2>\r\n      <p>To request access to Enterprise Financial Messaging Application within the BNY Mellon Connect Portal, please contact Global Help Desk.</p>\r\n      \r\n      <h2>Enterprise Payment Hub</h2>\r\n      <p>Access to EPH applications should be made via SAM form 4100 which can be found on the Global Access Management Operations site.</p>\r\n      \r\n      <h2>Global Markets Portal</h2>\r\n      <p>To request access to Global Markets within the BNY Mellon Connect Portal, please contact your Global \r\n         Markets representative and <a href="mailto:GMAccess@bnymellon.com">GMAccess@bnymellon.com</a>.</p>\r\n         \r\n      <h2>Global Trade Portal</h2>\r\n      <p>To request access to Global Trade Portal Applications within the BNY Mellon Connect Portal, please contact your Relationship Manager.</p>\r\n      \r\n      <h2>Liquidity DIRECT<sup>SM</sup></h2>\r\n      <p>Opening a LiquidityDIRECT account is easy. <a href="https://connect.bnymellon.com/public_content/marketingContent/Connect/Documents/content/docs/Liquidity_Services_Open_Account.pdf" target="_blank">Click here</a> to download the account opening forms and instructions.</p>\r\n      \r\n      <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n      \r\n    </div><!--/.col-->\r\n  \r\n    <div class="col-sm-6">\r\n      <h2>MyOnCore</h2>\r\n        <p>To request access to MyOnCore Oversight Dashboard within the BNY Mellon Connect Portal, please contact your Relationship Manager.</p>\r\n        \r\n        <h2>Reconciliation</h2>\r\n        <p>To request access to Reconciliation Application within the BNY Mellon Connect Portal, please contact Global Help Desk.</p>\r\n        \r\n        <h2>TreasuryEdge<sup>SM</sup></h2>\r\n        <p>Please click on link below to request an access to TreasuryEdge Application.</p>\r\n        <p><a href="#"><span class="fa fa-user"></span> Register New User ID</a></p>\r\n        \r\n        <h2>Workbench</h2>\r\n        <p>In order to get access to the Workbench site, contact your Relationship Manager. \r\n           If in doubt, you can also contact your respective Workbench Client Support Group. For BNY Mellon employees, \r\n           <a href="https://sam.bnymellon.net/eSmartForm/init.do?requestType=Workbench">click here</a> to get access to Workbench.</p>\r\n        <dl class="nexen-contact-list">\r\n          <dt>Workbench</dt>\r\n          <dd><a href="tel:18004787599" class="tel phone-call"><span class="fa fa-phone fa-fw"></span> 1 (800) 478 7599</a><span class="tel phone-display"><span class="fa fa-phone fa-fw"></span> 1 (800) 478 7599</span><a href="mailto:workbench@bnymellon.com"><span class="fa fa-envelope fa-fw"></span> Workbench@bnymellon.com</a></dd>\r\n          <dt>Workbench / INFORM</dt>\r\n          <dd><a href="tel:18007834893" class="tel phone-call"><span class="fa fa-phone fa-fw"></span>1 (800) 783 4893</a><span class="tel phone-display"><span class="fa fa-phone fa-fw"></span>1 (800) 783 4893</span><a href="mailto:Americas.WorkbenchSSO@bnymellon.com"><span class="fa fa-envelope fa-fw"></span> Americas.WorkbenchSSO@bnymellon.com</a></dd>\r\n          <dt style="padding-top:5px"><img src="img/CIBCMellonContact.gif" width="136" height="28" alt="CIBC MELLON"></dt>\r\n          <dd><a href="tel:18884392457" class="tel phone-call"><span class="fa fa-phone fa-fw"></span>1 (888) 439 2457</a><span class="tel phone-display"><span class="fa fa-phone fa-fw"></span>1 (888) 439 2457</span>\r\n              <a href="tel:14166435360" class="tel phone-call"><span class="fa fa-phone fa-fw"></span>1 (416) 643 5360</a><span class="tel phone-display"><span class="fa fa-phone fa-fw"></span>1 (416) 643 5360</span>\r\n              <a href="mailto:workbench@CIBCMellon.com"><span class="fa fa-envelope fa-fw"></span> Workbench@CIBCMellon.com</a></dd>\r\n        </dl>\r\n        \r\n        <p><a ng-click="scrollToTop()" class="hidden-lg hidden-md hidden-sm nxn-cursor-pointer">Top of the Page</a></p>\r\n        \r\n    </div><!--/.col-->\r\n\r\n</div>\r\n\r\n'),a.put("partials/public/systemRequirements.html",'<div id="login-nav" class="nxn-mar-bot-20">\r\n    <div class="navbar navbar-default nexen-navbar" role="navigation">\r\n        <div class="navbar-collapse" style="padding-left:0;">\r\n            <ul class="nav navbar-nav">\r\n                <li><a class="dropdown-toggle" href="/apps/home" style="border-bottom:0">HOME</a></li>\r\n                <li class="active hidden-xs"><a href="">{{title}}</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="nxn-content-based-page">\r\n    <h1 id="headerSystemRequirements">System Requirements</h1>\r\n\r\n    <div class="row" ng-controller="ScrollTopController" ng-show="!hasError">\r\n\r\n        <div class="col-sm-12">\r\n\r\n            <p ng-bind-html="sysReqHtml | nxnTrustAsHtml"></p>\r\n\r\n            <p><a ng-click="scrollToTop()" class="nxn-cursor-pointer">Top of the Page</a></p>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="col-md-8" ng-show="hasError">\r\n        <div nxn-alert nxn-alert-type="alert-warning" type="warning">{{showMessage}}</div>\r\n    </div>\r\n</div>'),a.put("partials/public/tour.html",'<span ng-if="pageNum === 1">\r\n    <img id="tourImg1" src="img/login_help/nxn-login-experience1.png" width="1043" height="790" usemap="#map1">\r\n</span>\r\n<span ng-if="pageNum === 2">\r\n    <img id="tourImg2" src="img/login_help/nxn-login-experience2.png" width="1043" height="790" usemap="#map2">\r\n</span>\r\n<span ng-if="pageNum === 3">\r\n    <img id="tourImg3" src="img/login_help/nxn-login-experience3.png" width="1043" height="790" usemap="#map3">\r\n</span>\r\n<span ng-if="pageNum === 4">\r\n    <img id="tourImg4" src="img/login_help/nxn-login-experience4.png" width="1043" height="790" usemap="#map4">\r\n</span>\r\n<span ng-if="pageNum === 5">\r\n    <img id="tourImg5" src="img/login_help/nxn-login-experience5.png" width="1043" height="790" usemap="#map5">\r\n</span>\r\n<map name="map1">\r\n    <area shape="rect" coords="520,360,645,400" ng-click="goToNext()">\r\n    <area shape="rect" coords="655,360,905,400" ng-click="redirectToConnect()">\r\n</map>\r\n<map name="map2">\r\n    <area shape="rect" coords="90,420,215,460" ng-click="goToNext()">\r\n    <area shape="rect" coords="230,420,455,460" ng-click="redirectToConnect()">\r\n</map>\r\n<map name="map3">\r\n    <area shape="rect" coords="375,610,495,650" ng-click="goToNext()">\r\n    <area shape="rect" coords="510,610,735,650" ng-click="redirectToConnect()">\r\n</map>\r\n<map name="map4">\r\n    <area shape="rect" coords="250,610,370,650" ng-click="goToNext()">\r\n    <area shape="rect" coords="385,610,610,650" ng-click="redirectToConnect()">\r\n</map>\r\n<map name="map5">\r\n    <area shape="rect" coords="410,370,635,410" ng-click="redirectToConnect()">\r\n</map>'),a.put("custom/table-footer",'<div class="nxn-table-toolbar bot-toolbar ng-cloak">\r\n    <div class="row">\r\n\r\n        <div class="col-xs-7 col-sm-6 col-md-5 col-left" ng-class=" params.isSearchAvailable() ? \'col-lg-4\' : \'col-lg-8\'">\r\n\r\n            <div class="nxn-pagination-container clearfix">\r\n                <div class="nxn-paging-item btn-back" ng-hide="params.isSinglePage()">\r\n                    <button type="button" class="btn btn-primary" ng-disabled="params.isFirst()"\r\n                        ng-click="params.prevPage()"><i class="fa fa-angle-left nxn-fa-xl nxn-white-imp"></i></button>\r\n                </div>\r\n\r\n                <div class="nxn-paging-item select-page" ng-hide="params.isSinglePage()">\r\n                    <ui-select theme="selectize" ng-model="selectedPage.value"\r\n                        on-select="params.setSelectedPage($item.num)">\r\n                        <ui-select-match placeholder="">Page {{selectedPage.value.num}}</ui-select-match>\r\n                        <ui-select-choices repeat="page in totalPages">Page {{page.num}}</ui-select-choices>\r\n                    </ui-select>\r\n                </div>\r\n\r\n                <div class="nxn-paging-item btn-fwd" ng-hide="params.isSinglePage()">\r\n                    <button type="button" class="btn btn-primary" ng-disabled="params.isLast()"\r\n                        ng-click="params.nextPage()"><i class="fa fa-angle-right nxn-fa-xl nxn-white-imp"></i></button>\r\n                </div>\r\n\r\n                <div class="nxn-paging-item select-row-range" ng-if="(params.getAvailableCounts())" ng-hide="(params.isSinglePage()) && (params.getTotalLength() <= params.getMinimumPaginationCount())" ng-class="params.dynamicWidth(selectedCount.value.name)">\r\n                    <ui-select theme="selectize" ng-model="selectedCount.value"\r\n                        on-select="params.setCount($item.value)">\r\n                        <ui-select-match placeholder="">{{selectedCount.value.name}} Rows</ui-select-match>\r\n                        <ui-select-choices repeat="availableCount in availableCounts">{{availableCount.name}} Rows\r\n                        </ui-select-choices>\r\n                    </ui-select>\r\n                </div>\r\n\r\n                <div class="nxn-paging-item row-range" ng-hide="params.getTotalLength() === 0">\r\n                    <span>{{params.getPaginationRange()}}</span>\r\n                </div>\r\n\r\n            </div>\r\n            <!--nxn-pagination-container end-->\r\n        </div>\r\n        <!--col-->\r\n\r\n        <!--search column, which is only visible at large breakpoint-->\r\n        <div class="col-md-3 col-lg-4  visible-md visible-lg col-mid">\r\n\r\n        </div>\r\n\r\n        <!--icon column -->\r\n        <div class="col-xs-5 col-sm-6 col-md-4 col-lg-4 col-right">\r\n\r\n            <div class="nxn-table-icons-and-stamp-container">\r\n\r\n                <div class="nxn-table-icons-container">\r\n                    <div class="nxn-table-icons-inner-container">\r\n\r\n                        <div class="btn-group nxn-table-icon" ng-show="params.getIncludeCollapseGroups()">\r\n                            <a href="" ng-click="params.toggleCollapseGroups()"\r\n                                title="{{params.collapseText}} All Groups">\r\n                                <span class="fa {{params.collapseGroupBy ? \'fa-chevron-circle-right\':\'fa-chevron-circle-down\'}} fa-2x"></span>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <div class="btn-group nxn-table-icon" ng-if="columns">\r\n                            <a href="javascript:void(0)" data-toggle="dropdown" title="Show/Hide Columns"><span\r\n                                    class="fa fa-cog fa-2x"></span></a>\r\n                            <ul class="dropdown-menu dropdown-menu-right nxn-export-dropdown" role="menu">\r\n                                <li ng-repeat="column in columns | filter:{fixed: \'!true\'}">\r\n                                    <div class="checkbox" >\r\n                                        <label  ng-click="$event.stopPropagation()">\r\n                                            <input type="checkbox" ng-model="column.visible"\r\n                                            ng-disabled="{{column.title == \'Account Name\'}}"/>\r\n                                            <span class="nxn-settings-col-label">{{column.title}}</span>\r\n                                        </label>\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <span ng-if="params.groupedTable">\r\n                            <span nxn-export ng-if="params.isExportAvailable()"\r\n                                nxn-export-json="params.getExportJson()">\r\n                            </span>\r\n                        </span>\r\n                        <span ng-if="!params.groupedTable">\r\n                            <span nxn-export ng-if="params.isExportAvailable()"\r\n                                nxn-export-fields="params.getExportFields()"\r\n                                nxn-export-heading="params.getExportHeading()"\r\n                                nxn-export-paper-type="params.getExportPaperType()"\r\n                                nxn-export-as-of-date="params.getExportAsOfDate()"\r\n                                nxn-export-data="params.getExportData()"\r\n                                nxn-export-transform-fn="params.getExportTransformFn()">\r\n                            </span>\r\n                        </span>\r\n\r\n                        <div class="btn-group nxn-table-icon" ng-if="params.isRefreshable">\r\n                            <a href="javascript:void(0)" ng-click="params.refreshCurrentSet()" title="Refresh Data"><span\r\n                                    class="fa fa-refresh fa-2x"></span></a>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n                <!--nxn-icons-container-->\r\n\r\n                <div class="nxn-table-timestamp">\r\n                    <span><user-preferred-datetime date-to-format="params.getCurrentDataTime()"/></span>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <!--col-->\r\n\r\n\r\n        </div>\r\n        <!--row end-->\r\n    </div>\r\n'),
a.put("custom/table-header",'<div class="nxn-table-toolbar top-toolbar ng-cloak">\r\n\r\n    <div class="row first-row">\r\n\r\n        <div class="col-xs-12 col-sm-6 col-md-5 col-left" ng-class=" params.isSearchAvailable() ? \'col-lg-4\' : \'col-lg-8\' ">\r\n\r\n            <div class="nxn-pagination-container clearfix pull-left nxn-mar-top-2">\r\n                <div class="nxn-paging-item btn-back" ng-hide="params.isSinglePage()">\r\n                    <button type="button" class="btn btn-primary" ng-disabled="params.isFirst()"\r\n                        ng-click="params.prevPage()"><i class="fa fa-angle-left nxn-fa-xl nxn-white-imp"></i></button>\r\n                </div>\r\n\r\n                <div class="nxn-paging-item select-page" ng-hide="params.isSinglePage()">\r\n                    <ui-select theme="selectize" ng-model="selectedPage.value"\r\n                        on-select="params.setSelectedPage($item.num)">\r\n                        <ui-select-match placeholder="">Page {{selectedPage.value.num}}</ui-select-match>\r\n                        <ui-select-choices repeat="page in totalPages">Page {{page.num}}</ui-select-choices>\r\n                    </ui-select>\r\n                </div>\r\n\r\n                <div class="nxn-paging-item btn-fwd" ng-hide="params.isSinglePage()">\r\n                    <button type="button" class="btn btn-primary" ng-disabled="params.isLast()"\r\n                        ng-click="params.nextPage()"><i class="fa fa-angle-right nxn-fa-xl nxn-white-imp"></i></button>\r\n                </div>\r\n\r\n                <div class="nxn-paging-item select-row-range"\r\n                    ng-class="params.dynamicWidth(selectedCount.value.name)"\r\n                    ng-if="(params.getAvailableCounts())"\r\n                    ng-hide="(params.isSinglePage()) && (params.getTotalLength() <= params.getMinimumPaginationCount() )">\r\n                    <ui-select theme="selectize" ng-model="selectedCount.value"\r\n                        on-select="params.setCount($item.value)">\r\n                        <ui-select-match placeholder="">{{selectedCount.value.name}} Rows</ui-select-match>\r\n                        <ui-select-choices repeat="availableCount in availableCounts">{{availableCount.name}} Rows\r\n                        </ui-select-choices>\r\n                    </ui-select>\r\n                </div>\r\n\r\n                <div class="nxn-paging-item row-range" ng-hide="params.getTotalLength() === 0">\r\n                    <span>{{params.getPaginationRange()}}</span>\r\n                </div>\r\n\r\n            </div>\r\n            <!--nxn-pagination-container end-->\r\n        </div>\r\n        <!--col-->\r\n\r\n        <!--search column, which is only visible at large breakpoint-->\r\n\r\n        <div class="col-md-3 col-lg-4  visible-md visible-lg col-mid" >\r\n            <div class="form-group nxn-form-group-search" ng-if="params.isSearchAvailable()"\r\n                ng-hide="params.getTotalLength() === 0 && params.searchText === \'\'">\r\n\r\n                <input type="text" ng-model="params.searchText" class="form-control nxn-search-field"\r\n                placeholder="Search for..." name="srch-term" ng-change="params.updateSearch()">\r\n                <a class="nxn-search-icon"><span class="fa fa-search"></span></a>\r\n            </div>\r\n        </div>\r\n\r\n        <!--icon column -->\r\n        <div class="col-sm-6 col-md-4 col-lg-4 visible-sm visible-md visible-lg col-right">\r\n\r\n            <div class="nxn-table-icons-and-stamp-container">\r\n\r\n                <div class="nxn-table-icons-container">\r\n                    <div class="nxn-table-icons-inner-container">\r\n\r\n                        <div class="btn-group nxn-table-icon" ng-show="params.getIncludeCollapseGroups()">\r\n                            <a href="" ng-click="params.toggleCollapseGroups()"\r\n                                title="{{params.collapseText}} All Groups">\r\n                                <span class="fa {{params.collapseGroupBy ? \'fa-chevron-circle-right\':\'fa-chevron-circle-down\'}} fa-2x"></span>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <div class="btn-group nxn-table-icon" ng-if="columns">\r\n                            <a href="javascript:void(0)" data-toggle="dropdown" title="Show/Hide Columns"><span\r\n                                    class="fa fa-cog fa-2x"></span></a>\r\n                            <ul class="dropdown-menu dropdown-menu-right nxn-ngtable-icons nxn-dropdown-arrow nxn-export-dropdown" role="menu">\r\n                                <li><div class="nxn-arrow-white"></div></li>\r\n                                <li ng-repeat="column in columns | filter:{fixed: \'!true\'}">\r\n                                    <div class="checkbox" >\r\n                                        <label ng-click="$event.stopPropagation()">\r\n                                            <input type="checkbox" ng-model="column.visible"/>\r\n                                            {{column.title}}\r\n                                        </label>\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <span ng-if="params.groupedTable">\r\n                            <span nxn-export ng-if="params.isExportAvailable()"\r\n                                nxn-export-json="params.getExportJson()">\r\n                            </span>\r\n                        </span>\r\n                        <span ng-if="!params.groupedTable">\r\n                            <span nxn-export\r\n                                nxn-export-as-of-date="params.getExportAsOfDate()"\r\n                                nxn-export-data="params.getExportData()"\r\n                                nxn-export-fields="params.getExportFields()"\r\n                                nxn-export-heading="params.getExportHeading()"\r\n                                nxn-export-paper-type="params.getExportPaperType()"\r\n                                nxn-export-transform-fn="params.getExportTransformFn()"\r\n                                ng-if="params.isExportAvailable()">\r\n                            </span>\r\n                        </span>\r\n\r\n                        <div class="btn-group nxn-table-icon" ng-if="params.isRefreshable">\r\n                            <a href="javascript:void(0)" ng-click="params.refreshCurrentSet()" title="Refresh Data"><span\r\n                                    class="fa fa-refresh fa-2x"></span></a>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n                <!--nxn-icons-container-->\r\n\r\n                <div class="nxn-table-timestamp">\r\n                    <span><user-preferred-datetime date-to-format="params.getCurrentDataTime()"/></span>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div class="col-xs-12 visible-xs">\r\n\r\n                <div class="nxn-table-icons-and-stamp-container">\r\n\r\n                    <div class="nxn-table-icons-container">\r\n                        <div class="nxn-table-icons-inner-container">\r\n\r\n                            <div class="btn-group nxn-table-icon" ng-show="params.getIncludeCollapseGroups()">\r\n                                <a href="" ng-click="params.toggleCollapseGroups()"\r\n                                    title="{{params.collapseText}} All Groups">\r\n                                    <span class="fa {{params.collapseGroupBy ? \'fa-chevron-circle-right\':\'fa-chevron-circle-down\'}} fa-2x"></span>\r\n                                </a>\r\n                            </div>\r\n\r\n                            <div class="btn-group nxn-table-icon" ng-if="columns">\r\n                                <a href="javascript:void(0)" data-toggle="dropdown" title="Show/Hide Columns"><span\r\n                                        class="fa fa-cog fa-2x"></span></a>\r\n                                <ul class="dropdown-menu dropdown-menu-right nxn-ngtable-icons nxn-dropdown-arrow" role="menu">\r\n                                    <li><div class="nxn-arrow-white"></div></li>\r\n                                    <li ng-repeat="column in columns | filter:{fixed: \'!true\'}">\r\n                                        <div class="checkbox">\r\n                                            <label ng-click="$event.stopPropagation()">\r\n                                                <input type="checkbox" ng-model="column.visible"/>\r\n                                                {{column.title}}\r\n                                            </label>\r\n                                        </div>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                            <span ng-if="params.groupedTable">\r\n                                <span nxn-export ng-if="params.isExportAvailable()"\r\n                                    nxn-export-json="params.getExportJson()">\r\n                                </span>\r\n                            </span>\r\n                            <span ng-if="!params.groupedTable">\r\n                                <span nxn-export ng-if="params.isExportAvailable()"\r\n                                    nxn-export-fields="params.getExportFields()"\r\n                                    nxn-export-heading="params.getExportHeading()"\r\n                                    nxn-export-paper-type="params.getExportPaperType()"\r\n                                    nxn-export-as-of-date="params.getExportAsOfDate()"\r\n                                    nxn-export-data="params.getExportData()"\r\n                                    nxn-export-transform-fn="params.getExportTransformFn()">\r\n                                </span>\r\n                            </span>\r\n\r\n                            <div class="btn-group nxn-table-icon nxn-no-pad-right" ng-if="params.isRefreshable">\r\n                                <a href="javascript:void(0)" ng-click="params.refreshCurrentSet()" title="Refresh Data"><span\r\n                                        class="fa fa-refresh fa-2x"></span></a><!-- ng-show="params.isRefreshable()"-->\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <!--nxn-icons-container-->\r\n\r\n                    <div class="nxn-table-timestamp" >\r\n                        <span><user-preferred-datetime date-to-format="params.getCurrentDataTime()"/></span>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n                <!--col-->\r\n\r\n            </div>\r\n            <!--row-->\r\n\r\n            <div class="nxn-table-mobile-search hidden-lg hidden-md" ng-if="params.isSearchAvailable()">\r\n                <div class="row">\r\n                    <div class="col-sm-6">\r\n                        <div class="form-group nxn-form-group-search">\r\n                            <input type="text" ng-model="params.searchText" class="form-control nxn-search-field"\r\n                            placeholder="Search for..." name="srch-term" ng-change="params.updateSearch()">\r\n                            <a class="nxn-search-icon"><span class="fa fa-search"></span></a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!--row-->\r\n            </div>\r\n            <!--nxn-table-mobile-search-->\r\n\r\n        </div>\r\n'),a.put("ng-table/dummy.html","<div></div>\r\n"),a.put("ng-table/new-pager-accumulator.html",'<div class="row">\r\n    <div class="col-md-12 col-xs-12">\r\n        <div class="nxn-pagination bottom">\r\n            <div class="nxn-pagination-item btnBack" ng-hide="params.isSinglePage()">\r\n                <button type="button" class="btn btn-primary" ng-disabled="params.isFirst()" ng-click="params.prevPage()">&laquo;</button>\r\n            </div>\r\n            <div class="nxn-pagination-item selectbox" ng-hide="params.isSinglePage()">\r\n                <ui-select theme="selectize" ng-model="selectedPage.value" on-select="params.setSelectedPage($item.num)">\r\n                    <ui-select-match placeholder="">{{selectedPage.value.num}}\r\n                    </ui-select-match>\r\n                    <ui-select-choices repeat="page in totalPages">{{page.num}}\r\n                    </ui-select-choices>\r\n                </ui-select>\r\n            </div>\r\n            <div class="nxn-pagination-item btnFwd" ng-hide="params.isSinglePage()"><button type="button" class="btn btn-primary" ng-disabled="params.isLast()" ng-click="params.nextPage()">&raquo;</button></div>\r\n            <div class="nxn-pagination-item curPage" ng-hide="params.getTotalLength() === 0" ng-style="params.isSinglePage() ? {\'margin-bottom\': \'9px\'} : {}">Showing {{params.getPaginationRangeOf()}}</div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("ng-table/new-pager.html",'<div class="row">\r\n    <div class="col-md-6">\r\n    </div>\r\n    <div class="col-md-6">\r\n        <div class="nxn-pagination bottom">\r\n            <div class="nxn-pagination-item curPage" ng-hide="params.getTotalLength() === 0">{{params.getPaginationRange()}}</div>\r\n            <div class="nxn-pagination-item btnBack" ng-hide="params.isSinglePage()"><button type="button" class="btn btn-primary" ng-disabled="params.isFirst()" ng-click="params.prevPage()">&laquo;</button></div>\r\n            <div class="nxn-pagination-item selectbox" ng-hide="params.isSinglePage()">\r\n                <ui-select theme="selectize" ng-model="selectedPage.value" on-select="params.setSelectedPage($item.num)">\r\n                    <ui-select-match placeholder="">{{selectedPage.value.num}}\r\n                    </ui-select-match>\r\n                    <ui-select-choices repeat="page in totalPages">{{page.num}}\r\n                    </ui-select-choices>\r\n                </ui-select>\r\n            </div>\r\n            <div class="nxn-pagination-item btnFwd" ng-hide="params.isSinglePage()"><button type="button" class="btn btn-primary" ng-disabled="params.isLast()" ng-click="params.nextPage()">&raquo;</button></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("ng-table/new-top-pager.html",'<div class="row">\r\n    <div class="col-md-4">\r\n        <div class="nxn-datagrid-info">\r\n            As of:\r\n            <span><user-preferred-datetime date-to-format="params.getCurrentDataTime()"/></span>\r\n            <a class="nxn-cursor-pointer"><span class="fa fa-refresh" ng-click="params.refreshCurrentSet()" ng-show="params.isRefreshable()"></span></a>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-1">\r\n    </div>\r\n    <div class="col-md-1" ng-show="params.getIncludeCollapseGroups() && (params.getTotalLength() > 0)">\r\n        <div class="nxn-datagrid-info">\r\n            <a ng-show="params.getIncludeCollapseGroups()" ng-click="params.toggleCollapseGroups()" href="">{{params.collapseText}} All</a>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-1" ng-hide="params.getIncludeCollapseGroups()"></div>\r\n    <div class="col-md-1">\r\n    </div>\r\n    <div class="col-md-1" ng-show="displayCounts">\r\n        <div class="nxn-pagination">\r\n            <div class="nxn-pagination-item selectbox">\r\n                <ui-select theme="selectize" ng-model="selectedCount.value" on-select="params.setCount($item.value)">\r\n                    <ui-select-match placeholder="">{{selectedCount.value.name}}\r\n                    </ui-select-match>\r\n                    <ui-select-choices repeat="availableCount in availableCounts">{{availableCount.name}}\r\n                    </ui-select-choices>\r\n                </ui-select>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-1" ng-hide="displayCounts"></div>\r\n    <div class="col-md-4">\r\n        <div class="nxn-pagination">\r\n            <div class="nxn-pagination-item curPage" ng-hide="params.getTotalLength() === 0">{{params.getPaginationRange()}}</div>\r\n            <div class="nxn-pagination-item btnBack" ng-hide="params.isSinglePage()">\r\n                <button type="button" class="btn btn-primary" ng-disabled="params.isFirst()" ng-click="params.prevPage()">&laquo;</button>\r\n            </div>\r\n            <div class="nxn-pagination-item selectbox" ng-hide="params.isSinglePage()">\r\n                <ui-select theme="selectize" ng-model="selectedPage.value" on-select="params.setSelectedPage($item.num)">\r\n                    <ui-select-match placeholder="">{{selectedPage.value.num}}\r\n                    </ui-select-match>\r\n                    <ui-select-choices repeat="page in totalPages">{{page.num}}\r\n                    </ui-select-choices>\r\n                </ui-select>\r\n            </div>\r\n            <div class="nxn-pagination-item btnFwd"\r\n                ng-hide="params.isSinglePage()">\r\n                <button type="button"\r\n                        class="btn btn-primary"\r\n                        ng-disabled="params.isLast()"\r\n                        ng-click="params.nextPage()">&raquo;</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n')}]),function(){"use strict";function a(a,b,c){a.modalOptions=c,angular.isDefined(a.modalOptions.scope)&&angular.extend(a,a.modalOptions.scope),a.modalOptions.accept=function(){b.close(),a.modalOptions.deferred.resolve("accepted")},a.modalOptions.dismiss=function(){b.dismiss("cancel"),a.modalOptions.deferred.reject("notAccepted")}}angular.module("NexenCommon").controller("DisclaimerController",a),a.$inject=["$scope","$modalInstance","tempModalOptions"]}(),function(){"use strict";function a(a,b,c){var d=b.apply(this,arguments);return function(a,b,c,e){d.apply(this,arguments);var f=a.setSelectedItem;a.setSelectedItem=function(b,c){f.apply(this,arguments),a.settings.closeOnSelect&&(a.open=!1)};var g=a.getButtonText;a.getButtonText=function(){var a=g.apply(this,arguments),b=14;return a?(a=a.trim(),a.length<=b?a:a.substring(0,b-3)+"..."):""}}}angular.module("NexenCommon").config(["$provide",function(b){b.decorator("ngDropdownMultiselectDirective",["$delegate","$controller","$filter","$rootScope","$window",function(b,c,d,e,f){var g=b[0],h=g.compile;return g.compile=function(b,c){var i=c.skipNxnCustomizations&&"true"===c.skipNxnCustomizations;if(i)return h.apply(this,arguments);var j=c.anpMode&&"true"===c.anpMode;if(j)return a(this,h,arguments);g.scope.updateModel="=",g.scope.watchConfig="=",g.scope.customButtonTextFormatter="=";var k=h.apply(this,arguments);b.find("button").remove();var l='<input id="srch-term" type="text" ng-model="searchBarText"  class="form-control nxn-search-field ng-pristine ng-valid"  placeholder="{{texts.searchPlaceholder}}" ng-click="toggleDropdownOverride();" style="display:inline-block;vertical-align:top" ><a class="nxn-search-icon" ng-click="toggleDropdownOverride();"><span class="fa fa-search"></span></a>',m='<button id="cancelFilterChanges"  ng-click="cancelFilterChanges()" class="btn btn-default pull-right" style="margin-right: 10px;">Cancel</button>',n='<button id="applyFilterChanges" ng-click="applyFilterChanges()" class="btn btn-primary pull-right" style="margin-right: 10px;">Ok</button>',o='<span id="selected-items" type="text" ng-bind="selectedText"  class="ng-pristine ng-valid pull-left"  style="display:inline-block;vertical-align:middle;margin-left: 10px;" ></span>',p='<div id="multiSelectButtonBar" class="dropdown-menu"   ng-style="{display: open ? \'block\' : \'none\'}">'+o+m+n+"</div>";return b.find("div").first().css("width","100%"),b.find("div").first().prepend(l),b.find("div").first().append(p),b.find(".glyphicon.glyphicon-ok").parent().empty().append('<span class="glyphicon glyphicon-ok"></span><label id="ok">&nbsp;{{texts.checkAll}}</label>'),b.find(".glyphicon.glyphicon-remove").parent().empty().append('<span class="glyphicon glyphicon-remove"></span><label id="cancel">&nbsp;{{texts.uncheckAll}}</label>'),function(a,b,c){function g(b){switch(b){case 0:return"";case 1:return b+" "+a.texts.singularDynamicButtonTextSuffix;default:return b+" "+a.texts.pluralDynamicButtonTextSuffix}}a.applyFooterEvent=function(b){a.selectedText=a.getFooterText()},a.events={onItemSelect:a.applyFooterEvent,onItemDeselect:a.applyFooterEvent,onSelectAll:a.applyFooterEvent,onDeselectAll:a.applyFooterEvent};var h=a.extraSettings,i=null,j="1000px",l={};if(angular.isDefined(h)){i=h.scrollable,"auto"===i&&angular.isDefined(h.maxHeight)&&(j=h.maxHeight,a.extraSettings.scrollableHeight=j);var m=parseInt(j.replace("px",""))+33;b[0].querySelector("#multiSelectButtonBar").setAttribute("style","top:"+m+"px;width:100%;")}angular.isDefined(a.texts)&&angular.isDefined(h.buttonDefaultText)&&(a.texts.buttonDefaultText=h.buttonDefaultText);var n=b[0].querySelector(".dropdown-menu");angular.isDefined(i)&&null!==i&&n.setAttribute("style","overflow: "+i+"; display: block; max-height: "+j+";width:100%"),k.apply(this,arguments),a.settings.enableSearch=!1,a.searchBarText=a.searchBarText||"",a.searchFilter=a.searchFilter||"",a.selectedModel=[],a.watchConfig||(a.updateModel=[]),a.applyFilterChanges=function(){a.updateModel=a.selectedModel,a.open=!1,a.selectedModel=[]},a.cancelFilterChanges=function(){a.open=!1,a.selectedModel=[]},a.toggleDropdownOverride=function(){if(!a.open&&(a.selectedModel=Object.create(a.updateModel),a.toggleDropdown(),a.watchConfig)){var c=350,d=function(a){var b=50,d=[-20,20,-5,5,-10,-30];return a<7&&a>0?(a+1)*b+d[a-1]:c},e=function(a,b){return 1===a||4===a?0:2===a||3===a?33:a<=7&&b===c?0:a>=8&&b===c?33:0},g=a.options.length;if(g>1?(a.settings.showCheckAll=!0,a.settings.showUncheckAll=!0):(a.settings.showCheckAll=!1,a.settings.showUncheckAll=!1),a.extraSettings&&g>0){h.maxHeight=d(g)+"px";var j,k,l=f.innerHeight,m=b[0].querySelector(".dropdown-menu");m.setAttribute("style","display: block;");var n=parseInt(m.getBoundingClientRect().top)+parseInt(h.maxHeight.replace("px",""));l<n&&l>c?(j=parseInt(l)-parseInt(m.getBoundingClientRect().top)-20,m.setAttribute("style","overflow: "+i+"; max-height: "+(parseInt(l)-parseInt(m.getBoundingClientRect().top)-50)+"px;width:100%")):(k=parseInt(h.maxHeight.replace("px","")),j=k+e(g,k),m.setAttribute("style","overflow: "+i+"; max-height: "+h.maxHeight+";width:100%")),a.extraSettings.scrollableHeight=h.maxHeight,b[0].querySelector("#multiSelectButtonBar").setAttribute("style","top:"+j+"px;width:100%;display:block"),a.applyFooterEvent()}}},a.$watch("searchBarText",function(b,c){b===a.texts.searchPlaceholder?(a.searchFilter="",a.searchBarText="",a.selectedText=""):!a.extraSettings||a.extraSettings.searchFilterAllFields?a.searchFilter=a.searchBarText:(l[a.extraSettings.displayProp]=a.searchBarText,a.searchFilter=l)}),a.$watch("open",function(b,c){b?a.searchBarText="":(a.searchFilter="",a.searchBarText=a.getButtonText(),a.selectedText=a.searchBarText)}),a.watchConfig&&(a.$watch("options",function(b){b&&(a.searchBarText=a.getButtonText())},!0),a.$watch("updateModel",function(b){b&&(a.searchBarText=a.getButtonText())},!0)),a.selectAll=function(){a.deselectAll(!1),a.externalEvents.onSelectAll(),angular.forEach(d("filter")(a.options,a.searchFilter),function(b){a.setSelectedItem(b[a.settings.idProp],!0)})},a.deselectAll=function(b){b=b||!0,a.singleSelection?clearObject(a.selectedModel):""===a.searchFilter?a.selectedModel.splice(0,a.selectedModel.length):angular.forEach(d("filter")(a.options,a.searchFilter),function(b){a.isItemChecked(a.getPropertyForObject(b,a.settings.idProp))&&a.selectedModel.splice(_.findIndex(a.selectedModel,b),1)}),b&&a.externalEvents.onDeselectAll()},a.isCheckedOverride=function(b){var c={};return c[a.settings.idProp]=b,_.findIndex(a.updateModel,c)!==-1},a.isItemChecked=function(b){var c={};return c[a.settings.idProp]=b,_.findIndex(a.selectedModel,c)!==-1},a.getFooterText=function(){var b;return b=a.singleSelection?null!==a.selectedModel&&angular.isDefined(a.selectedModel[a.settings.idProp])?1:0:angular.isDefined(a.selectedModel)?a.selectedModel.length:0,angular.isFunction(a.customButtonTextFormatter)?a.customButtonTextFormatter(b,a.options.length):g(b)},a.getButtonText=function(){if(a.settings.dynamicTitle&&(a.updateModel.length>0||angular.isObject(a.updateModel)&&_.keys(a.updateModel).length>0)){var b;return b=a.singleSelection?null!==a.updateModel&&angular.isDefined(a.updateModel[a.settings.idProp])?1:0:angular.isDefined(a.updateModel)?a.updateModel.length:0,e.$broadcast("reloadSpecificAcctInfo"),angular.isFunction(a.customButtonTextFormatter)?a.customButtonTextFormatter(b,a.options.length):g(b)}return a.texts.searchPlaceholder}}},b}])}])}(),angular.module("NexenCommon").directive("nxnFormat",["$interpolate","nxn.formatData",function(a,b){var c=function(c,d,e){var f=a(d[0].textContent)(c),g=e.currencycode;c.$watch(e.nxnFormat,function(a){var h=c.$eval(e.nxnFormat),i=b.formatValue($.trim(f),h,g);d[0].textContent=i})};return{restrict:"A",link:c}}]).directive("nxnFormatTradeAmount",["nxn.validations","nxn.formatData","nxn.formats","$window","$timeout",function(a,b,c,d,e){var f=function(a,f,g,h){function i(a,b){d.navigator.userAgent.indexOf("MSIE 9")>0?a[0].innerText=b:a.val(b)}function j(a,b){return angular.isDefined(b)?(b=angular.fromJson(b),b.formatter):angular.isDefined(a)?a:"1"}function k(a){return angular.isDefined(a)?a:"2"}function l(a){if(angular.isUndefined(a)||null===a||""===a||"undefined"===a)return"";(angular.isUndefined(p)||null===p)&&(p=!0);var c=h.$viewValue.toString(),d=c.substr(c.length-1).toLowerCase(),e=c.substr(c.length-2).toLowerCase(),f="";p===!1?"."===d&&c.split(".").length<=2?f=d:c.indexOf(".")>-1&&"0"===d?(f="."+c.split(".",2)[1],a=a.split(".",2)[0]):"mm"===e?f="":"m"===d&&(f=d):e="";var g;if("mm"===e){for(var i="",j=0;j<a.length;j++){var k=a.charAt(j);i=i.concat(k)}g=parseFloat(i),g*=1e6}else g=parseFloat(a);return isNaN(g)?a:("3"===r&&(q="13"),g=b.formatValue(g,q,n,p),g+=f)}var m=f[0];angular.element(f).css("text-align",c[1].align);var n=g.currencycode,o="",p=!0,q=j(g.format,g.vtype),r=k(g.decimalvalue);f.on("focusout",function(a){if(h.$valid){n=g.currencycode,q=j(g.format,g.vtype),r=k(g.decimalvalue);var b=h.$modelValue+"";p=!0,e(function(){b=l(b,n),i(f,b)})}}),f.on("focusin",function(a){isNaN(h.$modelValue)||(o=l(h.$modelValue,n))}),h.$parsers.push(function(a){var b=h.$viewValue.toString().replace(/[^\d\.]+/g,""),c="";if(n=g.currencycode,q=j(g.format,g.vtype),r=k(g.decimalvalue),h.$valid){p=!1,c=l(b,n);var d=m.selectionStart,e=m.selectionEnd,s=c.length-o.length,t=o.indexOf(".")>1&&c.indexOf(".")===-1;o=c,i(f,c),0===s||t?m.setSelectionRange(o.length,o.length):s>0?m.setSelectionRange(d+(s-1),e+(s-1)):s<0&&m.setSelectionRange(d+(s+1),e+(s+1))}return a}),h.$formatters.unshift(l)};return{restrict:"A",link:f,require:"ngModel"}}]).directive("nxnFormatPercentage",["nxn.formatData","nxn.formats","$window",function(a,b,c){var d=function(d,e,f,g){function h(a,b){c.navigator.userAgent.indexOf("MSIE 9")>0?a[0].innerText=b:a.val(b)}function i(b){if(angular.isUndefined(b)||null===b||""===b||"undefined"===b)return"";var c=parseFloat(b);return isNaN(c)?b:c=a.formatValue(b,j)}angular.element(e).css("text-align",b[1].align);var j=f.vtype;angular.isUndefined(j)&&(j="Percentage"),e.on("focusout",function(a){if(g.$valid){var b=g.$modelValue+"";b=i(b),h(e,b)}}),g.$formatters.push(i)};return{restrict:"A",link:d,require:"ngModel"}}]),function(){"use strict";function a(a,b){function c(c,d){var e={};angular.extend(e,d),angular.forEach(j,function(b){if(l&&e.url.indexOf(b)===-1){var c=a.defer();return e.timeout=c.promise,c.resolve("request canceled"),e}}),e.nxnKey=c;var f=angular.isDefined(d.timeout)?d.timeout:-1,g={};return g.config=d,g.timeoutDeferred=a.defer(),f>=0&&(g.timeoutCanceller=b(function(){g.timeoutDeferred.resolve("request timed out")},f)),k[e.nxnKey]=g,e.timeout=g.timeoutDeferred.promise,e}function d(a){var c=k[a];if(angular.isDefined(c)){angular.isDefined(c.timeoutCanceller)&&b.cancel(c.timeoutCanceller);var d=c.config;return delete k[a],d}return null}function e(a){var b=k[a];if(angular.isDefined(b)){var c={};return angular.extend(c,b),c}return null}function f(){var a=0;return angular.forEach(k,function(b,c){a++}),a}function g(){angular.forEach(k,function(a){a.timeoutDeferred.resolve("request aborted")}),k={}}function h(a){l=a}var i={startTrack:c,stopTrack:d,getTracker:e,size:f,cancelAll:g,cancelFuture:h},j=["/nxn-service/logout","/DPMonitor/rest/events"],k={},l=!1;return i}function b(a,b,c,d){function e(a){if(!angular.isString(a)||""===a.trim())return!1;if(d.isAPIGatewayUrl(a))return!0;f.setAttribute("href",a);var b=f.pathname;return b.indexOf(".")===-1||b.indexOf(".json")!==-1}var f=document.createElement("a");return{request:function(a){return!angular.isUndefined(a)&&angular.isObject(a)&&angular.isString(a.url)&&""!==a.url.trim()&&e(a.url)?(a.url=d.getWhiteLabelAPIGatewayUrl(a.url),angular.isDefined(a.timeout)&&!angular.isNumber(a.timeout)?a:c.startTrack(a.url+"/"+b.getGuid(),a)):a},requestError:function(b){if(angular.isDefined(b.config)&&angular.isDefined(b.config.nxnKey)){var d=c.stopTrack(b.config.nxnKey);null!==d&&(b.config=d)}return a.reject(b)},response:function(a){if(angular.isDefined(a.config)&&angular.isDefined(a.config.nxnKey)){var b=c.stopTrack(a.config.nxnKey);null!==b&&(a.config=b)}return a},responseError:function(b){if(angular.isDefined(b.config)&&angular.isDefined(b.config.nxnKey)){var d=c.stopTrack(b.config.nxnKey);null!==d&&(b.config=d)}return a.reject(b)}}}angular.module("NexenCommon").factory("nxnHttpTrackerService",a).factory("nxnHttpInterceptor",b),a.$inject=["$q","$timeout"],b.$inject=["$q","nxnGuidFactory","nxnHttpTrackerService","NxnWhiteLabelUtil"]}(),function(){"use strict";function a(){function a(a,b,c,d,e,f,g,h,i){var j=this;j.displayLegacy=!1,j.displayFeedback=!1,j.showAppStore=!1,j.isUserEmulationMode=i.isEmulationMode(),g.get(function(a){function d(){var c=a.env?a.env:"Local";"local"===c.toLowerCase()||"mock"===c.toLowerCase()?b.open("/partials/symphony/symphony1.html","Symphony","resizable,height=620, width=500"):b.open("/nxn/partials/symphony/devSymphony1.html","Symphony","resizable,height=620, width=500")}j.connectLinkName=c.getConnectLinkName(),j.envSpecificConnectUrl=c.getEnvSpecificConnectUrl(),j.openSymphony=d,j.displayFeedback=j.displayLegacy=f.isMainApp()}),a.$watch(function(){return d.isOriginal},function(a){j.isEmulationOn=!a}),j.isPluginPreview=function(){return h.isPreviewStarted()},j.previewMode=j.isPluginPreview()}return a.$inject=["$scope","$window","LegacyService","nxn.emulationService","NxnUser","NxnWhiteLabelService","PageContext","PluginPreviewService","nxn.userEmulationService"],{restrict:"AE",replace:!0,templateUrl:"partials/common/legacylinks/legacylinks.html",controller:a,controllerAs:"legacylinks"}}angular.module("nxn.legacylinks").directive("nxnLegacyLinks",a)}(),function(){"use strict";function a(){function a(){return[{id:500,name:"Dashboards",navItemDirective:"ndb-nav-menu"},{id:150,name:"Accounts",first_level:[{id:168,name:"Overview",second_level:[{id:169,name:"Summary"},{id:170,name:"Holdings"},{id:171,name:"Activity"}]},{id:"7147a348-7679-42cb-b281-d3711f535cac",name:"Account Activation",second_level:[{id:"c4c7e680-a999-482d-9bf7-2485444c5fbe",name:"Activation Requests"}]},{id:151,name:"Custody accounts",second_level:[{id:153,name:"Holdings"},{id:"735b6c3b-4a13-4597-8aa8-d29384d3f9e7",name:"Holdings - BXP3"},{id:154,name:"Activity"},{id:"02dff98f-f4fe-45aa-804f-24c2a32addcb",name:"Activity - BXP3"},{id:"fd128c40-4763-4493-924a-fd7a8c2ba392",name:"Delivery Instructions (pilot)"},{id:155,name:"Delivery Instructions",state:"nxnAccounts.custody.deliveryInstructions({fromNav:'true'})"
},{id:"39426274-8c91-4473-a638-931859d1e056",name:"Documents",state:"nxnAccounts.custody.documents({fromNav:'true'})"},{id:"12aa55b8-1bff-4ce7-99d3-870094ea8aca",name:"Statement Requests"},{id:"9dd55e37-a234-49db-a831-4a26ea4d3c7f",name:"Account Management"}]},{id:156,name:"Liquidity and Collateral Accounts",second_level:[{id:157,name:"Summary"},{id:158,name:"Holdings"},{id:159,name:"Activity"},{id:"f695e5b0-4d51-49b2-a207-4f06ede19b26",name:"Collateral Overview"},{id:"0d64abf9-7fb7-446d-a069-f07423912d2e",name:"Collateral Activity"}]},{id:430,name:"Cash Accounts",second_level:[{id:431,name:"Summary"},{id:"4ddb6a63-618c-453a-802e-af451329e105",name:"Summary - BXP3"},{id:"84f9b33d-8823-460e-8caf-817c8dcc81ad",name:"Balance Inquiry"}]},{id:"e85fa4f9-1282-484d-87ba-68ecf7ccad3b",name:"Billing Accounts",second_level:[{id:"1576628c-17ec-4896-b976-37f8b250201a",name:"Documents",state:"nxnAccounts.triPartyRepo.documents({fromNav:'true'})"}]},{id:"4ec8e82a-8610-415c-ad7b-557f53329b0a",name:"Current Accounts",second_level:[{id:"e27ab8a4-c66f-4485-bb06-988a00fb7490",name:"Statements"}]},{id:"53bf7e04-0609-4cc8-8df1-e5cf6785fe30",name:"Client Documents",second_level:[{id:"fa5d9b44-d21d-430c-a063-5edb81bc864d",name:"Client Activation"},{id:"0d27961e-b287-4c94-a4ab-0e9906dfa09c",name:"eFiles"},{id:"0d303788-3b5a-11e9-b210-d663bd873d93",name:"Cost Disclosures"}]},{id:"23411bd1-60df-43b7-a7e0-abb6be64e49e",name:"Third Party Consents",second_level:[{id:"1d123c55-95eb-4be9-b629-bb03fe1533f8",name:"Account Consents"}]}]},{id:"b49c8c75-c8b0-4546-a683-66eff6ecfb2a",name:"Portfolios",first_level:[{id:"002315ba-3c7d-11e8-b467-0ed5f89f718b",name:"BNY Mellon Portfolio Management",second_level:[{columns:[{id:"00231880-3c7d-11e8-b467-0ed5f89f718b",title:"On-Balance Sheet Loan Operations",items:[{id:"00231aec-3c7d-11e8-b467-0ed5f89f718b",name:"Loan Processing"},{id:"00231dee-3c7d-11e8-b467-0ed5f89f718b",name:"General Processing"},{id:"00232096-3c7d-11e8-b467-0ed5f89f718b",name:"Financial Institution Group"}]}]}]},{id:"65f5d47e-a155-4de2-901b-e28ac6f5ab59",name:"Investment Analysis",second_level:[{columns:[{id:"39881bee-18a7-4cf9-b11e-ccf5b7b84162",title:"Summary",items:[{id:"4ac0fc80-8a54-4e3c-aad5-8a3c6b5767fa",name:"Performance"},{id:"7c4c5511-0ac8-4206-bd81-4681897cc274",name:"Allocation"},{id:"1fce1987-0036-409f-9846-7cc4dd503ce9",name:"Risk"},{id:"c74bb1b9-6752-498e-a24d-25c050ba388b",name:"Liability"}]},{id:"93afed36-c5b1-11e8-a355-529269fb1459",title:"Specialized Solutions",items:[{id:"93aff1aa-c5b1-11e8-a355-529269fb1459",name:"ESG"}]},{id:"811963f3-8e8d-4aec-9d45-8f27037ab052",title:"Risk",items:[{id:"24aa410d-79e6-4a0b-b37f-73c15c5e",name:"Venn Analytics"}]},{id:"8703b51f-0e62-48c7-9a8d-67e0794fc1c1",title:"Analysis",items:[{id:"a155c4b1-25a1-4c07-bf14-555ee43c05a7",name:"Risk View"}]}]}]},{id:"7cb57a13-abae-4c89-9d9c-1248f6f70dd6",name:"Investment Monitoring",second_level:[{columns:[{id:"265d92f4-4b76-47be-beef-253d887a5720",title:"Loan Administration",items:[{id:"570afbd7-9d62-4065-bf26-a46211b1d0a4",name:"Cash"},{id:"eacf2151-5756-4c71-a6d4-ba3e05fdc346",name:"Asset Details"}]},{id:"dd8f58e3-c7c0-4369-9371-7abe7cca34dd",title:"Trustee Compliance",items:[{id:"aba6c3f8-95f8-472d-9b2a-5df6c9cc8223",name:"Compliance Details"},{id:"6ad130e8-6b54-44dd-9296-c7359f823be4",name:"Compliance Trend Analysis"}]}]},{id:"a5f375c9-6e3a-4193-a824-2a1f86970e54",name:"Event Monitoring"}]},{id:"9faebd2d-fbe7-4ef3-82e7-dfe67ead886d",name:"Fund Administration",second_level:[{id:"7d87750e-b3f8-4cf0-8f86-c152c3cdd5c3",name:"Documents"}]},{id:"09450944-cbb6-4000-8761-ceeb9de04e85",name:"Process Tracking",second_level:[{id:"f886130a-cb85-4bef-884f-1d3f10dfd354",name:"Status"}]},{id:"bdaa5ba2-fc80-44ca-8ec5-62a981fe160e",name:"Analytics",second_level:[{id:"5841b267-10aa-4215-bdc5-44af28b76e46",name:"NAV Dissemination"},{id:"8140f33b-208b-4104-9127-4795efa3ad4c",name:"NAV Dissemination (Internal)"},{id:"67f03a36-13ee-4a9f-add8-dc63555c965e",name:"Private Equity"},{id:"ef452989-2b93-48a2-873f-ca37148dbc22",name:"Real Estate"}]},{id:"9faebd2d-fbe7-4ef3-82e7-dfe67ead8864",name:"Real Estate Management",second_level:[{id:"ed8034b4-09fb-484b-9d5c-4767ef113cff",name:"Property Management Interface"},{id:"a0632c67-3f60-488a-ada5-7d63339f3832",name:"Property Management Interface (legacy)",mobileIncompatible:!0}]},{id:"03078df0-4740-4c44-9123-63d5d7af73f5",name:"Institutional Accounting",second_level:[{id:"f4aab9ac-c167-419b-a12a-644a6dc5c96e",name:"SLA Oversight"}]}]},{id:"192497d2-5a3c-4fc6-a428-cece77ef1fc6",name:"Funds",first_level:[{id:"089b7ed2-c87e-40a6-9754-bd6b473a8a43",name:"Fund Accounting",second_level:[{columns:[{id:"1909d45f-28f1-4c56-b765-7cee338da356",title:"NAV Oversight",items:[{id:"4f90b26d-4cc4-49e4-8ee6-01a28121e920",name:"NAV Construction Status"},{id:"5479a88e-8dc7-49e9-8931-2bb959727d06",name:"Fund Analytics"},{id:"91f8cf77-289d-4aeb-abad-bf8f452c8a5a",name:"Fund Movement"},{id:"4c714151-4e8b-4285-b1b0-868ca71f0643",name:"Assets Under Management"},{id:"f8c59d17-fc54-4935-847e-ca94e0244cc2",name:"Expense Status"},{id:"1c0d193f-3d37-4f65-b43a-d6f580d72611",name:"Holdings"},{id:"0cc0bcba-3b19-11e8-b467-0ed5f89f718b",name:"Cash Reconciliation"},{id:"e40a80e2-418c-41a5-8430-c0c75e433214",name:"Corporate Actions"}]},{id:"c0970ec3-891f-40ac-a3a5-8dea246305e3",title:"Expense Processing",items:[{id:"7031cbda-a986-46f6-9ffa-633dc338dc65",name:"Pending information"},{id:"ff35724f-8389-43db-9138-cc6e691e94fe",name:"Pending approval"},{id:"27ec61f9-ceb3-42fe-b896-e3be751eac34",name:"FX"},{id:"68eb83e0-3c91-4a15-b832-d992fb337c78",name:"Accounting"},{id:"a27a75d7-b6a0-42f1-9ef7-fffd968ccdcf",name:"Payment"},{id:"c13a7bd6-09dd-4023-9940-c208c312f410",name:"Archive"},{id:"c0970ec3-891f-40ac-a3a5-8dea246305e7",name:"Client maintenance"}]},{id:"25600a7f-76ad-40df-8cbf-81d9826a2a6f",title:"Process Monitors",items:[{id:"089b7ed2-c87e-40a6-9754-bd6b473a8a45",name:"Overview"},{id:"089b7ed2-c87e-40a6-9754-bd6b473a8a46",name:"Approval"},{id:"089b7ed2-c87e-40a6-9754-bd6b473a8a47",name:"Executive"},{id:"f2059db1-9f94-4a56-b2ce-c1cb14c71b1f",name:"Details"}]}]}]},{id:"e98d6483-a098-4494-889d-290e7b9ca6f1",name:"Transfer Agency",second_level:[{id:"cdca0c18-660f-42b7-b4fb-750c303c991c",name:"Asset Insights"}]},{id:"8683418c-d6ff-4b72-af7d-2d055dab0c39",name:"Pricing",second_level:[{columns:[{id:"9da1810a-ee1e-4c36-8e5e-5c8cba1bc6f8",title:"Fund of Funds",items:[{id:"b36e0e11-084e-4ab4-9687-99ac34ac0c40",name:"Pricing Maintenance"},{id:"f3978d29-6784-4e2d-ae9b-4aaf0f1201b6",name:"Pricing Holdings"},{id:"716168a2-816b-4a36-b8c4-39ae9ee2fc81",name:"Posted Prices"},{id:"f78b6c79-524f-4c99-8f72-e4bd4fddd36f",name:"Pricing Calendar"},{id:"7658158b-9b4a-452c-ba3f-57d70e0aac3c",name:"Vendor Feed Summary"}]}]}]},{id:"40d66b60-5d16-45e9-a5e1-ccfcbf48b8e6",name:"Distribution",second_level:[{columns:[{id:"25276136-11c0-457c-b422-b948bf1f14d8",title:"Fund of Funds",items:[{id:"5a80cc91-cae6-42ed-9955-afcb6898d52a",name:"Distribution Rate Posting"},{id:"b70461bb-625f-4d43-ad72-a499c054b327",name:"Posted Rates"},{id:"09efef82-9618-4c28-b955-df5f7cf4e8da",name:"Tolerance Exceptions"},{id:"94d2a385-c344-42aa-b178-c648f31296cf",name:"Accrued Income"},{id:"27d664ec-a350-4da7-9189-6ed3aa83c7b9",name:"Income Accrual Exceptions"},{id:"310e4c38-9c1c-4121-8f74-c20b2e925d72",name:"Prices"},{id:"80c94517-364d-4276-9ac8-47269c67effe",name:"Holdings"},{id:"943d92d2-64d6-4d10-b697-a40e23a398d8",name:"Vendor Feed Summary"}]}]}]}]},{id:"7968b5f2-76eb-49fd-ba8b-224eda00eed4",name:"Investors",first_level:[{id:"4ba730fd-f655-4273-9190-3e143ad7fcc9",name:"Analytics",second_level:[{id:"b240d24d-6c00-40a3-ab45-176126eff221",name:"Client AUM"},{id:"d3939d0e-a631-4aed-abd3-171a749bef7e",name:"Transaction Values"},{id:"57d91ddc-d2ae-4d85-ab96-2130d6132455",name:"Transaction Volumes"},{id:"76b7081f-db6d-4c55-b942-f3477e6c6979",name:"Productivity"}]},{id:"6baca97c-8dcc-47fe-a783-34ecf258976f",name:"Investor Servicing",second_level:[{id:"74acfcdb-c955-472e-a38e-f78325773208",name:"Holdings"},{id:"089d01e2-26f2-48ae-915c-85d0e8ddf0b4",name:"Activity"},{id:"43fd4eef-8df8-449f-bf6d-42a9f8e19485",name:"Documents"},{id:"70c5853a-502a-473d-92da-fa0abf9fd1af",name:"Private Markets"}]}]},{id:"8ee73a6b-fbdb-4fcf-b0a2-ad2d969fcb4e",name:"Investments",first_level:[{id:"36898aa9-5257-455e-acf6-bdc64fa904b1",name:"Holdings",target:"_blank"},{id:"e5a0de8d-3ca5-4950-a883-94daca955dfe",name:"Activity",target:"_blank"},{id:"fe41fda6-67f0-4745-9c46-2743e58c5767",name:"Documents",target:"_blank"},{id:"f3f157b8-be37-4a6d-b0c8-5c93058f1029",name:"Private Markets",target:"_blank"}]},{id:"5c20b8de-35b9-4429-8ffd-af491edbe683",name:"Properties",first_level:[{id:"2a8e93b7-ccea-4c37-9d88-91654e50b21e",name:"Property Management Interface",target:"_blank"},{id:"04eedb5b-8247-4aa1-93db-30f17d211a3d",name:"Property Management Interface (legacy)",target:"_blank"},{id:"4bed293b-6ec7-4130-90e3-b5ff3c7f91cc",name:"Documents",target:"_blank"}]},{id:3,name:"Transactions",first_level:[{id:"63aba532-86ad-4e8a-92b6-abfa1cc72468",name:"Exceptions",second_level:[{id:"819d2359-3a3b-4e72-84d7-7d4c543b46d0",name:"Transaction Remediation"},{id:"28f4a22e-a047-4739-b154-c5c153af1202",name:"Payment Exceptions"}]},{id:"732935e6-66e3-11e7-907b-a6006ad3dba0",name:"Payments and Transfers",second_level:[{id:"892ddef4-d754-4f84-a92f-8ad98d29fb6d",name:"Wire Payments"},{id:"8531b867-6ea7-4bd4-85d3-eecb151cedfa",name:"Third Party Payments"},{id:"bd2acd82-b5f7-441f-9eb2-7cff89745019",name:"Payment Tracking"},{id:"152dc7a3-3c3f-4864-bd46-9ef561f73cb7",name:"Cash Vouchers"},{id:"0e4f8f23-2222-442a-9eb3-afda1432d594",name:"Payment Processing"}]},{id:147,name:"Trading",second_level:[{id:173,name:"Derivatives (iDeal Derivatives)"},{id:174,name:"Derivatives (iDerivatives)",state:"iderivatives"},{id:183,name:"Equities (Equity Direct)"},{id:"68ab109bdc3f627716d91cb9a3652bee",name:"Exchange Traded Funds"},{id:277,name:"Exchange Traded Funds (ETF Direct)",state:"etfmarket"},{id:"35e823cb-4f3f-482d-b859-d47591bc74a7",name:"Trade Activity"},{id:185,name:"Fixed Income (Securities Direct)",state:"bondpoint"},{id:392,name:"Fixed Income (Securities Direct Plus)",state:"secdirectplus"},{id:393,name:"Fixed Income (Technical Support)",state:"fitechhelpsupport"},{id:179,name:"Foreign Exchange (iDeal Forex)",state:"idealforex2"},{id:391,name:"Foreign Exchange (iDealFX Data)",state:"iDealForexAnnouncements"},{id:177,name:"Foreign Exchange (iFX Manager - Client)",state:"ifxclient"},{id:178,name:"Foreign Exchange (iFX Manager - Trader)",state:"ifxmanager"},{id:149,name:"Money Market Funds"},{id:"036293f0-6de4-4268-afa2-0605df6d7668",name:"Commercial Paper"},{id:399,name:"Structured Investments (Market-Linked CDs)",state:"ss9mlcd"},{id:400,name:"Structured Investments (Principal Protected)",state:"ss9pripro"},{id:401,name:"Structured Investments (Non & Partial Principally Protected)",state:"ss9nppripro"},{id:402,name:"Structured Investments (Reverse Exchangeables)",state:"ss9revexc"},{id:403,name:"Structured Investments (Education Center)",state:"ss9edu"},{id:404,name:"Structured Investments (Resources)",state:"ss9res"},{id:405,name:"Structured Investments (About Us)",state:"ss9aboutus"},{id:"f5b97b75-cb9d-4b26-a49e-ad2f2e64eade",name:"Brokered CDs"}]},{id:186,name:"Money Transfer",second_level:[{id:187,name:"Wires"},{id:188,name:"Drawdowns"},{id:189,name:"Preadvices"},{id:191,name:"ACH Adjustments"},{id:192,name:"Global Mass Payments"},{id:193,name:"Payment Templates"},{id:194,name:"Wire Transfer"},{id:195,name:"Notice to Receive"}]},{id:"1dd34ade-56c2-4bbe-8580-ae26681a72ec",name:"Check Services",second_level:[{columns:[{id:"a640d48a-48f2-11e6-beb8-9e71128cae77",title:"Disbursements",items:[{id:"1ac58ad0-48f3-11e6-beb8-9e71128cae77",name:"Account Recon"}]}]}]},{id:"7f9fbd6c-c0dd-4854-8046-a91a97dbd4f7",name:"Payments",second_level:[{columns:[{id:"8db38baa-89e9-43b4-9c48-15dabed40669",title:"ACH",items:[{id:"8fbace7d-edde-4a25-a014-74726a7aaf4a"}]},{id:"991e48fb-182e-41ad-8287-16936ae914ec",title:"Real-Time Payments",items:[{id:"9e9d585e-d6e9-11e6-bf26-cec0c932ce01",name:"Payments and Messages"},{id:"34b9321a-dd46-11e6-bf26-cec0c932ce01",name:"Template Maintenance"},{id:"59cbe386-d6f2-11e6-bf26-cec0c932ce01",name:"Bulk Payment Status"},{id:"9e9d53a4-d6e9-11e6-bf26-cec0c932ce01",name:"Payment Status"},{id:"59cbe5fc-d6f2-11e6-bf26-cec0c932ce01",name:"Approve and Release"}]}]}]},{id:196,name:"Default Notices",second_level:[{id:197,name:"Current Activity"},{id:198,name:"Exclusive Control Notices"},{id:199,name:"Termination Notices"},{id:200,name:"Margin DIRECT - Pending Authorization"}]},{id:"46f3a8f1-05a4-40de-b8e8-46c38863ffe2",name:"Tax Services",second_level:[{id:"71bdd4eb-9512-46b4-ae04-4e134854c469",name:"Reclaim submission"},{id:"936991f7-531c-4e61-9dfd-aad50bfd74c3",name:"Reclaim monitoring"},{id:"08e956c9-f516-4f71-ae17-0de3e7e99e46",name:"Allocation Management"}]},{id:190,name:"Pending Transactions",second_level:[{id:379,name:"Trades"},{id:380,name:"Wires"},{id:381,name:"Drawdowns"},{id:382,name:"Preadvices"},{id:"b50e01fe-40fd-4a74-aea1-976594064410",name:"Exclusive Control Notices"},{id:"7337dfce-7dcd-45dd-b3c1-2d244f5b85d7",name:"Termination Notices"},{id:"dc8244ca-2b55-11e7-93ae-92361f002671",name:"Pledges and Receives"},{id:"4b1432dd-973f-4cdf-939d-89c943a0c299",name:"Delivers"}]},{id:"c31e22d8-4f6a-4a9e-b7b9-32397559a0bd",name:"Collateral Management",second_level:[{id:"19d3a609-b2cd-41a5-b36d-775fc47af9df",name:"Pledge"},{id:"e9f6d4cc-63f5-448b-9014-25e8128858ae",name:"Receive"},{id:"b6ac9d8c-4fb1-4274-800e-43d7897eb565",name:"Deliver"}]},{id:201,name:"Instructions",second_level:[{id:"ffe82c12-75c6-4d00-a604-aabe0e84cc8a",name:"Cash - Payment"},{id:"009b41cb-a135-401e-9d26-e6c5ab14f755",name:"Instructions"},{id:"e3154152-7f3f-49cf-9bfb-ac2c8ccaf6e0",name:"Activity"},{id:"b506289f-2662-459f-bebc-229949edcb5e",name:"Template Management"},{id:"b1e0ebde-bc85-4727-9ac8-abf30e4ee4c2",name:"DTC Confirm"},{id:202,name:"Instruction Capture Online"},{id:203,name:"Instruction Upload"},{id:205,name:"Desktop Connect"},{id:387,name:"ETF Services",state:"wbETFServices"}]},{id:13,name:"Corporate Actions",second_level:[{id:41,name:"Corporate Actions"},{id:"ba7fc180-5320-436f-86f8-ad7546fd49cd",name:"Corporate Actions - BXP3"},{id:"82919e29-0de5-426d-83ae-2974cd6bdee2",name:"Tasks"},{id:"c1c3cbd7-b5bb-469d-b4d3-2febfa11900e",name:"Lottery Details"}]},{id:206,name:"Clearing and Settlement",second_level:[{id:207,name:"ACH Origination"},{id:208,name:"Positive Payee"},{id:209,name:"SafeSettle"},{id:210,name:"Global Derivatives Clearing"},{id:211,name:"iConfirm"},{id:"b78ac297-98f0-4c2f-ab96-4c4cfd81f372-aaa",name:"CLS FX Positions"}]},{id:212,name:"Hedge",second_level:[{id:213,name:"iHedge"}]},{id:214,name:"Lockbox",second_level:[{id:215,name:"Automated Lockbox Reporting"},{id:216,name:"Recon"},{id:217,name:"Retail Lbx Exception"},{id:218,name:"Retail Lbx Image"},{id:219,name:"Wholesale Availability Lbx Reporting"},{id:220,name:"Wholesale Lbx Image"}]},{id:221,name:"Sweep",second_level:[{id:222,name:"Investment Sweep"},{id:"ec0e1094-0216-48fd-93d5-c8d41ec43590",name:"Fees"},{id:"ec0e1094-0216-48fd-93d5-c8d41ec43599",name:"Process Monitoring"},{id:"8f69f7bc-ee17-4b2a-96a6-80193515197e",name:"Cash Balances"},{id:"ec0e1094-0216-48fd-93d5-c8d41ec43622",name:"Reconciliation"},{id:"ec0e1094-0216-48fd-93d5-c8d41ec43516",name:"Settlement Information"},{id:"ec0e1094-0216-48fd-93d5-c8d41ec43518",name:"Interbranch Details"},{id:"ec0e1094-0216-48fd-93d5-c8d41ec43567",name:"Activity"},{id:"ec0e1094-0216-48fd-93d5-c8d41ec43557",name:"Reference"},{id:"ec0e1094-0216-48fd-93d5-c8d41ec43457",name:"Rate Management"}]},{id:"38ed6fa8-058d-11e7-93ae-92361f002671",name:"Loans",second_level:[{id:"407f64ba-058d-11e7-93ae-92361f002671",name:"Inbound"},{id:"46db0f6c-058d-11e7-93ae-92361f002671",name:"Outbound"},{id:"4e956f54-058d-11e7-93ae-92361f002671",name:"Safe Keeping"},{id:"5bf841b2-058d-11e7-93ae-92361f002671",name:"Service Transfers"},{id:"553f95fa-058d-11e7-93ae-92361f002671",name:"Inventory Management"}]},{id:223,name:"Swift",second_level:[{id:224,name:"MIDYS - Archive Inquiry"},{id:225,name:"MIDYS - Archive Retrieval"},{id:226,name:"MIDYS - Batch Messages"},{id:227,name:"MIDYS - COB Validation Report"},{id:228,name:"MIDYS - Documentation"},{id:229,name:"MIDYS - SLA Marker Status"},{id:230,name:"OBI - Message History"},{id:231,name:"OBI - Message Unloader"},{id:"58a570f3-71fe-43ef-b526-db4891325b61",name:"Message Status"}]},{id:232,name:"Underwriting",second_level:[{id:233,name:"CD Funding"}]},{id:15,name:"Manage",second_level:[{columns:[{id:234,title:"Checks",items:[{id:235,name:"Check Image"},{id:236,name:"Check Writer"},{id:237,name:"Remote Deposit Capture"}]},{id:238,title:"Foreign Draft",items:[{id:239,name:"Foreign Draft"},{id:240,name:"Foreign Draft Maintenance"}]},{id:51,title:"Collection Record",items:[{id:52,name:"Internet Direct Collection"},{id:53,name:"Internet Global Collection"}]}]},{columns:[{id:241,title:"Disclosure",items:[{id:242,name:"Amend/Cancel Disclosure"},{id:243,name:"Create Disclosure"},{id:244,name:"Create Payment Receipt"},{id:245,name:"Finalize"}]}]}]},{id:"53271fa7-8df8-4b1f-b1c0-d28ab9204b0c",name:"Manage Tasks",second_level:[{id:"53580eee-2ea9-405a-89dc-3a856149fd4e",name:"All",state:"efi({filter:'all',type:'Priority'})"},{id:"862aa968-4d5c-414f-8475-b9dda7e7f2bd",name:"Overdue",state:"efi({filter:'Overdue',type:'Priority'})"},{id:"a3b21000-aaff-49a4-b347-a4ecf1820151",name:"Critical",state:"efi({filter:'Critical',type:'Priority'})"},{id:"aed66676-f15d-46f9-a142-65e3b548eaa5",name:"High",state:"efi({filter:'High',type:'Priority'})"},{id:"cf5d9adc-9eed-41ec-b118-d7fe4aeb197e",name:"Medium",state:"efi({filter:'Medium',type:'Priority'})"},{id:"55ca189d-f597-4d80-be4d-a168cf025b4b",name:"Low",state:"efi({filter:'Low',type:'Priority'})"}]},{id:"6b271a78-aa4b-43b2-be51-e87b4c5f7ef0",name:"Track Status",second_level:[{id:"0e4f8f23-b2c1-442a-9eb3-afda1432d594",name:"Activity"},{id:"e8e329e5-2327-447c-ac4c-32d365c131f5",name:"Activity Admin"}]},{id:"b7dd4b8d-a7b0-43b1-9338-80d4a9690bae",name:"Trade Finance",second_level:[{id:"0d0695de-e427-4c07-b78e-14e627ff63b2",name:"Trade Overview",state:"tfOverview.lc({fromNav:'true'})"},{id:"d54b2b56-6abf-11e6-8b77-86f30ca893d3",name:"Change User Group",state:"tfChangeUserGrp({fromNav:'true'})"},{id:"0029cae4-6ac0-11e6-8b77-86f30ca893d3",name:"Trade Documents",state:"tfTradeDocuments.transactions({fromNav:'true'})"},{columns:[{id:"2d9996d5-8d9f-4683-8a00-e338308465a6",title:"Import",items:[{id:"75c3b6d1-9142-4d88-8b8b-dd7704b03789",name:"Import Letter of Credit",state:"tfImpLC.lc({fromNav:'true'})"},{id:"4205bdf4-ff13-41e9-84e4-739c800cd75b",name:"Import Collection",state:"tfImpCollection({fromNav:'true'})"},{id:"3da50ba6-2bc5-41e8-884a-ebd1633f8466",name:"Import Open Account",state:"tfImportOA({fromNav:'true'})"},{id:"7702fa88-eb03-4374-9b6c-5ee9e409a658",name:"Purchase Order",state:"tfPO({fromNav:'true'})"},{id:"92c19380-8198-403e-a580-ce7dff1bad27",name:"Utilities",state:"tfImpUtils.clause({fromNav:'true'})"}]},{id:"ae333a08-5c3a-47da-bb21-0a3409947a77",title:"Standby Letter Of Credit",items:[{id:"abb829fa-81fd-40ff-a696-cdcfd8ab6e16",name:"Standby Issuance",state:"tfSLCIssuance.tradeSummary({fromNav:'true'})"},{id:"5f6d19a4-b719-479d-8fd6-f1e1cef9eb56",name:"Standby Inquiry",state:"tfSLCInquiry({fromNav:'true'})"},{id:"36748a49-51ef-4f80-898a-25b79296595d",name:"Utilities",state:"tfSLCUtils({fromNav:'true'})"}]}]},{columns:[{id:"76fffc19-cd3e-49aa-a9a7-9aa941af5029",title:"Export",items:[{id:"89c03dc2-ec11-43f8-a268-96df617c4db8",name:"Export Letter Of Credit",state:"tfExportLC.lc({fromNav:'true'})"},{id:"42f3f69e-8c9e-4e0c-9c73-7d444b7ee3e0",name:"Export Collection",state:"tfExpCollection({fromNav:'true'})"},{id:"41ac7113-a0d3-440f-948e-ac2c40fdddcc",name:"Recievable Management Service",state:"tfRMS({fromNav:'true'})"},{id:"c18f055c-d5ed-4145-a948-48d778daef08",name:"Utilities",state:"tfExpUtils({fromNav:'true'})"}]},{id:"757f364a-2fb3-47b3-8b76-da271cf9a8d3",title:"Global Collections",items:[{id:"9ff38e95-72ee-45e2-9c7e-2dce185ba961",name:"Global Collections"},{id:"cf4e9914-cff2-4a43-a727-c6b6e9e68f55",name:"Utilities"}]}]}]},{id:"5d68810b-e29c-4f10-9f1f-9555a05aee4a",name:"Receivables",second_level:[{id:"198b72fb-d6dd-47a7-be07-76af993f470b",name:"Invoice Management"}]}]},{id:4,name:"Resources",first_level:[{id:246,name:"Personalized feed",second_level:[]},{id:18,name:"News",second_level:[{columns:[{id:247,title:"Global",items:[{id:248,name:"FX Research, Simon Drrick/Neil Mellor"},{id:249,name:"Global Securities Lending"},{id:251,name:"Performance & Risk Analytics Updates"},{id:252,name:"Wealth Management Updates"},{id:253,name:"Critical Topics"},{id:254,name:"AIS Knowledge Network"}]},{id:255,title:"Canada",items:[{id:256,name:"CIBC Wholesale Bank"},{id:257,name:"CIBC World Markets"}]}]},{columns:[{id:258,title:"NEXEN",items:[{id:259,name:"What's New"},{id:260,name:"Upcoming Enhancements"}]}]}]},{id:261,name:"Thought Leadership",second_level:[{id:262,name:"Thought Leadership"},{id:369,name:"Richard Hoey Commentary"},{id:264,name:"Market Commentary"}]},{id:374,name:"Reference",second_level:[{columns:[{id:"6c5c4645-4ff6-4a42-9e15-0677a3752850",title:"Business Glossary",items:[{id:"55555d25-07e3-42dd-a6a8-b05d4b21b455",name:"Terms"}]},{id:388,title:"Custody Account Reference",items:[{id:373,name:"Reference",state:"wbReferencePage",mobileIncompatible:"true"},{id:385,name:"Market Profiles"}]},{id:432,title:"Liquidity and Collateral Account Reference",items:[{id:433,name:"Documentation and Forms"}]},{id:"9602d587-be65-4fad-9ed2-59d465be78b1",title:"Institutional Accounting",items:[{id:"c97baea9-4d58-4dd8-a358-ed36393146fc",name:"Reference"}]},{id:"37211824-2199-11e6-b67b-9e71128cae77",title:"Securities Data Reference",items:[{id:"9a26a62e-21a7-11e6-b67b-9e71128cae77",name:"Sources",state:"smdhome.sources"},{id:"c02e3ada-52b5-11e8-9c2d-fa7ae01bbebc",name:"Subscription"},{id:"1f7de8a0-33b4-11e6-ac61-9e71128cae77",name:"Indicative"},{id:"1f7debfc-33b4-11e6-ac61-9e71128cae77",name:"Pricing",state:"smdhome.pricing"},{id:"1f7dee36-33b4-11e6-ac61-9e71128cae77",name:"Corporate Events"},{id:"1f7defa8-33b4-11e6-ac61-9e71128cae77",name:"Downstream",state:"smdhome.downstream"}]}]}]},{id:19,name:"Research",second_level:[{columns:[{id:265,title:"Indices",items:[{id:266,name:"Russell Indexes"},{id:267,name:"Universes"}]},{id:268,title:"Markets",items:[{id:127,name:"Global Tax Rate Lookup",state:"taxRateLookup"},{id:270,name:"Money Market Fund Research"},{id:272,name:"DR Insight"},{id:273,name:"Factset Links"},{id:274,name:"Issuer Resources"},{id:275,name:"Daily Fx Rates (DFX)"}]}]},{columns:[{id:71,title:"Analysis",items:[{id:278,name:"Loan Management System"},{id:279,name:"Investment Research - Securities"},{id:280,name:"Liquidity Aggregator",mobileIncompatible:"true"},{id:271,name:"FundIQ"},{id:281,name:"Risk Analysis Preferences"},{id:282,name:"Liquidity"},{id:283,name:"eDerivatives"},{id:284,name:"FundsTrac"},{id:285,name:"iFlow"},{id:286,name:"Interactive Analysis"},{id:287,name:"Institutional Ownership"},{id:288,name:"Reporting - Analytics"},{id:"81c39cf7-1522-4ed6-b12c-e79128a5aa8c",name:"Depositary Receipts Insight"},{id:"927206f3-ee80-4467-a158-481a08edb69b",name:"Client Management"}]}]}]},{id:375,name:"User help",second_level:[{columns:[{id:376,title:"Guides",items:[{id:"fce2e26b-55d9-4a80-a5a4-151f048887b2",name:"User Guides",state:"userGuide"},{id:"1d391670-8a86-11e8-9a94-a6cf71072f73",name:"Video Tutorials",state:"videoTutorials"}]}]}]},{id:2,name:"Downloads",second_level:[{id:1,name:"Connect Express"}]},{id:"ae183581-7b03-45d0-9e24-1081fe7e53df",name:"Tools",second_level:[{id:"6aa75492-dadd-49de-bea3-0b92c41ca1a1",name:"File Transfer",state:"fileTransfer"},{id:"8c205504-831c-4c17-a3c4-962ec9552d8a",name:"Tax Documentation Reference"},{id:"9baa7bd8-cdf8-45d8-8894-ec85c214ee46",name:"Document Upload"}]}]},{id:289,name:"Risk & compliance",first_level:[{id:290,name:"Risk & Compliance",second_level:[{id:291,name:"Advanced Risk Analysis (GRS)"},{id:292,name:"Navigator (GRS)"},{id:293,name:"Risk Analysis (GRS)"},{id:294,name:"TUCS (GRS)"},{id:295,name:"Rate Cal (GRS)"},{id:296,name:"Profile Universes Posting Dates"},{id:297,name:"SSAE 16 (Sas 70)"}]},{id:437,name:"Fund Administration",second_level:[{columns:[{id:"e4324a87-669b-4e95-88da-0b7fd1235784",title:"Asset Coverage",items:[{id:"e4324a87-669b-4e95-88da-0b7fd1260753",name:"Home",state:"acAdminHome"},{id:"e4324a87-669b-4e95-88da-0b7fd1260111",name:"Home",state:"acClientHome"},{id:"e4324a87-669b-4e95-88da-0b7fd1274589",name:"Home",state:"acFundApprovalAndPreferences"}]}]}]},{id:438,name:"Regulatory Compliance",second_level:[{columns:[{id:"e5207227-6c18-4fe7-a75e-b07b9a40558d",title:"SEC Reporting",items:[{id:"d3870407-6d76-4e0c-813e-876bca2903c4",name:"NPORT Reporting"},{id:"a1beb056-e417-4a57-8fc1-9037a7883a28",name:"NPORT Data"},{id:"96504772-0744-41e8-951e-f1649c342f19",name:"NCEN Reporting"},{id:"c6591cb4-c2b2-4180-a91e-f4a2a3849885",name:"Data Administration"},{id:"156afca5-728d-404a-a98a-c8b6a0826cd0",name:"Static Data Maintenance"},{id:"53dccc6b-07cc-4f92-947c-a696a3b378a0",name:"Service Monitoring"},{id:"0c2de638-35b2-4362-b322-19586f399a7d",name:"Documents"}]},{title:"Depository Oversight",id:"29d29a55-d595-43ba-a28f-e64b9babd148",items:[{id:"ec11d5d3-3f02-42e3-afa3-b870fdf08c74",name:"Data Maintenance"},{id:"16ad41b9-1cfc-44d7-bb8b-ee1c540830fd",name:"Cash Monitoring"},{id:"19c67238-bc20-4edc-acae-39c2ec33b3db",name:"Record Keeping"},{id:"582a0a6b-86ac-49b1-9034-4b0f766ac1a8",name:"Documents"}]}]}]},{id:"baad18fe-173d-40c5-899f-139f67306533",name:"ERI",second_level:[{columns:[{id:"405da314-87f6-4f79-bbf6-5017a05c869b",title:"Credit",items:[{id:"dbb111bd-c61c-4e44-ad49-8261ecb95967",name:"Direct"},{id:"bb3ea4b9-13b0-4237-9b2b-ba285e0de272",name:"Intraday"},{id:"0984d1c4-bef3-457e-a076-35c269e550f5",name:"Super User"}]},{id:"4cfbfb93-eb0d-4b26-b513-b4d842472c95",title:"Collateral",items:[{id:"d5372f80-b97c-4f75-a9d7-4d2c49dc7eb6",name:"Reports"}]},{id:"f11bb700-972c-456c-b8a3-ceecfed7a67f",title:"Workflow",items:[{id:"c80bc154-fe96-4edb-978e-23d7e7c2d7d3",name:"Inbox"}]},{id:"66382dba-164e-43bd-945d-39239a606b60",title:"Production Support",items:[{id:"243b120c-2bb1-439e-aaee-47dcc0bb1ed5",name:"Reports"}]}]},{columns:[{id:"107e412c-79de-496d-88bc-b60dda715ca0",title:"Executive",items:[{id:"f1de64c3-3153-4866-b826-01d05c9b6c99",name:"Executive Dashboard"}]},{id:"108e412c-79de-496d-88bc-b60dda715ca0",title:"File Maintenance",items:[{id:"8a364242-4a8a-4e88-aa03-cfcc2b885c7c",name:"File Upload"},{id:"9125a5db-e61d-469a-94e8-10ac3e95230",name:"File Approval"}]},{id:"3a19c486-b914-4f90-87e7-8b05cb4bbeaa",title:"Liquidity",items:[{id:"d5fb1796-3b82-492a-b401-5943956184b7",name:"Reports"}]},{id:"5537b3f1-5311-482a-a238-1a13be7092b2",title:"Market",items:[{id:"3541bf12-6d3d-4d4a-b2e2-5af784ab1dd8",name:"Reports"}]},{id:"53fa8bad-d90b-4e75-940d-3c86f68c8719",title:"Operational",items:[{id:"81656098-9591-4142-ac03-72e9b300f053",name:"Risk Control Self-Assessment"},{id:"595a9e8a-4c8a-4a99-a065-101706359158",name:"Risk Profile Report"},{id:"2eebfa07-3fad-48b8-8f70-924851cc6ee0",name:"Loss Event Reporting"}]},{id:"10bdbfda-f078-4786-9117-acda4d326b4d",title:"Demonstrations",items:[{id:"97d3ea3d-d375-41bf-9f8b-3f79ee722ced",name:"Component Demo"}]}]}]},{id:"d28f87b4-54c6-4ae8-9367-ed7ceb0a8996",name:"Reconciliation",second_level:[{id:"c4eeef29-ba65-4f2e-ab71-e4f2e0ab4b08",name:"Issue Tracking"},{id:"c4eeef29-ba65-4f2e-ab71-e4f2e0ab3b08",name:"Recon & Investigation"},{id:"4f35511a-0de3-4cf7-bc6e-fdbdbde85c6a",name:"Account Opening"},{id:"c4eeef29-ba65-4f2e-ab71-e4f2e0ab2b08",name:"Documents"}]},{id:"bce9f55c-ceb8-11e7-abc4-cec278b6b50a",name:"SLAs",second_level:[{id:"bce9f7d2-ceb8-11e7-abc4-cec278b6b50a",name:"Middle Office SLAs"}]},{id:"3c3ccc3e-f41b-11e8-8eb2-f2801f1b9fd1",name:"MIFID Reporting",second_level:[{columns:[{id:"994b338a-d075-11e8-a8d5-f2801f1b9fd1",title:" Ex-Post Disclosure Statement",items:[{id:"5755b55c-cadc-11e8-a8d5-f2801f1b9fd1",name:"Flag and Edit"},{id:"8671436a-c23f-11e8-a355-529269fb1459",name:"Review or Approve"},{id:"ad7a31e2-cba4-11e8-a8d5-f2801f1b9fd1",name:"Status"}]}]}]}]},{id:"bf1e4148-94c6-47d2-aec0-e6ca6e147150",name:"My Source",first_level:[{id:"88a33028-1ba0-4055-81bc-9d262e9a24b0",name:"Business Partner Solutions",second_level:[{columns:[{id:"e30f1350-022d-11e7-93ae-92361f002671",title:"General Services",items:[{id:"c768b484-d64b-11e6-bf26-cec0c932ce01",name:"Generic Attestation"},{id:"bb454b74-99aa-405c-8dc2-a5590f5237bb",name:"Reporting"}]},{id:"8464730f-79b0-43b5-9106-dd77895e82ee",title:"Data Governance",items:[{id:"0e6780c8-24de-4bc9-bb9c-8fc260d290d3",name:"DG Tools Reports"},{id:"da5151dd-1776-4f8b-8eb1-4dfbdd98ef1a",name:"Audit Logs"}]},{id:"4ffa7030-75c0-4eb7-9877-6daf8e98aefb",title:"Application View",items:[{id:"a7309a17-c854-40e3-a4da-848af18ee19a",name:"Application Overview"},{id:"f50ce262-139d-481e-ab10-33d70e8e44a7",name:"Asset Relationship"},{id:"ab5cc6c9-baaf-4986-833d-97bf57bb181e",name:"Data Lineage"},{id:"e676217c-8798-43fc-bf9f-418c28a8f805",name:"Business Term Search"},{id:"e787bb1f-b0ce-4261-a84c-6812ac893173",name:"Business Term Glossary"},{id:"1f2e3f45-a013-43ec-b5fb-86ae05fb372f",name:"Business Term Data Quality"}]},{id:"5581dcc7-1371-4700-ba10-91d2bcb2a4af",title:"Enterprise View",items:[{id:"67070084-4bf1-4779-99a4-0b2eab393d3f",name:"Enterprise Data Analysis"}]},{id:"25d1377c-9984-4c29-9fdf-0c06e767f339",title:"Regulatory Data",items:[{id:"399415bb-29fd-4afa-8ab0-63014d702331",name:"Reporting - RWA"},{id:"b8f377a0-5d2b-11e8-9c2d-fa7ae01bbebc",name:"Reporting - ADHOC"},{id:"425877ln-25wq-4don-8ik0-14024l300179",name:"Publish Data to Reg Tenant"}]},{id:"25d1377c-9984-4c29-9fdf-0c06e767f360",title:"Regulatory Definition",items:[{id:"eca89f1a-7675-11e6-8b77-86f30ca893d3",name:"Model Definition"},{id:"5e88cf62-7bc9-11e6-8b77-86f30ca893d3",name:"Scenario Definition"},{id:"2a5bbb3c-615b-11e7-907b-a6006ad3dba0",name:"Approach Methodology Definition"},{id:"eca8a032-7675-11e6-8b77-86f30ca893d3",name:"Basel Category Definition"},{id:"2a5bb59c-615b-11e7-907b-a6006ad3dba0",name:"Approach Definition"},{id:"5e88d264-7bc9-11e6-8b77-86f30ca893d3",name:"Product Definition"},{id:"gca8a035-7675-11e6-8b77-86f30ca893d3",name:"Basel Metadata Linkage"},{id:"a97323ae-b4bd-11e8-96f8-529269fb1459",name:"Basel Default Product Report"},{id:"86ae8589-150d-498c-9ae4-cfb4d2b77f07",name:"Bank Configuration Definition"},{id:"e1dbbc60-db46-11e8-9f8b-f2801f1b9fd1",name:"Periodic Variance Report"},{id:"3b80e496-f22d-11e8-8eb2-f2801f1b9fd1",name:"Closed Customer Report"}]},{id:"25d1377c-9984-4c29-9fdf-0c06e767f340",title:"Risk Parameters",items:[{id:"5e88cf63-7bc9-11e6-8b77-86f30ca893d3",name:"Product Default"},{id:"5e33cf63-7sd9-11e6-yh77-86fsdfg593d3",name:"Global Default"},{id:"5ejj7f63-7gh9-1t56-yj67-87hgfrg593d3",name:"Override"},{id:"5emm7g63-7gj7-1tdf-yy57-8jk8frsd33t4",name:"PD Rating to Value Mapping"},{id:"5efg7g89-7gd2-1unj-rp53-8j6ymrsr44s4",name:"LGD Rating to Value Mapping"},{id:"6f30d264-58fd-487a-85f4-70faab61ea3b",name:"Default Parameter Report"}]}]},{columns:[{id:"25d1377c-9984-4c29-9fdf-0c06e767f341",title:"Non Standard Feed",items:[{id:"fdc49a40-e482-4e64-a990-a0006c39d557",name:"NSF Inbox"},{id:"1cf79b34-78bf-4994-b5dc-b2d015c02af4",name:"NSF Upload"},{id:"78338afa-f046-4d1d-a5bd-1076021c0351",name:"NSF Control Report"}]},{id:"25d1377c-9984-4c29-9fdf-0c06e767f342",title:"Retail",items:[{id:"4bd3e94a-7850-11e7-b5a5-be2e44b06b34",name:"Retail Sub Pool Mapping"},{id:"fc38cd48-688b-11e7-907b-a6006ad3dba0",name:"Retail Pool Subpool Combination"}]},{id:"25d1377c-9984-4c29-9fdf-0c06e767f343",title:"Classification Rule Maintenance",items:[{id:"eca8a035-7675-11e6-8b77-86f30ca893d3",name:"Add/Edit Rule"},{id:"fca8a335-7675-11e6-8b77-86f30ca893d3",
name:"Summary"}]},{id:"25d1377c-9984-4c29-9fdf-0c06e767f344",title:"Basel Enhancement Process",items:[{id:"2f40763a-00eb-11e8-ba89-0ed5f89f718b",name:"AVC Metadata Setup"},{id:"3cbrt763a-00eb-11e8-ba89-0ed8ghy718c",name:"Configure Resolve Balance Type"},{id:"eca8r032-7675-11k6-8v77-86l30aa893g3",name:"UGD Basel Product and Facility"},{id:"679f515c-87b6-4338-af53-60f95f28a235",name:"UGD Segmentation Matrix"},{id:"b1b7086c-de32-4376-baa7-c67543c3e56c",name:"Central counterparty (CCP)"},{id:"1c16b4ae-6304-11e8-adc0-fa7ae01bbebc",name:"FRR Balance Mapping"}]}]}]}]},{id:6,name:"Communications",first_level:[{id:298,name:"Calendar",second_level:[{id:300,name:"Market Profiles"},{id:301,name:"BDS Market Calendar"}]},{id:23,name:"Messaging",inherit:!0,second_level:[{id:120,name:"Message Centre"},{id:302,name:"Auto Payment Inquiry (Mail)"},{id:115,name:"Alerts",state:"alertsDashboard.alerts"},{id:383,name:"Broadcasts",state:"alertsDashboard.broadcasts"},{id:"8f7ddeb2-fdb9-411b-b535-92d3ca95d343",name:"System Alert"},{id:303,name:"DR Alerts"},{id:304,name:"Event Manager"}]},{id:21,name:"Collaboration",second_level:[{id:110,name:"Meeting Centre"}]},{id:24,name:"Sharing",second_level:[{id:124,name:"My Custom Content"},{id:126,name:"Shared Team Space (Sharepoint)"},{id:305,name:"File Transfer"},{id:306,name:"Document Library"}]}]},{id:128,name:"Reporting",first_level:[{id:129,name:"Reports",second_level:[{id:146,name:"Available Reports"},{id:130,name:"Saved Reports"},{id:"8ffff584-d93c-4f10-9439-0dc3cd985d33",name:"Distribution Profiles",mobileIncompatible:"true"},{id:"2488ced6-2f6a-4023-ad78-4cdb3ac036e2",name:"Reporting Add-In"}]},{id:308,name:"Partner Reporting",second_level:[{id:309,name:"Saved Reports"},{id:310,name:"Informa"},{id:311,name:"Investment Fund Reporting"},{id:312,name:"PACE Performance"},{id:313,name:"STAR"},{id:314,name:"TCW Eagle Portal"},{id:315,name:"TCW Pace Portal"},{id:316,name:"TCW STAR"},{id:317,name:"Transfer Agency"},{id:318,name:"Treasury Analyst"},{id:319,name:"XL Pace Portal"},{id:320,name:"Trade Internet Query (Trade Services)"},{id:"2817b498-3ef1-11e7-a919-92ebcb67fe33",name:"Insurance Accounting Reporting"}]},{id:"cd4e8fd4-8417-11e7-bb31-be2e44b06b34",name:"Data Extracts",second_level:[{id:"d3894011-4776-4499-92ce-21dc68f4a727",name:"Saved Extracts"}]}]},{id:160,name:"Admin",first_level:[{id:419,name:"Account and User Admin",second_level:[{columns:[{id:420,title:"Accounts",items:[{id:421,name:"Individual Accounts"},{id:422,name:"Account Groups"}]},{id:423,title:"Users",items:[{id:424,name:"Individual Users"},{id:425,name:"User Groups"},{id:"e64c1572-97ab-4b17-bcf8-a6695cc688f2",name:"Manage User Access",state:"manageUserAccess({fromNav:'true'})"},{id:"e64c1572-97ab-4b17-uae8-u6695ae999e3",name:"Manage User Access (GLS & CT)"}]},{id:"18486c6a-87d5-11e7-bb31-be2e44b06b34",title:"Services",items:[{id:"ecbdf2a2-6094-11e7-907b-a6006ad3dba0",name:"Markets Service Configurations"}]},{id:"cd3fa212-49eb-4c49-9085-25ddd6183aca",title:"iDeal Forex",items:[{id:"5b427bb7-9421-4fa4-8d14-b031553e5a49",name:"Administrative Services"}]}]}]},{id:"bb7a8adb-c963-409a-b0bf-2875105e73d9",name:"Product Data Management",second_level:[{columns:[{id:"0fcadf48-0ff6-4c64-875f-c707fda6f0f6",title:"Instruction Capture",items:[{id:"202f952e-d25a-4b8d-a8d3-50b2791d6d48"},{id:"1d432d3e-cd10-43ef-b121-70341da7a266"},{id:"698da402-20c6-465a-959a-ef90695c694f"},{id:"5eb72a5f-0a84-4d90-8d25-7f7a5ed6c9f5"}]},{id:"58020e31-edbf-47e7-8be2-da526e37845d",title:"Liquidity",items:[{id:"80822e96-0795-4daa-916b-cc18606e9893",name:"Fixed Income Repurchase Agreements"}]}]}]},{id:"555cd110-f3c4-45a6-8c75-8b1265894b23",name:"Static Data Management",second_level:[{columns:[{id:"a02bb8d0-554f-4525-a0b8-b3da42559285",title:"Fund of Funds",items:[{id:"c2f6af3e-d26a-4535-a4ed-35b9ea5da67a",name:"Contact Details"},{id:"fab4e3af-d6f6-47d4-8871-bdd3da5f21d0",name:"Fund Account"},{id:"318ae444-16d8-4976-968a-16c707550a38",name:"Target Fund"},{id:"5f966d1a-94d8-4ade-a04e-cef0855b8457",name:"Calendar Set-up"},{id:"d46bafd6k-4cf0-4513-85ab-b209f01f7826",name:"Scheduler Health Check"}]}]}]},{id:"c70a7242-335c-4dd2-a777-8a7f7bcbb7e4",name:"Corporate Actions Admin",second_level:[{id:"7e4134d6-4efe-4625-804c-85d064752a70",name:"CA Admin",state:"caAdmin({fromNav:'true'})"}]},{id:"62e88f1e-cf9e-40cc-a40d-170b771ceaf5",name:"Pure Angular Plugin Demo",second_level:[]},{id:"f38e39a9-c3da-450f-b257-e1960c6bec30",name:"Data Maintenance",second_level:[{id:"e2ccd7f6-7a2e-42d8-ae12-d1785cd29e7f",name:"Custom Feed Maintenance"},{columns:[{id:"fff67787-a74b-43a8-96df-907247e3d0ad",title:"Custody Operational Data Services",items:[{id:"b1f0e076-ac69-4a1d-9302-60458ccdd57e",name:"Not in Bank Details"},{id:"4fe1f99f-6b32-4880-a46d-f7e3a7d30088",name:"Report Parameters Maintenance"}]},{id:"6a9ff9df-2f18-4dd8-9dad-9ca1c29f3684",title:"German Fund Accounting",items:[{id:"411d6252-089c-11e7-93ae-92361f002671",name:"Fund Queries"},{id:"411d65e0-089c-11e7-93ae-92361f002671",name:"Fund Setup "}]},{id:"fff67787-a74b-43a8-96df-907247e3d087",title:"Global Funds Control",items:[{id:"4f35511a-0de3-4cf7-bc6e-gfc2",name:"Direct Clearer Rule Maintainence"},{id:"4f35511a-0de3-4cf7-bc6e-gfc1",name:"Extended Deadline Time"}]}]}]},{id:"f9a37098-6090-1f0c-255c-d59a68375198",name:"Fund Accounting",second_level:[{columns:[{id:"b782716e-5cf4-9c6d-a2f2-a02e479fe180",title:"Corporate Actions",items:[{id:"ebc1e3a1-f86d-4204-7709-6a7eb5e6053a",name:"Dividend Processing"}]},{id:"b782716e-5cf4-9c6d-a2f2-a02e479fe181",title:"Securities Management",items:[{id:"ebc1e3a1-f86d-4204-7709-6a7eb5e6053b",name:"Security Master"}]}]}]},{id:161,name:"Usage reports",second_level:[{id:162,name:"Usage Stats By Date",state:"usageStats",reload:!1}]},{id:163,name:"Http request reports",second_level:[{id:164,name:"HTTP Stats By Date",state:"httpUsageStats",reload:!1}]},{id:165,name:"NEXEN user administration",second_level:[{id:"97147594-082b-4b14-a075-990c2b15321c"},{id:"a9d9f655-886a-469c-8801-a63457ca835a",name:"User Emulation",state:"useremulate"},{id:"ef98eb2e-1aed-4b15-8beb-e6e56eaf3c9f",name:"User Lookup",state:"userEntitlements&Lobs"}]},{id:371,name:"System tools",second_level:[{id:372,name:"Nav Taxonomy Export",state:"navExport",reload:!1},{id:"e6c80091-081d-4dd9-bc82-bf3e5fc168e5",name:"Services Failover Admin",state:"svcFailoverAdmin",reload:!1},{id:"6969a5f6-57fa-4516-a6f7-321078c9993e",name:"System Parameters Admin",state:"sysParamsConfig",reload:!1},{id:"700b5b98-2987-4ba1-8534-9dd3073e146f"},{id:"1b2b5c00-08e8-405c-866a-35435d8f5ccc"},{id:"d0601d9b-cd66-4a42-b486-2e72717dbbab"},{id:"c4890d0a-a30e-4141-ab8a-6070fb470304"},{id:"c4890d0a-a30e-4141-ab8a-6070fb470307"},{id:"c4890d0a-a30e-4141-ab8a-6070fb470305"},{id:"6427e1e5-8551-44c1-a345-2fe43befb27d",name:"Plugin State Mapping",state:"pluginStateMap"},{id:"7e22248a-3eda-4e8f-b0af-18b5af625a6f"}]},{id:321,name:"User admin",second_level:[{id:322,name:"Delegated Admin (CEEP)"},{id:323,name:"User Administration"},{id:324,name:"KAG Administration"},{id:325,name:"Workbench Maintenance Freont End"},{id:326,name:"User Lookup",state:"userLookup"},{id:329,name:"Manage Sweeps"},{id:330,name:"Liquidity Delegated Admin"},{id:331,name:"Access to ERS Reporting"},{id:332,name:"Access to Mainframe Services"},{id:333,name:"Change User Group"},{id:334,name:"User Groups, Profile Report"},{id:335,name:"Self Registration"},{id:269,name:"Group Maintenance"},{id:368,name:"Entitlements (to sub systems withing Treasury Edge)"}]},{id:336,name:"Client admin",second_level:[{columns:[{id:"23deceae-fb8c-11e7-8c3f-9a214cf093ae",title:"Client Profile",items:[{id:"c325100d-9137-43e8-b06e-0df050d3ab8b",name:"Active Trades"}]},{id:"5b75af7c-de30-4e12-9bc5-a5a3b39fe5f4",title:"Billing",items:[{id:"4cf524c5-1139-41c6-8d0c-22289ec83d21",name:"Fee Schedule Maintenance"},{id:"6179b61b-94ac-4e4c-9925-6b163838b0fd",name:"Billing Forms"},{id:"3f6de306-4a03-11e8-842f-0ed5f89f718b",name:"Billing Account Management"},{id:"5484f043-8a71-40c7-a94d-94a57d383df1",name:"Billing Invoice Management"}]},{id:"6989f958-cdbd-11e7-abc4-cec278b6b50a",title:"Client Data Management",items:[{id:"c756443b-3dfc-43e2-bb75-9590d32bc767",name:"Client Inquiry"},{id:"41f714d5-7125-4684-becf-2d83b764dd76",name:"Maintenance"},{id:"6989fc0a-cdbd-11e7-abc4-cec278b6b50a",name:"Reports"}]}]},{id:"5c9c1a9e-40e1-47f9-8a6d-49b2484a2d5b",name:"File Transfer Information"},{id:337,name:"Compliance Monitoring"},{id:338,name:"5500 Status Page"},{id:339,name:"Fair Value Hierarchy Override Tool"},{id:340,name:"Manage User Access"},{id:341,name:"Check Writer Admin"},{id:342,name:"Foreign Draft Admin"},{id:343,name:"Global Mass Payments Admin"},{id:344,name:"Payments Admin"},{id:345,name:"Safe Settle Admin"},{id:346,name:"Tax ID Setup"},{id:347,name:"Token Pin Setup"},{id:348,name:"Charging"},{id:349,name:"Click Thru Agreement"},{id:350,name:"ACH File Unlock, Resend"},{id:351,name:"DX Workstation"},{id:352,name:"FundsTrac Balance Adjustment"},{id:353,name:"TreasuryEdge Monitor"},{id:354,name:"Unlock Formset"},{id:355,name:"Utilities"},{id:356,name:"Data Admin"},{id:357,name:"e Fx Data"},{id:358,name:"iFX Manager Admin"},{id:359,name:"Trading Channel Admin"},{id:360,name:"Settings and Preferences"},{id:367,name:"Maintenance"}]},{id:"44a575a6-599e-41e2-8b87-181e7c2095cd",name:"Data Maintenance",second_level:[{columns:[{id:"b72f5fff-f70e-4aef-82a9-dd30d0d20b2e",title:"Assets Under Custody",items:[{id:"729bea09-25e8-422e-8ede-85aea551d349",name:"Audit"},{id:"be9ef5c2-a00b-4db5-9b70-de39b5ed8225",name:"Console"},{id:"8106c967-ad03-4b94-80ca-716b171d2c22",name:"Exception"},{id:"ac1db6ab-e1a1-4f34-90f7-8aac6bd95398",name:"Manual Entry"},{id:"d6fbc0c4-3a0c-11e7-a919-92ebcb67fe33",name:"Reporting"},{id:"55f9f5b6-121c-4f23-9578-3549df357365",name:"Table Maintenance"},{id:"73c48dfd-4f08-4014-b81a-f01d6db5c5a2",name:"Work Queue"}]}]}]},{id:"0761d8b1-194a-49cb-9881-d27f65aa0fad",name:"Workflow Admin",second_level:[{columns:[{id:"8e4d2e6e-3985-495d-abb2-75cc635d9558",title:"Fund Accounting",items:[{id:"089b7ed2-c87e-40a6-9754-bd6b473a8a51",name:"Workflow Creator"},{id:"ed9111a4-93ed-4736-8858-354dd774d5ac",name:"Workflow Support"},{id:"089b7ed2-c87e-40a6-9754-bd6b473a8a49",name:"Allocation Manager"},{id:"2bfb6c9a-ad60-4239-81cb-866c2687015e",name:"Audit Manager"},{id:"089b7ed2-c87e-40a6-9754-bd6b473a8a50",name:"Document Manager"},{id:"b0d2ade1-eaab-4198-b058-267fa86afd0b",name:"Workflow Profile"}]}]}]},{id:"b12ff4e8-6da9-4983-95be-644d0d024f2e",name:"Data Maintenance",second_level:[{columns:[{id:"3d7fd7df-468a-4cf6-bf67-81bc237a0bf9",title:"Investment Monitoring",items:[{id:"56be36a8-a537-4035-b2cb-b5d8f3248bf6",name:"Test Mapping Tool"},{id:"702ae530-fa44-4432-b92c-b2a8f9079f52",name:"Manage Deal ID"}]}]}]},{id:361,name:"Emulation",second_level:[{id:362,name:"Emulation"},{id:363,name:"Emulate User Group"}]},{id:364,name:"Benefits",second_level:[{id:365,name:"Benefit Disbursements - Inquiry/Update"},{id:366,name:"Benefit Disbursements - Inquiry"}]},{id:"d3d7dded-2528-446d-acf8-e3c80468add3",name:"Product Onboarding",second_level:[{id:"8b86beca-9758-11e6-ae22-56b6b6499611",name:"FX Elections Look Up"}]},{id:"45e897ec-2f98-4032-9558-93241d9fc5fa",name:"Content Providers",second_level:[{id:"4b4048b4-76eb-4c7e-93f1-aca8c0d6478e",name:"Plugins Configuration",state:"pluginConfig"},{id:"f705756f-9ddc-4099-b0b9-d53000134620",name:"Plugins Team Configuration",state:"pluginTeamAdmin"},{id:"4dbeae25-c8cd-4246-b313-4ab7733777cf",name:"Reverse Proxy App Management"}]},{id:"986b3702-8367-4b04-8699-e2918694dd85",name:"Dashboard Tools",second_level:[{id:"80084f8d-c893-4b71-a809-6716e2bd1cb6",name:"Tableau Admin",state:"dashboardAdmin"}]},{id:"bd3cae91-2fce-4035-98d6-2088a9f30822",name:"Digital Pulse",second_level:[{id:"a93524ff-f301-4104-bd8b-22d8177bb7a1",name:"Digital Pulse Tools"}]}]},{id:5555,name:"PluginTest",first_level:[{id:"078e17ce-9749-11e8-9eb6-529269fb1459",name:"Plugin Test",inherit:!0,second_level:[{columns:[{id:7777,title:"Testing",inherit:!0,items:[{id:8888,inherit:!0,name:""},{id:"45a2ed25-07e3-42dd-a6a8-b05d4b21b4dc"},{id:"9c36a923-2b3c-47c3-be4f-18d1bb78a424"},{id:"ecc54cfc-dd52-4506-9784-775acbeedaf9"},{id:"528996e9-d1f9-4499-b4cf-b2f3d14fa3ca"},{id:"7f278d17-c44a-44ef-9b79-41313a9132c4"},{id:"8a7f1735-b5f0-45c3-8632-3cdcc3303300"},{id:"c1810355-520e-470e-9ae6-8fcffacd67b7"},{id:"a90c1c31-0999-44fd-8160-86218a6ed3ec"},{id:"c8b4fc9e-b875-4cc0-b9cd-5c055be3cd19"},{id:"0713dcb3-d325-4cee-af56-d1c1ee281381"},{id:"d34ad0b5-b2ba-451d-8e0b-e97855a11666"}]}]}]}]},{id:"ece9803d-69c5-4f1d-aa9c-9e396ab84f2a",name:"Deals",first_level:[{id:"920dacc9-e8f4-4b5a-9d39-a89341a075f8",name:"Deal Management",second_level:[{id:"21bbbd84-8006-4703-8d06-928607ac70d3",name:"Search Deals",state:"nxnDealMaintenance.searchDeals({fromNav:'true'})"},{id:"cf0b25ef-a32d-4757-a9ec-bd4e4fa578aa",name:"My Teams",state:"nxnDealMaintenance.myTeams.viewDealAggByProduct({fromNav:'true'})"},{id:"2c8718f6-9708-4e36-945a-5f0b6d19cc84",name:"My Deals",state:"nxnDealMaintenance.myDeals({fromNav:'true'})"},{id:"d135d507-5ee7-4372-b703-0cde7bad42e1",name:"Drafts",state:"nxnDealMaintenance.drafts({fromNav:'true'})"},{id:"b1cf9833-eb11-433e-adfe-fddedf2b1d90",name:"Deal Portfolio"}]}]}]}function b(){return[{id:131,name:"Tasks",class:"fa fa-sitemap fa-2x",state:"efi"},{id:132,name:"Reporting",class:"fa fa-file-text fa-2x"},{id:133,name:"File Transfer",class:"fa fa-exchange fa-2x",state:"fileTransfer"},{id:134,description:"Instructions",class:"fa fa-quote-left fa-2x"},{id:135,description:"Inquiry",class:"fa fa-question-circle fa-2x"},{id:136,description:"Messaging",class:"fa fa-envelope fa-2x"},{id:137,description:"Interactive Analysis",class:"fa fa-bar-chart-o fa-2x"},{id:138,description:"Thought Leadership",class:"fa fa-lightbulb-o fa-2x"},{id:139,description:"User Admin and Lookup",class:"fa fa-user fa-2x"}]}return{nxnNavBar:a(),nxnQuickAccessNavBar:b()}}angular.module("NexenCommon").constant("NxnGatewayNavbar",new a)}(),angular.module("nxn.categoryFilters",[]).factory("nxnCategoryFilters",function(){var a={};return a.hideDefaultSubGrp=!1,a.hideIfSingleCategory=!1,a.disableParentGroup=!1,a.data=[],a.selectedParentGrp={},a.selectedSubGrp={key:"All",value:"All Categories"},a.placeholder="Select Category",a.defaultSubGrp={key:"All",value:"All Categories"},a.hideCategories=function(){return!(this.data.length<=1||!this.hideIfSingleCategory)},a.setDefaultSubGrp=function(a){this.defaultSubGrp=this.selectedSubGrp=a},a.setSelectedParentGrp=function(a){this.selectedParentGrp=a},a.parentGrpChanged=function(){this.onParentGrpChanged()},a.subGrpSelected=function(a){this.selectedSubGrp=a,this.onSubGroupSelected()},a.setData=function(a){Array.isArray(a)&&a.length>0&&(this.data=a,this.selectedParentGrp=this.data[0])},a.showGroup=function(a){return a.visible},a.onParentGrpChanged=function(){return"External action not set!"},a.onSubGroupSelected=function(){return"External action not set!"},a}),function(){"use strict";angular.module("NexenCommon").value("nxnDPDefaultParams",{APPLICATION_MNEMONIC:"NXN",ENTERPRISE_STATUS_CODE:"D",LINE_OF_BUSINESS:"Client Experience Delivery",OPTIONAL_CONTEXT_5:"NEXEN PORTAL",ORIGINATING_APPLICATION_ID:"",PAYLOAD_TYPE:"Non-Process",POST_APPLICATION_ID:"NXN"})}(),angular.module("NexenCommon").controller("nxnNgTableGroupCtrl",["$scope","$attrs",function(a,b){angular.isUndefined(a.group.$hideRows)&&(a.group.$hideRows=!0),a.$watch(b.collapseBy,function(b,c){angular.isUndefined(b)?angular.forEach(a.$groups,function(a){a.$hideRows=!1,a.expandGroup=!0}):angular.forEach(a.$groups,function(a){a.$hideRows=b,a.expandGroup=!b}),angular.isUndefined(b)||b===!1?a.params.expandedGroupCount=a.params.expandableGroupCount:a.params.expandedGroupCount=0})}]),angular.module("NexenApp.ngTableParams").provider("nxnNgTableParams",[function(){function a(a){return angular.isUndefined(a)?{page:1,count:25}:(angular.isUndefined(a.page)&&(a.page=1),angular.isUndefined(a.count)&&(a.count=25),a)}function b(a,b){return a.counts=[],a.total=0,angular.isUndefined(a.availableCounts)&&(a.availableCounts=[{value:-1,name:"All"}]),angular.isUndefined(a.getData)&&(a.getData=function(a,c){var d=c.getCurrentData(),e=c.filter?b("filter")(d,c.filter()):d,f=[];f=c.orderBy().length>0?b("orderBy")(e,c.orderBy()):e,c.total(f.length),c.isPartial()||c.setFilteredData(f,c.page()),c.count()===-1?a.resolve(f):a.resolve(f.slice((c.page()-1)*c.count(),c.page()*c.count()))}),a}function c(a,b,c){var d=[],e=angular.isDefined(c)?c:[25,100,-1];return angular.forEach(e,function(c){var e;angular.isNumber(c)?(e={},e.value=c,e.name=c>=0?""+c:"All"):e=c,e.value===-1&&angular.isNumber(b)||a>e.value&&d.push({value:e.value,name:e.name})}),angular.isNumber(b)&&d.push({value:b,name:""+b}),d}this.$get=["ngTableParams","$filter","$timeout","$q","nxn.formats","nxn.formatData","ModalSpinnerService","NxnExportService",function(d,e,f,g,h,i,j,k){return{get:function(f,h,i,l,m,n,o){var p,q,r,s,t,u,v=!1,w=100,x=!0,y=!0,z=!0,A=[],B=[],C=0,D=0,E=0,F=0,G=[],H=1,I=[],J="DD MMM YYYY h:mm:ss A z",K=moment.tz.guess(),L=null,M=new d(a(f),b(h,e));M.groupedTable=!1,M.expandGroups=!1,M.expandableGroupDeterminer=o,M.setGroupedTable=function(a){M.groupedTable=a,M.collapseGroupBy=!M.expandGroups,M.collapseText="Expand",angular.isDefined(M.expandableGroupDeterminer)&&(M.expandableGroupCount=M.getExpandableGroupCount(),M.expandedGroupCount=0)},M.setCount=function(a){if(M.parameters({count:a}),v){F=Math.ceil(E/M.count()),D=Math.ceil(C/M.count()),q=Math.ceil(p/M.count()),s=Math.ceil(w/M.count()),M.settings().availableCounts=c(C,w,t);var b=[];for(N=0;N<D;N++)b.push({num:N+1+F});G=b;var d=[];for(N=0;N<q;N++)d.push({num:N+1});A=d,H=F+1,M.setSelectedPage(H)}else{q=M.count()===-1?1:Math.ceil(p/M.count()),M.settings().availableCounts=c(p,null,t);var e=[];for(N=0;N<q;N++)e.push({num:N+1});A=e,M.setSelectedPage(1)}M.reload()},M.getAvailableCounts=function(){return M.settings().availableCounts},M.isPartial=function(){return v},M.getTotalLength=function(){return p},M.getTotalPageCount=function(){return q},M.getNumSets=function(){return r},M.getPagesPerSet=function(){return s},M.getTotalPages=function(){return A},M.setSearchAvailable=function(a){x=a},M.isSearchAvailable=function(){return x},M.setExportAvailable=function(a){y=a},M.isExportAvailable=function(){return y},M.setCustomPaginationCounts=function(a){t=a},M.setShowSpinner=function(a){z=a},M.getCustomPaginationCounts=function(){return t},M.getMinimumPaginationCount=function(){var a=25;return angular.forEach(t,function(b){b!==-1&&b<a&&(a=b)}),a},M.setPartialParams=function(a,b){v=!0,w=b,p=angular.isNumber(a)?a:0,r=Math.ceil(p/w),q=Math.ceil(p/M.count()),s=Math.ceil(w/M.count()),M.settings.availableCounts=c(p,w,t),A=[];var d;for(d=0;d<q;d++)A.push({num:d+1})},M.getSelectedPageNum=function(){return H},M.getCurrentRange=function(){var a,b,c=parseInt(M.page(),10),d=M.count();return i?(a=E+(c-1)*d+1,b=E+c*d>p?p:c*d+E,{start:a,end:b}):(d===-1?(a=1,b=p):(a=(c-1)*d+1,b=c*d>p?p:c*d),{start:a,end:b})},M.getPaginationRange=function(){return M.getCurrentRange().start+" − "+M.getCurrentRange().end+" / "+M.getTotalLength()},M.getPaginationRangeOf=function(){return M.getCurrentRange().start+" − "+M.getCurrentRange().end+" of "+M.getTotalLength()},M.setCurrentData=function(a,b,d,e){B=angular.isUndefined(a)||null===a||!angular.isArray(a)?[]:a,angular.isDefined(b)&&null!==b&&(u=b);var f,g=angular.isDefined(e)&&null!==e?e:1;if(v){C=B.length,E=parseInt(d,10),F=Math.ceil(E/M.count()),D=Math.ceil(C/M.count()),M.settings().availableCounts=c(C,w,t);var h=[];for(f=0;f<D;f++)h.push({num:f+1+F});G=h,H=g,M.page(H-F)}else{p=B.length,q=Math.ceil(p/M.count()),M.settings().availableCounts=c(p,null,t);var i=[];for(f=0;f<q;f++)i.push({num:f+1});A=i,H=Math.max(Math.min(g,q),1),M.page(H)}angular.isDefined(M.expandableGroupDeterminer)&&(M.expandableGroupCount=M.getExpandableGroupCount(),M.expandedGroupCount=M.getExpandedGroupCount(),M.expandableGroupCount===M.expandedGroupCount?(M.expandGroups=!0,M.collapseGroupBy=!1,M.collapseText="Collapse"):0===M.expandedGroupCount&&(M.expandGroups=!1,M.collapseGroupBy=!0,M.collapseText="Expand")),M.reload()},M.getFilteredData=function(){return I},M.setFilteredData=function(a,b){I=a;var d,e=angular.isDefined(b)&&null!==b?b:1;if(v){C=I.length,E=parseInt(n,10),F=Math.ceil(E/M.count()),D=Math.ceil(C/M.count()),M.settings.availableCounts=c(C,w,t);var f=[];for(d=0;d<D;d++)f.push({num:d+1+F});G=f,H=e,M.page(H-F)}else{p=I.length,q=Math.ceil(p/M.count()),M.settings.availableCounts=c(p,null,t);var g=[];for(d=0;d<q;d++)g.push({num:d+1});A=g,H=Math.max(Math.min(e,q),1),M.page(H)}},M.getCurrentData=function(){return B},M.isSinglePage=function(){return!(A.length>1)},M.dynamicWidth=function(a){return"All"!==a&&"25"!==a?"nxn-table-uiSelect-width":"nxn-table-uiSelect-stockWidth"},M.setSelectedPage=function(a){if(i)if(a<G[0].num||a>G[G.length-1].num){var b=Math.ceil(a/s),c=(b-1)*w;if(null===L)return;var d=g.defer(),e=d.promise;e.then(function(b){M.setCurrentData(b.data,b.time,b.offset,a)}),L.apply(M.settings().$scope,[d,{offset:c}])}else H=a,M.page(a-F);else H=a,M.page(a)},M.isFirst=function(){return 0===A.length||H===A[0].num},M.isLast=function(){return 0===A.length||H===A[A.length-1].num},M.prevPage=function(){H-=1,M.setSelectedPage(H)},M.nextPage=function(){H+=1,M.setSelectedPage(H)},M.getCurrentDataTime=function(){return angular.isDefined(u)||(u=""),u},M.getFormattedCurrentDataTime=function(){return angular.isDefined(u)?moment(u).tz(K).format(J):""},M.updateFilteredData=function(){M.page(1),M.reload()},M.getPageCount=function(){return M.count()===-1?1:Math.ceil(M.total()/M.count())},M.setServerDataFn=function(a){angular.isFunction(a)&&(L=a,M.isRefreshable=!0)},M.isRefreshable=!1,M.refresh=!1,M.refreshSuccess=0,M.refreshFail=0,M.refreshCurrentSet=function(){if(null!==L){if(M.refresh=!0,M.refresh===!0&&(z=!1),z){j.showModal()}var a=g.defer(),b=a.promise;b.then(function(a){M.refreshSuccess++,z&&j.closeModal(),i?M.setCurrentData(a.data,a.time,a.offset,H):M.setCurrentData(a.data,a.time,0,H)},function(a){M.refreshFail++,z&&j.closeModal()}),i?L.apply(M.settings().$scope,[a,{offset:E}]):L.apply(M.settings().$scope,[a,""]),M.searchText=""}},M.getNextSet=function(){if(!M.isLast()&&null!==L){var a=g.defer(),b=a.promise;b.then(function(a){i?M.setCurrentData(a.data,a.time,a.offset):M.setCurrentData(a.data,a.time)}),i?L.apply(M.settings().$scope,[a,{offset:E+w}]):L.apply(M.settings().$scope,[a,""])}},M.includeCollapseGroups=!1,M.setIncludeCollapseGroups=function(){M.includeCollapseGroups=!0},M.getIncludeCollapseGroups=function(){return M.includeCollapseGroups&&(angular.isDefined(h.groupBy)||M.groupedTable)},M.collapseText="Collapse",M.getExpandedGroupCount=function(){var a=0,b=M.getCurrentData();return angular.forEach(b,function(b){b.expandGroup&&(a+=1)}),a},M.getExpandableGroupCount=function(){var a,b=M.getCurrentData();return"ALL_ROWS"===M.expandableGroupDeterminer?a=b.length:(a=0,angular.forEach(b,function(b){b[M.expandableGroupDeterminer]&&(a+=1)})),a},M.toggleCollapseGroup=function(a){var b=!1;a.expandGroup=!a.expandGroup,a.expandGroup?(M.expandedGroupCount=M.expandedGroupCount+1,M.expandedGroupCount===M.expandableGroupCount&&(M.expandGroups||(b=!0,M.collapseText="Collapse"))):(M.expandedGroupCount=M.expandedGroupCount-1,0===M.expandedGroupCount&&M.expandGroups&&(b=!0,M.collapseText="Expand")),b&&(M.collapseGroupBy=!M.collapseGroupBy,M.expandGroups=!M.expandGroups)},M.toggleCollapseGroups=function(){if(M.collapseGroupBy=!M.collapseGroupBy,M.collapseGroupBy?(M.collapseText="Expand",M.expandedGroupCount=0):(M.collapseText="Collapse",M.expandedGroupCount=M.expandableGroupCount),M.groupedTable){M.expandGroups=!M.expandGroups;var a=M.getCurrentData();angular.forEach(a,function(a){a.expandGroup=M.expandGroups})}},M.getPreviousSet=function(){if(!M.isFirst()&&null!==L){var a=g.defer(),b=a.promise;b.then(function(a){i?M.setCurrentData(a.data,a.time,a.offset):M.setCurrentData(a.data,a.time)}),i?L.apply(M.settings().$scope,[a,{offset:E-w}]):L.apply(M.settings().$scope,[a,""])}};M.setColumns=function(a){M.columns=a},M.getColumns=function(){return M.columns},M.searchText="";M.exportTableData=!1,M.setExportFields=function(a){M.exportFields=a},M.getExportFields=function(){return M.exportFields},M.setExportAsOfDate=function(a){M.exportAsOfDate=a},M.getExportAsOfDate=function(){return M.exportAsOfDate},M.setExportHeading=function(a){M.exportHeading=angular.isDefined(a)?a:null},M.getExportHeading=function(){return M.exportHeading},M.setExportPaperType=function(a){M.exportPaperType=angular.isDefined(a)?a:null},M.getExportPaperType=function(){return M.exportPaperType},M.setExportData=function(a){M.exportData=a},M.getExportData=function(){var a=M.sorting?e("orderBy")(M.exportData,M.orderBy()):M.exportData;return a};M.setExportTitle=function(a){M.exportTitle=angular.isDefined(a)?a:null},M.getExportTitle=function(){return M.exportTitle},M.setExportFooter=function(a){M.exportFooter=angular.isDefined(a)?a:null},M.getExportFooter=function(){return M.exportFooter},M.setExportNotes=function(a){M.exportNotes=angular.isDefined(a)?a:null},M.getExportNotes=function(){return angular.isFunction(M.exportNotes)?M.exportNotes.apply(M.settings().$scope,[]):M.exportNotes},M.setExportTableData=function(a){M.exportTableData=a},M.setExportDesc=function(a){M.exportDesc=a,M.setExportHeading(a.heading),M.setExportPaperType(a.paperType),M.setExportFields(a.columns),M.setExportTitle(a.title),M.setExportFooter(a.footer),M.setExportNotes(a.notes)},M.getExportJson=function(){var a={};if(a.heading=M.getExportHeading(),a.paperType=M.getExportPaperType(),a.fields=M.getExportFields(),a.title=M.getExportTitle(),a.footer=M.getExportFooter(),a.notes=M.getExportNotes(),M.exportTableData)if(M.groupedTable){var b={pdf:[],xls:[]};b.pdf=k.getExportDataDesc(I,M.exportDesc.pdf),b.xls=k.getExportDataDesc(I,M.exportDesc.xls),a.data=b}else a.data=I;else a.data=M.exportData;return a},M.setExportTransformFn=function(a){M.exportTransformFn=a},M.getExportTransformFn=function(){return M.exportTransformFn},M.updateSearchFn=null,M.setUpdateSearchFn=function(a){angular.isFunction(a)&&(M.updateSearchFn=a)},M.updateSearch=function(){(M.updateSearchFn||angular.noop)(M.searchText)},v=i,B=angular.isUndefined(l)||null===l||!angular.isArray(l)?[]:l,angular.isDefined(m)&&null!==m&&(u=m);var N;if(v)for(C=B.length,E=parseInt(n,10),F=Math.ceil(E/M.count()),D=Math.ceil(C/M.count()),M.settings().availableCounts=c(C,w),G=[],N=0;N<D;N++)G.push({num:N+1+F});else for(p=B.length,q=M.count()===-1?1:Math.ceil(p/M.count()),M.settings().availableCounts=c(p,null),A=[],N=0;N<q;N++)A.push({num:N+1});return H=1,M.page(1),M}}}]}]),angular.module("NexenCommon").directive("nxnCustomizeColumns",[function(){return{restrict:"A",controller:"nxnTableColumnController",templateUrl:"partials/common/customizeColumns.html",scope:{displayColumns:"=nxnColumnFields"}}}]).controller("nxnTableColumnController",["$scope","nxnTableColumns",function(a,b){var c=!1;a.allSelected=!0,a.tableColumns=new b(a.displayColumns),a.displayColumns=a.tableColumns.getDisplayColumns(),a.allColumnsSelected=a.tableColumns.isAllSelected(),a.reset=function(){a.tableColumns.reset()},a.selectAll=function(b){a.tableColumns.selectAll(b)},a.selectColumn=function(b){a.tableColumns.setColumnVisibility(b.title,b.isSelected)},a.setAllSelected=function(b){b.isSelected=!b.isSelected,b.isSelected||(a.tableColumns.allSelected=!1,a.allColumnsSelected=!1)},a.customizeColumns=function(){c||(a.showDropdown=!0,$(".grid-settings-dropdown").slideToggle("fast"))},a.applySettings=function(b){angular.forEach(b,function(b){a.selectColumn(b)}),$(".grid-settings-dropdown").slideToggle("fast"),a.showDropdown=!1}}]).factory("nxnTableColumns",function(){var a=function(a){var b=this;if(this.availableColumns=[],this.columnMap={},this.defaultAllSelected=!0,this.allSelected=!0,this.displayColumns=[],angular.isArray(a)){this.availableColumns=[],this.columnMap={},this.defaultAllSelected=!0,this.allSelected=!0,this.displayColumns=[],this.availableColumns=a;var c=[];angular.forEach(this.availableColumns,function(a){a.fixed=!angular.isUndefined(a.fixed)&&a.fixed===!0,a.default=!angular.isUndefined(a.default)&&a.default===!0,b.columnMap[a.title]=a;var d=angular.extend({},a);d.visible=d.fixed||d.default,d.visible||(b.defaultAllSelected=!1,b.allSelected=!1),c.push(d)}),this.displayColumns=c}return this.selectAll=function(a){a&&(angular.forEach(this.displayColumns,function(a){a.isSelected=!0}),this.allSelected=!0)},this.reset=function(){angular.forEach(this.displayColumns,function(a){var c=b.columnMap[a.title];a.isSelected=c.fixed||c.default}),this.allSelected=this.defaultAllSelected},this.setColumnVisibility=function(a,c){var d=!0;angular.forEach(this.displayColumns,function(e){var f=b.columnMap[e.title];e.title===a&&(e.visible=!!f.fixed||c,e.visible||(d=!d&&d))}),this.allSelected=d},this.isAllSelected=function(){return this.allSelected},this.getDisplayColumns=function(){return this.displayColumns},this};return a}),angular.module("nxn.persistentAnnouncements").directive("nxnPersistentAnnouncements",NxnPersistentAnnouncemenetsComponentDirective),NxnPersistentAnnouncemenetsComponentDirective.$inject=["$state","ContentContextService","NxnWhiteLabelService"],function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){A&&(e.sync(),k.startNavigation())}function t(a){a.loggedIn&&!a.isError&&b.$broadcast("LOGGED_IN"),c.loggedIn=a.loggedIn,c.isTokenUser=q.isTokenUser(),angular.isDefined(a.components)&&(c.components={}),c.env="connect-"+a.env,c.showUserProfile=function(b){var c={};c.headerText="My Profile Settings",c.bodyUrl="partials/user-settings/userSettingModal.html",c.components=a.components,c.scope={userObj:b};var d={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};h.showModal(d,c).result.then(function(a){})};var d=a.env;if(b.env=d,d&&("dev"===d.toLowerCase()?a.connectUrl="https://connect-dev.bnymellon.com/ConnectLogin/flow/routerFlow.htm":"qa"===d.toLowerCase()?a.connectUrl="https://connect-uat.bnymellon.com/ConnectLogin/flow/routerFlow.htm":"dcat"===d.toLowerCase()?a.connectUrl="https://connect-dcat.bnymellon.com/ConnectLogin/flow/routerFlow.htm":"xat"===d.toLowerCase()?a.connectUrl="https://connect-dcat.bnymellon.com/ConnectLogin/flow/routerFlow.htm":"production"===d.toLowerCase()?a.connectUrl="https://connect.bnymellon.com/ConnectLogin/flow/routerFlow.htm":a.connectUrl="https://connect-dev.bnymellon.com/ConnectLogin/flow/routerFlow.htm"),angular.isDefined(a.userSettings)){var e={prflDtFmt:a.userSettings["GEN.REG.DATEFRMT"],prflTmZn:a.userSettings["GEN.REG.TIMEZONE"],prflTmFmt:a.userSettings["GEN.REG.TIMEDIS"],prflDtSprtr:a.userSettings["GEN.REG.DATESEP"],prflNmDecGrpng:a.userSettings["GEN.REG.DECGROUPDIS"],prflNmNgtveFmt:a.userSettings["GEN.REG.NUMFRMT"],prflNmZeroDis:a.userSettings["GEN.REG.ZERODIS"]};e.prfl24HrFmt=!!a.userSettings["GEN.REG.TIMECLOCK"]&&"TRUE"===a.userSettings["GEN.REG.TIMECLOCK"],n.setUserPreference(e)}}function u(a,b){angular.isString(b.headerLogoClass)&&a.setLogoClass(b.headerLogoClass),angular.isString(b.headerLogoTitle)&&a.setLogoTitle(b.headerLogoTitle)}function v(b){angular.isString(b.title)&&(a[0].title=b.title)}function w(a,b){p.setDisplayInfo(a,b,"displayPrivacyPolicy","linkPrivacyPolicy",!1,""),p.setDisplayInfo(a,b,"displaySysRequirements","linkSysRequirements",!1,""),p.setDisplayInfo(a,b,"displayTermsOfUse","linkTermsOfUse",!1,""),p.setDisplayInfo(a,b,"displayCookiePolicyFooter","linkCookiePolicyFooter",!1,"")}function x(a,b){p.setStringResource(a,b,"copyrightPrefix",""),p.setStringResource(a,b,"copyrightSuffix","")}function y(a,b){p.setStringResource(a,b,"logoutLabel","Sign Out")}function z(a,b){p.setStringResource(a,b,"footerLogoSrc",""),p.setStringResource(a,b,"footerLogoAlt",""),p.setStringResource(a,b,"privacyLinkText","")}f.getContentStateSubject().subscribe(function(a){c.displayUIView=a.displayLegacyContent&&(a.displayPublicContent||a.displayPrivateContent),
c.displayStepup=a.displayLegacyContent&&!a.displayPublicContent&&!a.displayPrivateContent,c.displayWLContent=!o.isMainApp()&&q.displayRootWLModal()&&q.isInternalUser()}),c.onLoginStepupDismiss=function(){g.logout().then(function(){r.location.href="/"})},c.onLoginStepupSuccess=function(){q.setTokenVerified()};var A=!1;l.observe().filter(function(a){return a.legacy.combinedJsLoadState&&a.pageContext.isReady&&a.manifestRoutes.haveRoutesRegistered}).distinctUntilChanged(function(a,b){return a.pageContext===b.pageContext}).subscribe(function(a){A=!0,s(),t(q.adapterFunction(a))}),b.$watch(q.isTokenVerified,function(a){c.tokenUserVerified=q.isTokenVerified()}),c.previousState={},c.$on("windowResize",function(a,b){var e=!1;"extra small"===b||"small"===b?(c.windowResizedForMobile=!0,e=!!(d.$current&&d.$current.params&&d.$current.params.mobileIncompatible&&d.$current.params.mobileIncompatible.value),e&&d.go("warning")):(c.windowResizedForMobile=!1,e=!!(c.previousState&&c.previousState.params&&c.previousState.params.mobileIncompatible&&c.previousState.params.mobileIncompatible.value),"warning"===d.$current.name&&e&&d.go(c.previousState))}),b.$on("$stateChangeSuccess",function(a,b,d,e){c.previousState=e?e:{}}),c.state=d,c.resetState=function(a){a.indexOf("(")>-1&&(a=a.substring(0,a.indexOf("(")));for(var b=m.resetStatesFor(a),c=0;c<b.length;c++)m.resetState(b[c])},c.getColumnDataJustificationStyle=function(a){if(angular.isDefined(a)&&"NUMBER"===a)return{textAlign:"right"}},c.formatData=i.format,c.wlResources={copyrightPrefix:"",copyrightSuffix:"",displayCookiePolicyFooter:!1,displayPrivacyPolicy:!1,displaySysRequirements:!1,displayTermsOfUse:!1,footerLogoSrc:"",footerLogoAlt:"",linkCookiePolicyFooter:"",linkPrivacyPolicy:"",linkSysRequirements:"",linkTermsOfUse:"",logoutLabel:"",privacyLinkText:""},c.isMainApp=o.isMainApp(),j.setLogoClass(""),j.setLogoTitle(""),o.getWLResources().then(function(a){u(j,a),v(a),w(c.wlResources,a),x(c.wlResources,a),z(c.wlResources,a),y(c.wlResources,a)}),o.getWLSubject().subscribe(function(a){u(j,a),v(a),w(c.wlResources,a),x(c.wlResources,a),z(c.wlResources,a),y(c.wlResources,a)})}angular.module("NexenCommon").controller("PageContextController",a),a.$inject=["$document","$rootScope","$scope","$state","$urlRouter","ContentContextService","LogoutService","ModalService","nxn.formatData","NxnLogo","NxnRouterListenerService","nxnStoreService","nxnStickyStateRefresher","nxnUserPreferencesServiceUtil","NxnWhiteLabelService","NxnWhiteLabelUtil","PageContext","$window"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){var c=[];c[0]=h.getPluginList(!0),c[1]=i.getUserPluginEntitlements(j.getUser()),f.showModal(),a.all(c).then(function(a){f.closeModal();var b=a[0].data.plugins;w.pluginAdminEntitlements=a[1];var c=[];_.forEach(b,function(a){_.forEach(w.pluginAdminEntitlements,function(b){a.name===b&&(w.originalPlugins[a.name]=_.cloneDeep(a),c.push(a))})}),w.plugins=c,w.updateTable()},function(){f.closeModal(),b.errorMessage="Error while loading plugins. Please retry."})}function o(a){var b=e.showModal({size:"sm"},{headerText:"Update",changesToPlugin:w.getPluginChanges(a),bodyUrl:"partials/pluginAdmin/pluginSubmitConfirmModal.html"});return b.result.then(w.submit),b}function p(b){b&&(f.showModal(),h.updatePlugin(b).then(function(a){q(b),f.closeModal(),delete b.dirty,b.version===b.stagedVersion&&(b.stagedVersion=""),w.originalPlugins[b.name]=_.cloneDeep(b),w.unsetErr(),w.submitSuccess=!0,setTimeout(function(){w.submitSuccess=!1},2e3)},function(c){var d=c.status+": "+c.data;return q(b,d),f.closeModal(),w.setErr(d),a.reject(d)}))}function q(a,b){var c=[{env:"MOCK",isEnable:!0,postToEnv:["MOCK"]},{env:"DEV",isEnable:!0,postToEnv:["DEV"]},{env:"QA",isEnable:!0,postToEnv:["XAT"]},{env:"XAT",isEnable:!0,postToEnv:["XAT"]},{env:"PRODUCTION",isEnable:!0,postToEnv:["PRODUCTION"]}],e={businessProcessCode:m.getCookie("wlCookie"),payloadMetric:"PLUGIN_ADMIN_TRAIL_STATS",postAppMnemonic:"NXN",currentTimeStamp:new Date,currentEnv:j.getEnvironment()?j.getEnvironment():l.getCurrentEnv(host),userId:j.getUser()?j.getUser():k.unknownValue,pluginName:a.name,action:a.enabled?"Enabled":"Disabled",pluginVersion:a.version,status:b?"Failure":"Success",errorMessage:b,envDPInfo:c},f=d.get("nxn.dp.payload.service");f.sendPluginAdminAuditTrailStats(e)}function r(a){var b=w.originalPlugins[a.name];a.dirty=b.version!==a.version||b.enabled!==a.enabled}function s(a){var b={},c=w.originalPlugins[a.name],d=[];return c.enabled!==a.enabled&&d.push({fieldChanged:"Enabled",prevValue:c.enabled,newValue:a.enabled}),c.version!==a.version&&d.push({fieldChanged:"Version",prevValue:c.version,newValue:a.version}),d.length>0&&(b={plugin:a,changes:d}),b}function t(a){return angular.isArray(w.pluginAdminEntitlements)&&w.pluginAdminEntitlements.indexOf(a)!==-1}function u(a){w.errorOccurred=!0,w.errMessage=a}function v(){w.errorOccurred=!1}var w=this;w.getPluginChanges=s,w.hasEntitlement=t,w.initializePlugins=n,w.markPluginAsUpdated=r,w.openConfirmModal=o,w.submit=p,w.setErr=u,w.unsetErr=v,w.errorOccurred=!1,w.plugins=[],w.originalPlugins={},w.pluginAdminEntitlements={},w.tableParams=g.get({count:5e3},{},!1,w.plugins),w.updateTable=function(){w.tableParams.setCurrentData(w.plugins)},w.initializePlugins()}var b=angular.module("nxn.pluginAdmin");b.controller("PluginAdminController",["$q","$scope","$state","$injector","ModalService","ModalSpinnerService","nxnNgTableParams","PluginService","userEntitlementsService","PageContext","nxn.dpConstants","nxn.getCurrentEnvironment","CookieService",a])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){var a=e.showModal({size:"sm"},{headerText:"Apply Plugin Changes Globally",changesToPlugins:F.getPluginsChanges(),bodyUrl:"partials/pluginConfig/pluginSubmitConfirmModal.html",getChangeRowHeight:function(a){return{height:20*a+"px"}}});return a.result.then(F.submit),a}function k(){var a=e.showModal({size:"sm"},{headerText:"Enable Staged Plugins",changesToPlugins:F.getStagedPlugins(),noStagedPlugins:F.noStagedPlugins(),bodyUrl:"partials/pluginConfig/pluginSubmitConfirmModal.html",getChangeRowHeight:function(a){return{height:20*a+"px"}}});return a.result.then(F.submitStagedPlugins,F.cancelStagedPlugins),a}function l(){var a=e.showModal({size:"sm"},{headerText:"Single-User Preview",changesToPlugins:F.getPluginsChanges(),bodyUrl:"partials/pluginConfig/pluginPreviewModal.html",getChangeRowHeight:function(a){return{height:20*a+"px"}}});return a.result.then(m),a}function m(){g.startEmulation(),g.setEmulationPlugins(n()),d.location.reload()}function n(){var a=[],b=_.cloneDeep(F.plugins);return angular.forEach(b,function(b){b.enabled&&(delete b.$$hashKey,a.push(b))}),a}function o(){g.stopEmulation(),F.pluginsChanged={},d.location.reload()}function p(){g.isPreviewStarted()?o():F.openPreviewConfirmModal()}function q(){var b=[];_.forEach(F.pluginsChanged,function(a){var c=y(a).finally(function(){F.originalPlugins[a.name]=_.cloneDeep(a),delete F.pluginsChanged[a.name]});b.push(c)}),a.all(b).then(function(){F.unsetErr(),F.submitSuccess=!0})}function r(){var b=[];_.forEach(F.stagedPlugins,function(a){var c=z(a).finally(function(){F.isStagedPluginsUpdationStarted=!1});b.push(c)}),a.all(b).then(function(){F.unsetErr(),F.submitSuccess=!0})}function s(){_.forEach(F.stagedPlugins,function(a){E(a.name)}),F.isStagedPluginsUpdationStarted=!1}function t(){return g.isPreviewStarted()?"Stop Preview":"Start Preview"}function u(a){F.isStagedPluginsUpdationStarted||(F.pluginsChanged[a.name]=a)}function v(){return _.isEmpty(F.pluginsChanged)}function w(){return _.isEmpty(F.stagedPlugins)}function x(){F.previewMode=g.isPreviewStarted(),F.isPluginAdmin=i.hasExactEntitlement("PLUGIN_ADMIN");var a=h.getPluginList(!0);return a.then(function(a){var b=a.data.plugins;_.forEach(b,function(a){F.originalPlugins[a.name]=_.cloneDeep(a)});for(var c=0;c<b.length;c++)if(b[c].allVersions=[],angular.isDefined(b[c].stagedVersion)&&!b[c].isPluginAdminControlled&&(F.stagedPlugins[b[c].name]=b[c]),g.isPreviewStarted()){b[c].enabled=!1;var d=g.getPreviewPlugin(b[c].name);d&&(b[c]=d)}g.isPreviewStarted()&&(F.pluginsChanged=b),F.plugins=b,F.updateTable()},function(a){var b=a.status+": "+a.data;F.setErr(b)}),a}function y(b){var c={name:b.name,enabled:b.enabled,version:b.version,pluginFiles:b.pluginFiles};return h.updatePlugin(c).then(function(a){},function(b){var c=b.status+": "+b.data;return F.setErr(c),a.reject(c)})}function z(b){var c={name:b.name,enabled:b.enabled,version:b.version,pluginFiles:b.pluginFiles};return h.updatePlugin(c).then(function(a){F.originalPlugins[a.config.data.name]=_.cloneDeep(a.config.data),delete F.stagedPlugins[a.config.data.name]},function(b){E(b.config.data.name);var c=b.status+": "+b.data;return F.setErr(c),a.reject(c)})}function A(){var a={};return _.forEach(F.pluginsChanged,function(b,c){var d=F.originalPlugins[c],e=[];d.enabled!==b.enabled&&e.push({fieldChanged:"enabled",prevValue:d.enabled,newValue:b.enabled}),d.version!==b.version&&e.push({fieldChanged:"version",prevValue:d.version,newValue:b.version}),e.length>0&&(a[c]=e)}),a}function B(){F.isStagedPluginsUpdationStarted=!0;var a=F.originalPlugins,b={};return _.forEach(a,function(a,c){var d=[];angular.isDefined(a.stagedVersion)&&!a.isPluginAdminControlled&&(a.enabled||(F.stagedPlugins[c].enabled=!a.enabled,F.stagedPlugins[c].isPreviouslyDisabled=!0,d.push({fieldChanged:"enabled",prevValue:a.enabled,newValue:!a.enabled})),a.version!==a.stagedVersion&&(F.stagedPlugins[c].previousVersion=a.version,F.stagedPlugins[c].version=a.stagedVersion,d.push({fieldChanged:"version",prevValue:a.version,newValue:a.stagedVersion}))),d.length>0&&(b[c]=d)}),b}function C(a){F.errorOccurred=!0,F.errMessage=a}function D(){F.errorOccurred=!1}function E(a){var b=F.stagedPlugins[a];angular.isDefined(b.previousVersion)&&(b.version=b.previousVersion),angular.isDefined(b.isPreviouslyDisabled)&&(b.enabled=!1)}var F=this;F.openConfirmModal=j,F.openStagedPluginsConfirmModal=k,F.getPluginsChanges=A,F.getStagedPlugins=B,F.initializePlugins=x,F.markPluginAsUpdated=u,F.noPluginsChanged=v,F.noStagedPlugins=w,F.getPreviewToggleButtonLabel=t,F.openPreviewConfirmModal=l,F.submit=q,F.submitStagedPlugins=r,F.cancelStagedPlugins=s,F._updatePlugin=y,F._updateStagedPlugin=z,F.setErr=C,F.unsetErr=D,F.togglePreview=p,F.revertStagedPlugin=E,F.isStagedPluginsUpdationStarted=!1,F.errorOccurred=!1,F.viewOnlyMode=!1,F.plugins=[],F.pluginsChanged={},F.stagedPlugins={},F.originalPlugins={},F.isPreviewStarted=g.isPreviewStarted,F.copyEnabledPlugins=n,F.tableParams=f.get({count:5e3},{},!1,F.plugins),F.updateTable=function(){F.tableParams.setCurrentData(F.plugins)},F.initializePlugins()}var b=angular.module("nxn.pluginConfig");b.controller("PluginConfigController",["$q","$scope","$state","$window","ModalService","nxnNgTableParams","PluginPreviewService","PluginService","PageContext",a])}(),function(){"use strict";var a=angular.module("nxn.pluginConfig");a.directive("nxnPluginVersionSelector",["$timeout","PluginService",function(a,b){return{templateUrl:"partials/pluginConfig/nxnPluginVersionSelector.html",restrict:"E",link:function(a,c,d){function e(){var c=a.plugin;c.allVersions=[];var d=b.getPluginVersions(c.name);d.then(function(b){for(var d=b.data,e=0;e<d.length;e++)d[e].blacklisted!==!0&&c.allVersions.push(d[e].version);c.allVersions.reverse(),a.pluginConfig.updateTable()},function(b){var c=b.status+": "+b.data;a.pluginConfig.setErr(c)})}a.$watch("plugin.version",function(c,d){angular.isString(c)&&c!==d&&(a.pluginConfig.markPluginAsUpdated(a.plugin),b.getPluginAtVersion(a.plugin.name,c).then(function(b){a.plugin.pluginFiles=b.data.pluginFiles},function(b){var c=b.status+": "+b.data;a.pluginConfig.setErr(c)}))});var f=!1;a.lazyLoadVersions=function(){f||(e(),f=!0)},a.disabled=a.$eval(d.ngDisabled),angular.isDefined(d.lazyLoad)&&"false"===d.lazyLoad&&a.lazyLoadVersions()}}}])}(),angular.module("NexenCommon").directive("nxnPresent",["$compile","$window","nxnWindowSizeService","PageContext","$sce",function(a,b,c,d,e){return{link:function(f,g,h){d.get(function(d){var i=angular.element(b),j=c.getWindowSize(i.width()),k=function(a){var b=!1;if(angular.isDefined(h.nxnBreakpoint)){b=!1;var c=h.nxnBreakpoint,d=c.split(",");angular.forEach(d,function(c,d){a===c&&(b=!0)})}b?(g.removeClass("ng-hide"),g.addClass("ng-show")):(g.removeClass("ng-show"),g.addClass("ng-hide"))};i.bind("resize",function(b){var d=c.getWindowSize(i.width());d!==j&&(k(d),a(e.trustAsHtml(g.html()))(f),j=d)}),k(j)})}}}]).directive("nxnPresentEntitlement",["$compile","PageContext",function(a,b){return{link:function(a,c,d){function e(){c.removeClass("ng-hide"),c.addClass("ng-show")}function f(){c.removeClass("ng-show"),c.addClass("ng-hide")}d.$observe("nxnEntitlement",function(a){if(a&&""!==a){var c=a.split(",").map(_.trim).some(b.hasExactEntitlement);if(c)return void e();f()}else e()})}}}]),function(){"use strict";function a(){function a(a,b,c,d,e){var f=this;f.fpsRegistered=d.isFPSRegistered(),f.quickAccessNavbar=[],a.$watch(function(){return c.perms},function(a){f.quickAccessNavbar=b("QuickAccessNavPermFilter")(c.get())}),e.$on("pageReloaded",function(){f.fpsRegistered=d.isFPSRegistered()})}return a.$inject=["$scope","$filter","NxnQuickAccessNav","PageContext","$rootScope"],{restrict:"AE",controller:a,controllerAs:"qanav",templateUrl:"partials/common/nav-quick-access.html"}}angular.module("NexenCommon").directive("nxnQuickAccessNav",a)}(),angular.module("NexenCommon").controller("nxnRefreshDirectiveController",["$scope","$state","nxn.moment.dateFormat",function(a,b,c){a.stateName=b.current.name,a.refreshTime=c.format()}]).directive("nxnRefresh",[function(){return{restrict:"EA",controller:"nxnRefreshDirectiveController",templateUrl:"partials/common/refresh/refresh.html"}}]),function(){"use strict";function a(a,b){b.scrollTo(0,0),a.scrollToTop=function(){b.scrollTo(0,0)}}angular.module("NexenCommon").controller("ScrollTopController",a),a.$inject=["$scope","$window"]}(),function(){"use strict";function a(){return{restrict:"E",scope:{supportLinkOptions:"=",loggedIn:"=",lpSiteNo:"=",samlRedirectDomain:"="},templateUrl:"partials/common/supportLink/nxnSupportLink.html"}}angular.module("nxn.supportLink").directive("nxnSupportLink",a)}(),function(){"use strict";function a(){function a(a,e,f,g){var h=g.loggedIn()?"supportContent":"loginSupportContent",i=g.getEnvironment()?g.getEnvironment().toUpperCase():"LOCAL";a.loggedIn=g.loggedIn(),a.lpSiteNo=b(i),a.samlRedirectDomain=c(i),angular.isUndefined(a.supportLinkOptions)&&(a.supportLinkOptions={}),a.useWhiteLabelSupport=!e.isMainApp(),a.content="",a.useWhiteLabelSupport&&e.getWLSubject().subscribe(function(b){a.content=f.getStringResource(b,h,"")}),g.loggedIn()&&!document.getElementById("lpChat")&&d()}function b(a){var b="75499444";return"PRODUCTION"===a&&(b="28299120"),b}function c(a){var b="";return"DEV"===a?b="https://dev-nexen.bnymellon.com":"QA"===a&&(b="https://uat-nexen.bnymellon.com"),b}function d(){try{window.liveperson={},window.lpTag={},document.getElementById("samlredirect").src="img/app.png",$("iframe[id^='lpSS_']").remove(),$("iframe[id^='fr_']").remove()}catch(a){}}var e={restrict:"E",scope:{supportLinkOptions:"=?",loggedIn:"=?",lpSiteNo:"=?",samlRedirectDomain:"=?"},replace:!0,templateUrl:"partials/common/supportLink/supportLink.html",controller:a};return a.$inject=["$scope","NxnWhiteLabelService","NxnWhiteLabelUtil","PageContext"],e}angular.module("nxn.supportLink").directive("supportLink",a)}(),function(){"use strict";function a(){function a(a,c,d){function e(){var a={};a.headerText="Support",a.bodyUrl="partials/common/supportLink/supportLinkModal.html",a.options=g;var b={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html",size:"sm"};c.showModal(b,a)}var f=this;f.showSupportInfo=e,f.linkText=b;var g={supportLinkOptions:{}};d.$observe("supportLinkModal",function(a){f.linkText=angular.isString(a)?a:b}),a.$watch(d.supportLinkOptions,function(a){a&&angular.extend(g.supportLinkOptions,a)})}var b="Support",c={restrict:"A",replace:!0,template:'<a class="text-secondary nxn-cursor-pointer" data-ng-click="supportLinkModalCtrl.showSupportInfo()">{{supportLinkModalCtrl.linkText}}</a>',controller:a,controllerAs:"supportLinkModalCtrl"};return a.$inject=["$scope","ModalService","$attrs"],c}angular.module("nxn.supportLink").directive("supportLinkModal",a)}(),function(){"use strict";function a(){return{restrict:"E",scope:{content:"="},templateUrl:"partials/common/supportLink/whiteLabelSupportLink.html"}}angular.module("nxn.supportLink").directive("whiteLabelSupportLink",a)}(),function(){"use strict";function a(){var a=function(a){var b=[];return angular.forEach(a,function(a){b.indexOf(a)===-1&&b.push(a)}),b};return function(b){return a(b)}}angular.module("NexenCommon").filter("uniqueArray",a)}();var myApp=angular.module("NexenCommon");myApp.controller("UserGuideController",["$scope","nxn.Http","NxnWhiteLabelService","PageContext","userGuideService",function(a,b,c,d,e){a.guidesList={data:{guides:[]},isDataAvailable:!1,count:0};var f=function(){a.showSpinner=!0,e.getUserGuideData().then(function(b){if(b.displayError)a.isError=b.displayError,a.errorMessage=b.errorMessage;else{a.isError=!1;for(var c=b.data.data.guides,d=Object.keys(b.data.data.guides),e=[],f=[],g=[],h=0;h<d.length;h++)h%3===0?e.push(c[h]):h%3===1?f.push(c[h]):g.push(c[h]);a.guidesList.data.guides.push(e,f,g),a.guidesList.count=b.count}a.showSpinner=!1})};f(),a.WLUserGuides=[{section:[{id:"overviewLink",title:"Overview",documents:[{title:"Quick Reference Guide",url:"pdf/overview/Quick-Reference-Guide.pdf"}]}]},{section:[{entitlement:"ERC_ERS_RPT",id:"reportsWL",title:"Reports",documents:[{title:"Reporting Quick Reference Guide",url:"pdf/overview/Reporting-Quick-Reference-Guide.pdf"}]}]}],a.isMainApp=c.isMainApp()}]),function(){"use strict";function a(a,b,c){return{restrict:"E",replace:!0,templateUrl:"partials/common/userGuide/userGuideTemplate.html",link:function(d){d.isUserGuideAvailable=!1;var e;d.$watch(function(){return a.current.userGuide},function(a){e=a,d.isUserGuideAvailable=!!e}),d.openUserGuide=function(){b.open(e)},c.getContentStateSubject().subscribe(function(a){d.displayPrivateContent=a.displayPrivateContent})}}}angular.module("nxn.userGuides").directive("nxnUserGuide",a),a.$inject=["$state","$window","ContentContextService"]}(),angular.module("validationModule",["aa.formExtensions"]).controller("FieldValidationController",["$scope",function(a){a.errorMessage="{0} must be a letter."}]);var valModule=angular.module("validationModule");valModule.directive("overwriteEmail",["aaFormExtensions",function(a){return{require:"ngModel",restrict:"",priority:500,link:function(b,c,d,e){if(e.$validators)e.$validators.email=function(a){return"ab"===a};else if(e.$parsers){var f=function(a){var b=e.$isEmpty(a)||a.length>=15;e.$setValidity("email_length",b)};e.$parsers.push(f),a.validationMessages.email_length="Email length is not right"}}}}]),angular.module("NexenCommon").directive("nxnValidateTradeAmount",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g,h,i=e.currencycode;angular.isUndefined(i)&&(i="USD");var j=function(c){var d,j;return i=e.currencycode,g=e.decimalvalue,h=e.isjpy,angular.isUndefined(g)&&(g="2"),f.$isEmpty(c)?(f.$setValidity("validateTradeAmount",!0),c):(j=a.validateTradeAmount(c,i,g,h),j.error?(b.validationMessages.validateTradeAmount=j.error,d=!1):(c=j.data,d=!0),f.$setValidity("validateTradeAmount",d),c)};f.$parsers.push(j),angular.isDefined(e.validateOnFormat)&&f.$formatters.push(j)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnValidateAmount",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){angular.isUndefined(c.currencycode)&&(c.currencycode="USD");var g=e.vtype;angular.isUndefined(g)&&(g={minValue:.01,maxValue:9999999999.99,formatter:"1"}),angular.isString(g)&&(g=angular.fromJson(g));var h=c,i=function(c){var d,e;return f.$isEmpty(c)?(f.$setValidity("validateAmount",!0),c):(e=a.validateAmount(c,h.currencycode,g),e.error?(b.validationMessages.validateAmount=e.error,d=!1):(c=e.data,d=!0),f.$setValidity("validateAmount",d),c)};f.$parsers.push(i),angular.isDefined(e.validateOnFormat)&&f.$formatters.push(i)}c.$on("validateAmountSetValidity",function(a,b){f.$valid!==b&&f.$setValidity("validateAmount",b)})};return{restrict:"A",scope:{currencycode:"@"},link:c,require:"ngModel"}}]).directive("nxnValidateTradeType",["nxn.validations","aaFormExtensions",function(a,b){var c=function(a,c,d,e){if(e.$parsers){var f=function(a){var c;return e.$isEmpty(a)?(e.$setValidity("validateTradeType",!0),a):(a.valid?c=!0:(b.validationMessages.validateTradeType="Expect buy or sell",c=!1),e.$setValidity("validateTradeType",c),c?a:"")};e.$parsers.push(f)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnContains",["nxn.validations","aaFormExtensions",function(a,b){var c=function(a,c,d,e){var f=function(c){if(e.$isEmpty(c))return e.$setValidity("nxnContains",!0),c;var d=a.containsInfo(),f=d.elementNameTobeFound,g={};g[f]=c;var h=d.elements,i=d.equalsFunction,j=!1;if(angular.isDefined(h))for(var k=0;k<h.length;k++)if(i(g,h[k])){j=!0;break}return j?e.$setValidity("nxnContains",!0):(e.$setValidity("nxnContains",!1),b.validationMessages["nxnContains"+d.elementType]=d.errorDisplay),c};e.$parsers&&e.$parsers.unshift(f)};return{restrict:"A",link:c,require:"ngModel",scope:{containsInfo:"&nxnContains"}}}]).directive("nxnAccountValidityCheck",["nxn.validations","aaFormExtensions","$parse",function(a,b,c){var d=function(a,b,d,e){var f=function(b){if(e.$parsers){var f=c(d.nxnAccountValidityCheck)(a),g=!1;return angular.isDefined(f)&&(g=f.validAccount),b}};e.$parsers.unshift(f)};return{restrict:"A",link:d,require:"ngModel"}}]).directive("nxnRequired",["aaFormExtensions",function(a){return{priority:800,require:"?ngModel",link:function(b,c,d,e){var f=function(b){return d.nxnRequired&&"true"===d.nxnRequired&&e.$isEmpty(b)?(a.validationMessages["nxn-required"]="Enter a value",e.$setValidity("nxn-required",!1),""):(e.$setValidity("nxn-required",!0),b)};e.$parsers.unshift(f),e.$formatters.push(f),d.$observe("nxnRequired",function(a){f(e.$viewValue)})}}}]).directive("nxnLoginRequired",["nxn.validations","aaFormExtensions","nxnClientInfoService",function(a,b,c){return{restrict:"A",require:"?ngModel",link:function(a,d,e,f){a.isDisabled=!0,a.browser={name:"",version:""};var g=c.clientInfo$.subscribe(function(b){a.browser=b.browserInfo.name});d.on("$destroy",function(){g&&g.unsubscribe()}),d.on("blur",function(b){"IE"===a.browser&&d&&d.length>0&&(d[0].placeholder="USER"===d[0].name?"Enter User ID":"Enter Password"),angular.isDefined(b)&&!b&&(f.$setValidity("nxn-login-required",!1),f.$setValidity("validateFields",!0))}),d.on("focus",function(b){"IE"===a.browser&&d.removeAttr("placeholder")});var h=function(a){if(a)return"true"===e.nxnLoginRequired&&f.$isEmpty(a)?(b.validationMessages["nxn-login-required"]="Enter a value",f.$setValidity("nxn-login-required",!1),f.$setValidity("validateFields",!0),""):(f.$setValidity("nxn-login-required",!0),f.$setValidity("validateFields",!1),a)};f.$parsers.unshift(h),f.$formatters.push(h),e.$observe("nxnLoginRequired",function(a){h(f.$viewValue)})}}}]).directive("nxnNoSpaceValidator",["nxn.validations","aaFormExtensions",function(a,b){function c(a,c,d,e){var f=function(a){var c=!0;if(angular.isDefined(a)&&null!=a)for(var d=0;d<a.length;d++){var f=a.charAt(d);if(" "===f){c=!1;break}}return c?e.$setValidity("noSpace",!0):(e.$setValidity("noSpace",!1),b.validationMessages.noSpace="Please enter without spaces"),c?a:""};e.$parsers.unshift(f)}return{restrict:"A",link:c,require:"?ngModel"}}]).directive("nxnValidateLengthOfPartsOfDelimiterSeparatedText",["nxn.validations","aaFormExtensions","$parse",function(a,b,c){function d(a,d,e,f){var g=c(e.nxnValidateLengthOfPartsOfDelimiterSeparatedText);g=g(a);var h=function(a){var c=!0;if(angular.isDefined(a)&&null!==a&&""!==a&&angular.isDefined(g.minLength)&&angular.isDefined(g.maxLength))if(angular.isDefined(g)&&angular.isDefined(g.splitChar)){for(var d=a.split(g.splitChar),e=0;e<d.length;e++)if(d[e].length<g.minLength||d[e].length>g.maxLength){c=!1;break}}else(a.length<g.minLength||a.length>g.maxLength)&&(c=!1);return c?f.$setValidity("lengthOfPartsOfDelimiterSeparatedText",!0):(f.$setValidity("lengthOfPartsOfDelimiterSeparatedText",!1),b.validationMessages.lengthOfPartsOfDelimiterSeparatedText="Invalid length"),c?a:""};f.$parsers.unshift(h)}return{restrict:"A",link:d,require:"?ngModel"}}]).directive("nxnLoginFieldsValidator",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g=function(e){var g,h;if(angular.isDefined(e))return f.$isEmpty(e)?(f.$setValidity("validateFields",!0),e):("USER"===angular.element(d)[0].id&&(h=a.validateUserId(e)),"PASSWORD"===angular.element(d)[0].id&&(h=a.validatePassword(e)),h.error?(b.validationMessages.validateFields=h.error,g=!1,c.isDisabled=!0):(e=h.data,g=!0),""===angular.element("#USER")[0].value||""===angular.element("#PASSWORD")[0].value?c.isDisabled=!0:g?c.isDisabled=!1:c.isDisabled=!0,f.$setValidity("validateFields",g),g?e:"")};f.$parsers.push(g)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnNumberNoFormat",["$window","$filter",function(a,b){return{require:"ngModel",scope:{},link:function(a,b,c,d){d.$parsers.push(function(a){if(angular.isUndefined(a))return"";var b=/[^0-9]+/g,c=a.replace(b,"");return c!==a&&(d.$setViewValue(c),d.$render()),c})}}}]).directive("nxnAlphabets",["$window","$filter",function(a,b){return{require:"ngModel",scope:{},link:function(a,b,c,d){d.$parsers.push(function(a){if(angular.isUndefined(a))return"";var b=/[^a-z,A-Z\s\'-]+/g,c=a.replace(b,"");return c!==a&&(d.$setViewValue(c),d.$render()),c})}}}]).directive("nxnEmailValidator",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g=function(c){var d,e;return f.$isEmpty(c)?(f.$setValidity("validateEmailId",!0),c):(e=a.validateEmail(c),e.error?(b.validationMessages.validateEmailId=e.error,d=!1):(c=e.data,d=!0),f.$setValidity("validateEmailId",d),d?c:"")};f.$parsers.push(g)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnPhoneNumber",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g=function(c){var d,e;return f.$isEmpty(c)?(f.$setValidity("validatePhoneNumber",!0),c):(e=a.validatePhoneNumber(c),e.error?(b.validationMessages.validatePhoneNumber=e.error,d=!1):(c=e.data,d=!0),f.$setValidity("validatePhoneNumber",d),d?c:"")};f.$parsers.push(g)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnNewLoginIdValidator",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g=function(c){var d,e;return f.$isEmpty(c)?(f.$setValidity("validateNewLoginId",!0),c):(e=a.validateNewLoginId(c),e.error?(b.validationMessages.validateNewLoginId=e.error,d=!1):(c=e.data,d=!0),f.$setValidity("validateNewLoginId",d),d?c:"")};f.$parsers.push(g)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnNoDuplicate",["aaFormExtensions",function(a){return{restrict:"A",require:"ngModel",priority:-2,scope:!0,link:function(b,c,d,e){e.$parsers.push(function(c){if(angular.isDefined(c)&&null!==c){var f,g=c.toUpperCase();return f=angular.isDefined(d.nxnNoDuplicateAddress)?b.$eval(d.nxnNoDuplicate).map(function(a){return d.name.substring(0,3)===a.code?null:angular.isDefined(a.address)&&null!==a.address?a.address.toUpperCase():null}).indexOf(g)===-1:b.$eval(d.nxnNoDuplicate).map(function(a){return a.toUpperCase()}).indexOf(g)===-1,f||(a.validationMessages.nxnNoDuplicate=d.nxnNoDuplicateMsg),e.$setValidity("nxnNoDuplicate",f),f?c:void 0}return e.$setValidity("nxnNoDuplicate",!0),c})}}}]).directive("nxnGreaterThanLessThan",["aaFormExtensions",function(a){return{restrict:"A",require:"ngModel",scope:!0,link:function(b,c,d,e){b.$watch("modalOptions",function(b){var c=!0;angular.isDefined(b.leExprList.exprValue)&&null!==b.leExprList.exprValue&&angular.isDefined(b.geExprList.exprValue)&&null!==b.geExprList.exprValue&&parseInt(b.geExprList.exprValue)>=parseInt(b.leExprList.exprValue)&&("less"===d.nxnGreaterThanLessThan?a.validationMessages.nxnGreaterThanLessThan="Less than value must exceed the greater than value":"greater"===d.nxnGreaterThanLessThan&&(a.validationMessages.nxnGreaterThanLessThan="Greater than value must not exceed the less than value."),c=!1),e.$setValidity("nxnGreaterThanLessThan",c)},!0)}}}]).directive("nxnValidCurrency",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g=function(c){var d,e;return f.$isEmpty(c)?void f.$setValidity("validateCurrencyId",!0):(e=a.validateCurrency(c),e.error?(b.validationMessages.validateCurrencyId=e.error,d=!1):(c=e.data,d=!0),f.$setValidity("validateCurrencyId",d),d?c:void 0)};f.$parsers.push(g)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnValidCurrencyRedemption",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g=function(c){var d,e;return f.$isEmpty(c)?void f.$setValidity("validateCurrencyId",!0):(e=a.validateCurrencyRedemption(c),e.error?(b.validationMessages.validateCurrencyId=e.error,d=!1):(c=e.data,d=!0),f.$setValidity("validateCurrencyId",d),d?c:void 0)};f.$parsers.push(g)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnValidatePercentage",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g=function(c){var d,e,g=c.replace(/%$/,"").trim();return f.$isEmpty(g)?(f.$setValidity("validatePercentage",!0),g):(e=a.validatePercentage(g),e.error?(b.validationMessages.validatePercentage=e.error,d=!1):(g=e.data,d=!0),f.$setValidity("validatePercentage",d),g)};f.$parsers.push(g)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnValidateAccountGroupName",["nxn.validations","aaFormExtensions",function(a,b){var c=function(c,d,e,f){if(f.$parsers){var g=function(c){if(f.$isEmpty(c))f.$setValidity("accountGroupName",!0),f.$setValidity("accountGroupNameFirstChar",!0);else{var d=a.validateAccountGroupName(c);d.error?("accountGroupName"===d.validityName&&(b.validationMessages.accountGroupName=d.error,f.$setValidity("accountGroupName",!1),f.$setValidity("accountGroupNameFirstChar",!0)),"accountGroupNameFirstChar"===d.validityName&&(b.validationMessages.accountGroupNameFirstChar=d.error,f.$setValidity("accountGroupName",!0),f.$setValidity("accountGroupNameFirstChar",!1))):(f.$setValidity("accountGroupName",!0),f.$setValidity("accountGroupNameFirstChar",!0))}return c};f.$parsers.push(g)}};return{restrict:"A",link:c,require:"ngModel"}}]).directive("nxnAlphaNumericWithComma",["$window","$filter",function(a,b){return{require:"ngModel",scope:{},link:function(a,b,c,d){d.$parsers.push(function(a){if(angular.isUndefined(a))return"";var b=/[^a-z,A-Z,0-9\',]+/g,c=a.replace(b,"");return c!==a&&(d.$setViewValue(c),d.$render()),c})}}}]),angular.module("NexenCommon").directive("nxnRequireUnique",["aaFormExtensions",function(a){return{restrict:"A",require:"^form",scope:{list:"=nxnRequireUnique"},link:function(b,c,d,e){var f=d.nxnRequireUniqueField,g=d.nxnRequireUniqueName;a.validationMessages.nxnRequireUnique=d.nxnRequireUniqueMsg,b.$watch("list",function(a){var b={};a.forEach(function(a){a[f]&&(b[a[f].toUpperCase()]=(b[a[f].toUpperCase()]||0)+1)}),a.forEach(function(a){e[a[g]]&&a[f]&&(e.$aaFormExtensions[a[g]].showErrorReasons=[d.nxnRequireUniqueMsg],e[a[g]].$setValidity("nxnRequireUnique",b[a[f].toUpperCase()]<2))})},!0)}}}]),function(){"use strict";var a=angular.module("NexenCommon");a.filter("trustVideo",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}])}(),function(){"use strict";function a(a,b,c,d,e){function f(){var a=b.spinnerInstance.opened;a.then(function(){b.spinnerInstance.dismiss("cancel")})}
var g={DEV:"https://nexencontentapi.dev.bnymellon.com/api/nexen/videos",UAT:"https://nexencontentapi.test.bnymellon.com/api/nexen/videos",QA:"https://nexencontentapi.test.bnymellon.com/api/nexen/videos",PRODUCTION:"https://nexencontentapi.bnymellon.com/api/nexen/videos",XAT:"https://nexencontentapi.qa.bnymellon.com/api/nexen/videos",DCAT:"https://nexencontentapi.qa.bnymellon.com/api/nexen/videos",MOCK:"/nexencontentapi/nexen/videos",LOCAL:"/nexencontentapi/nexen/videos"};b.showalert=!1,b.videoList=null,b.spinnerInstance=d.showModal(),a.get(g[c.getEnvironment().toUpperCase()]).then(function(a){f(),b.videoList=a.data.data.videos,b.showalert=0===b.videoList.length,b.showMessage="There are no videos to display."},function(a){f(),b.showalert=!0,b.showMessage="The service is currently unavailable. Please try again later."}),b.playVideo=function(a){b.modalOptions={},b.modalOptions.headerText=a.title,b.modalOptions.videoLink=a.videopath,b.modalOptions.bodyUrl="partials/common/playVideo.html";var c={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};e.showModal(c,b.modalOptions)}}angular.module("NexenCommon").controller("videoTutorialsController",a),a.$inject=["nxn.Http","$scope","PageContext","ModalSpinnerService","ModalService"]}(),function(){"use strict";function a(){function a(a,b){b.getContentStateSubject().subscribe(function(b){a.displayFooter=b.displayFooter})}return a.$inject=["$scope","ContentContextService"],{controller:a,restrict:"E",templateUrl:"partials/content/appFooter.html"}}angular.module("nxn.content").directive("appFooter",a),a.$inject=[]}(),function(){"use strict";function a(){function a(a,b){a.headerIcons=['<li class="dropdown" nxn-alerts-dropdown nxn-nav-highlighter alerts="true"></li>','<li class="dropdown" nxn-quick-access-nav></li>',"<li nxn-report-page-issue></li>",'<li class="dropdown" nxn-user-setting-dropdown></li>'],a.headerIconsSm=['<li nxn-alerts-dropdown nxn-nav-highlighter alerts="true"></li>','<li nxn-quick-access-nav class="pull-left has-feedback"></li>',"<li nxn-report-page-issue></li>",'<li nxn-user-setting-dropdown class="has-feedback"></li>'],b.getContentStateSubject().subscribe(function(b){a.displayPublicHeader=b.displayPublicHeader,a.displayTokenHeader=b.displayTokenHeader,a.displayPrivateHeader=b.displayPrivateHeader,a.isEmbedded=b.isEmbedded})}return a.$inject=["$scope","ContentContextService"],{controller:a,restrict:"E",templateUrl:"partials/content/appHeader.html"}}angular.module("nxn.content").directive("appHeader",a),a.$inject=[]}(),function(){function a(a,b,c,d,e,f,g,h){a.apps=[{name:"ERS"},{name:"LIQUIDITY"}],a.selectedapp={},a.isOriginal=d.isOriginal,a.emulateServiceCallError=!1,a.userType=d.userType,a.emulate=function(h){a.emulateServiceCallError=!1;var i;h=h.name,i="LIQUIDITY"===h?["GLS_LQDVII","GLS_LQDVI","GLS","ADMIN","EVERYONE"]:["ERC_ERS","ERC_ERS_DIST","ERS","ERS_Enterprise_Reporting","ADMIN","EVERYONE"],d.getPermissions(i).then(function(j){e.setEmulationOn(!0),"LIQUIDITY"===h?d.userType="Liquidity":d.userType=h,a.emulateServiceCallError=!1,b.perms=j.data.NXN_DEFAULT,g.perms=j.data.NXN_QUICK_ACCESS;for(var k=f.getUserDashboards(),l=0;l<k.length;l++)d.filterPortlets(k[l].portlets,i,e.getEmulationPortletIds()),0===k[l].portlets.length&&(k.splice(l,1),l-=1);c.go("home"),a.isOriginal=d.isOriginal=!1},function(b,c,d,e){a.isOriginal=!0,a.emulateServiceCallError=!0,a.errorMessage="Error in retrieving data. Please try again."})},a.reset=function(){a.isOriginal=d.isOriginal=!0,e.setEmulationOn(!1),c.go("home").then(function(){d.windowReload()})},d.windowReload=function(){return h.location.reload()}}angular.module("nxn.emulation").controller("NxnEmulationControl",a),a.$inject=["$scope","NavBar","$state","nxn.emulationService","ndbDashboardResource","ndbDashboardService","NxnQuickAccessNav","$window"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){a.failoverServicesAdmin=[];for(var b=c.getServicesWithFailoverSupport(),d=0;d<b.length;d++)a.failoverServicesAdmin.push(g(b[d]))}function g(a){for(var c=b.getFailoverStatus(),d={serviceName:a.serviceName,startTest:a.startTest,currentState:"Primary",futureState:"Secondary",currentAdminState:"Primary",futureAdminState:"Secondary",switchStatus:"",switchStatusClass:"",message:"",messageClass:""},e=0;e<c.length;e++)if(a.serviceName===c[e]){d.currentState="Secondary",d.futureState="Primary",d.currentAdminState="Secondary",d.futureAdminState="Primary";break}return h(d),j(d),angular.isDefined(a.serviceFailedOver)&&a.serviceFailedOver&&(i(d,"success"),delete a.serviceFailedOver),d}function h(a){a.startTest?(a.message="You can navigate through the site and verify that the failover domain is working",a.messageClass="text-warning"):(a.message="",a.messageClass="")}function i(a,b){"pending"===b?(a.switchStatus="Pending",a.switchStatusClass="text-warn"):"success"===b?(a.switchStatus="Switch successful. Please refresh or logout and log back in to reinitialize the context.",a.switchStatusClass="text-success"):"failure"===b?(a.switchStatus="Switch unsuccessful at this time.",a.switchStatusClass="text-danger"):(a.switchStatus="",a.switchStatusClass="")}function j(a){a.startTest?"Primary"===a.currentState?(a.currentAdminState="Secondary",a.futureAdminState="Primary"):(a.currentAdminState="Primary",a.futureAdminState="Secondary"):"Primary"===a.currentState?(a.currentAdminState="Primary",a.futureAdminState="Secondary"):(a.currentAdminState="Secondary",a.futureAdminState="Primary")}function k(d,e){b.setFailoverStatus(d),i(e,"success"),c.processUrls(e.serviceName),f(),a.serviceStatusTable.setCurrentData(a.failoverServicesAdmin),a.serviceStatusTable.reload()}f(),a.serviceStatusTable=e.get({},{},!1,a.failoverServicesAdmin,moment().format()),a.toggleServiceTestFailover=function(a){a.startTest=!a.startTest,a.startTest?c.startTestServiceFailover(a.serviceName):c.stopTestServiceFailover(a.serviceName),h(a),j(a)},a.switchService=function(a){var b=a.serviceName,c=a.currentState;i(a,"pending");var e="Primary"===c?"/nxn-service/svcSwitch/"+b+"/secondary":"/nxn-service/svcSwitch/"+b+"/primary";d.post(e,{},{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(b){k(b.data,a)},function(b){i(a,"failure")}).finally(function(){})}}angular.module("nxn.failover").controller("FailoverAdminController",a),a.$inject=["$scope","PageContext","RequestFailover","nxn.Http","nxnNgTableParams","$scope"]}(),function(){"use strict";function a(a){function b(){return!0}function c(b){return!b||a.needsStepupAccess(b)}return{directiveNeedsStepupAccess:c,stateNeedsStepupAccess:b}}angular.module("nxn.fileTransfer").factory("FileTransferAuthService",a),a.$inject=["nxn.fileTransferUtils"]}(),function(){"use strict";function a(a,b,c){function d(){a.defaultFilterObj={uploadProductType:null,statusDescription:null,startDate:moment().subtract(3,"M").startOf("day"),endDate:moment().endOf("day")},a.filterObj=angular.copy(a.defaultFilterObj),a.isUserEntitledForAllFiles=c.isEntitledForAllFiles()}function e(b,d){var e=c.getShowModalFn({payload:d,refresh:function(){a.$emit("/dashboard/portlet/refresh")}});e(b)}function f(){return b&&b.openUploadModal===!0}d(),f()&&e(b.uploadType,b.payload)}angular.module("nxn.fileTransfer").controller("fileTransferController",a),a.$inject=["$scope","$stateParams","nxn.fileTransferUtils"]}(),function(){"use strict";angular.module("nxn.fileTransfer").value("nxn.fileTransfer.environments",{LOCAL:"/file-transfer/v1",MOCK:"/file-transfer/v1",DEV:"https://apigateway.dev.bnymellon.com/file-transfer/v1",UAT:"https://apigateway.test.bnymellon.com/file-transfer/v1",QA:"https://apigateway.test.bnymellon.com/file-transfer/v1",XAT:"https://apigateway.qa.bnymellon.com/file-transfer/v1",PRODUCTION:"https://apigateway.bnymellon.com/file-transfer/v1"}),angular.module("nxn.fileTransfer").value("nxn.fileTransfer.ie9.scans",{LOCAL:"/file-transfer/v1",MOCK:"/file-transfer/v1",DEV:"https://dev-connectfiletransfer.bnymellon.com/ssFileTransfer/v1",UAT:"https://qa-connectfiletransfer.bnymellon.com/ssFileTransfer/v1",QA:"https://qa-connectfiletransfer.bnymellon.com/ssFileTransfer/v1",XAT:"https://xat-connectfiletransfer.bnymellon.com/ssFileTransfer/v1",PRODUCTION:"https://connectfiletransfer.bnymellon.com/ssFileTransfer/v1"}),angular.module("nxn.fileTransfer").value("nxn.fileTransfer.downloadBaseURLs",{LOCAL:"/file-transfer/v1/files",MOCK:"/file-transfer/v1/files",DEV:"https://dev-connectfiletransfer.bnymellon.com/ssFileTransfer/v1/files",UAT:"https://qa-connectfiletransfer.bnymellon.com/ssFileTransfer/v1/files",QA:"https://qa-connectfiletransfer.bnymellon.com/ssFileTransfer/v1/files",XAT:"https://xat-connectfiletransfer.bnymellon.com/ssFileTransfer/v1/files",PRODUCTION:"https://connectfiletransfer.bnymellon.com/ssFileTransfer/v1/files"})}(),function(){"use strict";function a(){function a(a,b,c,d){function e(){a.portletFiles="myFiles",a.refreshData=g,a.fileData={isLoading:!1,fileRequestErrorMessage:null},a.$watch("fileData.type",function(b,c){angular.equals(b,c)||"undefined"!=typeof b&&(a.fileData={},a.portletFiles=b,a.refreshData(!0))}),a.$watchCollection("filterObj",f),a.$on("/dashboard/portlet/refresh",function(a,b){g()}),a.refreshData=g,g(!0)}function f(a,b){if(!angular.equals(a,b))if(a.startDate.isSame(b.startDate)&&a.endDate.isSame(b.endDate)){var c=!angular.isObject(b)||a.uploadProductType!==b.uploadProductType;j(c)}else g(!0)}function g(b){a.fileData.isLoading=!0,a.fileData.fileRequestErrorMessage=null;var d=b?c.getCachedFiles:c.getFiles,e=a.filterObj.startDate.toDate(),f=a.filterObj.endDate.toDate(),g=d(e,f).then(function(b){if(angular.isObject(b.data)?a.fileData=b.data:a.fileData={},a.fileData.isLoading=!1,angular.isArray(a.fileData.files)){var c=a.portletFiles;c.indexOf("allFiles")>-1?i():h(),j(!0)}else a.fileData.fileRequestErrorMessage="Failed to load jobs."},function(b){a.fileData={},a.fileData.isLoading=!1,a.fileData.fileRequestErrorMessage="Failed to load jobs."});return g}function h(){if(a.userId=d.getUserId(),a.userId){a.userId=a.userId.toUpperCase();for(var b={},c=[],e=a.fileData.files.length-1;e>=0;e--)c=a.fileData.files[e],c.userId!==a.userId&&"Instructions - SFTP"!==c.uploadProductType?a.fileData.files.splice(e,1):(b[a.fileData.files[e].uploadProductType]||(b[a.fileData.files[e].uploadProductType]=0),++b[a.fileData.files[e].uploadProductType]);a.fileData.typeCount=b}}function i(){a.userId=d.getUserId();var b={};if(a.userId){a.userId=a.userId.toUpperCase();for(var c=a.fileData.files.length-1;c>=0;c--)a.fileData.files[c].docDeleted&&a.fileData.files[c].userId!==a.userId?a.fileData.files.splice(c,1):(b[a.fileData.files[c].uploadProductType]||(b[a.fileData.files[c].uploadProductType]=0),++b[a.fileData.files[c].uploadProductType]);a.fileData.typeCount=b}}function j(b){if(!angular.isObject(a.fileData)||!angular.isArray(a.fileData.files))return a.fileData.fileCount=0,void(a.fileData.modified={});var c=a.fileData.files,d=k(a.filterObj.category),e=k(a.filterObj.searchText),f=k(a.filterObj.statusDescription),g=k(a.filterObj.uploadProductType),h=angular.isString(e)&&e.trim().length>0,i=null!==f,j=null!==d,l=null!==g,m=0;if(angular.forEach(c,function(a){var b=k(a.category),c=k(a.statusDescription),n=k(a.uploadProductType),o=!(l&&n!==g||j&&b!==d||i&&c!==f);if(o){var p=k(a.fileName),q=k(a.fileId),r=k(a.fileOwnerName),s=a.statusErrorDescription?k(a.statusErrorDescription):"";a.show=!h||p.indexOf(e)>=0||q.indexOf(e)>=0||r.indexOf(e)>=0||c.indexOf(e)>=0||s.indexOf(e)>=0||!l&&n.indexOf(e)>=0}else a.show=!1;a.show&&m++}),b){var n={};angular.forEach(c,function(a){var b=k(a.uploadProductType);l&&b!==g||(angular.isNumber(n[a.category])?n[a.category]++:n[a.category]=1)}),a.fileData.categoryCount=n}a.fileData.fileCount=m,a.fileData.modified={}}function k(a){return angular.isString(a)?a.toLowerCase():null}e()}var b={restrict:"E",controller:a};return a.$inject=["$scope","$state","nxn.fileTransferService","nxn.fileTransferUtils"],b}angular.module("nxn.fileTransfer").directive("fileTransferFileData",a)}(),function(){"use strict";angular.module("nxn.fileTransfer").value("nxn.fileTransfer.instruction.environments",{MOCK:"/ico/services/v1/instncap",DEV:"https://apigateway.dev.bnymellon.com/instncap/v1",UAT:"https://apigateway.test.bnymellon.com/instncap/v1",QA:"https://apigateway.test.bnymellon.com/instncap/v1",XAT:"https://apigateway.qa.bnymellon.com/instncap/v1",PRODUCTION:"https://apigateway.bnymellon.com/instncap/v1"})}(),function(){"use strict";function a(){function a(a,b){a.getUploadTypeName=b.getUploadTypeName,a.entitledUploadTypes=b.getFTStateUploadTypes();var c={refresh:a.refreshData};a.showModal=b.getShowModalFn(c)}var b={scope:{refreshData:"="},restrict:"E",controller:a,templateUrl:"partials/fileTransfer/fileTransferNewUpload.html"};return a.$inject=["$scope","nxn.fileTransferUtils"],b}angular.module("nxn.fileTransfer").directive("fileTransferNewUpload",a)}(),function(){"use strict";function a(){var a={restrict:"E",controller:b,templateUrl:"partials/fileTransfer/fileTransferSummaryFiles.html"};return a}function b(a){a.setActiveTabforFT=function(b){a.fileData.type=b}}angular.module("nxn.fileTransfer").directive("fileTransferSummaryTableFiles",a),b.$inject=["$scope"]}(),function(){"use strict";function a(){return{scope:{fileData:"=",filterObj:"=",refreshData:"&"},restrict:"E",controller:g,templateUrl:"partials/fileTransfer/fileTransferSummaryTable.html",link:function(a,b,c,d){d.setMode("summary")}}}function b(){return{scope:{fileData:"=",filterObj:"=",refreshData:"&"},restrict:"E",controller:g,templateUrl:"partials/fileTransfer/fileTransferPortletTable.html",link:function(a,b,c,d){d.setMode("portlet")}}}function c(){return{scope:{fileData:"=",filterObj:"=",refreshData:"&"},restrict:"E",controller:g,templateUrl:"partials/fileTransfer/fileTransferSummaryTableMyFiles.html",link:function(a,b,c,d){d.setMode("summaryMyFiles")}}}function d(){return{scope:{fileData:"=",filterObj:"=",refreshData:"&"},restrict:"E",controller:g,templateUrl:"partials/fileTransfer/fileTransferSummaryTableAllFiles.html",link:function(a,b,c,d){d.setMode("summaryAllFiles")}}}function e(){return{scope:{fileData:"=",filterObj:"=",refreshData:"&"},restrict:"E",controller:g,templateUrl:"partials/fileTransfer/fileTransferPortletTableMyFiles.html",link:function(a,b,c,d){d.setMode("portletMyFiles")}}}function f(){return{scope:{fileData:"=",filterObj:"=",refreshData:"&"},restrict:"E",controller:g,templateUrl:"partials/fileTransfer/fileTransferPortletTableAllFiles.html",link:function(a,b,c,d){d.setMode("portletAllFiles")}}}function g(a,b,c,d,e,f){function g(){a.getFileURL=b.getFileURL,k(),a.filterObj.searchText={},a.hasUnshareAccess=s.length>0,a.isDownloadable=function(a,b){var c=!q[b];return c&&h.indexOf(a)>-1},a.isDownloadableForAllFiles=function(){return r},a.isShowUnshareAction=function(a,b){return!b&&s.indexOf(a)>-1},a.$watch("summaryTableGroup.searchText",function(b,c){b!==c&&(a.filterObj.searchText=b)}),a.$watch("fileData.modified",function(){angular.isArray(a.fileData.files)?(a.summaryTableGroup.setCurrentData(a.fileData.files),o()):(a.fileData.files={},a.fileData.typeCount={},a.summaryTableGroup.setCurrentData(a.fileData.files),o())}),a.$watch("mode",function(a,b){a!==b&&k()}),a.showModalUnshare=function(c,d,f){var g={};g.headerText="Confirmation",g.bodyUrl="partials/fileTransfer/modal/fileTransferUnshareOption.html",g.closeButtonText="No",g.actionButtonText="Yes",g.bodyText="You are about to unshare ",g.bodyTextAfterFileName="You cannot revoke this action. Do you want to continue?",g.fileName=d,g.fileId=c,g.fileStatus=f;var h={backdrop:!0,size:"sm",keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html"};e.showModal(h,g).result.then(function(d){i(),b.removeFile(c).then(function(b){j(),a.refreshData(!0)},function(b){a.refreshData(!0),j()})})},a.sortSummary=function(b){if(b.isSortable){var c=a.tableSortBy&&"asc"===a.tableSortBy[b.dataField]?"desc":"asc";a.tableSortBy={},a.tableSortBy[b.dataField]=c,a.summaryTableGroup.sorting(a.tableSortBy)}}}function i(){f.showModal()}function j(){f.closeModal()}function k(){a.fileSummaryTableColumns=p(),a.summaryTableGroup=d.get({},{},!1,null,moment().format()),a.summaryTableGroup.settings().$scope=a,a.summaryTableGroup.setGroupedTable(!1),a.summaryTableGroup.setServerDataFn(m),a.tableSortBy={fileUploadTime:"desc"},a.summaryTableGroup.sorting(a.tableSortBy),a.summaryTableGroup.filter(n),a.summaryTableGroup.setShowSpinner(!1),a.summaryTableGroup.getIncludeCollapseGroups=l,a.summaryTableGroup.isExportAvailable=l,"portlet"===a.mode&&"portletMyFiles"===a.mode&&"portletAllFiles"===a.mode||(a.summaryTableGroup.setCustomPaginationCounts([10,25,50,-1]),a.summaryTableGroup.setCount(10))}function l(){return!1}function m(b){b.resolve({time:moment().format()}),a.refreshData(!1)}function n(a){return!!a.show}function o(){null!==a.fileData.files&&(a.showNoDataMessage=angular.isNumber(a.fileData.fileCount)&&0===a.fileData.fileCount,a.summaryTableGroup.setSelectedPage(1),a.summaryTableGroup.reload())}function p(){var b,c,d,e,f,g=[],h=!1;switch(a.mode){case"summary":c=!0;break;case"summaryMyFiles":d=!0;break;case"summaryAllFiles":e=!0;break;case"portlet":b=!0;break;case"portletMyFiles":f=!0;break;case"portletAllFiles":h=!0}return a.hasUnshareAccess&&(d||f)&&g.push({title:"Action",isSortable:!0,dataField:"docDeleted",class:"text-left nxn-ft-th-action"}),g.push({title:"File ID",isSortable:!0,dataField:"fileId",class:"text-left nxn-ft-th-file-id"}),g.push({title:b||h||f?"Time":"Date and Time",isSortable:!0,dataField:"fileUploadTime",class:"text-left nxn-ft-th-date-and-time"}),g.push({title:"Type",isSortable:!0,dataField:"uploadProductType",class:"text-left nxn-ft-th-type"}),g.push({title:"File Name",isSortable:!0,dataField:"fileName",class:"text-left nxn-ft-th-file-name"}),(d||f||b||c)&&(g.push({title:"Status",isSortable:!0,dataField:"statusDescription",class:"text-left nxn-ft-th-status"}),(d||c)&&g.push({title:"Reason",isSortable:!0,dataField:"statusErrorDescription",class:"text-left nxn-ft-th-reason"})),(e||h)&&g.push({title:"Uploaded by",isSortable:!0,dataField:"fileOwnerName",class:"text-left nxn-ft-th-file-Owner-name"}),g}var q=c.getRestrictDownloadAccessMap(),r=c.getDownloadAccessForAllFiles().length>0,s=c.getUnshareAccessList();g(),this.setMode=function(b){a.mode=b,k()}}var h=["Success","Accepted","Accepted With Errors","Upload Completed","Deleted","In Progress"];angular.module("nxn.fileTransfer").directive("fileTransferSummaryTable",a),angular.module("nxn.fileTransfer").directive("fileTransferSummaryTableMyFiles",c),angular.module("nxn.fileTransfer").directive("fileTransferSummaryTableAllFiles",d),angular.module("nxn.fileTransfer").directive("fileTransferPortletTable",b),angular.module("nxn.fileTransfer").directive("fileTransferPortletTableMyFiles",e),angular.module("nxn.fileTransfer").directive("fileTransferPortletTableAllFiles",f),g.$inject=["$scope","nxn.fileTransferService","nxn.fileTransferUtils","nxnNgTableParams","ModalService","ModalSpinnerService"]}(),function(){"use strict";function a(){var a={restrict:"E",controller:b,templateUrl:"partials/fileTransfer/fileTransferPortletFiles.html"};return a}function b(a){a.files=function(b){a.fileData.type=b}}angular.module("nxn.fileTransfer").directive("fileTransferFilesPortlet",a),b.$inject=["$scope"]}(),function(){"use strict";function a(){function a(a){function b(){return c.clone()}var c=moment();a.dateRangePickerOptions={options:{clearable:!1,autoUpdateInput:!0,singleDatePicker:"portlet"===a.displayMode,minDate:b().subtract(2,"years"),dateLimit:{years:2},ranges:{Today:[b(),b()],Yesterday:[b().subtract(1,"days"),b().subtract(1,"days")],"Last Week":[b().subtract(6,"days"),b()],"Last Two Weeks":[b().subtract(13,"days"),b()],"Last Month":[b().subtract(1,"month").startOf("month"),b().subtract(1,"month").endOf("month")]},locale:{format:"DD-MMM-YYYY",separator:" - "}}}}var b={scope:{filterObj:"=",displayMode:"@"},restrict:"E",controller:a,templateUrl:"partials/fileTransfer/filter/fileTransferDatePicker.html"};return a.$inject=["$scope"],b}angular.module("nxn.fileTransfer").directive("fileTransferDatePicker",a)}(),function(){"use strict";function a(){function a(a){a.reset=function(){a.filterObj={},a.filterObj.uploadProductType=null,a.filterObj.statusDescription=null,a.filterObj.startDate=moment().subtract(3,"M").startOf("day"),a.filterObj.endDate=moment().endOf("day")}}var b={scope:{fileData:"=",filterObj:"="},restrict:"E",controller:a,templateUrl:"partials/fileTransfer/filter/fileTransferFilter.html"};return a.$inject=["$scope"],b}angular.module("nxn.fileTransfer").directive("fileTransferFilter",a)}(),function(){"use strict";function a(){function a(a,b){function c(){a.selected={},a.$watch("filterObj.uploadProductType",function(b){a.statusDescriptions=d[b],angular.isArray(a.statusDescriptions)||(a.statusDescriptions=d.All),a.selected.statusDescription=a.statusDescriptions[0]}),a.$watch("selected.statusDescription",function(b){a.filterObj.statusDescription=b.value})}var d=b.getStatusOptions();c()}var b={scope:{filterObj:"="},restrict:"E",controller:a,templateUrl:"partials/fileTransfer/filter/fileTransferStatusFilter.html"};return a.$inject=["$scope","nxn.fileTransferUtils"],b}angular.module("nxn.fileTransfer").directive("fileTransferStatusFilter",a)}(),function(){"use strict";function a(){function a(a,b,c){function d(){a.displayCount=!1,a.selected={},g(),a.$watchCollection("filterObj",function(a,b){if(a.startDate.isSame(b.startDate)&&a.endDate.isSame(b.endDate)){var c=e(),d=a.uploadProductType;(null===c&&null===d||c!==d)&&f(d)}else f(null)}),a.$watch("selected.uploadProductType",function(){a.filterObj.uploadProductType=e()}),a.$watch("typeCount",function(b){if(angular.isDefined(b)){g(b),a.displayCount=j;var c=e();f(c)}})}function e(){return angular.isObject(a.selected.uploadProductType)?a.selected.uploadProductType.value:null}function f(b){if(!angular.isArray(a.uploadProductTypes))return void(a.selected.uploadProductType=null);if(angular.isObject(a.selected.uploadProductType))for(var c=0;c<a.uploadProductTypes.length;c++){var d=a.uploadProductTypes[c];if(b===d.value){a.selected.uploadProductType=d;break}}angular.isObject(a.selected.uploadProductType)||(a.selected.uploadProductType=a.uploadProductTypes[0])}function g(b){var c=h();a.uploadProductTypes=[];var d=0,e=null;angular.forEach(c,function(c){var f=0;angular.isObject(b)&&angular.isNumber(b[c.name])&&(f=b[c.name]),d+=f;var g={name:c.name,value:angular.isDefined(c.value)?c.value:c.name,count:f};a.uploadProductTypes.push(g),angular.equals(c.name,"All")&&(e=g)}),angular.isObject(e)&&(e.count=d)}function h(){var a=[],d=c.getUploadProductTypeList();if(angular.forEach(d,function(d){if(angular.isString(d.key)){var e=b.getType(d.key);c.hasEntitlement(e.viewEntitlements)&&a.push(d)}else i&&angular.equals(d.name,"Instructions - SFTP")&&a.push(d)}),a.length>1){var e=d[0];a.unshift(e)}return a}var i=c.isSFTPUser(),j="true"===a.showCounts;d()}var b={scope:{filterObj:"=",typeCount:"=",showCounts:"@"},restrict:"E",controller:a,templateUrl:"partials/fileTransfer/filter/fileTransferTypeFilter.html"};return a.$inject=["$scope","downgradedFileTransferStateService","nxn.fileTransferUtils"],b}angular.module("nxn.fileTransfer").directive("fileTransferTypeFilter",a)}(),function(){"use strict";function a(){function a(a,b){function c(b){return a.mitNumber+"_"+b}function d(b){a.lockMITInput=b>0}var e=a.fileTransferModalController,f=e.getUploadType(),g=b.getUploadTypeCustomData(f);a.lockMITInput=!1,a.mitNumber="",a.$watch("mitNumber",function(a){var b=!isNaN(a)&&a.indexOf(".")<0,c=a.length>5&&a.length<9;e.setAllowFileUpload(b&&c)}),e.setNameFormatterCallback(c),e.setQueueLengthChangeCallback(d),e.setAllowedExtensions(g.allowedExtensions),e.setMaximumFileCount(g.maximumFileCount),e.setMaximumFileSizeMB(g.maximumFileSizeMB),e.setUploadProductCode(g.uploadProductCode),e.setMaximumFileNameSize(g.maximumFileNameSize)}var b={restrict:"E",controller:a,templateUrl:"partials/fileTransfer/modal/fileTransferGaoOptions.html"};return a.$inject=["$scope","nxn.fileTransferUtils"],b}angular.module("nxn.fileTransfer").directive("fileTransferGaoOptions",a)}(),function(){"use strict";function a(){function a(a,b){function c(){if(a.options=i,a.radioOption={selectedOption:null},a.$watch("radioOption.selectedOption",e),0===i.length)f.setErrorMessage("User is not entitled to any NRA Upload types");else{for(var b=0;b<i.length;b++)if(i[b].default){a.radioOption.selectedOption=i[b];break}angular.isObject(a.radioOption.selectedOption)||(a.radioOption.selectedOption=i[0])}e()}function d(a){for(var c=a.length-1;c>=0;c--)b.hasEntitlement(a[c].entitlements)||a.splice(c,1);return a}function e(){var b=a.radioOption.selectedOption;angular.isObject(b)&&(f.setAllowedExtensions(b.allowedExtensions),f.setAllowFileUpload(!0),f.setFileFormat(b.name),f.setMaximumFileCount(b.maximumFileCount),f.setMaximumFileNameSize(b.maximumFileNameSize),f.setMaximumFileSizeMB(b.maximumFileSizeMB),f.setUploadProductCode(b.uploadProductCode),f.setUnSupportedCharacters(b.unSupportedCharacters))}var f=a.fileTransferModalController,g=f.getUploadType(),h=b.getUploadTypeCustomData(g),i=d(h.options);c()}var b={restrict:"E",controller:a,templateUrl:"partials/fileTransfer/modal/fileTransferNRAOptions.html"};return a.$inject=["$scope","nxn.fileTransferUtils"],b}angular.module("nxn.fileTransfer").directive("fileTransferNraOptions",a)}(),function(){"use strict";function a(){function a(a,b,c){function d(){a.accountGroups=null,a.accounts=null,a.selection={selectedAccountGroup:null,selectedAccount:null},m.setAllowedExtensions(o.allowedExtensions),m.setMaximumFileCount(o.maximumFileCount),m.setMaximumFileSizeMB(o.maximumFileSizeMB),m.setUploadProductCode(o.uploadProductCode),a.processAccountGroupSelection=g,a.processAccountSelection=h}function e(){m.showSpinner(),b.getEntitlements().then(function(a){q=l,angular.isObject(a.data.accounts)?(q=k,p=a.data.accounts,angular.forEach(p,function(a,b){angular.isArray(a)&&0!==a.length||delete p[b]}),f(Object.keys(p))):q=j,i(),m.hideSpinner()},function(a){q=j,i(),m.hideSpinner()})}function f(b){angular.isArray(b)&&b.length>0&&(a.accountGroups=b,b.length>0&&(a.selection.selectedAccountGroup=b[0],a.processAccountGroupSelection()))}function g(){var b=p[a.selection.selectedAccountGroup];a.accounts=b,a.selection.selectedAccount=b&&b.length>0?b[0]:null,a.processAccountSelection()}function h(){var b=a.selection.selectedAccountGroup,c=a.selection.selectedAccount;m.setAccountGroupId(b),m.setAccountId(c),m.setAllowFileUpload(!(!b||!c))}function i(){var b=null,c=!angular.isArray(a.accountGroups)||0===a.accountGroups.length;q===j?b="Failed to load accounts":q===k&&c&&(b="User does not have any accounts for Document Upload"),a.documentErrorMessage=b}var j="FAILURE",k="SUCCESS",l="IN_PROCESS",m=a.fileTransferModalController,n=m.getUploadType(),o=c.getUploadTypeCustomData(n),p=null,q=null;d(),e()}var b={restrict:"E",controller:a,templateUrl:"partials/fileTransfer/modal/fileTransferDocumentOptions.html"};return a.$inject=["$scope","nxn.fileTransferService","nxn.fileTransferUtils"],b}angular.module("nxn.fileTransfer").directive("fileTransferDocumentOptions",a)}(),function(){"use strict";function a(){function a(a,b,c){function d(){var a,c=A.options,d=[];for(a=0;a<c.length;a++){var e=c[a].name;d.indexOf(e)>-1||!b.hasEntitlement(c[a].entitlements)?c[a].__remove__=!0:d.push(e)}for(a=c.length-1;a>=0;a--)c[a].__remove__&&c.splice(a,1);return c}function e(){return!angular.isArray(B)||B.length<1?void y.setErrorMessage("User is not entitled to any instruction operations."):(a.instructionOptions=B,a.instructions=null,a.instructionSubTypes=null,a.accounts=null,a.selection={selectedOption:g(),selectedInstruction:null,selectedInstructionSubType:null,selectedAccount:null},void a.$watch("selection.selectedOption",q))}function f(){for(var a=0;a<B.length;a++)if(B[a].requiresInstructionAndAccount)return!0;return!1}function g(){return B.length>0?B[0]:null}function h(){w=v,a.instructions=null,a.instructionSubTypes=null,a.selection.selectedInstruction=null,a.selection.selectedInstructionSubType=null,c.getInstructionTypes().then(function(b){angular.isArray(b.data.data)&&b.data.data.length>0?(w=u,a.instructions=b.data.data,angular.isArray(a.instructions)&&1===a.instructions.length&&(a.selection.selectedInstruction=a.instructions[0]),a.$watch("selection.selectedInstruction",o),a.$watch("selection.selectedInstructionSubType",p)):w=t,l()},function(){w=t,l()})}function i(){x=v,a.accounts=null,a.selection.selectedAccount=null;var b=j();if(null===b)throw new Error("Instruction code must be selected before requesting accounts.");var d={};D=d,a.isLoadingAccounts=!0,c.getAccounts(b).then(function(b){d===D&&(a.isLoadingAccounts=!1,angular.isArray(b.data.data)&&b.data.data.length>0?(x=u,a.accounts=b.data.data,1===a.accounts.length&&(a.selection.selectedAccount=a.accounts[0]),a.$watch("selection.selectedAccount",r)):x=t,l())},function(){d===D&&(a.isLoadingAccounts=!1,x=t,l())})}function j(){var b=a.selection.selectedInstruction,c=a.selection.selectedInstructionSubType;return k()&&null===c?null:null===c?b.code:c.code}function k(){var b=a.selection.selectedInstruction;return angular.isObject(b)&&angular.isArray(b.subTypes)}function l(){s()||y.hideSpinner(),m()}function m(){a.rIAAErrorMessage=null;var b=w===t,c=x===t;(b||c)&&n("Failed to load"+(b?" instructions":"")+(b&&c?" and":"")+(c?" accounts":"")+".");var d=w===u,e=x===u,f=!angular.isArray(a.instructions)||0===a.instructions.length,g=!angular.isArray(a.accounts)||0===a.accounts.length,h=d&&f,i=e&&g;if(h||i){var j=h?"instructions":"";j+=h&&i?" or ":"",j+=i?"accounts":"",n("User does not have any "+j+" for Instruction Upload.")}}function n(b){a.rIAAErrorMessage=(a.rIAAErrorMessage?a.rIAAErrorMessage+" ":"")+b}function o(b,c){a.accounts=null,a.selection.selectedAccount=null,a.instructionSubTypes=null,a.selection.selectedInstructionSubType=null,k()&&(a.instructionSubTypes=a.selection.selectedInstruction.subTypes,1===a.instructionSubTypes.length&&(a.selection.selectedInstructionSubType=a.instructionSubTypes[0]));var d=null!==b&&(b!==c||null===a.accounts);d&&!k()&&(C=!0),r()}function p(b,c){null===b||b===c&&null!==a.accounts||(C=!0),r()}function q(){var b=a.selection.selectedOption;angular.isObject(b)&&(y.setAllowedExtensions(b.allowedExtensions),y.setMaximumFileCount(b.maximumFileCount),y.setMaximumFileSizeMB(b.maximumFileSizeMB),y.setUploadProductCode(b.uploadProductCode),y.setFileFormat(b.name),b.requiresInstructionAndAccount&&s()&&y.showSpinner()),r()}function r(){C&&(i(),C=!1);var b=null,c=null,d=null,e=!1,f=a.selection.selectedOption;if(angular.isObject(f)){if(f.requiresInstructionAndAccount){var g=a.selection.selectedInstruction,h=a.selection.selectedInstructionSubType,j=a.selection.selectedAccount;b=g&&g.code?g.code:null,c=h&&h.code?h.code:null,d=j&&j.number?j.number:null}e=!f.requiresInstructionAndAccount||b&&d&&(!a.instructionSubTypes||c)}y.setInstruction(b),y.setInstructionSubType(c),y.setProgram(d),y.setAllowFileUpload(e)}function s(){return w===v}var t="FAILURE",u="SUCCESS",v="IN_PROCESS",w=null,x=null,y=a.fileTransferModalController,z=y.getUploadType(),A=b.getUploadTypeCustomData(z),B=d(),C=!1,D=null;e(),f()&&h()}var b={restrict:"E",controller:a,templateUrl:"partials/fileTransfer/modal/fileTransferInstructionOptions.html"};return a.$inject=["$scope","nxn.fileTransferUtils","nxn.fileTransfer.instruction.service"],b}angular.module("nxn.fileTransfer").directive("fileTransferInstructionOptions",a)}(),function(){"use strict";function a(a,d,e,f,g,h,i,j,k){function l(){a.page="FT_UPLOAD_PAGE",a.uploadType=g.uploadType,a.uploadTypeName=e.getUploadTypeName(a.uploadType),a.uploadDirectiveName=e.getUploadDirectiveName(a.uploadType),a.submitWarning="",a.parameters=ja,a.rejectedChar="",da=null,ca=null,ba=o(),a.uploader=ba,fa=new b(ba),a.fileList=fa,a.submit=m,a.clearWarnings=X;var c=e.getPlugin(a.uploadType);e.isLazyLoadedA1(a.uploadType)?a.a1Plugin=c:e.isLazyLoadedAngular(a.uploadType)&&(a.usePluginPresenter=!0,
a.pluginPresenterParams={plugin:c,angularJSDirective:a.uploadDirectiveName,attrName:"[file-transfer-modal-controller]",attrData:la,callback:function(a){"LOADING"===a?T():w()}}),angular.isString(a.uploadDirectiveName)||k.error("File Transfer Upload's directive is not configured."),a.submitUploadNewFile=function(){V(),a.page="FT_UPLOAD_PAGE"},a.close=function(){if(ka&&g.refresh(),ia){var b=a.confirmationPageData?a.confirmationPageData.files:[];g.setUploadedFiles(b)}f.dismiss("cancel")},a.removeFile=function(a){X(),fa.removeFile(a),p(),O(0===!fa.queue.length||!fa.getSuccessCount()<1)},a.formatBytes=function(a){return e.getFileBytes(a)}}function m(){if(ja.files=n(fa.queue),!angular.isArray(ja.files)||0===ja.files.length)throw F("No files in queue are ready for submission."),new Error("No files available for posting.");T(),d.postFiles(ja).then(function(b){a.confirmationPageData=b.data,a.page="FT_CONFIRMATION_PAGE",w(),angular.isFunction(g.submitCallback)&&g.submitCallback(b.data)},function(b){F("Error submitting the files to the File Transfer Service."),a.page="FT_CONFIRMATION_PAGE",w()}),ka=!0}function n(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.errorMessage||b.push(d.getPostData())}return b}function o(){var b=new h({alias:"file",autoUpload:!0,formData:[{uploadProductCode:"UNSET"}],headers:d.getHeaders(),method:"POST",withCredentials:!0}),e=!b.isHTML5;return b.url=j.getWhiteLabelAPIGatewayUrl(d.getScansURL(e)),b.url+="/scans"+(e?"?isTextHtml=true":""),b.filters.push({name:"FILE_LIMIT",fn:function(a){return fa.queue.length<$}}),b.filters.push({name:"FILE_NAME_SIZE_LIMIT",fn:function(a){var b=s(a.name);return b&&b.length<=ga}}),b.filters.push({name:"FILE_NAME_RESTRICTION",fn:function(b){var c=s(b.name),d=new RegExp(a.unSupportCharacters);return!!angular.isUndefined(a.unSupportCharacters)||!d.test(c)}}),e||(b.filters.push({name:"FILE_SIZE_LIMIT",fn:function(a){return!angular.isNumber(_)||a.size/1024/1024<=_}}),b.filters.push({name:"ZERO_BYTE",fn:function(a){return a.size>0}})),b.filters.push({name:"FILE_NAME",fn:function(a){if(!angular.isArray(Z))return!0;var b=s(a.name),c=b.lastIndexOf(".");if(0===c||c+1>=b.length)return!1;for(var d=c>0?b.substr(c+1).toLowerCase():"",e=0;e<Z.length;e++)if(d===Z[e].toLowerCase())return!0;return!1}}),b.filters.push({name:"DUPLICATE_FILE_NAME",fn:function(a){var b=s(a.name);return fa.containsFile(b)}}),b.onAfterAddingAll=function(){O(!1)},b.onAfterAddingFile=function(a){a.file.name=s(a.file.name);var b=new c(a.file.name,a.file.size,a);fa.addFile(b),p()},b.onWhenAddingFileFailed=function(b,d,e){if("FILE_LIMIT"===d.name)return void(a.fileUploadWarningMessage="Maximum file upload limit "+$+(1===$?" file":" files")+" reached.");var f={DUPLICATE_FILE_NAME:"Duplicate file name is already in queue.",FILE_NAME:"The supported file format(s) are "+a.allowedExtensions+".",FILE_NAME_SIZE_LIMIT:"The file name exceeds "+ga+" characters.",FILE_SIZE_LIMIT:"The maximum file size must be "+a.fileSizeLimitMB+".",ZERO_BYTE:"The minimum file size must be more than zero Byte.",FILE_NAME_RESTRICTION:"File name should not contain any of "+a.rejectedChar},g=s(b.name),h=new c(g,b.size),i=f[d.name];h.errorMessage=i?i:"Upload failed.",fa.addFile(h),p()},b.onCompleteItem=function(a,b,c,d){if(b.files&&b.files.length>0){var e=a.__ftFile;e.name=b.files[0].fileName,e.fileId=b.files[0].fileId,b.files[0].errorCode>0&&(e.errorMessage=b.files[0].errorMessage)}else a.__ftFile.errorMessage=ea;p()},b.onErrorItem=function(a,b,c,d){a.__ftFile.errorMessage=ea},b.onCancelItem=function(a,b,c,d){a.__ftFile.errorMessage="Upload Cancelled"},b.onCompleteAll=function(){N()},b}function p(){q(),angular.isFunction(da)&&da(fa.queue.length)}function q(){var b=fa.getErrorCount();b>0?a.submitWarning=b+" out of "+fa.queue.length+" file(s) will not be submitted":a.submitWarning=null}function r(a){ca=a}function s(a){return angular.isFunction(ca)?ca(a):a}function t(a){da=a}function u(){return a.uploadType}function v(){return g}function w(){ha&&(i.closeModal(),ha=!1)}function x(b){a.disableNewUploadButton=b}function y(a){ja.accountId=a}function z(a,b){angular.isUndefined(ja.metaData)&&(ja.metaData={}),ja.metaData[a]=b}function A(a){angular.isUndefined(ja.fileNamePrefix)&&(ja.fileNamePrefix=""),ja.fileNamePrefix=a}function B(a){angular.isUndefined(ja.fileNameSuffix)&&(ja.fileNameSuffix=""),ja.fileNameSuffix=a}function C(a){ja.accountGroupId=a}function D(b){if(void 0===b||null===b)return void(a.allowedExtensions=null);if(!angular.isArray(b))throw new Error("Allowed Extensions must be an array");Z=b,a.allowedExtensions=Z.join(", ")}function E(b){a.allowFileUpload=b,N()}function F(b){a.errorMessage=b}function G(b){a.fileFormat=b}function H(a){ja.instruction=a}function I(a){ja.instructionSubType=a}function J(b){if(!angular.isNumber(b)||b<1)throw a.fileUploadLimit=null,new Error("Invalid File Count Limit");$=b,a.fileUploadLimit=$}function K(b){if(!angular.isNumber(b)||b<=0||b>255)throw ga=null,new Error("Invalid File Name Size Limit");ga=b,a.fileNameLengthLimit=ga}function L(b){if(!angular.isNumber(b)||b<=0)throw a.fileSizeLimitMB=null,new Error("Invalid File Size Limit");_=b,a.fileSizeLimitMB=angular.isNumber(_)?_+" MB":null}function M(a){ja.program=a}function N(){O(!ba.isUploading&&fa.getSuccessCount()>0&&a.allowFileUpload)}function O(b){a.allowSubmit=b}function P(a){ja.destinationLOB=a}function Q(a){ia=a}function R(b){ja.uploadProductCode!==b&&(X(),a.showQueueClearMessage=fa.queue.length>0,W(),ja.uploadProductCode=b,S(b))}function S(a){for(var b=ba.formData,c=0;c<b.length;c++)if(b[c].hasOwnProperty("uploadProductCode"))return void(b[c].uploadProductCode=a);b.push({uploadProductCode:a})}function T(){ha||(ha=!0,i.showModal())}function U(a){if(!angular.isFunction(a))throw new Error("Reset callback must be a function.");aa=a}function V(){a.errorMessage=null,W(),X(!0),E(!1),aa&&aa()}function W(){void 0!==ba&&null!==ba&&ba.cancelAll(),fa.clear(),p()}function X(){a.showQueueClearMessage=!1,a.fileUploadWarningMessage=null}function Y(b){if(null==b)throw new Error("UnSupported Characters should not be null");a.rejectedChar=b.replace("\\s","").slice(1,-1).split("").join(" "),a.rejectedChar=a.rejectedChar+(b.includes("\\s")?" and space":""),a.unSupportCharacters=b}var Z,$,_,aa,ba,ca,da,ea="Failed to upload file",fa=null,ga=255,ha=!1,ia=!1,ja={},ka=!1,la={getModalOptions:v,getUploadType:u,hideSpinner:w,setAccountGroupId:C,setAccountId:y,setAllowedExtensions:D,setAllowFileUpload:E,setDestinationLOB:P,setDisableNewUploadButton:x,setErrorMessage:F,setFileFormat:G,setFileNamePrefix:A,setFileNameSuffix:B,setInstruction:H,setInstructionSubType:I,setMaximumFileCount:J,setMaximumFileNameSize:K,setMaximumFileSizeMB:L,setNameFormatterCallback:r,setParameter:z,setProgram:M,setQueueLengthChangeCallback:t,setReturnFilesOnClose:Q,setResetCallback:U,setUnSupportedCharacters:Y,setUploadProductCode:R,showSpinner:T};return l(),V(),la}function b(a){var b=a,c=[];this.queue=c,this.isHTML5=b.isHTML5,this.addFile=function(a){c.indexOf(a)>=0||c.push(a)},this.removeFile=function(a){var d=c.indexOf(a);d>=0&&c.splice(d,1);var e=a.getFileItem();angular.isObject(e)&&b&&e.remove()},this.containsFile=function(a){for(var b=0;b<c.length;b++)if(c[b].name===a)return!1;return!0},this.getErrorCount=function(){for(var a=0,b=0;b<this.queue.length;b++)this.queue[b].errorMessage&&a++;return a},this.getSuccessCount=function(){return this.queue.length-this.getErrorCount()},this.clear=function(){for(;this.queue.length>0;)this.removeFile(this.queue[0])}}function c(a,b,c){var d=c;d&&(d.__ftFile=this),this.name=a,this.size=b,this.fileId=null,this.errorMessage=null,this.isUploading=function(){return d&&d.isUploading},this.progress=function(){return d&&d.progress},this.getPostData=function(){return{fileName:this.name,fileId:this.fileId}},this.getFileItem=function(){return d}}angular.module("nxn.fileTransfer").controller("fileTransferModalController",a),a.$inject=["$scope","nxn.fileTransferService","nxn.fileTransferUtils","$modalInstance","modalOptionsObj","FileUploader","ModalSpinnerService","NxnWhiteLabelUtil","$log"]}(),function(){"use strict";function a(){function a(a,b){function c(){a.defaultFilterObj={uploadProductType:null,statusDescription:null,startDate:moment().startOf("day"),endDate:moment().endOf("day")},a.filterObj=angular.copy(a.defaultFilterObj),a.isUserEntitledForAllFiles=b.isEntitledForAllFiles(),a.$watch("filterObj.uploadProductType",function(){a.filterObj.category=null})}c()}var b={scope:{},restrict:"A",controller:a,templateUrl:"partials/fileTransfer/portlet/fileTransferDetailedPortlet.html"};return a.$inject=["$scope","nxn.fileTransferUtils"],b}angular.module("nxn.fileTransfer").directive("fileTransferDetailedPortlet",a)}(),function(){"use strict";function a(){function a(a){function b(){a.docPieMetadata={isSemiDonut:"false",filterByColumn:"myFileStatus",noDataText:" ",disableLegendClick:!0,dataLabels:!0},a.chartConfig={seriesData:[]},a.$on("/chart/refresh",function(b,c){!angular.isDefined(c)||angular.equals(c.myFileStatus,"")?a.filterObj.category=null:a.filterObj.category=c.myFileStatus}),a.$watch("categoriesObj",function(b,d){var e=[];angular.forEach(b,function(a,b){e.push({color:c[b],name:b,y:a})}),a.chartConfig={seriesData:e}})}var c={Success:"#43b02a","In Progress":"#dae0e1",Failed:"#e35205","Accepted With Errors":"#bf9757"};b()}var b={scope:{categoriesObj:"=",filterObj:"="},restrict:"E",controller:a,templateUrl:"partials/fileTransfer/portlet/fileTransferDonutChart.html"};return a.$inject=["$scope"],b}angular.module("nxn.fileTransfer").directive("fileTransferDonutChart",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"partials/fps/fps.main.html",controller:b}}function b(a,b,c,d){function e(){b.go("login")}function f(){a.principalId=null,a.questions=[],a.transactionKey=null,g("REQUEST")}function g(b){a.currentPage=b,a.title=j[a.currentPage],a.errorMessage=null}function h(a){c.location.href=a}function i(b){var c=!angular.isString(b)||0===b.trim().length;a.errorMessage=c?"Please contact the help desk for assistance with your access.":b}var j={QUESTIONS:"Security Questions",REQUEST:"Reset Your Password",VALIDATE:"Reset your password"};a.cancel=e,a.goToAddress=h,a.reset=f,a.setPage=g,a.showError=i,a.showSpinner=d.showModal,a.closeSpinner=d.closeModal,a.transactionKey=null,a.principalId=null,a.questions=[],a.errorMessage=null,f()}angular.module("nxn.fps").directive("nxnFpsMain",a),b.$inject=["$scope","$state","$window","ModalSpinnerService"]}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"partials/fps/fps.questions.html",controller:b}}function b(a,b){function c(c){var d=b.processResponse(c);d.isSuccess?(a.$parent.questions=[],a.setPage("VALIDATE")):d.isStartOver?(a.reset(),a.showError(d.message)):(a.disableSubmit=!1,a.showError(d.message)),a.closeSpinner()}a.disableSubmit=!1,a.submit=function(){a.showSpinner(),a.disableSubmit=!0;var d={identification:{principalId:a.$parent.principalId,transactionKey:a.$parent.transactionKey},questions:a.$parent.questions};angular.forEach(d.questions,function(a){a.answer=a.answer.trim()}),b.sendEmail(d).then(c,c)}}angular.module("nxn.fps").directive("nxnFpsQuestions",a),b.$inject=["$scope","nxn.fpsService"]}(),function(){"use strict";function a(){return{require:"^nxnFpsMain",restrict:"E",templateUrl:"partials/fps/fps.request.html",controller:b}}function b(a,b){function c(c){var d=b.processResponse(c);d.isSuccess&&d.isValidQuestions&&d.isValidKey?(a.$parent.questions=c.data.questions,a.$parent.transactionKey=c.data.transactionKey,a.$parent.principalId=a.userId,a.setPage("QUESTIONS")):(a.disableSubmit=!1,a.showError(d.message)),a.closeSpinner()}a.disableSubmit=!1,a.submit=function(){a.showSpinner(),a.disableSubmit=!0;var d={principalId:a.userId,emailId:a.emailAddress};b.getSecurityQuestions(d).then(c,c)}}angular.module("nxn.fps").directive("nxnFpsRequest",a),b.$inject=["$scope","nxn.fpsService"]}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"partials/fps/fps.validate.html",controller:b}}function b(a,b,c){function d(d){var f=b.processResponse(d);f.isSuccess?a.goToAddress(c.getSMPasswordUrl(e)):f.isStartOver?(a.reset(),a.showError(f.message)):(a.disableSubmit=!1,a.showError(f.message)),a.closeSpinner()}var e="/apps/home?fromPage=FPS";a.disableSubmit=!1,a.submit=function(){a.showSpinner(),a.disableSubmit=!0;var c={principalId:a.$parent.principalId,transactionKey:a.$parent.transactionKey,temporaryPassword:a.tempPassword};b.validate(c).then(d,d)}}angular.module("nxn.fps").directive("nxnFpsValidate",a),b.$inject=["$scope","nxn.fpsService","nxnSMAgentService"]}(),angular.module("nxn.Highcharts").controller("nxn.HighchartsController",["$scope","nxn.HighchartsService",function(a,b){b.setDefaultColors()}]),angular.module("nexenApp.httpProvider",["nexenApp.httpService"]).provider("nxnHttpWithAbort",function(){this.$get=["$http","$q","nxnHttpService",function(a,b,c){return{get:function(d){var e=1e4;angular.isDefined(d)&&angular.isDefined(d.timeout)&&angular.isNumber(d.timeout)&&(e=d.timeout,delete d.timeout);var f="",g=b.defer();d.timeout=g.promise;var h=a(d),i=c.add(d.url,h,e);return h.abort=function(){f="request aborted",g.resolve(f)},h.timeout=function(){f="request timed out",g.resolve(f)},h.getErrorMessage=function(){return f},h.finally(function(){c.remove(i),h.abort=angular.noop,h.timeout=angular.noop,g=h=null}),h}}}]}),function(){"use strict";function a(a,b){function c(c,d,e){var f=c+"/"+b.getGuid();return h[f]=d,a(function(){angular.isFunction(d.timeout)&&d.timeout()},e),f}function d(a){delete h[a]}function e(){var a=0;return angular.forEach(h,function(b,c){a++}),a}function f(){angular.forEach(h,function(a){a.abort()}),h={}}var g={add:c,remove:d,size:e,cancelAll:f},h={};return g}angular.module("nexenApp.httpService",["nxn.util"]).service("nxnHttpService",a),a.$inject=["$timeout","nxnGuidFactory"]}(),function(){"use strict";function a(){function a(a,b,c,d){var e=this,f={name:"",version:""},g=d.clientInfo$.subscribe(function(a){f=a.browserInfo});a.$on("$destroy",function(){g&&g.unsubscribe()}),e.warningMessage="",e.displayMessage=!1,e.close=function(){e.displayMessage=!1},b.getContentStateSubject().subscribe(function(a){e.displayMessage=c.isOutOfDateBrowser(f)&&a.displayLoginPageContent,e.warningMessage=e.displayMessage?c.getWarningMessage():""})}return a.$inject=["$scope","ContentContextService","nxnBrowserOutOfDateService","nxnClientInfoService"],{restrict:"E",controller:a,controllerAs:"vm",templateUrl:"partials/login/browser-out-of-date.html"}}angular.module("nxn.login").directive("nxnBrowserOutOfDateWarning",a)}(),function(){"use strict";function a(){function a(a,b,c,d){var e=this;e.wlResources={displayCookiePolicyLink:!1,cookiePolicyLink:""},c.getWLResources().then(function(a){d.setDisplayInfo(e.wlResources,a,"displayCookiePolicyLink","cookiePolicyLink",!1,"")}),e.createEUCookie=function(){e.showEUCookieBar=!1,b.setCookie("EU_COOKIE",!0,365)},a.getContentStateSubject().subscribe(function(a){e.showEUCookieBar=!b.cookieExists("EU_COOKIE")&&a.displayLoginPageContent})}return a.$inject=["ContentContextService","CookieService","NxnWhiteLabelService","NxnWhiteLabelUtil"],{restrict:"E",controller:a,controllerAs:"eu",templateUrl:"partials/login/eu-cookie.html"}}angular.module("nxn.login").directive("nxnEuCookieWarn",a)}(),function(){"use strict";function a(a,b,c){var d=this;d.isOutageState="outage"===a.current.name,d.sorryPageImg="img/currently_unavailable.png?avoidCache="+Math.random(),d.isMainApp=b.isMainApp();var e="The site";d.isMainApp&&(e="NEXEN"),d.outageMessage=e+" is currently not available. We apologize for any inconvenience.",d.wlResources={displayLoginSupport:!1,heroText1:"",heroText2:"",jumbotronClass:"default-login-jumbotron-container",loginSupportContent:"",marketingHeader:"",marketingLogoAlt:"",marketingLogoSrc:"",marketingSelection:"none",marketingText:"",marketingVideoLink:""},b.getWLResources().then(function(a){c.setDisplayInfo(d.wlResources,a,"displayLoginSupport","loginSupportContent",!1,""),c.setStringResource(d.wlResources,a,"heroText1",""),c.setStringResource(d.wlResources,a,"heroText2",""),c.setStringResource(d.wlResources,a,"jumbotronClass",""),angular.isString(a.marketingSelection)&&(d.wlResources.marketingSelection=a.marketingSelection.trim().toLowerCase(),"video"===d.wlResources.marketingSelection?d.wlResources.marketingVideoLink=a.marketingVideoLink:"logo"===d.wlResources.marketingSelection&&(d.wlResources.marketingLogoSrc=a.marketingLogoSrc,d.wlResources.marketingLogoAlt=a.marketingLogoAlt)),c.setStringResource(d.wlResources,a,"marketingHeader",""),c.setStringResource(d.wlResources,a,"marketingText","")})}angular.module("nxn.login").controller("LoginCtrl",a),a.$inject=["$state","NxnWhiteLabelService","NxnWhiteLabelUtil"]}(),function(){"use strict";function a(){return{restrict:"EA",scope:!0,controller:b,controllerAs:"vm",templateUrl:"partials/login/loginForm.html"}}function b(a,b,c,d,e,f,g,h){function i(a){b.log("Submitting login..."),l.loginStarted=!0,j(),d(function(){angular.element("#loginForm").submit()}),a.preventDefault()}function j(){for(var a=!1,b=["","Invalid Credentials.","Unauthorized User.","Unauthorized UserID.","System Error encountered, Please try again later.","Login was unsuccessful","Please enter without spaces","Session Expired. Please login again.","Authentication Level too low.","You may have entered the wrong User ID or password or your account may be locked."],c=0;c<b.length;c++)angular.equals(l.message,b[c])&&(a=!0);a||angular.isUndefined(l.message)||(l.message="You may have entered the wrong User ID or password or your account may be locked.")}function k(){e.setCookie("con_authlevel_dflt","password",730)}var l=this;l.submit=i,l.createFPCookie=k;var m=c.SMQUERYDATA?encodeURIComponent(c.SMQUERYDATA):"";l.message=c.SMUSRMSG?c.SMUSRMSG:"",l.loginUrl="/login/forms/ProcessLogin.fcc?SMQUERYDATA="+m,j(),"default"!==e.getCookie("wlCookie")&&e.getCookie("wlCookie")||(l.hideFPSLink=!0),l.loginStarted=!1,l.displayRegistrationLink=!1,l.isTestingEnv=f.isTestingEnv(a.host()),g.getWLResources().then(function(a){h.setBooleanResource(l,a,"displayRegistrationLink",!1)})}angular.module("nxn.login").directive("nxnLoginForm",a),b.$inject=["$location","$log","$stateParams","$timeout","CookieService","NxnDomainService","NxnWhiteLabelService","NxnWhiteLabelUtil"]}(),function(){"use strict";function a(a,b){a.showModal=function(){var a={};a.headerText="NEXEN, the financial services digital ecosystem",a.bodyUrl="partials/login/nxnVideoModal.html";var c={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html",size:"sm"};b.showModal(c,a)}}angular.module("nxn.login").controller("LoginVideoCtrl",a),a.$inject=["$scope","ModalService"]}(),function(){"use strict";angular.module("nxn.login").directive("nxnLogoutForm",["$location","$window",function(a,b){return{restrict:"E",templateUrl:"partials/login/logout.html"}}])}(),function(){function a(a,b,c,d,e){a.showManageUserAccess=!1,a.error=!1,a.errorMessage="",a.modalInstance=e.showModal(),a.close=function(){var b=a.modalInstance.opened;b.then(function(){a.modalInstance.dismiss("cancel")})},c.getManageUserAccess().then(function(e){if(angular.forEach(e,function(b,c){"error"===c&&(a.showManageUserAccess=!1,a.error=!0)}),a.error)a.errorMessage="An error has occurred, invalid request.",a.close();else{a.showManageUserAccess=!0,a.smUser=null===e.smUser||angular.isUndefined(e.smUser)?"":e.smUser,a.smRealm=null===e.smRealm||angular.isUndefined(e.smRealm)?"":e.smRealm,a.smRealmoid=null===e.smRealmoid||angular.isUndefined(e.smRealmoid)?"":e.smRealmoid,a.smTransactionid=null===e.smTransactionid||angular.isUndefined(e.smTransactionid)?"":e.smTransactionid,a.smSession=null===e.smSession||angular.isUndefined(e.smSession)?"":e.smSession,a.smServerSessionSpec=null===e.smServerSessionSpec||angular.isUndefined(e.smServerSessionSpec)?"":e.smServerSessionSpec,a.plCookie=null===e.plCookie||angular.isUndefined(e.plCookie)?"":e.plCookie,a.authLevelCode=null===e.authLevelCode||angular.isUndefined(e.authLevelCode)?"":e.authLevelCode,a.swfUrl=b.trustAsResourceUrl(c.getSWFURL());var f="1.0.0",g="third_party/lib/swfobject/swfobject/expressInstall.swf",h={};h.smServerSessionSpec=a.smServerSessionSpec,h.smUser=a.smUser,h.smRealm=a.smRealm,h.smRealmoid=a.smRealmoid,h.smTransactionid=a.smTransactionid,h.smSession=a.smSession,h.plValue=a.plCookie,h.authLevelCode=a.authLevelCode;var i={};i.movie=a.swfUrl,i.quality="high",i.bgcolor="#ffffff",i.wmode="transparent",i.allowscriptaccess="always";var j={};d.embedSWF(a.swfUrl,"UserAdmin","100%","100%",f,g,h,i,j),a.close()}})}angular.module("NxnManageUserAccess").factory("SwfObject",["$window",function(a){return a.swfobject}]).controller("manageUserAccessController",a),a.$inject=["$scope","$sce","manageUserAccessService","SwfObject","ModalSpinnerService"]}(),function(){"use strict";function a(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return forEach(d,function(a){var d=angular.element(a).data("$binding");d&&forEach(d,function(d){if(c){var f=new RegExp("(^|\\s)"+escapeForRegexp(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else d.indexOf(b)!==-1&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}angular.module("nxn.a2Migration",[]).provider("$$testability",a),a.$inject=[]}(),angular.module("nxn.constants",[]).constant("ApiGatewayBaseURLs",{DEV:"https://apigateway.dev.bnymellon.com",PRODUCTION:"https://apigateway.bnymellon.com",QA:"https://apigateway.test.bnymellon.com",XAT:"https://apigateway.qa.bnymellon.com"}).constant("ThirdPartyLibURLs",{nxnSbpForms:["modules/external/nxn-sbp-forms/nxnsbpforms.min.js?v2.0.15"]}),function(){"use strict";function a(){function a(){return!0}function b(){return!0}return{directiveNeedsStepupAccess:b,stateNeedsStepupAccess:a}}angular.module("nxn.auth").factory("DefaultAuthService",a)}(),function(){"use strict";function a(){var a={};return{register:function(b,c){b&&c&&!a.hasOwnProperty(b)&&(a[b]=c)},$get:["$injector",function(b){return{getAuthService:function(c){return angular.isString(c)&&!a.hasOwnProperty(c)&&console.warn("Stepup has not been registered. "+c+" is not available in registry. Therefore, stepup applied with default scope. "),a.hasOwnProperty(c)?b.get(a[c]):b.get("DefaultAuthService")}}}]}}angular.module("nxn.auth").provider("StepupRegistry",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){var b=a.spinnerInstance.opened;b.then(function(){a.spinnerInstance.dismiss("cancel")})}var h={DEV:"https://nexencontentapi.dev.bnymellon.com/public/api/sites/gateway/sblocks/open/systemrequirements",UAT:"https://nexencontentapi.test.bnymellon.com/public/api/sites/gateway/sblocks/open/systemrequirements",QA:"https://nexencontentapi.test.bnymellon.com/public/api/sites/gateway/sblocks/open/systemrequirements",PRODUCTION:"https://nexencontentapi.bnymellon.com/public/api/sites/gateway/sblocks/open/systemrequirements",XAT:"https://nexencontentapi.qa.bnymellon.com/public/api/sites/gateway/sblocks/open/systemrequirements",MOCK:"/nexencontentapi/public/api/sites/gateway/sblocks/open/systemrequirements"};a.title="SYSTEM REQUIREMENTS",a.hasError=!1,a.spinnerInstance=c.showModal();var i=b.location.host,j=angular.isUndefined(d.getEnvironment())||null===d.getEnvironment()?f.getCurrentEnv(i):d.getEnvironment();e.get(h[j.toUpperCase()]).then(function(b){g(),a.sysReqHtml=b.data.block.text},function(b){g(),a.hasError=!0,a.showMessage="The content is temporarily unavailable. Please try again later."})}angular.module("nxn.public").controller("SysReqCtrl",a),a.$inject=["$scope","$window","ModalSpinnerService","PageContext","nxn.Http","nxn.getCurrentEnvironment"]}(),function(){"use strict";function a(a,b,c,d,e,f){a.pageNum=angular.isUndefined(f.id)?0:f.id,a.redirectToConnect=function(){var a=c.getEnvConfigParam("connectDomain",d.getEnvironment());b.location.href=a+"/ConnectLogin/flow/nexenFlow.htm"},a.goToNext=function(){a.pageNum=a.pageNum+1,e.go("public.tour",{id:a.pageNum})}}angular.module("nxn.public").controller("TourCtrl",a),a.$inject=["$scope","$window","nxnAppConfig","PageContext","$state","$stateParams"]}();var myApp=angular.module("NexenCommon");myApp.value("fpsDefaultAnswers",{1:"kps",2:"newyork",3:"jimmy",4:"tom",5:"bnymellon",6:"honda",7:"grandma",8:"pavonia"}),myApp.controller("NexenRegisterController",["$scope","ModalService","nexenRegisterService","$window",function(a,b,c,d){a.isLowerEnv=!1;var e=d.location.host;(e.toLowerCase().indexOf("dev")>=0||e.indexOf("localhost")>=0)&&(a.isLowerEnv=!0),a.showModal=function(){var a={},c={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/register/RegisterUserModal.html",controller:"NexenRegisterModalController"};b.showModal(c,a)}}]),myApp.controller("NexenRegisterModalController",["$scope","nexenRegisterService","$modalInstance","$filter","fpsDefaultAnswers",function(a,b,c,d,e){a.result={commitId:"",userId:"",firstName:"",lastName:"",email:"",businessPhone:"",password:""},a.confirmScreen=!1,a.checkUserStarted=!1,a.initialFps=[],a.close=function(){c.dismiss("cancel")},a.ok=function(c){a.isStartSpinner=!0,a.confirmScreen=!0;var d={user:"",forgotPasswordQAList:""};d.user=c,d.forgotPasswordQAList=a.initialFps,b.register(d).then(function(b){a.isStartSpinner=!1,"SUCCESS"===b.data.status?a.message="SUCCESS":a.message="ERROR"},function(b){a.message="ERROR",a.isStartSpinner=!1})},a.checkUserAlreadyExists=function(){a.isStartSpinner=!0,a.checkUserStarted=!0;var c=a.result.userId="ext_"+a.result.commitId.toLowerCase();a.message="",a.alreadyAvailable=!1,a.newUser=!1,b.checkAvailability(c).then(function(b){if(a.isStartSpinner=!1,b.data.isExistingUser)a.checkUserStarted=!1,a.alreadyAvailable=!0;else{a.checkUserStarted=!0,a.newUser=!0;var c=b.data.initialFps;angular.forEach(c,function(a){angular.isDefined(e[a.questionId])?a.answer=e[a.questionId]:a.answer="Default Answer"}),a.initialFps=c}},function(b){a.isStartSpinner=!1,a.checkUserStarted=!1,a.message="ERROR"})}}]),function(){"use strict";angular.module("nxn.selfRegistration").constant("nxn.selfRegistrationConstants",{selfRegMsg:{SAME_ANSWER_ERROR:"The answers to all questions should not be the same.",REPEATING_ANSWER_ERROR:"Same letter should not be entered for all letters in an answer.",NOTALLOWED_ANSWER_ERROR:"The answer should not be same as the User Id, first name or last name.",USER_ID_EXISTS:"This User ID already exists. Enter a different User ID to continue.",CHECK_AGREEMENT:"You must acknowledge your agreement to all links to continue with the registration process.",VERIFICATION_FAILED:"Enter a valid Verification ID and Registration ID.",VERIFICATION_INVALID:"The system cannot verify, please contact support team for assistance.",GENERIC_COMM_FAILURE:"The system cannot process your request now. Please try again later.",CTT_AGREEMENT:"Also please read and agree to the BNY Mellon Escrow Advantage Terms of Use to proceed further."},selfRegBaseURLs:{DEV:"https://apigateway.dev.bnymellon.com/selfregistration-service/v1",QA:"https://apigateway.test.bnymellon.com/selfregistration-service/v1",XAT:"https://apigateway.qa.bnymellon.com/selfregistration-service/v1",PRODUCTION:"https://apigateway.bnymellon.com/selfregistration-service/v1",MOCK:"/selfregistration-service"},selfRegApps:{ANP_US:"anp",ANP_EMEA:"enp",CTT_ALL:"ctt"}})}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(a){a===!0?d.showModal():d.closeModal()}function k(){f.getUserAlreadyExists()||(a.alertType="",a.alertMessage="")}function l(b,d){a.alertMessage=b,a.alertType="alert-warning",d&&c.scrollTo(0,0)}function m(){return g.isLandingPage()?"Self-Registration":"User Registration"}function n(){return g.isLandingPage()}function o(){return g.isPrintConfirmPage()}function p(){return g.showWizard()}function q(){return g.getCurrentStep()}function r(a){e.wizard("selfRegWiz").goTo(a)}function s(){e.wizard("selfRegWiz").next()}function t(){c.print()}function u(){c.location.href=c.location.href.replace("selfRegistration","login")}function v(){e.wizard("selfRegWiz").previous()}function w(){g.resetStepStatus(),f.cancelRegistration(),g.setCurrentStep(i.getWizardBaseSteps().DEFAULT_STEP),e.wizard("selfRegWiz")&&e.wizard("selfRegWiz").reset()}function x(a){f.getUserForm().password.value="",f.getUserForm().confirmPassword.value="",g.setFormStatus(g.steps.NEW_USER,!1),a&&y.wizGoTo(i.getWizardStepEnum().NEW_USER_STEP-1),b(function(){f.passwordFormRef.$aaFormExtensions.$clearErrors()})}var y=this;a.alertMessage="",a.hideActionFromSelfReg=!0,a.alertType="",y.cancelRegistration=w,y.clearError=k,y.getCurrentStep=q,y.isLandingPage=n,y.isPrintConfirmPage=o,y.loginToNexen=u,y.pageTitle=m,y.previousStepHandler=v,y.printConfirmation=t,y.setError=l,y.showLoader=j,y.showWizard=p,y.step=i.getWizardStepEnum().DEFAULT_STEP,y.wizGoNextStep=s,y.wizGoTo=r,y.resetPasswordFields=x,y.contactInfoEnterValidation=function(){var a=e.wizard("selfRegWiz").currentStepNumber();return a===i.getWizardStepEnum().NEW_USER_STEP?g.getFormStatus(g.steps.NEW_USER):a===i.getWizardStepEnum().SEC_QUESTIONS_STEP?!g.getStepStatus(g.steps.SECURITY_QUESTIONS)||g.getFormStatus(g.steps.SECURITY_QUESTIONS):a===i.getWizardStepEnum().CONFIRM_STEP},y.securityQuestionsEnterValidation=function(){return!(e.wizard("selfRegWiz").currentStepNumber()<i.getWizardStepEnum().SEC_QUESTIONS_STEP)||g.getFormStatus(g.steps.NEW_USER)&&g.getFormStatus(g.steps.CONTACT_INFO)},y.onConfirmationEnter=function(){return y.confirmationEnterValidation()},y.confirmationEnterValidation=function(){return!!e.wizard("selfRegWiz")&&(!(e.wizard("selfRegWiz").currentStepNumber()<i.getWizardStepEnum().CONFIRM_STEP)||g.getFormStatus(g.steps.NEW_USER)&&g.getFormStatus(g.steps.CONTACT_INFO)&&g.getFormStatus(g.steps.SECURITY_QUESTIONS))},w()}angular.module("nxn.selfRegistration").controller("nxn.selfRegistrationController",a),a.$inject=["$scope","$timeout","$window","ModalSpinnerService","WizardHandler","nxn.selfRegistrationFormsService","nxn.selfRegistrationControllersService","nxn.selfRegistrationDataService","nxn.selfRegistrationValues"]}(),function(){"use strict";angular.module("NexenCommon").directive("nxnSelfRegDisableNavLinks",function(){function a(){var a=angular.element(".logobar a");a.attr("href",""),a.attr("ng-href",""),a.attr("click","$event.preventDefault();"),a.css("cursor","default");var b=angular.element(".footernav");b.addClass("nxn-self-registration-hide-on-print");var c=angular.element(".footernav a");c.attr("target","_blank")}return{restrict:"A",link:a}})}(),function(){"use strict";function a(){return[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"Colorado",abbreviation:"CO"},{name:"California",abbreviation:"CA"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Idaho",abbreviation:"ID"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Massachusetts",abbreviation:"MA"},{name:"Maryland",abbreviation:"MD"},{name:"Mississippi",abbreviation:"MS"},{name:"Maine",abbreviation:"ME"},{name:"Missouri",abbreviation:"MO"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{
name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"},{name:"Washington DC",abbreviation:"WADC"}]}function b(){return[{countryName:"Afghanistan (93)",countryCode:"93"},{countryName:"Albania (355)",countryCode:"355"},{countryName:"Algeria (213)",countryCode:"213"},{countryName:"American Samoa (1684)",countryCode:"1684"},{countryName:"Andorra (376)",countryCode:"376"},{countryName:"Angola (244)",countryCode:"244"},{countryName:"Anguilla (1264)",countryCode:"1264"},{countryName:"Antarctica (672)",countryCode:"672"},{countryName:"Antigua and Barbuda (1268)",countryCode:"1268"},{countryName:"Argentina (54)",countryCode:"54"},{countryName:"Armenia (374)",countryCode:"374"},{countryName:"Aruba (297)",countryCode:"297"},{countryName:"Australia (61)",countryCode:"61"},{countryName:"Austria (43)",countryCode:"43"},{countryName:"Azerbaijan (994)",countryCode:"994"},{countryName:"Bahamas (1242)",countryCode:"1242"},{countryName:"Bahrain (973)",countryCode:"973"},{countryName:"Bangladesh (880)",countryCode:"880"},{countryName:"Barbados (1246)",countryCode:"1246"},{countryName:"Belarus (375)",countryCode:"375"},{countryName:"Belgium (32)",countryCode:"32"},{countryName:"Belize (501)",countryCode:"501"},{countryName:"Benin (229)",countryCode:"229"},{countryName:"Bermuda (1441)",countryCode:"1441"},{countryName:"Bhutan (975)",countryCode:"975"},{countryName:"Bolivia (591)",countryCode:"591"},{countryName:"Bosnia and Herzegovina (387)",countryCode:"387"},{countryName:"Botswana (267)",countryCode:"267"},{countryName:"Brazil (55)",countryCode:"55"},{countryName:"British Virgin Islands (1284)",countryCode:"1284"},{countryName:"Brunei (673)",countryCode:"673"},{countryName:"Bulgaria (359)",countryCode:"359"},{countryName:"Burkina Faso (226)",countryCode:"226"},{countryName:"Burma (Myanmar (95)",countryCode:"95"},{countryName:"Burundi (257)",countryCode:"257"},{countryName:"Cambodia (855)",countryCode:"855"},{countryName:"Cameroon (237)",countryCode:"237"},{countryName:"Canada (001)",countryCode:"001"},{countryName:"Cape Verde (238)",countryCode:"238"},{countryName:"Cayman Islands (1345)",countryCode:"1345"},{countryName:"Central African Republic (236)",countryCode:"236"},{countryName:"Chad (235)",countryCode:"235"},{countryName:"Chile (56)",countryCode:"56"},{countryName:"China (86)",countryCode:"86"},{countryName:"Christmas Island (61)",countryCode:"61"},{countryName:"Cocos (Keeling Islands (61)",countryCode:"61"},{countryName:"Colombia (57)",countryCode:"57"},{countryName:"Comoros (269)",countryCode:"269"},{countryName:"Republic of the Congo (242)",countryCode:"242"},{countryName:"Democratic Republic of the Congo (243)",countryCode:"243"},{countryName:"Cook Islands (682)",countryCode:"682"},{countryName:"Costa Rica (506)",countryCode:"506"},{countryName:"Croatia (385)",countryCode:"385"},{countryName:"Cuba (53)",countryCode:"53"},{countryName:"Cyprus (357)",countryCode:"357"},{countryName:"Czech Republic (420)",countryCode:"420"},{countryName:"Denmark (45)",countryCode:"45"},{countryName:"Djibouti (253)",countryCode:"253"},{countryName:"Dominica (1767)",countryCode:"1767"},{countryName:"Dominican Republic (1809)",countryCode:"1809"},{countryName:"Timor-Leste (670)",countryCode:"670"},{countryName:"Ecuador (593)",countryCode:"593"},{countryName:"Egypt (20)",countryCode:"20"},{countryName:"El Salvador (503)",countryCode:"503"},{countryName:"Equatorial Guinea (240)",countryCode:"240"},{countryName:"Eritrea (291)",countryCode:"291"},{countryName:"Estonia (372)",countryCode:"372"},{countryName:"Ethiopia (251)",countryCode:"251"},{countryName:"Falkland Islands (500)",countryCode:"500"},{countryName:"Faroe Islands (298)",countryCode:"298"},{countryName:"Fiji (679)",countryCode:"679"},{countryName:"Finland (358)",countryCode:"358"},{countryName:"France (33)",countryCode:"33"},{countryName:"French Polynesia (689)",countryCode:"689"},{countryName:"Gabon (241)",countryCode:"241"},{countryName:"Gambia (220)",countryCode:"220"},{countryName:"Gaza Strip (970)",countryCode:"970"},{countryName:"Georgia (995)",countryCode:"995"},{countryName:"Germany (49)",countryCode:"49"},{countryName:"Ghana (233)",countryCode:"233"},{countryName:"Gibraltar (350)",countryCode:"350"},{countryName:"Greece (30)",countryCode:"30"},{countryName:"Greenland (299)",countryCode:"299"},{countryName:"Grenada (1473)",countryCode:"1473"},{countryName:"Guam (1671)",countryCode:"1671"},{countryName:"Guatemala (502)",countryCode:"502"},{countryName:"Guinea (224)",countryCode:"224"},{countryName:"Guinea-Bissau (245)",countryCode:"245"},{countryName:"Guyana (592)",countryCode:"592"},{countryName:"Haiti (509)",countryCode:"509"},{countryName:"Honduras (504)",countryCode:"504"},{countryName:"Hong Kong (852)",countryCode:"852"},{countryName:"Hungary (36)",countryCode:"36"},{countryName:"Iceland (354)",countryCode:"354"},{countryName:"India (91)",countryCode:"91"},{countryName:"Indonesia (62)",countryCode:"62"},{countryName:"Iran (98)",countryCode:"98"},{countryName:"Iraq (964)",countryCode:"964"},{countryName:"Ireland (353)",countryCode:"353"},{countryName:"Isle of Man (44)",countryCode:"44"},{countryName:"Israel (972)",countryCode:"972"},{countryName:"Italy (39)",countryCode:"39"},{countryName:"Ivory Coast (225)",countryCode:"225"},{countryName:"Jamaica (1876)",countryCode:"1876"},{countryName:"Japan (81)",countryCode:"81"},{countryName:"Jordan (962)",countryCode:"962"},{countryName:"Kazakhstan (7)",countryCode:"7"},{countryName:"Kenya (254)",countryCode:"254"},{countryName:"Kiribati (686)",countryCode:"686"},{countryName:"Kosovo (381)",countryCode:"381"},{countryName:"Kuwait (965)",countryCode:"965"},{countryName:"Kyrgyzstan (996)",countryCode:"996"},{countryName:"Laos (856)",countryCode:"856"},{countryName:"Latvia (371)",countryCode:"371"},{countryName:"Lebanon (961)",countryCode:"961"},{countryName:"Lesotho (266)",countryCode:"266"},{countryName:"Liberia (231)",countryCode:"231"},{countryName:"Libya (218)",countryCode:"218"},{countryName:"Liechtenstein (423)",countryCode:"423"},{countryName:"Lithuania (370)",countryCode:"370"},{countryName:"Luxembourg (352)",countryCode:"352"},{countryName:"Macau (853)",countryCode:"853"},{countryName:"Macedonia (389)",countryCode:"389"},{countryName:"Madagascar (261)",countryCode:"261"},{countryName:"Malawi (265)",countryCode:"265"},{countryName:"Malaysia (60)",countryCode:"60"},{countryName:"Maldives (960)",countryCode:"960"},{countryName:"Mali (223)",countryCode:"223"},{countryName:"Malta (356)",countryCode:"356"},{countryName:"Marshall Islands (692)",countryCode:"692"},{countryName:"Mauritania (222)",countryCode:"222"},{countryName:"Mauritius (230)",countryCode:"230"},{countryName:"Mayotte (262)",countryCode:"262"},{countryName:"Mexico (52)",countryCode:"52"},{countryName:"Micronesia (691)",countryCode:"691"},{countryName:"Moldova (373)",countryCode:"373"},{countryName:"Monaco (377)",countryCode:"377"},{countryName:"Mongolia (976)",countryCode:"976"},{countryName:"Montenegro (382)",countryCode:"382"},{countryName:"Montserrat (1 664)",countryCode:"1 664"},{countryName:"Morocco (212)",countryCode:"212"},{countryName:"Mozambique (258)",countryCode:"258"},{countryName:"Namibia (264)",countryCode:"264"},{countryName:"Nauru (674)",countryCode:"674"},{countryName:"Nepal (977)",countryCode:"977"},{countryName:"Netherlands (31)",countryCode:"31"},{countryName:"Netherlands Antilles (599)",countryCode:"599"},{countryName:"New Caledonia (687)",countryCode:"687"},{countryName:"New Zealand (64)",countryCode:"64"},{countryName:"Nicaragua (505)",countryCode:"505"},{countryName:"Niger (227)",countryCode:"227"},{countryName:"Nigeria (234)",countryCode:"234"},{countryName:"Niue (683)",countryCode:"683"},{countryName:"Norfolk Island (672)",countryCode:"672"},{countryName:"Northern Mariana Islands (1 670)",countryCode:"1 670"},{countryName:"North Korea (850)",countryCode:"850"},{countryName:"Norway (47)",countryCode:"47"},{countryName:"Oman (968)",countryCode:"968"},{countryName:"Pakistan (92)",countryCode:"92"},{countryName:"Palau (680)",countryCode:"680"},{countryName:"Panama (507)",countryCode:"507"},{countryName:"Papua New Guinea (675)",countryCode:"675"},{countryName:"Paraguay (595)",countryCode:"595"},{countryName:"Peru (51)",countryCode:"51"},{countryName:"Philippines (63)",countryCode:"63"},{countryName:"Pitcairn Islands (870)",countryCode:"870"},{countryName:"Poland (48)",countryCode:"48"},{countryName:"Portugal (351)",countryCode:"351"},{countryName:"Puerto Rico (1)",countryCode:"1"},{countryName:"Qatar (974)",countryCode:"974"},{countryName:"Romania (40)",countryCode:"40"},{countryName:"Russia (7)",countryCode:"7"},{countryName:"Rwanda (250)",countryCode:"250"},{countryName:"Saint Barthelemy (590)",countryCode:"590"},{countryName:"Samoa (685)",countryCode:"685"},{countryName:"San Marino (378)",countryCode:"378"},{countryName:"Sao Tome and Principe (239)",countryCode:"239"},{countryName:"Saudi Arabia (966)",countryCode:"966"},{countryName:"Senegal (221)",countryCode:"221"},{countryName:"Serbia (381)",countryCode:"381"},{countryName:"Seychelles (248)",countryCode:"248"},{countryName:"Sierra Leone (232)",countryCode:"232"},{countryName:"Singapore (65)",countryCode:"65"},{countryName:"Slovakia (421)",countryCode:"421"},{countryName:"Slovenia (386)",countryCode:"386"},{countryName:"Solomon Islands (677)",countryCode:"677"},{countryName:"Somalia (252)",countryCode:"252"},{countryName:"South Africa (27)",countryCode:"27"},{countryName:"South Korea (82)",countryCode:"82"},{countryName:"Spain (34)",countryCode:"34"},{countryName:"Sri Lanka (94)",countryCode:"94"},{countryName:"Saint Helena (290)",countryCode:"290"},{countryName:"Saint Kitts and Nevis (1869)",countryCode:"1869"},{countryName:"Saint Lucia (1758)",countryCode:"1758"},{countryName:"Saint Martin (1599)",countryCode:"1599"},{countryName:"Saint Pierre and Miquelon (508)",countryCode:"508"},{countryName:"Saint Vincent and the Grenadines (1784)",countryCode:"1784"},{countryName:"Sudan (249)",countryCode:"249"},{countryName:"Suriname (597)",countryCode:"597"},{countryName:"Swaziland (268)",countryCode:"268"},{countryName:"Sweden (46)",countryCode:"46"},{countryName:"Switzerland (41)",countryCode:"41"},{countryName:"Syria (963)",countryCode:"963"},{countryName:"Taiwan (886)",countryCode:"886"},{countryName:"Tajikistan (992)",countryCode:"992"},{countryName:"Tanzania (255)",countryCode:"255"},{countryName:"Thailand (66)",countryCode:"66"},{countryName:"Togo (228)",countryCode:"228"},{countryName:"Tokelau (690)",countryCode:"690"},{countryName:"Tonga (676)",countryCode:"676"},{countryName:"Trinidad and Tobago (1868)",countryCode:"1868"},{countryName:"Tunisia (216)",countryCode:"216"},{countryName:"Turkey (90)",countryCode:"90"},{countryName:"Turkmenistan (993)",countryCode:"993"},{countryName:"Turks and Caicos Islands (1649)",countryCode:"1649"},{countryName:"Tuvalu (688)",countryCode:"688"},{countryName:"United Arab Emirates (971)",countryCode:"971"},{countryName:"Uganda (256)",countryCode:"256"},{countryName:"United Kingdom (44)",countryCode:"44"},{countryName:"Ukraine (380)",countryCode:"380"},{countryName:"Uruguay (598)",countryCode:"598"},{countryName:"United States (1)",countryCode:"1"},{countryName:"Uzbekistan (998)",countryCode:"998"},{countryName:"Vanuatu (678)",countryCode:"678"},{countryName:"Holy See Vatican City (39)",countryCode:"39"},{countryName:"Venezuela (58)",countryCode:"58"},{countryName:"Vietnam (84)",countryCode:"84"},{countryName:"US Virgin Islands (1340)",countryCode:"1340"},{countryName:"Wallis and Futuna (681)",countryCode:"681"},{countryName:"West Bank (970)",countryCode:"970"},{countryName:"Yemen (967)",countryCode:"967"},{countryName:"Zambia (260)",countryCode:"260"},{countryName:"Zimbabwe (263)",countryCode:"263"}]}function c(){return[{typeCode:"Mobile"},{typeCode:"Home"},{typeCode:"Business"}]}function d(){return{CONFIRM_STEP:"confirm",DEFAULT_STEP:"landing",WIZARD_STEP:"wizard"}}function e(){return{DEFAULT_STEP:0,VERIFICATION_STEP:1,NEW_USER_STEP:2,CONTACT_STEP:3,SEC_QUESTIONS_STEP:4,CONFIRM_STEP:5}}function f(a,c){c||(c="");var d=b().filter(function(b){return b.countryCode===a});return d&&1===d.length?d[0]:d&&2===d.length?c.toLowerCase().indexOf("rico")>-1?d[0]:d[1]:null}function g(){var a={verification:{registrationId:{value:""},verificationId:{value:""},captcha:{value:"",enabled:!0}},newUser:{userId:{label:"User ID",value:""},password:{label:"Password",value:"",isPassword:!0},confirmPassword:{value:"",isPassword:!0}},contactInfo:{firstName:{label:"First Name",value:"",disabled:!1,mandatory:!0},middleName:{label:"Middle Name",value:"",disabled:!1,mandatory:!1},lastName:{label:"Last Name",value:"",disabled:!1,mandatory:!0},address1:{label:"Business Address 1",value:"",disabled:!1,mandatory:!0},address2:{label:"Address 2",value:"",disabled:!1,mandatory:!1},address3:{label:"Address 3",value:"",disabled:!1,mandatory:!1},city:{label:"City",value:"",disabled:!1,mandatory:!0},state:{label:"State / Other",value:"",disabled:!1,mandatory:!0},zipCode:{label:"Zip / Postal Code",value:"",disabled:!1,mandatory:!0},country:{label:"Country",value:"",disabled:!1,mandatory:!0},phoneNumber1:{label:"Phone 1",value:"",disabled:!1,mandatory:!0},phoneNumber2:{label:"Phone 2",value:"",disabled:!1,mandatory:!1},phoneType1:{value:"",disabled:!1,mandatory:!0},phoneType2:{value:"",disabled:!1,mandatory:!1},countryCode1:{value:"",disabled:!1,mandatory:!0},countryCode2:{value:"",disabled:!1,mandatory:!1},email:{label:"Email Address",value:"",disabled:!1,mandatory:!0}},legal:{agreementCheckbox:{checked:!1},agreementEASACheckbox:{checked:!1},agreementCTTLegalCheck:{agreed:!1},agreementEASACheck:{agreed:!1}}};return a}angular.module("nxn.selfRegistration").constant("nxn.selfRegistrationValues",{getCountry:f,getCountryCodes:b,getInitialFormData:g,getPhoneTypes:c,getUsStates:a,getWizardBaseSteps:d,getWizardStepEnum:e})}(),function(){"use strict";function a(){function a(a,b,c,d){function e(){return"United States (1)"===k.info.country.value.countryName}function f(a){return a?a.substring(0,a.indexOf(" (")):""}function g(){return c.getStepStatus(c.steps.CONTACT_INFO)&&!c.getFormStatus(c.steps.CONTACT_INFO)}function h(a){return c.setFormStatus(c.steps.CONTACT_INFO,a),!a}function i(){k.info.state.value="",k.info.zipCode.value=""}function j(){b.initSecurityQuestions(a),c.setStepStatus(c.steps.CONTACT_INFO,!0),a.vm.wizGoNextStep()}var k=this;k.contactInfoNextBtnDisabled=h,k.contactInfoPrevBtnDisabled=g,k.isUnitedStatesSelected=e,k.getCountryName=f,k.contactInfoGoNextStep=j,k.resetStateAndZip=i,k.countryCodes=d.getCountryCodes(),k.typeCodes=d.getPhoneTypes(),k.info=b.getContactForm(),k.usStates=function(){var a=[];return angular.forEach(d.getUsStates(),function(b,c){a.push(b.name)}),a}()}var b={restrict:"E",templateUrl:"partials/selfRegistration/selfRegistration.contactInfo.html",controller:a,controllerAs:"vmContact"};return a.$inject=["$scope","nxn.selfRegistrationFormsService","nxn.selfRegistrationControllersService","nxn.selfRegistrationValues"],b}angular.module("nxn.selfRegistration").directive("nxnSelfRegistrationContactInfo",a)}(),function(){"use strict";function a(){function a(a,b,c){var d=this;d.beginRegistration=function(){a.beginRegistration(),b.resetStepStatus(),b.setCurrentStep(c.getWizardBaseSteps().WIZARD_STEP)}}var b={restrict:"E",templateUrl:"partials/selfRegistration/selfRegistration.landing.html",controller:a,controllerAs:"vmLanding"};return a.$inject=["nxn.selfRegistrationFormsService","nxn.selfRegistrationControllersService","nxn.selfRegistrationValues"],b}angular.module("nxn.selfRegistration").directive("nxnSelfRegistrationLanding",a)}(),function(){"use strict";function a(){function a(a,b,c,d){function e(e){b.setFormStatus(b.steps.NEW_USER,!0),c.passwordFormRef=e,c.setUserAlreadyExists(!1),a.vm.showLoader(!0),d.checkUserIdAndGetSecQuestions(i.newUser.userId.value).then(f)}function f(e){e.status?(a.vm.clearError(),b.getStepStatus(b.steps.NEW_USER)?a.vm.wizGoNextStep():(d.getUserContactInfo(c.getVerificationForm().registrationId.value).then(g),c.setSecurityQuestions(e.data.securityQuestions,!0))):(a.vm.resetPasswordFields(!1),a.vm.setError(e.error,!1)),a.vm.showLoader(!1)}function g(d){d.status?(c.setInitialContactDetails(d.data),a.vm.wizGoNextStep(),b.setStepStatus(b.steps.NEW_USER,!0)):a.vm.setError(d.error,!1),a.vm.showLoader(!1)}function h(){c.setUserAlreadyExists(!1),a.vm.clearError()}var i=this;i.newUser=c.getUserForm(),i.onUserIdChange=h,i.checkUserIdAndGetSecQuestions=e}var b={restrict:"E",templateUrl:"partials/selfRegistration/selfRegistration.newUser.html",controller:a,controllerAs:"vmUser"};return a.$inject=["$scope","nxn.selfRegistrationControllersService","nxn.selfRegistrationFormsService","nxn.selfRegistrationDataService"],b}angular.module("nxn.selfRegistration").directive("nxnSelfRegistrationNewUser",a)}(),function(){"use strict";function a(){function a(a,b,c,d,e){function f(){a.vm.securityQuestionsAndAnswers=b.getSecurityQuestionsAndAnswers(),a.vm.reviewContactInformation=b.getContactInfoForReview(),a.vm.loginInformation=b.getLoginInformation()}function g(d){d.status&&!d.userExists?c.setCurrentStep(e.getWizardBaseSteps().CONFIRM_STEP):d.status&&d.userExists?(a.vm.setError(d.error,!1),b.setUserAlreadyExists(!0),a.vm.resetPasswordFields(!0)):a.vm.setError(d.error,!0),a.vm.showLoader(!1)}function h(){var c=b.setProfileData();a.vm.showLoader(!0),d.createProfile(c).then(g)}var i=this;i.securityQuestionsAndAnswers=[],i.createProfile=h,a.$watch("vm.step",function(b,c){a.vm.clearError(),"Confirmation"===b&&f()})}var b={restrict:"E",templateUrl:"partials/selfRegistration/selfRegistration.reviewSubmit.html",controller:a,controllerAs:"vmReviewSubmit"};return a.$inject=["$scope","nxn.selfRegistrationFormsService","nxn.selfRegistrationControllersService","nxn.selfRegistrationDataService","nxn.selfRegistrationValues"],b}angular.module("nxn.selfRegistration").directive("nxnSelfRegistrationReviewSubmit",a)}(),function(){"use strict";function a(){function a(a,b,c,d,e,f){function g(){return d.getStepStatus(d.steps.SECURITY_QUESTIONS)&&!d.getFormStatus(d.steps.SECURITY_QUESTIONS)}function h(){if(!a.fpsQAList)return!1;for(var b=!0,c=0;c<a.fpsQAList.length;c++)a.fpsQAList[c].answer.length<3&&(b=!1);return d.setFormStatus(d.steps.SECURITY_QUESTIONS,b),!b}function i(){var e=f.validateAnswers(a.fpsQAList,b.getUserForm().userId.value,b.getContactForm().firstName.value,b.getContactForm().lastName.value);""===e?(d.setStepStatus(d.steps.SECURITY_QUESTIONS,!0),a.vm.wizGoNextStep(),a.vm.clearError()):a.vm.setError(c.selfRegMsg[e],!0)}var j=this;j.validateSecurityQuestions=i,j.securityQuestionsPrevBtnDisabled=g,j.securityQuestionsNextBtnDisabled=h}var b={restrict:"E",templateUrl:"partials/selfRegistration/selfRegistration.securityQuestions.html",controller:a,controllerAs:"vmSeqQuestions"};return a.$inject=["$scope","nxn.selfRegistrationFormsService","nxn.selfRegistrationConstants","nxn.selfRegistrationControllersService","nxn.selfRegistrationValues","nxn.selfRegSecQHelper"],b}angular.module("nxn.selfRegistration").directive("nxnSelfRegistrationSeqQuestions",a)}(),function(){"use strict";function a(){function a(a,b,c,d,e,f,g,h){function i(){m()&&a.vm.clearError()}function j(){n()&&a.vm.clearError()}function k(){if(!m())return void a.vm.setError(d.selfRegMsg.CHECK_AGREEMENT,!0);if(!n())return void a.vm.setError(d.selfRegMsg.CTT_AGREEMENT,!0);var b={registrationId:q.verif.registrationId.value,verificationId:q.verif.verificationId.value};a.vm.showLoader(!0),g.verifyRegistration(b).then(l)}function l(b){b.status?(a.vm.clearError(),e.setStepStatus(e.steps.VERIFICATION,!0),a.vm.wizGoNextStep()):a.vm.setError(b.error,!1),a.vm.showLoader(!1)}function m(){var a=!q.showEASAAgreement||q.legal.agreementEASACheckbox.checked;return!(!q.legal.agreementCheckbox.checked||!a)}function n(){var a=!q.showCTTLegalAgreement||q.legal.agreementCTTLegalCheck.agreed;return!(!q.legal.agreementCheckbox.checked||!a)}function o(){var b={keyboard:!0,modalFade:!0,scope:a,templateUrl:"partials/public/cttEscrowElectronicAccessAgreement.html",size:"sm"},c={keyboard:!0,modalFade:!0,scope:a,templateUrl:"partials/public/cttConfirmEscrowElectronicAccessAgreement.html",size:"sm"};h.showModal(b,null).result.then(function(b){"OkValue"===b&&(q.legal.agreementCTTLegalCheck.agreed=!0,q.enableGlyphicon=!0,angular.equals(m(),!0)&&a.vm.clearError()),"CancelValue"===b&&h.showModal(c,null).result.then(function(b){"noValue"===b?o():"yesValue"===b&&(q.legal.agreementCTTLegalCheck.agreed=!1,q.enableGlyphicon=!1,a.vm.cancelRegistration())})})}function p(){var b={keyboard:!0,modalFade:!0,scope:a,templateUrl:"partials/public/aisElectronicAccessServicesAgreement.html",size:"sm"},c={keyboard:!0,modalFade:!0,scope:a,templateUrl:"partials/public/aisConfirmElectronicAccessServiceAgreement.html",size:"sm"};h.showModal(b,null).result.then(function(b){"OKVALUE"===b.toUpperCase()&&q&&q.legal&&(q.legal.agreementEASACheck&&(q.legal.agreementEASACheck.agreed=!0),q.legal.agreementEASACheckbox&&(q.legal.agreementEASACheckbox.checked=!0),q.enableGlyphicon=!0,m()&&a.vm.clearError()),"CANCELVALUE"===b.toUpperCase()&&h.showModal(c,null).result.then(function(b){"NOVALUE"===b.toUpperCase()?p():"YESVALUE"===b.toUpperCase()&&q&&q.legal&&(q.legal.agreementEASACheck&&(q.legal.agreementEASACheck.agreed=!1),q.legal.agreementEASACheckbox&&(q.legal.agreementEASACheckbox.checked=!1),q.enableGlyphicon=!1,a.vm.cancelRegistration())})})}var q=this;q.cbExpiration=c.onCaptchaExpiredHandler,q.setCaptchaToken=c.setCaptchaToken,q.setWidgetId=c.setWidgetId,q.getSiteKey=function(){return c.getSiteKey(b.location.host)},q.showEASAAgreement=!1,q.showCTTLegalAgreement=!1,q.onAgreement=i,q.onAgreementForCTT=j,q.verifyRegistration=k,q.verif=f.getVerificationForm(),q.legal=f.getLegalForm(),a.$watch("vmVerification.verif.registrationId.value",function(b,c){"Verification"===a.vm.step&&angular.isString(b)&&(0===b.toLowerCase().indexOf(d.selfRegApps.ANP_US)||0===b.toLowerCase().indexOf(d.selfRegApps.ANP_EMEA)?(q.showEASAAgreement=!0,q.legal.agreementEASACheckbox.checked=!1,q.legal.agreementEASACheck.agreed=!1,q.showCTTLegalAgreement=!1):0===b.toLowerCase().indexOf(d.selfRegApps.CTT_ALL)?(q.showCTTLegalAgreement=!0,q.legal.agreementCTTLegalCheck.agreed=!1,q.showEASAAgreement=!1):(q.showEASAAgreement=!1,q.showCTTLegalAgreement=!1,q.legal.agreementEASACheckbox.checked=!1,q.legal.agreementCTTLegalCheck.agreed=!1,q.legal.agreementEASACheck.agreed=!1))}),q.cttEscrowElectronicAccessAgreementModal=o,q.anpElectronicAccessAgreementModal=p,q.enableGlyphicon=!1}var b={restrict:"E",templateUrl:"partials/selfRegistration/selfRegistration.verification.html",controller:a,controllerAs:"vmVerification"};return a.$inject=["$scope","$window","nxn.selfRegistrationCaptchaService","nxn.selfRegistrationConstants","nxn.selfRegistrationControllersService","nxn.selfRegistrationFormsService","nxn.selfRegistrationDataService","ModalService"],b}angular.module("nxn.selfRegistration").directive("nxnSelfRegistrationVerification",a)}(),angular.module("nxn.selfRegistration").directive("nxnSelfRegValidateAddress",[function(){return{require:"ngModel",scope:{},link:function(a,b,c,d){d.$parsers.push(function(a){if(angular.isUndefined(a))return"";var b=/[^a-zA-Z0-9\' ,.\-\\\/]+/g,c=a.replace(b,"");return c!==a&&(d.$setViewValue(c),d.$render()),c})}}}]),angular.module("nxn.selfRegistration").directive("nxnSelfRegValidateMatchPassword",["nxn.selfRegValidationService","aaFormExtensions",function(a,b){var c=function(c,d,e,f){var g=function(){f.$setValidity("passMinLength",!0),f.$setValidity("passNumChar",!0),f.$setValidity("passAsUpperChar",!0),f.$setValidity("passAsLowerChar",!0),f.$setValidity("passRequired",!0),f.$setValidity("passSpecChar",!0),f.$setValidity("passwordMatch",!0)},h=function(d){if(g(),!f.$isEmpty(d)){var e=a.validateSelfRegPassword(d);if(e.error)b.validationMessages[e.validityName]=e.error,f.$setValidity(e.validityName,!1);else if(!a.validateSelfRegPassword(c.otherModelValue).error){e=a.validatePasswordMatch(d,c.otherModelValue);var h=e.error&&"passwordMatch"===e.validityName;b.validationMessages.passwordMatch=h?e.error:"",f.$setValidity("passwordMatch",!h)}}return c.$watch("otherModelValue",function(a,b){a!==b&&f.$setValidity("passwordMatch",!0)}),d};f.$parsers.push(h)};return{restrict:"A",scope:{otherModelValue:"=nxnSelfRegValidateMatchPassword"},require:"ngModel",link:c}}]),angular.module("nxn.selfRegistration").directive("nxnSelfRegValidatePhone",["nxn.selfRegValidationService","aaFormExtensions",function(a,b){var c=function(c,d,e,f){var g=d[0];g.addEventListener("keypress",function(a){var b=a.which||a.keyCode;b>=48&&b<=57||a.preventDefault()});var h=function(c){var d=a.validateSelfRegPhoneNumber(c);return f.$isEmpty(c)?(f.$setValidity(d.validityName,!0),c):(b.validationMessages.validateSelfRegPhoneNumber=d.error,f.$setValidity(d.validityName,!d.error),d.error?"":d.data)};f.$parsers.push(h)};return{restrict:"A",link:c,require:"ngModel"}}]),angular.module("nxn.selfRegistration").directive("nxnSelfRegValidateUserId",["nxn.selfRegValidationService","aaFormExtensions",function(a,b){var c=function(c,d,e,f){var g=d[0],h=/^[\w_.\-]+$/;g.addEventListener("keypress",function(a){var b=String.fromCharCode(a.which||a.keyCode);h.test(b)||a.preventDefault()});var i=function(){f.$setValidity("userIDRequiredLength",!0),f.$setValidity("userIDSpecialChars",!0)},j=function(c){if(!f.$isEmpty(c)){var d=a.validateSelfRegUserID(c);return d.error?(b.validationMessages[d.validityName]=d.error,i(),f.$setValidity(d.validityName,!1)):i(),c}i()};f.$parsers.push(j)};return{restrict:"A",link:c,require:"ngModel"}}]),angular.module("nxn.selfRegistration").directive("nxnSelfRegValidateUserName",[function(){return{require:"ngModel",scope:{},link:function(a,b,c,d){d.$parsers.push(function(a){if(angular.isUndefined(a))return"";var b=/[^a-zA-Z0-9\' ]+/g,c=a.replace(b,"");return c!==a&&(d.$setViewValue(c),d.$render()),c})}}}]),angular.module("nxn.selfRegistration").directive("nxnSelfRegValidateZipCode",["nxn.selfRegValidationService","aaFormExtensions",function(a,b){var c=function(c,d,e,f){var g=function(c){var d=a.validateSelfRegUsZipCode(c);return f.$isEmpty(c)?(f.$setValidity(d.validityName,!0),c):(b.validationMessages.validateSelfRegZipCode=d.error,f.$setValidity(d.validityName,!d.error),d.error?"":d.data)};f.$parsers.push(g)};return{restrict:"A",link:c,require:"ngModel"}}]),function(){"use strict";function a(){function a(a){var b=a.checkAccess();b.then(function(b){b===e&&(angular.isDefined(a.successFn)&&a.successFn(),angular.isDefined(a.showModal)&&a.showModal())},function(b){b===c&&angular.isDefined(a.dismissFn)&&a.dismissFn()})}return{restrict:"A",scope:{showModal:"&?",clickBind:"@",data:"@",dismissFn:"&?",stepupLOB:"@lob",successFn:"&?"},controller:b,priority:500,link:function(b,c,d){angular.isDefined(b.clickBind)&&"false"===b.clickBind?a(b):c.bind("click",function(c){c.preventDefault(),a(b)})}}}function b(a,b,g,h){a.checkAccess=function(){var i=function(g){if(g&&g.directiveNeedsStepupAccess(a.data))return h.stepupUser().then(function(){return e},function(a){return a===f?b.reject(d):b.reject(c)});var i=b.defer();return i.resolve(e),i.promise};return i(g.getAuthService(a.stepupLOB))},a.$on("$destroy",function(){a.modalInstance&&null!==a.modalInstance&&h.closeModals(f)})}angular.module("nxn.stepup").directive("stepupAccess",a).controller("StepupAccessDirectiveCtrl",b);var c="access-denied",d="access-denied-state-change",e="access-granted",f="STATE-CHANGE";a.$inject=[],b.$inject=["$scope","$q","StepupRegistry","StepupService"]}(),function(){"use strict";function a(a,b,c){a.modalOptions=b,a.ok=function(){c.close()}}angular.module("nxn.stepup").controller("StepupErrorModalCtrl",a),a.$inject=["$scope","tempModalOptions","$modalInstance"]}(),function(){"use strict";function a(a,b,c,d){b.handleSuccess=function(){d.run(function(){a.close()})},b.handleFailure=function(){d.run(function(){a.dismiss()})},c.handleStepupSuccess=b.handleSuccess,c.handleStepupFailure=b.handleFailure,b.$on("$destroy",function(){c.handleStepupSuccess=null,c.handleStepupFailure=null})}angular.module("nxn.stepup").controller("StepupModalCtrl",a),a.$inject=["$modalInstance","$scope","$window","NxnZoneService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a){return a=a===!0?"Y":"N"}function h(){var a=q.getParamChanges(),b=c.showModal({size:"sm"},{modalParamChanges:a,headerText:"Confirm",bodyUrl:"partials/sysParams/sysParamsConfirmation.html"});return b.result.then(function(){q.submit()}),b}function i(){var b=[];angular.forEach(q.changedSysParams,function(a){var c=q.updateSysParamValue(a.name,g(a.value));q.originalSysParams[a.name]=_.cloneDeep(a),delete q.changedSysParams[a.name],b.push(c)}),a.all(b).then(function(){q.updateTable(),q.unsetErr(),q.submitSuccess=!0})}function j(){var a=[];return angular.forEach(q.changedSysParams,function(b,c){var d=q.originalSysParams[c];d.value!==b.value&&a.push({prevValue:q.originalSysParams[c].value,newValue:q.changedSysParams[c].value,name:q.changedSysParams[c].name})}),a}function k(){e.getSysParamsAdmin().then(function(a){angular.forEach(a,function(a){"Y"===a.value?a.value=!0:a.value=!1,q.originalSysParams[a.name]=_.cloneDeep(a)}),q.sysParams=a,q.updateTable()},function(a){q.setErr(f.FailedErrorMsg+a)})}function l(b,c){return e.setParamValue(b,c).catch(function(b){return q.setErr(f.FailedErrorMsg+b),a.reject(b)})}function m(a){q.changedSysParams[a.name]=a}function n(){return!!angular.equals(q.changedSysParams,{})}function o(a){q.errorOccurred=!0,q.errMessage=a}function p(){q.errorOccurred=!1}var q=this;q.getParamChanges=j,q.initializeSysParams=k,q.markParamValueChanged=m,q.noParamsChanged=n,q.openConfirmModal=h,q.submit=i,q.setErr=o,q.submitSuccess=!1,q.tfToYn=g,q.unsetErr=p,q.updateSysParamValue=l,q.changedSysParams={},q.errorOccurred=!1,q.originalSysParams={},q.sysParams=[],q.tableParams=d.get({},{},!1,q.sysParams),q.updateTable=function(){q.tableParams.setCurrentData(q.sysParams)},q.initializeSysParams()}angular.module("nxn.sysParamsConfig").controller("sysParamsConfig",["$q","$scope","ModalService","nxnNgTableParams","SysParamsService","sysParamsConstants",a])}(),function(){"use strict";angular.module("nxn.sysParamsConfig").value("sysParamsConstants",{FailedErrorMsg:"Error while Updating Parameters list: "})}(),function(){"use strict";function a(){function a(){function a(){b.showSpinner=!b.showSpinner}var b=this;b.showSpinner=!0,b.toggleSpinner=a}return{restrict:"E",templateUrl:"partials/testDowngradedA2Components/testDowngradedA2Components.html",controller:a,controllerAs:"dgComps",link:function(){}}}angular.module("nxn.testDowngradedA2Components").directive("testDowngradedComponents",a),a.$inject=[]}(),function(){angular.module("NxnUserAdmin").controller("userEntitlementsLobController",["$scope","userEntitlementsService","nxnNgTableParams","ModalSpinnerService","NxnDataGroupService",function(a,b,c,d,e){function f(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d={};d.entName=a[c],b.push(d)}return b}function g(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d={};d.lobName=a[c],b.push(d)}return b}a.entlTableNoGroup=c.get({sorting:{entName:"asc"},count:25},{},!1,{},null),
a.lobTableNoGroup=c.get({sorting:{lobName:"asc"},count:25},{},!1,{},null);var h=[{value:"Entitlements",align:"left"}],i=[{value:"Line of Business",align:"left"}];a.flagLob=!0,a.flagEntl=!0,a.showuserEntitlements=!1,a.getUserEntitlements=function(){a.errorMessage="",a.userId?(d.showModal(),b.getUserEntitlements(a.userId).then(function(b){a.flagLob=!0,a.flagEntl=!0,a.userResp=b,a.uid=a.userId,0===a.userResp.lob.length&&0===a.userResp.userentitlement&&(a.flagEntl=!1,a.flagLob=!1,a.errorMessage="No LOB and Entitlement found for this user"),0===a.userResp.userentitlement&&(a.flagEntl=!1,a.errorMessage="No ENTITLEMENT found for this user"),0===a.userResp.lob.length&&(a.flagLob=!1,a.errorMessage="No LOB found for this user"),a.userentitlement=[];for(var c=f(a.userResp.userentitlement),j=0;j<c.length;j++)a.userentitlement.push(c[j]);a.entlTableNoGroup.setCurrentData(a.userentitlement),a.userlob=[];for(var k=g(a.userResp.lob),l=0;l<k.length;l++)a.userlob.push(k[l]);a.entlTableNoGroup.setExportFields(h),a.entlTableNoGroup.setExportHeading("Entitlements for user: "+a.userId),a.entlTableNoGroup.setExportData(f(a.userResp.userentitlement)),a.transformFnEntl={pdf:function(a,b){b.push(a.entName)},xls:function(a,b){b.push(a.entName)}},a.entlTableNoGroup.setExportTransformFn(a.transformFnEntl),a.$watch("entlTableNoGroup.searchText",function(b,c){if(b!==c){var d=e.filterData(a.userentitlement,a.entlTableNoGroup.searchText,["entName"]);a.entlTableNoGroup.setExportData(d),a.entlTableNoGroup.setCurrentData(d)}}),a.lobTableNoGroup.setExportFields(i),a.lobTableNoGroup.setExportHeading("LOB for user: "+a.userId),a.lobTableNoGroup.setExportData(g(a.userResp.lob)),a.transformFnLob={pdf:function(a,b){b.push(a.lobName)},xls:function(a,b){b.push(a.lobName)}},a.lobTableNoGroup.setExportTransformFn(a.transformFnLob),a.lobTableNoGroup.setCurrentData(a.userlob),a.$watch("lobTableNoGroup.searchText",function(b,c){if(b!==c){var d=e.filterData(a.userlob,a.lobTableNoGroup.searchText,["lobName"]);a.lobTableNoGroup.setExportData(d),a.lobTableNoGroup.setCurrentData(d)}}),a.showuserEntitlements=!0,d.closeModal()},function(){a.errorMessage="Could not get entitlements for this user: "+a.userId,d.closeModal()})):a.errorMessage="You must pass a user id"}}])}(),function(){function a(a,b,c,d,e,f,g,h,i){var j=angular.uppercase(d.getEnvironment()),k=e[j],l=k+"/upload";a.userRecords=[];var m=a.uploader=new c({url:l,autoUpload:!0});m.onBeforeUploadItem=function(a){i.showModal()},m.onSuccessItem=function(b,c,d,e){var f=c.reduce(function(a,b){return _.union(a,b.lobs)},[]);a.errorMessage="",c=c.map(function(a){return a.lobs&&a.lobs.forEach(function(b){a[b]=!0}),a.invalid?(a.firstName="<INVALID>",a.lastName="<INVALID>"):f.forEach(function(b){a[b]||(a[b]=!1)}),delete a.lobs,a}),a.userRecords=c,0===c.length&&(a.errorMessage="No valid userIds found, please upload a valid CSV file"),a.LOBFields=[{title:"User Id",dataField:"id",displayField:"id",default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!1,sortDir:"+"},{title:"First Name",dataField:"firstName",displayField:"firstName",default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!1},{title:"Last Name",dataField:"lastName",displayField:"lastName",default:!0,isSelected:!0,class:"text-left",visible:!0,sortable:!1}];var j=["UserID","First Name","Last Name"],k=[{align:"left",value:"id"},{align:"left",value:"firstName"},{align:"left",value:"lastName"}];f.forEach(function(b){a.LOBFields.push({title:b.toUpperCase(),dataField:b,displayField:b,default:!0,isSelected:!0,class:"text-left",visible:!0,dynamic:!0,sortable:!1}),j.push(b),k.push({align:"left",value:b})});var l={heading:"LOBs",columns:j,pdf:k,xls:k};a.userEntitlements=g.get({},{},!1,c,moment().format()),a.userEntitlements.setGroupedTable(!0),a.userEntitlements.setColumns(a.LOBFields),a.userEntitlements.setExportTableData(!0),a.userEntitlements.setExportDesc(l),a.userEntitlements.setSearchAvailable(!0),a.$watch("userEntitlements.searchText",function(b,d){b!==d&&(a.filteredUserRecords=h.filterData(c,b,["id","firstName","lastName"]),a.userEntitlements.setCurrentData(a.filteredUserRecords),a.userEntitlements.reload())}),i.closeModal()},m.onErrorItem=function(c,d,e,f){b.error("onErrorItem",c,d,e,f),400===e&&(a.errorMessage=d),i.closeModal()},a.errorMessage=""}angular.module("NxnUserAdmin").value("userLookup.URLs",{MOCK:"/nxn-service/userlookup",LOCAL:"/nxn-service/userlookup",DEV:"/nxn-service/userlookup",UAT:"/nxn-service/userlookup",QA:"/nxn-service/userlookup",XAT:"/nxn-service/userlookup",PRODUCTION:"/nxn-service/userlookup"}).controller("userLookupController",a),a.$inject=["$scope","$log","FileUploader","PageContext","userLookup.URLs","userLookupService","nxnNgTableParams","NxnDataGroupService","ModalSpinnerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){c.errorMessage=f.getErrorMessage()?f.getErrorMessage():"",f.removeErrorMessage(),e.location.href.toLowerCase().indexOf("emulationuserid")<0?c.displayLaunchEmulation=!0:c.displayLaunchEmulation=!1,c.startSpinner=!1,c.emulateUser=function(){c.startSpinner=!0,f.startEmulation(),f.setEmulatedUserId(c.userId),g.get(function(a){f.setEmulatorPageContext(a)}),e.location.reload()}}angular.module("nxn.userEmulation").controller("nxn.userEmulationController",a),a.$inject=["$location","$rootScope","$scope","$state","$window","nxn.userEmulationService","PageContext"]}(),angular.module("nxn.nxnUserSettings").controller("nxnUSAdministrationController",["$scope","nxn.UserSettingsService","PageContext","ModalSpinnerService",function(a,b,c,d){a.result={};var e=b.getOriginalProfileSettings();e.then(function(b){a.fpsQAList=b.administration}),a.isEmpty=function(a){return b.isEmpty(a)},a.logoSelectionArray=b.logoSelection,a.clientTypeArray=b.clientType}]),angular.module("nxn.nxnUserSettings").controller("nxnUSProfileController",["$rootScope","$scope","nxn.UserSettingsService","PageContext","ModalSpinnerService","ModalService","NxnUser",function(a,b,c,d,e,f,g){var h=function(){if(b.spinnerInstance){var a=b.spinnerInstance.opened;a.then(function(){b.spinnerInstance.dismiss("cancel")})}};b.hasAccessToChangeAlias=d.hasExactEntitlement("MRI");var i=c.getEditableProfileSettings();i.then(function(a){if(b.result=a.userProfile,angular.isDefined(b.result)){var c="1234567890"===b.result.bPhone?"":b.result.bPhone;b.result.bPhone=c}});var j=function(){var a=c.userProfileSettingsOriginal.userProfile;angular.isUndefined(b.result.countryAndCodeObject)||angular.isUndefined(b.result.countryAndCodeObject.countryCode)||(b.result.countryCode=b.result.countryAndCodeObject.countryCode,b.result.businessPhone=b.result.countryCode+"-"+b.result.bPhone);var d=b.result,e=angular.equals(d,a);return!e||(b.upInfoSuccess=!0,h(),!1)};b.updateUserProfile=function(){if(b.upInfoSuccess=!1,b.upSuccess=!1,b.upFailure=!1,j()){var a={headerText:"Verification",bodyUrl:"partials/user-settings/nxnUserPasswordModal.html",userPasswd:"",actionButtonText:"Proceed",closeButtonText:"Cancel"},c={backdrop:!0,keyboard:!0,modalFade:!0,size:"sm",templateUrl:"partials/common/modal.html"};b.userPasswd="",f.showModal(c,a).result.then(function(a){a&&(h(),b.userPasswd=a,b.updateProfile())})}},b.updateProfile=function(){if(b.upInfoSuccess=!1,b.upSuccess=!1,b.upFailure=!1,b.spinnerInstance=e.showModal(),j()){var f=b.result,i={};i.user=f,i.user.userId=b.userId,i.passwd=window.btoa(b.userPasswd),c.updateUserProfile(i).then(function(c){if(d.get(function(c){c.firstName=b.result.firstName,c.lastName=b.result.lastName;var d=g.getCurrentUser();d.firstName=b.result.firstName,d.lastName=b.result.lastName,a.$broadcast("hasValidPhoneNumber",!0)}),c&&"SUCCESS"===c.status){b.upSuccess=!0;var e=d.isFPSRegistered();e||d.reload().then(function(){h(),a.$broadcast("pageReloaded")}),h()}else b.upFailure=!0,h()})}},b.resetProfile=function(a){a&&a.$aaFormExtensions.$reset("false"),b.upSuccess=!1,b.upInfoSuccess=!1;var d=c.resetProfile();b.result=d},b.isEmpty=function(a){return c.isEmpty(a)},b.countryCodes=c.countryCodesLookUpInfo()}]),angular.module("nxn.nxnUserSettings").controller("nxnUSRegionalController",["$rootScope","$scope","nxn.UserSettingsService","PageContext","ModalSpinnerService","NxnUser",function(a,b,c,d,e,f){function g(a,b,c){var d={};d.dateSeparator=c.dateSeperator.style,d.dateStyle=c.dateFormat.style,a.dateSet=d}function h(a,b,c){var d={};d.showGMTOffset=c.gmtOffset?"Y":"N",d.tzID=c.timeZone.timeZone,a.timezone=d}function i(a,b,c){var d={},e=c.idCLock;angular.isString(e)&&"TRUE"===e.toUpperCase()?d.military="Y":"boolean"==typeof e&&e?d.military="Y":d.military="N",d.timeStyle=angular.uppercase(c.timeFormat.style),a.timeSet=d}function j(a,b,c){var d={};"1,000.00 Standard"===c.dGroup.format?d.decimalSystem="STANDARD":d.decimalSystem="EUROPEAN",".7"===c.lZero.format?d.leadZero="N":d.leadZero="Y",d.negativeFormat=c.nNumber.format,a.decimalSet=d}function k(){var a=b.modalInstance.opened;a.then(function(){b.modalInstance.dismiss("cancel")})}function l(){var b=c.userProfileSettingsEditable.userProfile.isExternalUser,e="";e=b?"NXN_PROF,USR_SET,PROF_SVC,FPS_SVC":"NXN_PROF,USR_SET,PROF_SVC",c.clearUserSettingsCache(e).then(function(b){d.reload().then(function(){k(),a.$broadcast("pageReloaded")})})}function m(a,b){var c={};c.profileType="regional";var d={};return g(d,a,b),h(d,a,b),j(d,a,b),i(d,a,b),c.regional=d,c}function n(){b.result&&(b.hasRegional=!0)}b.result={},b.hasRegional=!1,b.regionalAttributes={timeZoneArray:c.timeZoneArray,timeFormatArray:c.timeFormat,dateStyleArray:c.dateStyle,dateSeperatorArray:c.dateSeperator,negativeCashArray:c.negativeCash,leadingZeroArray:c.leadingZero,dGroupingArray:c.dGrouping},b.isEmpty=c.isEmpty,b.$on("refreshLogos",function(){b.result=c.userProfileSettingsEditable.regional,b.showErrorMessage=!c.isRegionalDataAvailable(),n()}),b.showErrorMessage=!c.isRegionalDataAvailable(),b.updateRegional=function(){b.modalInstance=e.showModal(),b.upInfoSuccess=!1,b.upSuccess=void 0;var a=b.result,d=c.userProfileSettingsOriginal.regional;if(angular.equals(a,d))b.upInfoSuccess=!0,k();else{var g={profileData:m(d,a)};c.updateUserPreferences(g,a).then(function(a){if(a&&a.metadata&&a.metadata.status.success){b.upSuccess=!0,l();var c=f.getCurrentUser();c&&c.userSettings&&(c.userSettings.timeZone=b.result.timeZone.timeZone)}else b.upSuccess=!1;k()},function(a){return b.upSuccess=!1,k(),a.data})}},b.resetRegional=function(){b.upSuccess=void 0,b.upInfoSuccess=!1,b.result=c.resetUserPreferences()},c.getEditableProfileSettings().then(function(a){b.result=a.regional,b.countriesList=c.countriesList,n()})}]),angular.module("nxn.nxnUserSettings").controller("nxnUSReportingController",["$rootScope","$scope","nxn.UserSettingsService","PageContext","ModalSpinnerService","nxn.nxnUserSettingValue","NxnWhiteLabelService",function(a,b,c,d,e,f,g){function h(a){b.upSuccess=a&&a.data&&a.data.metadata&&a.data.metadata.status.success,i()}function i(){var a=b.modalInstance.opened;a.then(function(){b.modalInstance.dismiss("cancel")})}b.result={},b.reportLogoArray=c.reportLogo,b.isoLangsArray=c.isoLangs,b.reportingLanguages=f.reportingLanguages,b.includeSubtitle=!0,b.ersReportingWorkFlow="NONE",b.isNexenApp=g.isMainApp(),b.rptLanguage={code:"en_US",label:"English"},b.$on("refreshLogos",function(){b.reportLogoArray=c.reportLogo,b.result=c.userProfileSettingsEditable.reporting,b.ersReportingWorkFlow=c.userProfileSettingsEditable.reporting.ersReportingWorkFlow,b.showErrorMessage=!c.isRegionalDataAvailable()}),b.isEmpty=function(a){return c.isEmpty(a)},b.onChangeOfLanguage=function(a){var c=!!angular.isUndefined(a.defaultSubtitleSelection),d=!a.allowSubtitle&&!c;b.result.subtitle=d?"N":"Y",b.includeSubtitle=a.allowSubtitle},b.onChangeOfReportingOption=function(a){b.result.ersReportingWorkFlow=a},b.showErrorMessage=!c.isRegionalDataAvailable(),b.updateReporting=function(){b.modalInstance=e.showModal(),b.upInfoSuccess=!1,b.upSuccess=void 0;var f=b.result,g=c.userProfileSettingsOriginal.reporting;angular.equals(f,g)?(b.upInfoSuccess=!0,d.reload().then(function(){i(),a.$broadcast("pageReloaded")}),i()):c.updateReportingPreferences(f).then(h,h)},b.resetReporting=function(){b.upSuccess=void 0,b.upInfoSuccess=!1,b.result=c.resetReportingPreferences()},c.getEditableProfileSettings().then(function(a){b.result=a.reporting})}]),angular.module("nxn.nxnUserSettings").controller("nxnUSSecurityController",["$scope","$rootScope","nxn.UserSettingsService","PageContext","ModalSpinnerService","ModalService","NxnUser",function(a,b,c,d,e,f,g){function h(){a.answersPristine=[];var h=c.getEditableProfileSettings();h.then(function(b){a.fpsQAList=b.forgotPasswordArray;for(var c=0;c<a.fpsQAList.length;c++)a.answersPristine.push({isPristine:!0,answer:a.fpsQAList[c].answer,questionId:a.fpsQAList[c].questionId})}),a.setFieldPristine=function(b,c,d){a.answersPristine=m(b,c,d,a.answersPristine)},a.updateFpsQA=function(){if(q()){var b={headerText:"Verification",bodyUrl:"partials/user-settings/nxnUserPasswordModal.html",userPasswd:"",actionButtonText:"Proceed",closeButtonText:"Cancel"},c={backdrop:!0,keyboard:!0,modalFade:!0,size:"sm",templateUrl:"partials/common/modal.html"};a.userPasswd="",f.showModal(c,b).result.then(function(b){b&&(a.userPasswd=b,a.updateFps())})}},a.updateFps=function(){a.spinnerInstance=e.showModal();var f=!1,h={},i=[],m={userId:a.userId,passwd:window.btoa(a.userPasswd),fpsObject:a.fpsQAList};if(angular.copy(m,h),q())return a.userPasswd&&a.userPasswd.trim()?c.getFPSFallback().then(function(e){var q=0;angular.forEach(h.fpsObject,function(b){var c=a.answersPristine[q].isPristine,d=b.answer===n,e=parseInt(a.answersPristine[q].questionId)===b.questionId;(e&&c===!0||d)&&(b.answer=""),q++}),e===o?(angular.forEach(h.fpsObject,function(a){i.push({answer:a.answer,mandatory:a.mandatory,questionText:a.questionText,questionSequenceId:a.questionId})}),m={principalId:a.userId,passwd:window.btoa(a.userPasswd),userQaResponse:i},angular.copy(m,h)):f=!0,c.updateForgotPasswordQA(h,a.answersPristine,f).then(function(e){switch(e.status){case"SUCCESS":c.setSecurityQuestionsRequired(!1),j(p.fpsSuccess.alertMessage,p.fpsSuccess.alertType),k(a.answersPristine),k(a.fpsQAList),k(c.userProfileSettingsOriginal.forgotPasswordArray),k(c.userProfileSettingsEditable.forgotPasswordArray),b.$broadcast("hasValidFPSStatus",!0);var f=d.isFPSRegistered();f||d.reload().then(function(){b.$broadcast("pageReloaded"),d.get(function(a){g.init(a)})}),l();break;case"ERROR":angular.isDefined(p[e.code])?(j(p[e.code].alertMessage,p[e.code].alertType),l()):(null!==e.message?j(e.message,p.fpsGeneralFailure.alertType):j(p.fpsGeneralFailure.alertMessage,p.fpsGeneralFailure.alertType),l());break;default:j(p.fpsFailure.alertMessage,p.fpsFailure.alertType),l()}})},function(a){return l(),a.data}):(j(p.fpsInvalidCredentials.alertMessage,p.fpsInvalidCredentials.alertType),void l())};var q=function(){var b=c.userProfileSettingsOriginal.forgotPasswordArray,d=a.fpsQAList;return angular.equals(d,b)?(j(p.fpsInfoNoChanges.alertMessage,p.fpsInfoNoChanges.alertType),!1):!c.isDuplicateAnswers(a.answersPristine,d)||(j(p.INVALID_1005.alertMessage,p.INVALID_1005.alertType),!1)};a.resetFps=function(){i(),k(a.fpsQAList)},a.isEmpty=function(a){return c.isEmpty(a)}}function i(){j()}function j(b,c){a.alertMessage=b,a.alertType=c}function k(a){if(angular.isArray(a))for(var b=0;b<a.length;b++)a[b].answer=n}function l(){if(a.spinnerInstance){var b=a.spinnerInstance.opened;b.then(function(){a.spinnerInstance.dismiss("cancel")})}}function m(a,b,d,e){return c.setAnswerPristine(a,b,d,e)}var n="*************",o="N",p={fpsSuccess:{alertMessage:"Your security questions have been updated successfully.",alertType:"alert-success"},fpsInfoNoChanges:{alertMessage:"No changes found!",alertType:"alert-info"},fpsInvalidCredentials:{alertMessage:"Invalid Credentials.",alertType:"alert-danger"},fpsFailure:{alertMessage:"The system is unable to process your request now. Please try again later.",alertType:"alert-danger"},fpsGeneralFailure:{alertMessage:"Error while trying to update forgot password questions.",alertType:"alert-danger"},INVALID_1004:{alertMessage:"The answer must not be the same as User ID or contain first name or last name.",alertType:"alert-danger"},INVALID_1005:{alertMessage:"Each security question must have a unique answer.",alertType:"alert-danger"},INVALID_1006:{alertMessage:"The answer must not contain repeated characters.",alertType:"alert-danger"},INVALID_1007:{alertMessage:"The minimum length must be three or more characters.",alertType:"alert-danger"},INVALID_1008:{alertMessage:"Error while trying to update Forgot Password questions.",alertType:"alert-danger"}};h()}]),function(){"use strict";function a(){function a(a,b){b.userImageSrc=a.getCurrentUser().url}return a.$inject=["NxnUser","$scope"],{link:function(a,b){b.bind("error",function(){a.userImageSrc="img/generic_avatar.png"})},controller:a,controllerAs:"userimage"}}angular.module("nxn.nxnUserSettings").directive("nxnUserImage",a)}(),angular.module("nxn.nxnUserSettings").controller("nxn.nxnUserSettingsController",["$rootScope","$scope","nxn.UserSettingsService","PageContext","ModalSpinnerService",function(a,b,c,d,e){b.fpsRegistered=d.isFPSRegistered(),b.$on("pageReloaded",function(){b.fpsRegistered=d.isFPSRegistered()}),b.$on("hasValidFPSStatus",function(a){b.fpsRegistered=a}),b.$on("hasValidPhoneNumber",function(a){b.hasValidPhoneNumber=a}),b.modalInstance=e.showModal(),b.close=function(){var a=b.modalInstance.opened;a.then(function(){b.modalInstance.dismiss("cancel")})},b.userProfile={url:"partials/user-settings/nxnUSProfile.html"},b.regional={url:"partials/user-settings/nxnUSRegional.html"},b.security={url:"partials/user-settings/nxnUSSecurity.html"},b.administration={url:"partials/user-settings/nxnUSAdministration.html"},b.reporting={url:"partials/user-settings/nxnUSReporting.html"},d.get(function(d){b.userId=d.user,b.isSuccess=!1,b.isFailure=!1,c.getUserSettings().then(function(d){angular.isDefined(d)&&!angular.equals({},d)?(b.isSuccess=!0,b.hasValidPhoneNumber=c.isPhoneNumberAvailable()):b.isFailure=!0,b.userSettingsService=c,a.$broadcast("refreshLogos"),b.close()})})}]),function(){"use strict";function a(){function a(a,b,c,d,e){var f=this;f.logoutLabel="Sign Out",e.getWLResources().then(function(a){a&&a.logoutLabel&&(f.logoutLabel=a.logoutLabel)},function(a){$log.error("Failed to load the White Label Resources",a)}),f.currentUser=a.getCurrentUser(),f.isEmulationMode=b.isEmulationMode(),f.displayUserEmulation=!1;var g={backdrop:"static",controller:"ChangePasswordModalCtrl",keyboard:!1,templateUrl:"partials/user-settings/nxnUserChangePasswordModal.html",windowClass:"app-modal-window"};f.openChangePassword=function(){d.open(g)},c.hasExactEntitlement("NXNUE")&&(f.displayUserEmulation=!0)}return a.$inject=["NxnUser","nxn.userEmulationService","PageContext","$modal","NxnWhiteLabelService"],{restrict:"AE",templateUrl:"partials/user-settings/nxnUserSettingsDropdown.html",controller:a,controllerAs:"usersettings"}}function b(){var a=function(a,b,c,d){b.on("focus",function(){c.$set("type","text"),b.val("")}),b.on("blur",function(){b.val(d.$modelValue),d.$pristine===!1&&a.setFieldPristine(!1,d.$modelValue,c.id),c.$set("type","password")})};return{restrict:"A",link:a,require:"ngModel"}}angular.module("nxn.nxnUserSettings").directive("nxnUserSettingDropdown",a).directive("nxnSecurityAnswerMask",b)}(),function(){"use strict";function a(a,b){return function(c){var d=b.getCurrentUser().userSettings||{},e=d.dateFormat;return e?(d.timeFormat&&(e+=" "+d.timeFormat),a("date")(c,e)):c}}angular.module("nxn.nxnUserSettings").filter("userDateFormatter",a),a.$inject=["$filter","NxnUser"]}(),function(){"use strict";angular.module("nxn.nxnUserSettings").value("nxn.nxnUserSettingValue",{countryCodes:[{countryName:"Afghanistan (93)",countryCode:"93"},{countryName:"Albania (355)",countryCode:"355"},{countryName:"Algeria (213)",countryCode:"213"},{countryName:"American Samoa (1684)",countryCode:"1684"},{countryName:"Andorra (376)",countryCode:"376"},{countryName:"Angola (244)",countryCode:"244"},{countryName:"Anguilla (1264)",countryCode:"1264"},{countryName:"Antarctica (672)",countryCode:"672"},{countryName:"Antigua and Barbuda (1268)",countryCode:"1268"},{countryName:"Argentina (54)",countryCode:"54"},{countryName:"Armenia (374)",countryCode:"374"},{countryName:"Aruba (297)",countryCode:"297"},{countryName:"Australia (61)",countryCode:"61"},{countryName:"Austria (43)",countryCode:"43"},{countryName:"Azerbaijan (994)",countryCode:"994"},{countryName:"Bahamas (1242)",countryCode:"1242"},{countryName:"Bahrain (973)",countryCode:"973"},{countryName:"Bangladesh (880)",countryCode:"880"},{countryName:"Barbados (1246)",countryCode:"1246"},{countryName:"Belarus (375)",countryCode:"375"},{countryName:"Belgium (32)",countryCode:"32"},{countryName:"Belize (501)",countryCode:"501"},{countryName:"Benin (229)",countryCode:"229"},{countryName:"Bermuda (1441)",countryCode:"1441"},{countryName:"Bhutan (975)",countryCode:"975"},{countryName:"Bolivia (591)",countryCode:"591"},{countryName:"Bosnia and Herzegovina (387)",countryCode:"387"},{countryName:"Botswana (267)",countryCode:"267"},{countryName:"Brazil (55)",countryCode:"55"},{countryName:"British Virgin Islands (1284)",countryCode:"1284"},{countryName:"Brunei (673)",countryCode:"673"},{countryName:"Bulgaria (359)",countryCode:"359"},{countryName:"Burkina Faso (226)",countryCode:"226"},{countryName:"Burma (Myanmar (95)",countryCode:"95"},{countryName:"Burundi (257)",countryCode:"257"},{countryName:"Cambodia (855)",countryCode:"855"},{countryName:"Cameroon (237)",countryCode:"237"},{countryName:"Canada (001)",countryCode:"001"},{countryName:"Cape Verde (238)",countryCode:"238"},{countryName:"Cayman Islands (1345)",countryCode:"1345"},{countryName:"Central African Republic (236)",countryCode:"236"},{countryName:"Chad (235)",countryCode:"235"},{countryName:"Chile (56)",countryCode:"56"},{countryName:"China (86)",countryCode:"86"},{countryName:"Christmas Island (61)",countryCode:"61"},{countryName:"Cocos (Keeling Islands (61)",countryCode:"61"},{countryName:"Colombia (57)",countryCode:"57"},{countryName:"Comoros (269)",countryCode:"269"},{countryName:"Republic of the Congo (242)",countryCode:"242"},{countryName:"Democratic Republic of the Congo (243)",countryCode:"243"},{countryName:"Cook Islands (682)",countryCode:"682"},{countryName:"Costa Rica (506)",countryCode:"506"},{countryName:"Croatia (385)",countryCode:"385"},{countryName:"Cuba (53)",countryCode:"53"},{countryName:"Cyprus (357)",countryCode:"357"},{countryName:"Czech Republic (420)",countryCode:"420"},{countryName:"Denmark (45)",countryCode:"45"},{countryName:"Djibouti (253)",countryCode:"253"},{countryName:"Dominica (1767)",countryCode:"1767"},{countryName:"Dominican Republic (1809)",countryCode:"1809"},{countryName:"Timor-Leste (670)",countryCode:"670"},{countryName:"Ecuador (593)",countryCode:"593"},{countryName:"Egypt (20)",countryCode:"20"},{countryName:"El Salvador (503)",countryCode:"503"},{countryName:"Equatorial Guinea (240)",countryCode:"240"},{countryName:"Eritrea (291)",countryCode:"291"},{countryName:"Estonia (372)",countryCode:"372"},{countryName:"Ethiopia (251)",countryCode:"251"},{countryName:"Falkland Islands (500)",countryCode:"500"},{countryName:"Faroe Islands (298)",countryCode:"298"},{countryName:"Fiji (679)",countryCode:"679"},{countryName:"Finland (358)",countryCode:"358"},{countryName:"France (33)",countryCode:"33"},{countryName:"French Polynesia (689)",countryCode:"689"},{countryName:"Gabon (241)",countryCode:"241"},{countryName:"Gambia (220)",countryCode:"220"},{countryName:"Gaza Strip (970)",countryCode:"970"},{countryName:"Georgia (995)",countryCode:"995"},{countryName:"Germany (49)",countryCode:"49"},{countryName:"Ghana (233)",countryCode:"233"},{countryName:"Gibraltar (350)",countryCode:"350"},{countryName:"Greece (30)",countryCode:"30"},{countryName:"Greenland (299)",countryCode:"299"},{countryName:"Grenada (1473)",countryCode:"1473"},{countryName:"Guam (1671)",countryCode:"1671"},{countryName:"Guatemala (502)",countryCode:"502"},{countryName:"Guinea (224)",countryCode:"224"},{countryName:"Guinea-Bissau (245)",countryCode:"245"},{countryName:"Guyana (592)",countryCode:"592"},{countryName:"Haiti (509)",countryCode:"509"},{countryName:"Honduras (504)",countryCode:"504"},{countryName:"Hong Kong (852)",countryCode:"852"},{countryName:"Hungary (36)",countryCode:"36"},{countryName:"Iceland (354)",countryCode:"354"},{countryName:"India (91)",countryCode:"91"},{countryName:"Indonesia (62)",countryCode:"62"},{countryName:"Iran (98)",countryCode:"98"},{countryName:"Iraq (964)",countryCode:"964"},{countryName:"Ireland (353)",countryCode:"353"},{countryName:"Isle of Man (44)",countryCode:"44"},{countryName:"Israel (972)",countryCode:"972"},{countryName:"Italy (39)",countryCode:"39"},{countryName:"Ivory Coast (225)",countryCode:"225"},{countryName:"Jamaica (1876)",countryCode:"1876"},{countryName:"Japan (81)",countryCode:"81"},{countryName:"Jordan (962)",countryCode:"962"},{countryName:"Kazakhstan (7)",countryCode:"7"},{countryName:"Kenya (254)",countryCode:"254"},{countryName:"Kiribati (686)",countryCode:"686"},{countryName:"Kosovo (381)",countryCode:"381"},{countryName:"Kuwait (965)",countryCode:"965"},{countryName:"Kyrgyzstan (996)",countryCode:"996"},{countryName:"Laos (856)",countryCode:"856"},{countryName:"Latvia (371)",countryCode:"371"},{countryName:"Lebanon (961)",countryCode:"961"},{countryName:"Lesotho (266)",countryCode:"266"},{countryName:"Liberia (231)",countryCode:"231"},{countryName:"Libya (218)",countryCode:"218"},{countryName:"Liechtenstein (423)",countryCode:"423"},{countryName:"Lithuania (370)",countryCode:"370"},{countryName:"Luxembourg (352)",countryCode:"352"},{countryName:"Macau (853)",countryCode:"853"},{countryName:"Macedonia (389)",countryCode:"389"},{countryName:"Madagascar (261)",countryCode:"261"},{countryName:"Malawi (265)",countryCode:"265"},{countryName:"Malaysia (60)",countryCode:"60"},{countryName:"Maldives (960)",countryCode:"960"},{countryName:"Mali (223)",countryCode:"223"},{countryName:"Malta (356)",countryCode:"356"},{countryName:"Marshall Islands (692)",countryCode:"692"},{countryName:"Mauritania (222)",countryCode:"222"},{countryName:"Mauritius (230)",countryCode:"230"},{countryName:"Mayotte (262)",countryCode:"262"},{countryName:"Mexico (52)",countryCode:"52"},{countryName:"Micronesia (691)",countryCode:"691"},{countryName:"Moldova (373)",countryCode:"373"},{countryName:"Monaco (377)",countryCode:"377"},{countryName:"Mongolia (976)",countryCode:"976"},{countryName:"Montenegro (382)",countryCode:"382"},{countryName:"Montserrat (1 664)",countryCode:"1 664"},{countryName:"Morocco (212)",countryCode:"212"},{countryName:"Mozambique (258)",countryCode:"258"},{countryName:"Namibia (264)",countryCode:"264"},{countryName:"Nauru (674)",countryCode:"674"},{countryName:"Nepal (977)",countryCode:"977"},{countryName:"Netherlands (31)",countryCode:"31"},{countryName:"Netherlands Antilles (599)",countryCode:"599"},{countryName:"New Caledonia (687)",countryCode:"687"},{countryName:"New Zealand (64)",countryCode:"64"},{countryName:"Nicaragua (505)",countryCode:"505"},{countryName:"Niger (227)",countryCode:"227"},{countryName:"Nigeria (234)",countryCode:"234"},{countryName:"Niue (683)",countryCode:"683"},{countryName:"Norfolk Island (672)",countryCode:"672"},{countryName:"Northern Mariana Islands (1 670)",countryCode:"1 670"},{countryName:"North Korea (850)",countryCode:"850"},{countryName:"Norway (47)",countryCode:"47"},{countryName:"Oman (968)",countryCode:"968"},{countryName:"Pakistan (92)",countryCode:"92"},{countryName:"Palau (680)",countryCode:"680"},{countryName:"Panama (507)",countryCode:"507"},{countryName:"Papua New Guinea (675)",countryCode:"675"},{countryName:"Paraguay (595)",countryCode:"595"},{countryName:"Peru (51)",countryCode:"51"},{countryName:"Philippines (63)",countryCode:"63"},{countryName:"Pitcairn Islands (870)",countryCode:"870"},{countryName:"Poland (48)",countryCode:"48"},{countryName:"Portugal (351)",countryCode:"351"},{countryName:"Puerto Rico (1)",countryCode:"1"},{countryName:"Qatar (974)",countryCode:"974"},{countryName:"Romania (40)",countryCode:"40"},{countryName:"Russia (7)",countryCode:"7"},{countryName:"Rwanda (250)",countryCode:"250"},{countryName:"Saint Barthelemy (590)",countryCode:"590"},{countryName:"Samoa (685)",countryCode:"685"},{countryName:"San Marino (378)",countryCode:"378"},{countryName:"Sao Tome and Principe (239)",countryCode:"239"},{countryName:"Saudi Arabia (966)",countryCode:"966"},{countryName:"Senegal (221)",countryCode:"221"},{countryName:"Serbia (381)",countryCode:"381"},{countryName:"Seychelles (248)",countryCode:"248"},{countryName:"Sierra Leone (232)",countryCode:"232"},{countryName:"Singapore (65)",countryCode:"65"},{countryName:"Slovakia (421)",countryCode:"421"},{countryName:"Slovenia (386)",countryCode:"386"},{countryName:"Solomon Islands (677)",countryCode:"677"},{countryName:"Somalia (252)",countryCode:"252"},{countryName:"South Africa (27)",countryCode:"27"},{countryName:"South Korea (82)",countryCode:"82"},{countryName:"Spain (34)",countryCode:"34"},{countryName:"Sri Lanka (94)",countryCode:"94"},{countryName:"Saint Helena (290)",countryCode:"290"},{countryName:"Saint Kitts and Nevis (1869)",countryCode:"1869"},{countryName:"Saint Lucia (1758)",countryCode:"1758"},{countryName:"Saint Martin (1599)",countryCode:"1599"},{countryName:"Saint Pierre and Miquelon (508)",countryCode:"508"},{countryName:"Saint Vincent and the Grenadines (1784)",countryCode:"1784"},{countryName:"Sudan (249)",countryCode:"249"},{countryName:"Suriname (597)",countryCode:"597"},{countryName:"Swaziland (268)",countryCode:"268"},{countryName:"Sweden (46)",countryCode:"46"},{countryName:"Switzerland (41)",countryCode:"41"},{countryName:"Syria (963)",countryCode:"963"},{countryName:"Taiwan (886)",countryCode:"886"},{countryName:"Tajikistan (992)",countryCode:"992"},{countryName:"Tanzania (255)",countryCode:"255"},{countryName:"Thailand (66)",countryCode:"66"},{countryName:"Togo (228)",countryCode:"228"},{countryName:"Tokelau (690)",countryCode:"690"},{countryName:"Tonga (676)",countryCode:"676"},{countryName:"Trinidad and Tobago (1868)",countryCode:"1868"},{countryName:"Tunisia (216)",countryCode:"216"},{countryName:"Turkey (90)",countryCode:"90"},{countryName:"Turkmenistan (993)",countryCode:"993"},{countryName:"Turks and Caicos Islands (1649)",countryCode:"1649"},{countryName:"Tuvalu (688)",countryCode:"688"},{countryName:"United Arab Emirates (971)",countryCode:"971"},{countryName:"Uganda (256)",countryCode:"256"},{countryName:"United Kingdom (44)",countryCode:"44"},{countryName:"Ukraine (380)",countryCode:"380"},{countryName:"Uruguay (598)",countryCode:"598"},{countryName:"United States (1)",countryCode:"1"},{countryName:"Uzbekistan (998)",countryCode:"998"},{countryName:"Vanuatu (678)",countryCode:"678"},{countryName:"Holy See Vatican City (39)",countryCode:"39"},{countryName:"Venezuela (58)",countryCode:"58"},{countryName:"Vietnam (84)",countryCode:"84"},{countryName:"US Virgin Islands (1340)",countryCode:"1340"},{countryName:"Wallis and Futuna (681)",countryCode:"681"},{countryName:"West Bank (970)",countryCode:"970"},{countryName:"Yemen (967)",countryCode:"967"},{countryName:"Zambia (260)",countryCode:"260"},{countryName:"Zimbabwe (263)",countryCode:"263"}],languageCodes:[{code:"ab",name:"Abkhaz"},{code:"aa",name:"Afar"},{code:"af",name:"Afrikaans"},{code:"ak",name:"Akan"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"an",name:"Aragonese"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"av",name:"Avaric"},{code:"ae",name:"Avestan"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"ba",name:"Bashkir"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali; Bangla"},{code:"bh",name:"Bihari"},{code:"bi",name:"Bislama"
},{code:"bs",name:"Bosnian"},{code:"br",name:"Breton"},{code:"bg",name:"Bulgarian"},{code:"my",name:"Burmese"},{code:"ca",name:"Catalan; Valencian"},{code:"ch",name:"Chamorro"},{code:"ce",name:"Chechen"},{code:"ny",name:"Chichewa; Chewa; Nyanja"},{code:"zh",name:"Chinese"},{code:"cv",name:"Chuvash"},{code:"kw",name:"Cornish"},{code:"co",name:"Corsican"},{code:"cr",name:"Cree"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Divehi; Dhivehi; Maldivian;"},{code:"nl",name:"Dutch"},{code:"dz",name:"Dzongkha"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"fo",name:"Faroese"},{code:"fj",name:"Fijian"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"ff",name:"Fula; Fulah; Pulaar; Pular"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek, Modern"},{code:"gn",name:"Guarana"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian; Haitian Creole"},{code:"ha",name:"Hausa"},{code:"he",name:"Hebrew (modern)"},{code:"hz",name:"Herero"},{code:"hi",name:"Hindi"},{code:"ho",name:"Hiri Motu"},{code:"hu",name:"Hungarian"},{code:"ia",name:"Interlingua"},{code:"id",name:"Indonesian"},{code:"ie",name:"Interlingue"},{code:"ga",name:"Irish"},{code:"ig",name:"Igbo"},{code:"ik",name:"Inupiaq"},{code:"io",name:"Ido"},{code:"is",name:"Icelandic"},{code:"it",name:"Italian"},{code:"iu",name:"Inuktitut"},{code:"ja",name:"Japanese"},{code:"jv",name:"Javanese"},{code:"kl",name:"Kalaallisut, Greenlandic"},{code:"kn",name:"Kannada"},{code:"kr",name:"Kanuri"},{code:"ks",name:"Kashmiri"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"ki",name:"Kikuyu, Gikuyu"},{code:"rw",name:"Kinyarwanda"},{code:"ky",name:"Kyrgyz"},{code:"kv",name:"Komi"},{code:"kg",name:"Kongo"},{code:"ko",name:"Korean"},{code:"ku",name:"Kurdish"},{code:"kj",name:"Kwanyama, Kuanyama"},{code:"la",name:"Latin"},{code:"lb",name:"Luxembourgish, Letzeburgesch"},{code:"lg",name:"Ganda"},{code:"li",name:"Limburgish, Limburgan, Limburger"},{code:"ln",name:"Lingala"},{code:"lo",name:"Lao"},{code:"lt",name:"Lithuanian"},{code:"lu",name:"Luba-Katanga"},{code:"lv",name:"Latvian"},{code:"gv",name:"Manx"},{code:"mk",name:"Macedonian"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mh",name:"Marshallese"},{code:"mn",name:"Mongolian"},{code:"na",name:"Nauru"},{code:"nv",name:"Navajo, Navaho"},{code:"nb",name:"Norwegian Bokmål"},{code:"nd",name:"North Ndebele"},{code:"ne",name:"Nepali"},{code:"ng",name:"Ndonga"},{code:"nn",name:"Norwegian Nynorsk"},{code:"no",name:"Norwegian"},{code:"ii",name:"Nuosu"},{code:"nr",name:"South Ndebele"},{code:"oc",name:"Occitan"},{code:"oj",name:"Ojibwe, Ojibwa"},{code:"cu",name:"Old Slavonic"},{code:"om",name:"Oromo"},{code:"or",name:"Oriya"},{code:"os",name:"Ossetian, Ossetic"},{code:"pa",name:"Panjabi, Punjabi"},{code:"pi",name:"Pali"},{code:"fa",name:"Persian (Farsi)"},{code:"pl",name:"Polish"},{code:"ps",name:"Pashto, Pushto"},{code:"pt",name:"Portuguese"},{code:"qu",name:"Quechua"},{code:"rm",name:"Romansh"},{code:"rn",name:"Kirundi"},{code:"ro",name:"Romanian, [])"},{code:"ru",name:"Russian"},{code:"sa",name:"Sanskrit"},{code:"sc",name:"Sardinian"},{code:"sd",name:"Sindhi"},{code:"se",name:"Northern Sami"},{code:"sm",name:"Samoan"},{code:"sg",name:"Sango"},{code:"sr",name:"Serbian"},{code:"gd",name:"Scottish Gaelic; Gaelic"},{code:"sn",name:"Shona"},{code:"si",name:"Sinhala, Sinhalese"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovene"},{code:"so",name:"Somali"},{code:"st",name:"Southern Sotho"},{code:"az",name:"South Azerbaijani"},{code:"es",name:"Spanish; Castilian"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"ss",name:"Swati"},{code:"sv",name:"Swedish"},{code:"ta",name:"Tamil"},{code:"te",name:"Telugu"},{code:"tg",name:"Tajik"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"bo",name:"Tibetan Standard, Tibetan, Central"},{code:"tk",name:"Turkmen"},{code:"tl",name:"Tagalog"},{code:"tn",name:"Tswana"},{code:"to",name:"Tonga (Tonga Islands)"},{code:"tr",name:"Turkish"},{code:"ts",name:"Tsonga"},{code:"tt",name:"Tatar"},{code:"tw",name:"Twi"},{code:"ty",name:"Tahitian"},{code:"ug",name:"Uyghur, Uighur"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"uz",name:"Uzbek"},{code:"ve",name:"Venda"},{code:"vi",name:"Vietnamese"},{code:"vo",name:"Volapük"},{code:"wa",name:"Walloon"},{code:"cy",name:"Welsh"},{code:"wo",name:"Wolof"},{code:"fy",name:"Western Frisian"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"za",name:"Zhuang, Chuang"},{code:"zu",name:"Zulu"}],timeZones:[{label:"(GMT-12:00) International Date Line West",timeZone:"Etc/GMT+12"},{label:"(GMT-11:00) Midway Island, Samoa",timeZone:"Pacific/Midway"},{label:"(GMT-10:00) Hawaii",timeZone:"US/Hawaii"},{label:"(GMT-9:00) Alaska",timeZone:"US/Alaska"},{label:"(GMT-8:00) Pacific Time (US & Canada)",timeZone:"America/Los_Angeles"},{label:"(GMT-8:00) Tijuana, Baja California",timeZone:"America/Tijuana"},{label:"(GMT-7:00) Arizona",timeZone:"US/Arizona"},{label:"(GMT-7:00) Chihuahua, La Paz, Mazatlan - New",timeZone:"America/Chihuahua"},{label:"(GMT-7:00) Mountain Time (US & Canada)",timeZone:"US/Mountain"},{label:"(GMT-6:00) Central Time (US & Canada)",timeZone:"US/Central"},{label:"(GMT-6:00) Guadalajara, Mexico City, Monterrey - New",timeZone:"America/Guatemala"},{label:"(GMT-6:00) Saskatchewan",timeZone:"Canada/Saskatchewan"},{label:"(GMT-5:00) Bogota, Lima, Quito, Rio Branco",timeZone:"America/Bogota"},{label:"(GMT-5:00) Eastern Time (US & Canada)",timeZone:"US/Eastern"},{label:"(GMT-5:00) Indiana (East)",timeZone:"US/East-Indiana"},{label:"(GMT-4:00) Atlantic Time (Canada)",timeZone:"Atlantic/Bermuda"},{label:"(GMT-4:00) Caracas, La Paz",timeZone:"America/Caracas"},{label:"(GMT-4:00) Manaus",timeZone:"America/Manaus"},{label:"(GMT-4:00) Santiago",timeZone:"America/Santiago"},{label:"(GMT-3:30) Newfoundland",timeZone:"Canada/Newfoundland"},{label:"(GMT-3:00) Buenos Aires, Georgetown",timeZone:"America/Buenos_Aires"},{label:"(GMT-3:00) Montevideo",timeZone:"America/Montevideo"},{label:"(GMT-2:00) Mid-Atlantic",timeZone:"America/Noronha"},{label:"(GMT-1:00) Azores",timeZone:"Atlantic/Azores"},{label:"(GMT-1:00) Cape Verde Islands",timeZone:"Atlantic/Cape_Verde"},{label:"(GMT+0) Western Europe Time, London, Lisbon, Casablanca",timeZone:"Europe/Belfast"},{label:"(GMT+1:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",timeZone:"Europe/Amsterdam"},{label:"(GMT+1:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",timeZone:"Europe/Belgrade"},{label:"(GMT+1:00) Brussels, Copenhagen, Madrid, Paris",timeZone:"Europe/Brussels"},{label:"(GMT+1:00) Sarajevo, Skopje, Warsaw, Zagreb",timeZone:"Europe/Sarajevo"},{label:"(GMT+2:00) Amman",timeZone:"Asia/Amman"},{label:"(GMT+2:00) Athens, Bucharest, Istanbul",timeZone:"Europe/Athens"},{label:"(GMT+2:00) Beirut",timeZone:"Asia/Beirut"},{label:"(GMT+2:00) Cairo",timeZone:"Africa/Cairo"},{label:"(GMT+2:00) Harare, Pretoria",timeZone:"Africa/Harare"},{label:"(GMT+2:00) Helsinki, Kyiv, Riga, Sofia, Tallin, Vilnius",timeZone:"Europe/Helsinki"},{label:"(GMT+2:00) Jerusalem",timeZone:"Asia/Jerusalem"},{label:"(GMT+2:00) Minsk",timeZone:"Europe/Minsk"},{label:"(GMT+3:00) Baghdad",timeZone:"Asia/Baghdad"},{label:"(GMT+3:00) Kuwait, Riyadh",timeZone:"Asia/Kuwait"},{label:"(GMT+3:00) Moscow, St. Petersburg, Volgograd",timeZone:"Europe/Moscow"},{label:"(GMT+3:30) Tehran",timeZone:"Asia/Tehran"},{label:"(GMT+4:00) Baku",timeZone:"Asia/Baku"},{label:"(GMT+4:00) Yerevan",timeZone:"Asia/Yerevan"},{label:"(GMT+4:30) Kabul",timeZone:"Asia/Kabul"},{label:"(GMT+5:00) Islamabad, Karachi, Tashkent",timeZone:"Asia/Karachi"},{label:"(GMT+5:30) Chennai, Kolkata, Mumbai, New Delhi",timeZone:"Asia/Calcutta"},{label:"(GMT+5:45) Kathmandu",timeZone:"Asia/Katmandu"},{label:"(GMT+6:00) Almaty, Novosibirsk",timeZone:"Asia/Almaty"},{label:"(GMT+6:00) Astana, Dhaka",timeZone:"Asia/Dhaka"},{label:"(GMT+6:30) Yangon (Rangoon)",timeZone:"Asia/Rangoon"},{label:"(GMT+7:00) Bangkok, Hanoi, Jakarta",timeZone:"Asia/Bangkok"},{label:"(GMT+7:00) Krasnoyarsk",timeZone:"Asia/Krasnoyarsk"},{label:"(GMT+8:00) Beijing, Chongqing, Hong Kong, Urumqi",timeZone:"Asia/Chongqing"},{label:"(GMT+8:00) Irkutsk, Ulaan Bataar",timeZone:"Asia/Irkutsk"},{label:"(GMT+8:00) Kuala Lumpur, Singapore",timeZone:"Asia/Kuala_Lumpur"},{label:"(GMT+8:00) Perth",timeZone:"Australia/Perth"},{label:"(GMT+8:00) Taipei",timeZone:"Asia/Taipei"},{label:"(GMT+9:00) Osaka, Sapporo, Tokyo",timeZone:"Asia/Tokyo"},{label:"(GMT+9:00) Seoul",timeZone:"Asia/Seoul"},{label:"(GMT+9:00) Yakutsk",timeZone:"Asia/Yakutsk"},{label:"(GMT+9:30) Adelaide",timeZone:"Australia/Adelaide"},{label:"(GMT+9:30) Darwin",timeZone:"Australia/Darwin"},{label:"(GMT+10:00) Brisbane",timeZone:"Australia/Brisbane"},{label:"(GMT+10:00) Canberra, Melbourne, Sydney",timeZone:"Australia/Canberra"},{label:"(GMT+10:00) Guam, Port Moresby",timeZone:"Pacific/Guam"},{label:"(GMT+10:00) Hobart",timeZone:"Australia/Hobart"},{label:"(GMT+10:00) Vladivostok",timeZone:"Asia/Vladivostok"},{label:"(GMT+11:00) Magadan, Solomon Islands, New Caledonia",timeZone:"Asia/Magadan"},{label:"(GMT+12:00) Auckland, Wellington",timeZone:"Pacific/Auckland"},{label:"(GMT+12:00) Fiji, Kamchatka, Marshal Island",timeZone:"Asia/Kamchatka"},{label:"(GMT+13:00) Nuku'alofa",timeZone:"Etc/GMT-13"}],currencyArray:[{code:"USD",long:"$ - USD",short:"$"},{code:"EUR",long:"EUR",short:"EUR"},{code:"CAD",long:"CAD",short:"$"},{code:"GBP",long:"GBP",short:"GBP"},{code:"AUD",long:"$ - AUD",short:"$"}],negativeCash:[{format:"(1.1)"},{format:"- 1.1"},{format:"-1.1"},{format:"1.1 -"},{format:"1.1-"}],leadingZero:[{format:"0.7"},{format:".7"}],dGrouping:[{format:"1,000.00 Standard"},{format:"1.000,00 European"}],reportLogo:[{logo:"BNY Mellon"}],logoSelection:[{logo:"BNY Mellon"}],clientType:[{name:"Money Manager"},{name:"Fund Sponsor"}],dateSeperator:[{style:"/"},{style:"-"}],dateStyle:[{style:"M/d/yyyy"},{style:"M/d/yy"},{style:"MM/dd/yy"},{style:"MM/dd/yyyy"},{style:"yy/MM/dd"},{style:"dd/MMM/yy"},{style:"dd/MM/yy"}],timeFormat:[{style:"hh:mm:ss"},{style:"h:mm:ss"}],reportingLanguages:[{code:"",label:"English",allowSubtitle:!1,defaultSubtitleSelection:!1},{code:"de_FL",label:"Dutch",allowSubtitle:!0},{code:"de_FR",label:"French",allowSubtitle:!0},{code:"de_GR",label:"German",allowSubtitle:!0},{code:"de_IT",label:"Italian",allowSubtitle:!0},{code:"SS_JP",label:"Japanese",allowSubtitle:!1},{code:"de_PB",label:"Portuguese-Brazilian",allowSubtitle:!1},{code:"SS_RU",label:"Russian",allowSubtitle:!0},{code:"SS_CS",label:"Simplified Chinese",allowSubtitle:!1},{code:"de_SP",label:"Spanish",allowSubtitle:!1},{code:"SS_CU",label:"Traditional Chinese",allowSubtitle:!0}]})}(),angular.module("workBenchAccountControlModule").directive("nxnAccumulatorCustomView",["$interpolate","nxn.formatData",function(a,b){var c=function(a,b,c){a.$watch("allData",function(){a.tableLeft.setCurrentData(a.allData),a.tableLeft.reload()}),a.$watch("selectedData",function(){a.tableRight.setCurrentData(a.selectedData),a.tableRight.reload()})},d=function(a,b,c,d){function e(a,b,c){var d=a.getSelectedPageNum();a.setCurrentData(c,null,1,d)}function f(b,c,d,e){for(var f,g=[],h=a.selectionLimit,i=b.length-1;i>=0;i--)if(f=b[i],f.$selected){if(angular.isDefined(h)&&d&&c.length+g.length>=h){a.selectionExceededMsg="Maximum selection limit ("+a.selectionLimit+") reached.";break}b.splice(i,1),f.$selected=!1,g.push(f)}for(var j=g.length-1;j>=0;j--)c.push(g[j]);"NXN_CADM"===a.WBAccountControlService.productCode.value||a.WBAccountControlService.validations.directModalView||a.moveCallback({$item:g,$direction:e})}if(a.allData=a.allData||[],a.selectedData=a.selectedData||[],angular.isDefined(a.selectionLimit)&&a.selectedData.length>a.selectionLimit){var g=a.selectedData,h=g.length;a.selectedData=g.slice(0,a.selectionLimit),a.allData=a.allData.concat(g.slice(a.selectionLimit,h))}a.visibleFields=a.visibleFields(),a.dataPerPage=a.dataPerPage||10,a.tableLeft=c.get({count:a.dataPerPage},{},!1,a.allData,null),a.$watch("filterL.$",function(b,c){b!==c&&(a.tableLeft.setCurrentData(a.allData),a.tableLeft.filter(a.filterL),a.tableLeft.reload())}),a.tableRight=c.get({count:a.dataPerPage},{},!1,a.selectedData,null),a.$watch("filterR.$",function(b,c){b!==c&&(a.tableRight.setCurrentData(a.selectedData),a.tableRight.filter(a.filterR),a.tableRight.reload())}),a.move=function(b,c){var d="right"===b,g=d?a.allData:a.selectedData,h=d?a.selectedData:a.allData;if(c){"NXN_CADM"===a.WBAccountControlService.productCode.value||a.WBAccountControlService.validations.directModalView||a.moveCallback({$item:g,$direction:b});var i=d?a.tableLeft:a.tableRight,j=i.getFilteredData();angular.isDefined(a.selectionLimit)&&d&&h.length+g.length>a.selectionLimit&&(j=j.slice(0,a.selectionLimit-h.length),a.selectionExceededMsg="Maximum selection limit ("+a.selectionLimit+") reached."),h=h.concat(j),g=g.filter(function(a){return j.indexOf(a)===-1}),a.allData=d?g:h,a.selectedData=d?h:g}else f(g,h,d,b);e(a.tableLeft,a.dataPerPage,a.allData),e(a.tableRight,a.dataPerPage,a.selectedData)}};return d.$inject=["$scope","ngTableParams","nxnNgTableParams","$filter"],{restrict:"E",link:c,controller:d,scope:{allData:"=nxnAllData",selectedData:"=nxnSelectedData",selectionLimit:"=nxnSelectionLimit",showViewAccountsLink:"=nxnShowViewAccountsLink",selectionExceededMsg:"=nxnSelectionExceededMsg",visibleFields:"&nxnVisibleFieldsInfo",leftMsg:"@nxnLeftMsg",rightMsg:"@nxnRightMsg",allowSortableHeader:"=nxnAllowHeaderSort",viewAccountsCallback:"&viewAccountsCallback",moveCallback:"=wbMoveCallback",WBAccountControlService:"=wbAccountControlService",dataPerPage:"@nxnDataPerPage"},templateUrl:"partials/wb-common/account-control-v2/accumulator-custom-view.html"}}]),function(){"use strict";angular.module("workBenchAccountControlModule").directive("workBenchAccumulator",[function(){var a=function(a,b,c){a.$watch("allData",function(){a.fromGetServerData||a.WBAccountControlService.isExternalAPICall.value?a.fromGetServerData=!1:(a.tableLeft.setCurrentData(a.allData),a.tableLeft.refreshCurrentSet())}),a.$watch("accountsFilter.totalNoOfRecords",function(){a.WBAccountControlService.isExternalAPICall.value||(a.tableLeft.setPartialParams(a.accountsFilter.totalNoOfRecords,a.dataPerPage),a.tableLeft.reload())}),a.$watch("accountsFilter.makeServiceCall",function(){a.accountsFilter.makeServiceCall&&a.getAccountDetailsData(""),a.accountsFilter.makeServiceCall=!1}),a.$watch("selectedData",function(){a.tableRight.setCurrentData(a.selectedData),a.tableRight.reload()})},b=function(a,b,c,d,e,f,g,h){function i(a,b,c){var d=a.getSelectedPageNum();a.setCurrentData(c,"",l,d)}a.accountsFilter.totalNoOfRecords=a.accountsFilter.totalNoOfRecords>0?a.accountsFilter.totalNoOfRecords:0,a.allData=a.allData||[],a.fromGetServerData=!1,a.selectedData=a.selectedData||[],a.dataPerPage=a.dataPerPage||50,a.visibleFields=a.visibleFields(),a.WBAccountControlService=a.WBAccountControlService||{};var j="",k="",l=0,m=0,n="";a.getAccountDetailsData=function(b){if(k="searchBox",a.WBAccountControlService.isDataLoading=!0,!a.WBAccountControlService.isExternalAPICall.value&&a.WBAccountControlService.isExternalDataSource.value){var c=e.getFilteredAccountByStatus(a.WBAccountControlService,a.accountsFilter.accountStatus);a.allData=d("itemLoadedFilter")(c,a.selectedData,a.WBAccountControlService.externalDataSourceData.value.uniqueKey),a.accountsFilter.totalNoOfRecords=c.length,a.WBAccountControlService.isDataLoading=!1}else if(!a.WBAccountControlService.isExternalDataSource.value){var g={alias:a.WBAccountControlService.alias.value,productCode:a.WBAccountControlService.productCode.value,limit:a.dataPerPage,offset:0,searchText:b};angular.isDefined(a.tableLeft.searchAccountByGroupIdEnabled)&&a.tableLeft.searchAccountByGroupIdEnabled?g.accountGroupIds=a.tableLeft.accountGroupId:(g.accountSources=a.WBAccountControlService.accountType.value,g.accountStatus=a.accountsFilter.accountStatus),f.getAccountControlAccountsDetails(g,a.WBAccountControlService).then(function(b){if(!e.handleErrorMessage(b)&&b.data.length>0){a.accountsFilter.totalNoOfRecords=b.allData.pagination.total;var c=e.getSpecificAcctData(b.data,a.WBAccountControlService);a.allData=d("itemLoadedFilter")(c,a.selectedData,"accountNumber"),a.tableLeft.setCurrentData(a.allData,"",l,a.tableLeft.getSelectedPageNum())}}).catch(function(a,b,c,d){e.handleErrorMessage(a,h.FRONT_END_ERROR)}).finally(function(){a.WBAccountControlService.isDataLoading=!1})}},a.getAccountDetailsData("");var o=function(b,c){var g=c.offset?c.offset:0;if(l=g,a.WBAccountControlService.isExternalDataSource.value||"searchBox"===k||!(m>=2)||j||a.accountsFilter.isExternalDataSourceSet||a.accountsFilter.externalDataSet)j?(b.resolve({data:a.allData,offset:l,time:""}),j=!1):(m++,k="",j=!1,a.accountsFilter.isExternalDataSourceSet=!1,l=0,a.accountsFilter.externalDataSet=!1,b.resolve({data:a.allData,time:"",offset:0}));else{var i={alias:a.WBAccountControlService.alias.value,productCode:a.WBAccountControlService.productCode.value,limit:a.dataPerPage,offset:l,searchText:""};angular.isDefined(a.tableLeft.searchAccountByGroupIdEnabled)&&a.tableLeft.searchAccountByGroupIdEnabled?i.accountGroupIds=a.tableLeft.accountGroupId:(i.accountSources=a.WBAccountControlService.accountType.value,i.accountStatus=a.accountsFilter.accountStatus),a.WBAccountControlService.isDataLoading=!0,f.getAccountControlAccountsDetails(i,a.WBAccountControlService).then(function(c){if(!e.handleErrorMessage(c)&&c.data.length>0){a.fromGetServerData=!0,a.accountsFilter.totalNoOfRecords=c.allData.pagination.total;var f=e.getSpecificAcctData(c.data,a.WBAccountControlService);b.resolve({data:d("itemLoadedFilter")(f,a.selectedData,"accountNumber"),offset:l,time:""}),a.allData=d("itemLoadedFilter")(f,a.selectedData,"accountNumber")}}).catch(function(a,b,c,d){e.handleErrorMessage(a,h.FRONT_END_ERROR)}).finally(function(){a.WBAccountControlService.isDataLoading=!1})}};a.WBAccountControlService.isExternalAPICall.value||a.tableLeft.setServerDataFn(o),a.tableLeft.setPartialParams(a.accountsFilter.totalNoOfRecords,a.dataPerPage),a.tableLeft.filterLeft="",a.tableLeft.apiPaginationCallback=function(){if(a.WBAccountControlService.isExternalDataSource.value&&a.WBAccountControlService.isExternalAPICall.value){var b={searchText:n,offset:a.tableLeft.getCurrentRange().start-1,limit:a.dataPerPage,accountStatus:a.accountsFilter.accountStatus};a.onApiCallback({$apiEventObject:b})}},a.$watch("tableLeft.filterLeft",function(b,c){var g=/[^A-Za-z0-9- ]/g;if(b=b.replace(g,""),a.tableLeft.filterLeft=b,b!==c&&(b.trim().length>=3||""===b.trim())&&a.WBAccountControlService.isExternalAPICall.value&&a.WBAccountControlService.isExternalDataSource.value){n=b.trim();var i={searchText:n,offset:0,limit:a.dataPerPage,accountStatus:a.accountsFilter.accountStatus};a.onApiCallback({$apiEventObject:i})}else if(b!==c&&!a.WBAccountControlService.isExternalAPICall.value&&a.WBAccountControlService.isExternalDataSource.value)n=b.trim(),a.tableLeft.setCurrentData(a.allData,null,0,1),a.tableLeft.filter(a.tableLeft.filterLeft),a.tableLeft.reload();else if(b!==c&&(b.trim().length>=3||""===b.trim())){n=b.trim();var j={alias:a.WBAccountControlService.alias.value,productCode:a.WBAccountControlService.productCode.value,limit:a.dataPerPage,offset:0,searchText:b.trim()};angular.isDefined(a.tableLeft.searchAccountByGroupIdEnabled)&&a.tableLeft.searchAccountByGroupIdEnabled?j.accountGroupIds=a.tableLeft.accountGroupId:(j.accountSources=a.WBAccountControlService.accountType.value,j.accountStatus=a.accountsFilter.accountStatus),a.WBAccountControlService.isDataLoading=!0,f.getAccountControlAccountsDetails(j,a.WBAccountControlService).then(function(b){if(k="searchBox",!e.handleErrorMessage(b))if(0===b.data.length)a.allData=b.data;else{var c=e.getSpecificAcctData(b.data,a.WBAccountControlService);a.allData=d("itemLoadedFilter")(c,a.selectedData,"accountNumber")}}).catch(function(a,b,c,d){e.handleErrorMessage(a,h.FRONT_END_ERROR)}).finally(function(){a.WBAccountControlService.isDataLoading=!1})}}),a.$watch("filterRight",function(b,c){b!==c&&(a.tableRight.setCurrentData(a.selectedData),a.tableRight.filter(a.filterRight),a.tableRight.reload())}),a.move=function(b,c){var d="right"===b,f=d?a.allData:a.selectedData,g=d?a.selectedData:a.allData;if(c)"NXN_CADM"===a.WBAccountControlService.productCode.value||a.WBAccountControlService.validations.directModalView||a.moveCallback({$item:f,$direction:b}),e.shiftAll(f,g,b),j="all"===c,a.tableLeft.refreshCurrentSet();else{var h=e.shift(f,g,d);"NXN_CADM"===a.WBAccountControlService.productCode.value||a.WBAccountControlService.validations.directModalView||a.moveCallback({$item:h,$direction:b})}i(a.tableRight,a.dataPerPage,a.selectedData)}};return b.$inject=["$scope","ngTableParams","nxnNgTableParams","$filter","WBAccountControlUtilService","workBenchAccountControlDataRetrieval","nxnAlertService","WBAC_CONSTANTS"],{restrict:"E",link:a,controller:b,scope:{accountsFilter:"=nxnAccountsFilter",allData:"=nxnAllData",allowSortableHeader:"=nxnAllowHeaderSort",dataPerPage:"@nxnDataPerPage",tableLeft:"=wbTableLeftParams",tableRight:"=wbTableRightParams",filterRight:"=nxnResetRightSearchBox",leftMsg:"@nxnLeftMsg",rightMsg:"@nxnRightMsg",selectedData:"=nxnSelectedData",visibleFields:"&nxnVisibleFieldsInfo",moveCallback:"=wbMoveCallback",onApiCallback:"=wbApiCallback",WBAccountControlService:"=wbAccountControlService"},templateUrl:"partials/wb-common/account-control-v2/accumulator.html"}}])}(),function(){"use strict";angular.module("workBenchAccountControlModule").constant("WBAC_CONSTANTS",{ACCOUNT_CONTROL_ERROR:"Account Control Error :",ACCOUNT_GROUP_NOT_ALLOWED_ERROR:"Show Account Group Enabled parameter should be false when you use external data source !",ACCOUNT:"account",ACCOUNT_GROUP:"accountGroup",ACCOUNT_GROUP_CREATE_MSG:"Account Group is created successfully !",ACCOUNT_GROUP_UPDATE_MSG:"Account Group is updated successfully !",ACCOUNT_GROUP_DELETE_MSG:"Account Group is deleted successfully !",MANAGE_GROUP:"manageGroup",ALIAS_TOKEN_EXPIRY_CODE:"CIWAU014",ALL_ACCOUNTS:"All Accounts",BACK_END_SERVICE_ERROR:"An error occurred when contacting the backend service.",FRONT_END_ERROR:"An error occurred. Please try again later.",SPECIFIC_ACCOUNTS:"Specific Accounts",SPECIFIC_ACCOUNT_GROUPS:"Specific Account Groups",VALIDATION_MSG_ACCOUNTS_STATUS_ERR_MSG:"Please select any one status to filter accounts !",VALIDATION_MSG_ALL_ACCOUNT_SELECTED_WAR_MSG:"You cannot select Account Groups, when All Accounts checkbox selected!",VALIDATION_MSG_ALL_ACCOUNT_DISABLED_WAR_MSG:"You cannot select All Accounts checkbox, when either one or more Account or Account group selected!",VALIDATION_MSG_CLOSED_ACCOUNT_GROUP_ERR_MSG:"Selected Account Group does not contain any open accounts",VALIDATION_MSG_MORE_ACCOUNTS_ERR_MSG:"Please create an account group or select less than 1000 accounts !",VALIDATION_MSG_NO_ACCOUNTS_ERR_MSG:"There are no accounts available for your search criteria !",VALIDATION_MSG_NO_ACCOUNT_GROUPS_ERR_MSG:"There are no account groups available for your search criteria !",VALIDATION_MSG_TWO_ACCOUNTS_ERR_MSG:"Select at least two accounts to create or update account group !",VALIDATION_MSG_ACCOUNT_GROUP_EMPTY_ERR_MSG:"Account group name cannot be empty !",VALIDATION_MSG_ACCOUNT_GROUP_ALPHA_NUMERIC_ERR_MSG:"Account Group must contain at least one alphanumeric character !",VALIDATION_MSG_ACCOUNT_GROUP_ALLOWED_SYMBOLS_ERR_MSG:"Only Underscore,Dash,Parentheses,Period and Spaces are allowed !",VALIDATION_MSG_CA_ADMIN_SINGLE_ACC_ACCGRP_ERR_MSG:"You cannot select Account and Account groups, Please select either an Account or Account group !",VALIDATION_MSG_CA_ADMIN_MORE_ACC_ACCGRP_ERR_MSG:"You cannot select more than one Account and Account groups, Please select either one Account or Account group !",VALIDATION_MSG_CA_ADMIN_ACC_ALLACC_NOT_ALLOWED_ERR_MSG:"You cannot select Account and All Accounts, Please select either an account or All Accounts !",VALIDATION_MSG_CA_ADMIN_ACCGRP_ALLACC_NOT_ALLOWED_ERR_MSG:"You cannot select All Accounts and Account Group, Please select either an Account Group or All Accounts !",VALIDATION_MSG_NO_RECORD_FOUND_ERR_MSG:"No Records found for your search criteria !",VALIDATION_MSG_ACC_ALLACC_NOT_ALLOWED_ERR_MSG:"You cannot select accounts and all accounts, Please select either accounts or all accounts !",VALIDATION_MSG_SINGLE_ACCOUNT_ERR_MSG:"Multi account selection is not permitted. Please select only one account !",VALIDATION_MSG_SINGLE_ACCOUNT_GROUP_ERR_MSG:"Multi account group selection is not permitted. Please select only one account group !"})}(),function(){"use strict";function a(){var a=function(a,b,c,d,e,f,g,h){function i(a,b,d){l.isDataLoading=!0;var f={alias:l.alias.value,accountSources:l.accountType.value,productCode:l.productCode.value,searchText:a.trim(),limit:b,offset:0};n=a.trim(),c.getAccountControlAccountsDetails(f,l).then(function(a){if(!g.handleErrorMessage(a))if(0===a.data.length)l.availableAccountControlItems=[];else{var b=a.data,c=e("removeDuplicateFilter")(g.getSpecificAcctData(b,l),l.selectedAccounts.value,"accountNumber");l.availableAccountControlItems=g.addAlreadySelectedAccountControlItems(c,l.selectedAccounts.value,"accountNumber")}}).catch(function(a,b,c,d){g.handleErrorMessage(a,h.FRONT_END_ERROR)}).finally(function(){l.isDataLoading=!1})}function j(a,b,d){l.isDataLoading=!0;var f={alias:l.alias.value,productCode:l.productCode.value,searchText:a.trim(),limit:b,offset:0};o=a.trim(),c.getAccountControlAccountGroupsDetails(f,l).then(function(a){if(!g.handleErrorMessage(a))if(0===a.data.length)l.availableAccountControlItems=[];else{var b=a.data,c=e("removeDuplicateFilter")(g.getSpecificAcctGroupData(b,l),l.selectedAccountGroup.value,"accountGroupId");l.availableAccountControlItems=g.addAlreadySelectedAccountControlItems(c,l.selectedAccountGroup.value,"accountGroupId")}}).catch(function(a,b,c,d){g.handleErrorMessage(a,h.FRONT_END_ERROR)}).finally(function(){l.isDataLoading=!1})}var k=a.accountControl.selectedAccountType.name,l=a.accountControl;a.WBAccountControlService=a.accountControl,h.isXClientKeyServiceCompleted=!1,h.bxp3XClientKey="",h.gateWayBxp3XClientKey="",h.bxpEnabled?c.getBXP3XClientKey().then(function(a){angular.isDefined(a.key)&&""!==a.key?h.bxp3XClientKey=a.key:h.bxp3XClientKey="",h.isXClientKeyServiceCompleted=!0}):c.getGateWayBXP3XClientKey().then(function(a){angular.isDefined(a.key)&&""!==a.key?h.gateWayBxp3XClientKey=a.key:h.gateWayBxp3XClientKey="",h.isXClientKeyServiceCompleted=!0}),a.accountControlData=l.getAccountControlData(),l.validateAccountControlInputs(),a.availableAccountTypes=[];for(var m=0;m<l.availableAccountTypes.length;m++)l.showAccountGroup.value===!0?a.availableAccountTypes.push(l.availableAccountTypes[m]):"Specific Account Groups"!==l.availableAccountTypes[m]&&a.availableAccountTypes.push(l.availableAccountTypes[m]);l.selectedAccountType.name=k?k:a.availableAccountTypes[0],l.selectedAccountControlItems=g.getAccountControlSelectedValue(l),l.availableAccountControlItems=g.addAlreadySelectedAccountControlItems([],l.selectedAccounts.value,"accountNumber"),l.availableAccountGroups=[];var n="",o="",p=[];a.aliasTokenExpireErrorCode=h.ALIAS_TOKEN_EXPIRY_CODE,l.isExternalDataSource.value===!0&&(p=g.getSpecificAcctData(l.externalDataSourceData.value.data,l),l.availableAccountControlItems=p),l.parentSelectedAccounts.push({defaultValue:"true",name:g.getAccountControlSelectedValue(l)}),a.onAccountTypeSelect=function(a){"Specific Accounts"===a?angular.copy(l.selectedAccounts.value,l.availableAccountControlItems):angular.copy(l.selectedAccountGroup.value,l.availableAccountControlItems)},a.onAccountControlItemSelect=function(a){g.setAccountControlItemOnSelect(a,l)},a.onAccountControlItemRemove=function(a){g.removeAccountControlItemOnDeselect(a,l)},a.onAccountControlItemSearch=function(b){if(angular.isDefined(b)&&""!==b.trim()&&b.trim().length>2&&l.isExternalDataSource.value&&l.isExternalAPICall.value){var c={searchText:b,offset:0,limit:l.dataPerPage,accountStatus:"open"};a.onApiCallback({$apiEventObject:c})}else angular.isDefined(b)&&l.isExternalDataSource.value&&!l.isExternalAPICall.value?l.availableAccountControlItems=e("filter")(p,b):angular.isDefined(b)&&""!==b.trim()&&b.trim().length>2&&!l.isExternalDataSource.value&&"Specific Accounts"===l.selectedAccountType.name?i(b,50,"elasticSearchCall"):angular.isDefined(b)&&""!==b.trim()&&b.trim().length>2&&!l.isExternalDataSource.value&&"Specific Account Groups"===l.selectedAccountType.name&&j(b,50,"elasticSearchCall")};var q=0;if(a.$watch("WBAccountControlService.externalDataSourceData.value.data",function(){if(l.isExternalDataSource.value&&l.isExternalAPICall.value&&q>0){var a=g.getSpecificAcctData(l.externalDataSourceData.value.data,l);l.availableAccountControlItems=g.addAlreadySelectedAccountControlItems(a,l.selectedAccounts.value,l.externalDataSourceData.value.uniqueKey)}q++}),a.showModal=function(){var b={WBAccountControlService:l,onAccountControlSelectionCallbackFunction:a.onAccountControlSelectionCallback,onMoveAccountsCallbackFunction:a.onMoveAccountsCallback,onApiCallbackFunction:a.onApiCallback,onAllAccountsSelectionCallbackFunction:a.onAllAccountsSelectionCallback};l.openAdvanceAccountControl(b)},a.nonModal="nonModal"in b,a.nonModal){l.selectedAccountType.name=k?k:a.availableAccountTypes[1];var r={WBAccountControlService:l,onAccountControlSelectionCallbackFunction:a.onAccountControlSelectionCallback,onMoveAccountsCallbackFunction:a.onMoveAccountsCallback,onApiCallbackFunction:a.onApiCallback,onAllAccountsSelectionCallbackFunction:a.onAllAccountsSelectionCallback};f.modalCtrlConstructor(a,r)}};return a.$inject=["$scope","$attrs","workBenchAccountControlDataRetrieval","nxnAlertService","$filter","workBenchAccountControlService","WBAccountControlUtilService","WBAC_CONSTANTS"],{restrict:"E",scope:{accountControl:"=nxnAccountControl",onAccountControlSelectionCallback:"&nxnOnAccountControlSelection",onMoveAccountsCallback:"&nxnOnMoveAccountsSelection",onApiCallback:"&nxnOnApiCall",onAllAccountsSelectionCallback:"&nxnOnAllAccountsSelection"},controller:a,templateUrl:function(a,b){return"nonModal"in b?"partials/wb-common/account-control-v2/accountsControlModal.html":"partials/wb-common/account-control-v2/accountsControlFilter.html"}}}angular.module("workBenchAccountControlModule").directive("workBenchAccountControl",a)}(),function(){"use strict";function a(a,b,c){function d(a){a.showAccountGroup.value?a.selectedAccountControlItems=a.selectedAccounts.value.length+" account(s) and "+a.selectedAccountGroup.value.length+" account group(s) selected":a.selectedAccountControlItems=a.selectedAccounts.value.length+" account(s) selected"}var e={};return e=function(b){this.alias={},this.alias.value=angular.isUndefined(b.alias)?"":b.alias,this.aliasToken={},this.aliasToken.value=angular.isUndefined(b.aliasToken)?"":b.aliasToken,this.accountType={},this.accountType.value=angular.isUndefined(b.accountType)?"":b.accountType,this.dataPerPage=angular.isUndefined(b.dataPerPage)?50:b.dataPerPage,this.externalDataSourceData={},this.externalDataSourceData.value=angular.isUndefined(b.externalDataSourceData)?{}:b.externalDataSourceData,this.isExternalDataSource={},this.isExternalDataSource.value=!angular.isUndefined(b.isExternalDataSource)&&b.isExternalDataSource,this.isExternalAPICall={},this.isExternalAPICall.value=!angular.isUndefined(b.isExternalAPICall)&&b.isExternalAPICall,this.productCode={},this.productCode.value=angular.isUndefined(b.productCode)?"NXN_AC":b.productCode,this.showAccountGroup={},this.showAccountGroup.value=!angular.isUndefined(b.showAccountGroupEnabled)&&b.showAccountGroupEnabled,this.showAccountGroupOnly={},this.showAccountGroupOnly.value=!angular.isUndefined(b.showAccountGroupOnly)&&b.showAccountGroupOnly,
this.availableAccountTypes=[a.ALL_ACCOUNTS,a.SPECIFIC_ACCOUNTS,a.SPECIFIC_ACCOUNT_GROUPS],this.availableAccountControlItems=[],this.accValidationMsg=!1,this.accGrpValidationMsg=!1,this.accountControlErrorFlag=!1,this.accountControlErrorMsg="",this.isDataLoading=!1,this.isAccountGroupsLoaded=!1,this.selectedAccountType={},this.selectedAccountType.name=this.availableAccountTypes[0],this.selectedAccounts={},this.selectedAccountGroup={},this.selectedAccounts.value=[],this.selectedAccountGroup.value=[],this.parentSelectedAccounts=[],this.selectedAccountControlItems="",this.instructionAliasToken=angular.isUndefined(b.instructionAliasToken)?"":b.instructionAliasToken,this.viewAliasToken=angular.isUndefined(b.viewAliasToken)?"":b.viewAliasToken,this.customSelectedAccounts=[],this.customSelectedAccountGroups=[],this.showAllAccounts={},this.showAllAccounts.value=angular.isUndefined(b.showAllAccounts)?"":b.showAllAccounts,this.hideAccountGroupFilter={},this.hideAccountGroupFilter.value=!angular.isUndefined(b.hideAccountGroupFilter)&&b.hideAccountGroupFilter,this.validations={},this.validations.singleAccountSelection=!angular.isUndefined(b.singleAccountSelection)&&b.singleAccountSelection,this.validations.singleAccountGroupSelection=!angular.isUndefined(b.singleAccountGroupSelection)&&b.singleAccountGroupSelection,this.validations.directModalView=!angular.isUndefined(b.directModalView)&&b.directModalView},e.prototype.setSelectedAccountType=function(a){this.selectedAccountType.name=a},e.prototype.validateAccountControlInputs=function(){return this.isExternalDataSource.value&&this.showAccountGroup.value?(this.accountControlErrorFlag=!0,this.accountControlErrorMsg=a.ACCOUNT_CONTROL_ERROR+" "+a.ACCOUNT_GROUP_NOT_ALLOWED_ERROR):(this.accountControlErrorFlag=!1,this.accountControlErrorMsg=""),this.accountControlErrorFlag},e.prototype.getAccountControlData=function(){return{selectedAccountGroups:this.selectedAccountGroup,selectedAccounts:this.selectedAccounts,selectedAccountType:this.selectedAccountType}},e.prototype.setSelectedAccounts=function(a){this.selectedAccounts.value=c.setItemMovedData(a),d(this),this.availableAccountControlItems=c.addAlreadySelectedAccountControlItems([],this.selectedAccounts.value,"accountNumber")},e.prototype.setExternalAPIAccounts=function(a){this.externalDataSourceData.value.data=a.data,this.externalDataSourceData.value.pagination=a.allData.pagination},e.prototype.setSelectedAccountGroups=function(a){this.selectedAccountGroup.value=c.setItemMovedData(a),d(this),this.availableAccountControlItems=c.addAlreadySelectedAccountControlItems([],this.selectedAccountGroup.value,"accountGroupId")},e.prototype.setCustomAccountControlValues=function(a){this.selectedAccountType.name=angular.isDefined(a.selectedAccountType)?a.selectedAccountType:this.selectedAccountType.name,this.customSelectedAccounts=angular.isDefined(a.customSelectedAccounts)?a.customSelectedAccounts:this.customSelectedAccounts,this.customSelectedAccountGroups=angular.isDefined(a.customSelectedAccountGroups)?a.customSelectedAccountGroups:this.customSelectedAccountGroupIds},e.prototype.openAdvanceAccountControl=function(a,b,d){return c.openAdvanceAccountControl(a,b,d)},e.prototype.resetAccountControl=function(){this.selectedAccountType.name=this.availableAccountTypes[0],this.availableAccountControlItems=[],this.selectedAccounts.value=[],this.selectedAccountGroup.value=[],this.parentSelectedAccounts=[],this.accValidationMsg=!1,this.accGrpValidationMsg=!1,this.accountControlErrorFlag=!1,this.isDataLoading=!1,this.isAccountGroupsLoaded=!1,this.selectedAccounts.value=[],this.selectedAccountGroup.value=[]},e}angular.module("workBenchAccountControlModule").factory("workBenchAccountControlParams",a),a.$inject=["WBAC_CONSTANTS","nxnAlertService","WBAccountControlUtilService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){this.modalCtrlConstructor=function(h,i,j){function k(){return h.accountStatus.open&&h.accountStatus.closed?"":h.accountStatus.closed?"closed":"open"}function l(){var a={alias:s.alias.value,productCode:s.productCode.value,accountNumbers:s.customSelectedAccounts[0].accountNumber,accountSources:s.accountType.value,offset:0,limit:1,searchBy:"Actual"};c.getAccountControlAccountsDetails(a,s).then(function(a){m(a.data)}).catch(function(a,b,c,e){d.show("ERROR",g.BACK_END_SERVICE_ERROR)}).finally(function(){h.accountDataLoaded=!0,s.isDataLoading=!1})}function m(a){s.selectedAccounts.value=[];for(var b=0;b<a.length;b++)if(a[b].accountNumber===s.customSelectedAccounts[0].accountNumber){a[b].itemMoved=!0,s.selectedAccounts.value.push(a[b]),h.selectedAccount.value=s.selectedAccounts.value;break}angular.copy(s.selectedAccounts.value,h.initialSelectedAccount)}function n(){s.isDataLoading=!0;var a={alias:s.alias.value,productCode:s.productCode.value};c.getAccountControlAccountGroupsDetails(a,s).then(function(a){if(!f.handleErrorMessage(a)&&a.data.length>0){u.data=a,h.groupBelongsTo=f.getAccountGroupCreatorList(h.groupBelongsTo,u,h.wbUserId);var b=f.getFilteredAccountGroupsByCreatorId(u.data.data,h.groupBelongsTo[0].creatorId);h.selectedAccountGroup.value=s.selectedAccountGroup.value,h.selectAcctGroupGrid.value=e("removeDuplicateFilter")(b,s.selectedAccountGroup.value,"accountGroupId"),h.accountsControlTableParams.setCurrentData(u.data.data,moment().format(),0,1)}}).catch(function(a,b,c,d){f.handleErrorMessage(a,g.frontendError)}).finally(function(){h.accountGroupsDataLoaded=!0,s.isDataLoading=!1})}function o(){p(),j.close("closed")}function p(){f.setAccountControlData(s,h.selectedAccount.value,h.selectedAccountGroup.value,h.currentTab,h.saveObject),h.accountControlData=s.getAccountControlData()}function q(){s.isDataLoading=!0;var a={alias:s.alias.value,productCode:s.productCode.value,accountGroupIds:h.selectedAccountGroup.value[0].accountGroupId,accountSource:"GSP,STAR",accountStatus:"OPEN"};c.getAccountControlAccountsDetails(a,s).then(function(a){f.handleErrorMessage(a)||0!==a.data.length?o():(h.validationMsg=g.VALIDATION_MSG_CLOSED_ACCOUNT_GROUP_ERR_MSG,h.validationFlag=!0)}).catch(function(a,b,c,d){f.handleErrorMessage(a,g.frontendError)}).finally(function(){s.isDataLoading=!1})}function r(a){c.createAccountGroup(a,s).then(function(a){f.handleErrorMessage(a)||d.show("INFO",g.ACCOUNT_GROUP_CREATE_MSG),h.accGroupObj.accountGroupName=" ",h.accGroupObj.readOnly=!1}).catch(function(a,b,c,d){f.handleErrorMessage(a,g.frontendError)}).finally(function(){s.isDataLoading=!1})}var s=i.WBAccountControlService;if(h.WBAccountControlService=s,h.WBAC_CONSTANTS=g,h.modalOkCallBack=i.onAccountControlSelectionCallbackFunction,h.moveAccountsCallback=i.onMoveAccountsCallbackFunction,h.onApiCallback=i.onApiCallbackFunction,h.onAllAccountsCallback=i.onAllAccountsSelectionCallbackFunction,h.showAllAccountsCheckbox=s.showAllAccounts.value,s.isDataLoading=!0,h.wbUserId=c.getWBUserId(),h.accountsGroupFieldsInfo=f.accountsGroupFieldsInfo,h.accountDataLoaded=!1,h.accountGroupsDataLoaded=!1,h.accountsFilterObj={makeServiceCall:!1,isExternalDataSourceSet:!1,accountStatus:"open",totalNoOfRecords:0,externalDataSet:!1},h.accGroupObj={accountGroupName:"",editAccountGroupName:"",readOnly:!1,editReadOnly:!1},h.accountGroupBelongsTo={},h.groupBelongsTo=[{creatorId:h.wbUserId.toLowerCase(),creatorName:"Only Mine"},{creatorId:"*",creatorName:"ALL"}],h.accountGroupBelongsTo.selected=h.groupBelongsTo[0],h.accountStatus={open:!0,closed:!1},s.isExternalDataSource.value&&s.isExternalAPICall.value){h.accountsTableLeftParams=b.get({count:s.dataPerPage},{},!1,[],moment().format(),0),h.accountsFilterObj.totalNoOfRecords=s.externalDataSourceData.value.pagination.total;var t={searchText:"",offset:0,limit:s.dataPerPage,accountStatus:k()};h.onApiCallback({$apiEventObject:t})}else h.accountsTableLeftParams=b.get({count:s.dataPerPage},{},!0,[],moment().format(),0);h.accountsTableRightParams=b.get({count:s.dataPerPage},{},!1,[],null),h.accountsTableLeftParams.isExternalAPICall=s.isExternalAPICall.value,h.editAccountsTableLeftParams=b.get({count:s.dataPerPage},{},!0,[],moment().format(),0),h.editAccountsTableRightParams=b.get({count:s.dataPerPage},{},!1,[],null),h.viewAccountsFromAcctGrpTableLeftParams=b.get({count:s.dataPerPage},{},!0,[],moment().format(),0),h.viewAccountsFromAcctGrpTableRightParams=b.get({count:s.dataPerPage},{},!1,[],null),h.viewAccountsFromAcctGrpTableLeftParams.searchAccountByGroupIdEnabled=!1,h.reset={rightSearchBox:""};var u={data:{data:[]}};h.currentTab=s.selectedAccountType.name===g.SPECIFIC_ACCOUNT_GROUPS?g.ACCOUNT_GROUP:g.ACCOUNT,h.showCurrentTab=s.selectedAccountType.name===g.SPECIFIC_ACCOUNT_GROUPS,h.showAccountGroupEditFlag=!1,h.tabObj={},h.tabObj.showAccountGroup=s.showAccountGroup.value,h.tabObj.showAccountGroupOnly=s.showAccountGroupOnly.value,h.tabObj.tabs=[{active:!h.showCurrentTab},{active:h.showCurrentTab},{active:!1}],h.showManageAccountFlag=!0,h.showAccountGroupAccountListFlag=!1,h.showAccountGroupFlag=!0,h.validationFlag=!1,h.validationMsg="",h.currentAccountGroupName="",h.currentAccountGroupCreatedBy="",h.currentAccountGroupId="",h.selectedAccount={value:[]},h.selectAcctGrid={value:[]},h.selectedAccountGroup={value:[]},h.selectAcctGroupGrid={value:[]},h.selectedEditAccount={value:[]},h.selectEditAcctGrid={value:[]},h.selectedAcctGroupAccounts={value:[]},h.selectAcctGroupAccounts={value:[]},h.selectedAccount.value=s.selectedAccounts.value,"NXN_CADM"===s.productCode.value&&s.customSelectedAccountGroups.length>0&&(s.selectedAccountGroup.value=[{accountGroupId:s.customSelectedAccountGroups[0].id,accountGroupName:s.customSelectedAccountGroups[0].name}]),h.selectedAccountGroup.value=s.selectedAccountGroup.value,h.initialSelectedAccount=[],h.initialSelectedAccountGroup=[],angular.copy(s.selectedAccountGroup.value,h.initialSelectedAccountGroup),h.saveObject={allAccounts:!1,saveAccountGroup:!1},h.saveObject.allAccounts=s.selectedAccountType.name===g.ALL_ACCOUNTS,s.isExternalDataSource.value===!0?h.fieldsInfo=f.getExternalDataSourceHeaderDetail(s.externalDataSourceData.value.columnDetails):"IMMS"===s.accountType.value?h.fieldsInfo=f.IMMSFieldsInfo:h.fieldsInfo=f.fieldsInfo,h.isHeaderSortable=!0,h.dataPerPage=s.dataPerPage,h.columnFields=f.columnFields,h.$watch("accountsControlTableParams.searchText",function(a,b){a!==b&&(h.accountsControlTableParams.filter(h.accountsControlTableParams.searchText),h.accountsControlTableParams.reload())}),h.accountsControlTableParams=b.get({},{},!1,[],moment().format(),h.minOffsetLimit),h.accountsControlTableParams.setColumns(h.columnFields),h.accountsControlTableParams.setExportAvailable(!1),h.accountListColumnFields=f.accountListColumnFields,h.$watch("accountsListTableParams.searchText",function(a,b){a!==b&&(h.accountsListTableParams.filter(h.accountsListTableParams.searchText),h.accountsListTableParams.reload())}),h.accountsListTableParams=b.get({},{},!1,[],moment().format(),h.minOffsetLimit),h.accountsListTableParams.setColumns(h.accountListColumnFields),h.accountsListTableParams.setExportAvailable(!1),"NXN_CADM"===s.productCode.value&&s.customSelectedAccounts.length>0?l():(angular.copy(s.selectedAccounts.value,h.initialSelectedAccount),h.currentTab===g.ACCOUNT_GROUP&&n()),h.$watch("selectedAccountGroup.value",function(){s.selectedAccountGroup.value=h.selectedAccountGroup.value});var v=0;return h.$watch("WBAccountControlService.externalDataSourceData.value.data",function(){if(s.isExternalAPICall.value&&s.isExternalDataSource.value&&v>0){var a=e("itemLoadedFilter")(s.externalDataSourceData.value.data,h.selectedAccount.value,h.WBAccountControlService.externalDataSourceData.value.uniqueKey);h.selectAcctGrid.value=a,h.accountsTableLeftParams.setPartialParams(s.externalDataSourceData.value.pagination.total,s.dataPerPage);var b=s.externalDataSourceData.value.pagination.offset,c=0===b?1:h.accountsTableLeftParams.getSelectedPageNum();h.accountsTableLeftParams.customPaginationRangeOf=f.getPaginationRange(h.accountsTableLeftParams),h.accountsTableLeftParams.setCurrentData(a,"",b,c),h.accountsTableLeftParams.reload()}v++}),h.showTab=function(a){h.validationFlag=!1,h.currentTab=a,a===g.ACCOUNT_GROUP||a===g.MANAGE_GROUP?(h.accountGroupsDataLoaded||n(),h.goBackToManage()):a===g.ACCOUNT&&(h.accountsFilterObj.makeServiceCall=!0),h.goBackToAccountGroups()},h.allAccountsCheckboxChange=function(a){a.allAccounts===!0?s.selectedAccountType.name=g.ALL_ACCOUNTS:h.currentTab===g.ACCOUNT?s.selectedAccountType.name=g.SPECIFIC_ACCOUNTS:s.selectedAccountType.name=g.SPECIFIC_ACCOUNT_GROUPS},h.close=function(){f.setAccountControlData(s,h.initialSelectedAccount,h.initialSelectedAccountGroup,h.currentTab,h.saveObject),j.close("closed")},h.sendSelectedAccounts=function(){if(h.validationFlag=!1,h.selectedAccount.value.length<=1e3)if("NXN_CADM"===s.productCode.value){var a=f.validateCAAdminSelection(h.selectedAccount.value,h.selectedAccountGroup.value,h.saveObject);""!==a?(h.validationMsg=a,h.validationFlag=!0):h.selectedAccountGroup.value.length>0?q():o()}else s.validations.singleAccountSelection?h.selectedAccount.value.length<=1?o():(h.validationMsg=g.VALIDATION_MSG_SINGLE_ACCOUNT_ERR_MSG,h.validationFlag=!0):s.validations.singleAccountGroupSelection?h.selectedAccountGroup.value.length<=1?o():(h.validationMsg=g.VALIDATION_MSG_SINGLE_ACCOUNT_GROUP_ERR_MSG,h.validationFlag=!0):o()},h.resetAccCont=function(){s.isDataLoading=!0,h.accountStatus={open:!0,closed:!1},h.accountsFilterObj.accountStatus=k(),h.saveObject={allAccounts:!1,saveAccountGroup:!1};var a=[];if(!h.WBAccountControlService.isExternalAPICall.value&&s.isExternalDataSource.value)a=f.getFilteredAccountByStatus(s,"open"),h.accountsFilterObj.totalNoOfRecords=a.length,h.selectAcctGrid.value=a,h.accountsFilterObj.isExternalDataSourceSet=!0;else if(h.WBAccountControlService.isExternalAPICall.value){var b={searchText:"",offset:0,limit:s.dataPerPage,accountStatus:k()};h.onApiCallback({$apiEventObject:b})}else h.accountsFilterObj.makeServiceCall=!0;if(h.selectedAccount.value=[],s.selectedAccounts.value=[],h.accountsTableLeftParams.filterLeft="",h.editAccountsTableLeftParams.filterLeft="",h.viewAccountsFromAcctGrpTableLeftParams.filterLeft="",h.reset.rightSearchBox="",s.showAccountGroup.value===!0||s.showAccountGroupOnly.value===!0){h.accountGroupBelongsTo.selected=h.groupBelongsTo[0];var c=f.getFilteredAccountGroupsByCreatorId(u.data.data,h.groupBelongsTo[0].creatorId);h.selectAcctGroupGrid.value=c,h.selectedAccountGroup.value=[],s.selectedAccountGroup.value=[]}h.validationFlag=!1,s.isDataLoading=!1},h.applyFiltersSelectedAcct=function(){if(h.accountStatus.open||h.accountStatus.closed)if(h.WBAccountControlService.isExternalAPICall.value&&h.WBAccountControlService.isExternalDataSource.value){var a={searchText:"",offset:0,limit:s.dataPerPage,accountStatus:k()};h.onApiCallback({$apiEventObject:a})}else s.isDataLoading=!0,h.accountsFilterObj.makeServiceCall=!0,h.accountsFilterObj.accountStatus=k(),s.isDataLoading=!1},h.applyFiltersSelectedAcctGrp=function(){s.isDataLoading=!0,h.selectAcctGroupGrid.value=e("removeDuplicateFilter")(f.getFilteredAccountGroupsByCreatorId(u.data.data,h.accountGroupBelongsTo.selected.creatorId),h.selectedAccountGroup.value,"accountGroupId"),s.isDataLoading=!1},h.showAccountGroup=function(a){s.isDataLoading=!0;var b={alias:s.alias.value,accountGroupIds:a.accountGroupId,productCode:s.productCode.value};c.getAccountControlAccountsDetails(b,s).then(function(b){f.handleErrorMessage(b)||0!==b.data.length?f.handleErrorMessage(b)||(h.accountsListTableParams.setCurrentData(b.data,moment().format(),0,1),h.currentAccountGroupName=a.accountGroupName,h.showAccountListFlag=!0,h.showManageAccountFlag=!1):d.show("ERROR",g.VALIDATION_MSG_NO_RECORD_FOUND_ERR_MSG)}).catch(function(a,b,c,d){f.handleErrorMessage(a,g.frontendError)}).finally(function(){s.isDataLoading=!1})},h.showEditAccountGroup=function(a){h.validationFlag=!1,h.validationMsg="",h.editAccountsTableLeftParams.filterLeft="",h.reset.rightSearchBox="",h.selectEditAcctGrid.value=[],s.isDataLoading=!0;var b={alias:s.alias.value,accountGroupIds:a.accountGroupId,productCode:s.productCode.value};c.getAccountControlAccountsDetails(b,s).then(function(b){if(f.handleErrorMessage(b)||0!==b.data.length){if(!f.handleErrorMessage(b)){h.selectedEditAccount.value=f.setItemMovedData(b.data),h.currentAccountGroupName=a.accountGroupName,h.currentAccountGroupCreatedBy=a.creatorId,h.accGroupObj.editAccountGroupName=a.accountGroupName,h.currentAccountGroupId=a.accountGroupId,h.editAccountGroupName=a.accountGroupName,h.showAccountListFlag=!1,h.showManageAccountFlag=!1,h.showAccountGroupEditFlag=!0}}else h.selectedEditAccount.value=[],h.selectEditAcctGrid.value=[],d.show("ERROR",g.VALIDATION_MSG_NO_RECORD_FOUND_ERR_MSG)}).catch(function(a,b,c,d){f.handleErrorMessage(a,g.frontendError)}).finally(function(){s.isDataLoading=!1})},h.goBackToManage=function(){h.showAccountListFlag=!1,h.showAccountGroupEditFlag=!1,h.showManageAccountFlag=!0},h.goBackToAccountGroups=function(){h.showAccountGroupAccountListFlag=!1,h.showAccountGroupFlag=!0},h.showAccountTab=function(){h.currentTab=g.ACCOUNT,h.tabObj.tabs[0].active=!0},h.setSelectedAccountsFromAccountGroup=function(){var a=f.setItemMovedData(h.selectedAcctGroupAccounts.value);h.selectedAccount.value=e("removeDuplicatesFromArrayFilter")(h.selectedAccount.value.concat(a),"accountNumber");for(var b=[],c=[],d=0;d<h.selectedAccountGroup.value.length;d++)h.currentAccountGroupId===h.selectedAccountGroup.value[d].accountGroupId?b.push(h.selectedAccountGroup.value[d]):c.push(h.selectedAccountGroup.value[d]);h.selectAcctGroupGrid.value=h.selectAcctGroupGrid.value.concat(b),h.selectedAccountGroup.value=c,h.showAccountGroupAccountListFlag=!1,h.showAccountGroupFlag=!0},h.viewAccountGroupCallback=function(a,b){h.currentAccountGroupId=a,h.currentAccountGroupName=b,h.viewAccountsFromAcctGrpTableLeftParams.filterLeft="",h.reset.rightSearchBox="",h.selectAcctGroupAccounts.value=[],h.selectedAcctGroupAccounts.value=[],h.viewAccountsFromAcctGrpTableLeftParams.searchAccountByGroupIdEnabled=!0,h.viewAccountsFromAcctGrpTableLeftParams.accountGroupId=a,h.showAccountGroupAccountListFlag=!0,h.showAccountGroupFlag=!1},h.createAccountGroup=function(){var a=f.validateAccountGroupName(h.selectedAccount.value,h.saveObject.allAccounts,h.accGroupObj.accountGroupName);if(""!==a)h.validationMsg=a,h.validationFlag=!0;else{h.validationFlag=!1,s.isDataLoading=!0;var b=[];if(h.createAccountGroupParams={accountGroupName:h.accGroupObj.accountGroupName,createUser:c.getWBUserId().toUpperCase(),accountGroupType:"0",accountGroupSubType:"0",productCode:s.productCode.value,context:"C/A",readOnly:h.accGroupObj.readOnly,alias:s.alias.value},h.saveObject.allAccounts){var d={alias:s.alias.value,productCode:s.productCode.value,accountSources:s.accountType.value,accountStatus:k(),searchText:"",limit:5e3,offset:0};c.getAccountControlAccountsDetails(d,s).then(function(a){f.handleErrorMessage(a)||(b=b.concat(a.data),a.allData.pagination.total>5e3?c.getAllAccountDetails(a.allData.pagination.total,d,s).then(function(a){b=b.concat(a),h.createAccountGroupParams.selectedAccounts=f.getAccountsObject(b),r(h.createAccountGroupParams)},function(b){f.handleErrorMessage(a,g.frontendError),s.isDataLoading=!1}):(h.createAccountGroupParams.selectedAccounts=f.getAccountsObject(b),r(h.createAccountGroupParams)))}).catch(function(a,b,c,d){f.handleErrorMessage(a,g.frontendError)}).finally(function(){h.accountDataLoaded=!0,s.isDataLoading=!1})}else h.createAccountGroupParams.selectedAccounts=f.getAccountsObject(h.selectedAccount.value),r(h.createAccountGroupParams)}},h.editAccountGroup=function(){var a={accountGroupName:h.accGroupObj.editAccountGroupName,readOnly:h.accGroupObj.editReadOnly,alias:s.alias.value,productCode:s.productCode.value,selectedAccounts:f.getAccountsObject(h.selectedEditAccount.value)},b=f.validateAccountGroupName(h.selectedEditAccount.value,!1,h.accGroupObj.editAccountGroupName);""!==b?(h.validationMsg=b,h.validationFlag=!0):h.currentAccountGroupName===h.accGroupObj.editAccountGroupName?(h.validationFlag=!1,h.validationMsg="",s.isDataLoading=!0,c.updateAccountGroup(a,h.currentAccountGroupId,s).then(function(a){f.handleErrorMessage(a)||d.show("INFO",g.ACCOUNT_GROUP_UPDATE_MSG),h.accGroupObj.editReadOnly=!1}).catch(function(a,b,c,d){f.handleErrorMessage(a,g.frontendError)}).finally(function(){s.isDataLoading=!1})):(h.validationFlag=!1,h.validationMsg="",s.isDataLoading=!0,h.createAccountGroupParams={accountGroupName:h.accGroupObj.editAccountGroupName,createUser:c.getWBUserId().toUpperCase(),accountGroupType:"0",accountGroupSubType:"0",productCode:s.productCode.value,context:"C/A",readOnly:h.accGroupObj.editReadOnly,alias:s.alias.value,selectedAccounts:f.getAccountsObject(h.selectedEditAccount.value)},r(h.createAccountGroupParams))},h.showDeleteWarningPrompt=function(b){var e={};e.bodyUrl="partials/wb-common/submitWarningPopUp.html",e.headerText="Confirmation",e.closeButtonText="No",e.actionButtonText="Yes",e.modalContentText="Are you sure want to delete account group : "+b.accountGroupName,e.hideHeaderClose=!0;var i={backdrop:!1,keyboard:!1,size:"sm"};a.showModal(i,e).result.then(function(a){a&&(s.isDataLoading=!0,h.deleteAccountGroupParams={accountGroupId:b.accountGroupId,alias:s.alias.value,productCode:s.productCode.value},c.deleteAccountGroup(h.deleteAccountGroupParams,s).then(function(a){f.handleErrorMessage(a)||d.show("INFO",g.ACCOUNT_GROUP_DELETE_MSG)}).catch(function(a,b,c,d){f.handleErrorMessage(a,g.frontendError)}).finally(function(){s.isDataLoading=!1}))})},h}}var b=angular.module("workBenchAccountControlModule");a.$inject=["ModalService","nxnNgTableParams","workBenchAccountControlDataRetrieval","nxnAlertService","$filter","WBAccountControlUtilService","WBAC_CONSTANTS"],b.service("workBenchAccountControlService",a)}(),function(){"use strict";angular.module("workBenchAccountControlModule").controller("workBenchAccountControlServiceController",["$scope","accountControl","$modalInstance","workBenchAccountControlService",function(a,b,c,d){d.modalCtrlConstructor(a,b,c)}])}(),function(){"use strict";function a(){function a(a,b,c,d,e,f,g,h,i){function j(a){return"NXN_CA"===a||"NXN_CADM"===a?h.getAliasToken():h.getUserInfo()}function k(b,d,e,f,g,j,k){var n,p=c.defer(),r=null;return"POST"===f.toUpperCase()?(n=q()+b,r=a.post(n,d,t("POST",g.aliasToken.value))):"GET"===f.toUpperCase()?(n=o(b,d,g.aliasToken.value),r=a.get(n,t("GET",g.aliasToken.value))):"PUT"===f.toUpperCase()?(n=q()+b,r=a.put(n,d,t("PUT",g.aliasToken.value))):"DELETE"===f.toUpperCase()&&(n=o(b,d,g.aliasToken.value),r=a.delete(n,t("DELETE",g.aliasToken.value))),r.then(function(a){p.resolve(l(a,b,d,e,f,g,j,k))},function(a,c,n,r){if(""===i.gateWayBxp3XClientKey&&""===i.bxp3XClientKey||404!==a.status&&"404"!==a.status&&"500"!==a.status&&500!==a.status)p.resolve(m("",e));else{var s={serviceURL:"GET"===f||"DELETE"===f?o(b,d,g.aliasToken.value):q()+b,requestPayload:d,xClientKey:""!==i.gateWayBxp3XClientKey?i.gateWayBxp3XClientKey:i.bxp3XClientKey,methodType:f,aliasToken:g.aliasToken.value,noOfAttemptsToBeCalled:2,applicationName:"aslookup"};h.retryServiceCall(s).then(function(a){p.resolve(l(a,b,d,e,f,g,j,k))},function(a,b,c,d){p.resolve(m("",e))})}}),p.promise}function l(a,b,d,e,f,g,h,l){var n=c.defer();return a.data.metadata.status?n.resolve(m(a.data.data,a.data,"")):angular.isDefined(a.data.error.code)&&""!==a.data.error.code?a.data.error.code!==i.ALIAS_TOKEN_EXPIRY_CODE||"newAccountCall"!==h&&"newAccountGroupCall"!==h?n.resolve(m("","",a.data.error.description)):j(g.productCode.value).then(function(a){angular.isDefined(a.errorMessage)&&""!==a.errorMessage.trim()?n.resolve(m("","",a.errorMessage)):("NXN_CADM"===g.productCode.value&&"newAccountCall"===h&&angular.isDefined(l)?g.aliasToken.value=a[l]:"NXN_CADM"===g.productCode.value&&"newAccountGroupCall"===h?g.aliasToken.value=a.viewAliasToken:"NXN_CA"===g.productCode.value?g.aliasToken.value=a.viewAliasToken:g.aliasToken.value=a.aliasToken,n.resolve(k(b,d,e,f,g,"aliasTokenRetryCall")))}):n.resolve(m("","",e)),n.promise}function m(a,b,c){return{data:a,allData:b,errorMessage:c}}function n(a,b){if(angular.isUndefined(a)||""===a)return b;var c=a.split(".")[1],d=c.replace("-","+").replace("_","/"),e=angular.fromJson(g.atob(d));return e.alias}function o(a,b,c){var d="?",e=n(c,b.alias);return angular.forEach(b,function(a,b){""!==a&&(d="alias"===b?d+b+"="+e+"&":d+b+"="+a+"&")}),a+=d,a=a.substring(0,a.length-1),q()+a}function p(){return b.getCurrentUser().nxnUser}function q(){var a=angular.uppercase(f.getEnvironment());return d[a]}function r(){var a=angular.uppercase(f.getEnvironment());return e[a]}function s(){var a=angular.uppercase(f.getEnvironment());return d[a]}function t(a,b,c){var d={};if(d={"Content-Type":"application/json"},angular.isDefined(c)&&c||!i.isXClientKeyServiceCompleted)d["X-client-key"]=f.getClientKey();else if(i.bxpEnabled&&""!==i.bxp3XClientKey)d["X-client-key"]=i.bxp3XClientKey;else if(i.bxpEnabled||""!==i.gateWayBxp3XClientKey)d["X-client-key"]=f.getClientKey();else{var e=angular.uppercase(f.getEnvironment());"XAT"===e?d["X-client-key"]="lT2rm1dsAecYOK0An_0tXCHUBeMa":"QA"===e?d["X-client-key"]="oqHssPTLOUGHQtkOxD2oDwlX7toa":"DEV"===e?d["X-client-key"]="hMRN28YRBUCfcyOrok3H5_McSeIa":"PRODUCTION"===e&&(d["X-client-key"]="l9vuOTI04uTtf_5LrjJaIIiD3JAa")}angular.isUndefined(b)||null===b||""===b||(d["NEXEN-CIW-AliasToken"]=b);var g={headers:d,timeout:u,method:a};return g}var u=6e4;return{getAccountControlAccountsDetails:function(a,b){var c,d="/accounts";return"NXN_CADM"!==b.productCode.value||a.hasOwnProperty("accountGroupIds")?"NXN_CADM"===b.productCode.value&&a.hasOwnProperty("accountGroupIds")&&(b.aliasToken.value=b.viewAliasToken,c="viewAliasToken"):(b.aliasToken.value=b.instructionAliasToken,c="instructionAliasToken"),a.alias=n(b.aliasToken.value,a.alias),k(d,a,i.BACK_END_SERVICE_ERROR,"GET",b,"newAccountCall",c)},getAccountControlAccountGroupsDetails:function(a,b){var c="/accountgroups";return"NXN_CADM"===b.productCode.value&&(b.aliasToken.value=b.viewAliasToken),a.alias=n(b.aliasToken.value,a.alias),k(c,a,i.BACK_END_SERVICE_ERROR,"GET",b,"newAccountGroupCall")},getAllAccountDetails:function(b,d,e){var f=c.defer(),g=[],h=[],i="",j=0,k="";"NXN_CADM"===e.productCode.value&&(e.aliasToken.value=e.instructionAliasToken);for(var l=n(e.aliasToken.value,d.alias),m=5e3;m<=b;m+=5e3)j++,i=angular.isDefined(d.accountStatus)&&""!==d.accountStatus?"/accounts?alias="+l+"&productCode="+d.productCode+"&accountSources="+d.accountSources+"&accountStatus="+d.accountStatus+"&limit=5000&offset="+m:"/accounts?alias="+l+"&productCode="+d.productCode+"&accountSources="+d.accountSources+"&limit=5000&offset="+m,k="page"+j,h.push(a.get(q()+i,t("GET",e.aliasToken.value)).then(function(a){g=g.concat(a.data.data)}));return c.all(h).then(function(a){f.resolve(g)}),f.promise},createAccountGroup:function(a,b){var c="/accountgroups";return"NXN_CADM"===b.productCode.value&&(b.aliasToken.value=b.viewAliasToken),a.alias=n(b.aliasToken.value,a.alias),k(c,a,i.BACK_END_SERVICE_ERROR,"POST",b,"newAccountGroupCall")},updateAccountGroup:function(a,b,c){var d="/accountgroups/"+b;return"NXN_CADM"===c.productCode.value&&(c.aliasToken.value=c.viewAliasToken),a.alias=n(c.aliasToken.value,a.alias),k(d,a,i.BACK_END_SERVICE_ERROR,"PUT",c,"newAccountGroupCall")},deleteAccountGroup:function(a,b){var c="/accountgroups/"+a.accountGroupId;return"NXN_CADM"===b.productCode.value&&(b.aliasToken.value=b.viewAliasToken),a.alias=n(b.aliasToken.value,a.alias),k(c,a,i.BACK_END_SERVICE_ERROR,"DELETE",b,"newAccountGroupCall")},getWBUserId:function(a){return p()},getBXP3XClientKey:function(){var b="/client-key",d=c.defer();return a.get(r()+b,t("GET","")).then(function(a){d.resolve(a.data)},function(a,b,c,e){d.resolve({})}),d.promise},getGateWayBXP3XClientKey:function(){var b="/client-key",d=c.defer();return a.get(s()+b,t("GET","",!0)).then(function(a){d.resolve(a.data)},function(a,b,c,e){d.resolve({})}),d.promise}}}return a.$inject=["nxn.Http","NxnUser","$q","WBAccountControlURLs","WBAccountControlBXP3Urls","PageContext","$window","WBService","WBAC_CONSTANTS"],{$get:a}}angular.module("workBenchAccountControlModule").value("WBAccountControlURLs",{MOCK:"/aslookup/v1",LOCAL:"/aslookup/v1",DEV:"https://apigateway.dev.bnymellon.com/aslookup/v1",UAT:"https://apigateway.test.bnymellon.com/aslookup/v1",QA:"https://apigateway.test.bnymellon.com/aslookup/v1",XAT:"https://apigateway.qa.bnymellon.com/aslookup/v1",PRODUCTION:"https://apigateway.bnymellon.com/aslookup/v1"}).value("WBAccountControlBXP3Urls",{MOCK:"/aslookup/v2",LOCAL:"/aslookup/v2",DEV:"https://ciwdsinternal.dev.bnymellon.net/aslookup/v2",UAT:"https://ciwdsinternal.test.bnymellon.net/aslookup/v2",QA:"https://ciwdsinternal.test.bnymellon.net/aslookup/v2",XAT:"https://ciwdsinternal.qa.bnymellon.net/aslookup/v2",PRODUCTION:"https://ciwdsinternal.bnymellon.net/aslookup/v2"}).provider("workBenchAccountControlDataRetrieval",a)}(),angular.module("NexenCommon").directive("nxnWbAccumulator",["$interpolate","nxn.formatData","WBAccountControlDataRetrieval","WBAccountControlParams","$filter","$q","nxnAlertService",function(a,b,c,d,e,f,g){var h=function(a,b,c){a.$watch("allData",function(){a.fromGetServerData?a.fromGetServerData=!1:(a.tableLeft.setCurrentData(a.allData),a.tableLeft.refreshCurrentSet())}),a.$watch("totalNoOfRecords",function(){a.tableLeft.setPartialParams(a.totalNoOfRecords,50),a.tableRight.reload()}),a.$watch("accountsFilter.makeServiceCall",function(){a.accountsFilter.makeServiceCall&&a.getAccountDetailsData(0,"elasticSearchCall",""),a.accountsFilter.makeServiceCall=!1}),a.$watch("selectedData",function(){a.tableRight.setCurrentData(a.selectedData),a.tableRight.reload()})},j=function(a,b,d,e){function f(b,c){b.then(function(b){""===b.errorMessage?("NXN_CA"===a.WBAccountControlService.productCode.value?a.WBAccountControlService.aliasToken.value=b.viewAliasToken:a.WBAccountControlService.aliasToken.value=b.aliasToken,"accountCustomPaginationCall"===c?a.getAccountDetailsData(a.currentOffset,"newAliasTokenCall",""):"accountElasticSearchCall"===c&&a.getAccountDetailsData(a.currentOffset,"newAliasTokenCall",a.searchTextNewVal)):g.show("ERROR",b.errorMessage)})}function h(b){for(var c=new Array,d=0;d<b.length;d++)"IMMS"===a.WBAccountControlService.accountType.value?c.push({accountNumber:b[d].accountNumber,accountName:b[d].accountName,accountType:b[d].accountType,accountSource:b[d].accountSource,displayAccountNumber:b[d].displayAccountNumber}):c.push({accountNumber:b[d].accountNumber,accountName:b[d].accountName,accountSource:b[d].accountSource,displayAccountNumber:b[d].displayAccountNumber});return c}function j(b,c,d){var e=b.getSelectedPageNum();b.setCurrentData(d,"",a.offset,e)}function k(a,b,c){var d,e=[];if(c){for(var f=a.length-1;f>=0;f--)d=a[f],d.$selected&&!d.itemMoved&&(d.itemMoved=!0,d.$selected=!1,e.push(d));for(var g=e.length-1;g>=0;g--)b.push(e[g])}else{for(f=a.length-1;f>=0;f--)d=a[f],d.$selected&&(a.splice(f,1),d.itemMoved=!1,d.$selected=!1,e.push(d));for(f=b.length-1;f>=0;f--)for(g=e.length-1;g>=0;g--)if(e[g].accountNumber===b[f].accountNumber){b[f].itemMoved=!1,e.splice(g,1);break}for(g=e.length-1;g>=0;g--)b.push(e[g])}}function l(a,b,c){var d,e=[];if("right"===c)for(i=a.length-1;i>=0;i--)d=a[i],d.itemMoved||(d.itemMoved=!0,d=a[i],a.splice(i,1),d.$selected=!1,e.push(d));else for(i=a.length-1;i>=0;i--)d=a[i],d.itemMoved&&(d.itemMoved=!1,d=a[i],a.splice(i,1),d.$selected=!1,e.push(d));for(var f=e.length-1;f>=0;f--)b.push(e[f])}a.allData=a.allData||[],a.WBAccountControlService=a.WBAccountControlService||{},a.selectedData=a.selectedData||[],a.visibleFields=a.visibleFields(),a.dataPerPage=a.dataPerPage||10,a.offset=0,a.totalNoOfRecords=0,a.callFrom="",a.moveAll="",a.moveOffset=0,a.moveDirection="",a.firstCall=0,a.currentPage=0,a.fromGetServerData=!1,a.aliasTokenExpireErrorCode="CIWAU014",a.getAccountDetailsData=function(b,d,i){a.currentOffset=b,a.callFrom="searchBox";var j={alias:a.WBAccountControlService.alias.value,productCode:a.WBAccountControlService.productCode.value,
aliasToken:a.WBAccountControlService.aliasToken.value,accountSource:a.WBAccountControlService.accountType.value,searchText:i,accountStatus:a.accountsFilter.accountStatus,limit:50,offset:b};a.WBAccountControlService.isDataLoaded=!0,c.getAccountControlAccountsDetails(j,"").then(function(b){var i=b.data;if(angular.isUndefined(i.error))if(0===i.data.length);else{var j={};j.data=i,a.totalNoOfRecords=i.pagination.total;var k=[];a.allAccountsData=[],angular.extend(k,h(j.data.data)),angular.extend(a.allAccountsData,h(j.data.data)),a.allData=e("itemLoadedFilter")(k,a.selectedData,"accountNumber"),a.tableLeft.setCurrentData(e("itemLoadedFilter")(k,a.selectedData,"accountNumber"),"",a.offset,a.tableLeft.getSelectedPageNum())}else i.error.code===a.aliasTokenExpireErrorCode&&"elasticSearchCall"===d?f(c.generateAliasToken(a.WBAccountControlService),"accountCustomPaginationCall"):g.show("ERROR",i.error.description)}).catch(function(a){var b="";g.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){a.WBAccountControlService.isDataLoaded=!1})},a.getAccountDetailsData(0,"elasticSearchCall","");var m=function(b,d){var i=d.offset?d.offset:0;if(a.offset=i,a.currentOffset=i,"searchBox"!==a.callFrom&&a.firstCall>=2&&"all"!==a.moveAll){var j={alias:a.WBAccountControlService.alias.value,productCode:a.WBAccountControlService.productCode.value,aliasToken:a.WBAccountControlService.aliasToken.value,accountSource:a.WBAccountControlService.accountType.value,accountStatus:a.accountsFilter.accountStatus,searchText:"",limit:50,offset:a.offset};a.WBAccountControlService.isDataLoaded=!0,c.getAccountControlAccountsDetails(j,"").then(function(d){var i=d.data;if(angular.isUndefined(i.error))if(0===i.data.length);else{var j={};j.data=i;var k=[];a.allAccountsData=[],angular.extend(k,h(j.data.data)),angular.extend(a.allAccountsData,h(j.data.data)),a.fromGetServerData=!0,b.resolve({data:e("itemLoadedFilter")(k,a.selectedData,"accountNumber"),time:"",offset:a.offset}),a.allData=e("itemLoadedFilter")(k,a.selectedData,"accountNumber")}else i.error.code===a.aliasTokenExpireErrorCode?f(c.generateAliasToken(a.WBAccountControlService),"accountCustomPaginationCall"):g.show("ERROR",i.error.description)}).catch(function(a){var b="";g.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){a.WBAccountControlService.isDataLoaded=!1})}else"all"===a.moveAll?(a.getAccountDetailsData(a.moveOffset,"elasticSearchCall",""),a.moveAll=""):(a.firstCall++,a.callFrom="",a.moveAll="",a.offset=0,b.resolve({data:a.allData,time:"",offset:0}))};a.tableLeft=d.get({count:a.dataPerPage},{},!0,a.allData,moment().format(),0),a.tableLeft.setServerDataFn(m),a.tableLeft.setPartialParams(a.totalNoOfRecords,50),a.$watch("filterL",function(b,d){var i=/[^A-Za-z0-9- ]/g;if(angular.isDefined(b)&&(b=b.replace(i,"")),a.filterL=b,b!==d&&(b.trim().length>=3||""===b.trim())){a.searchTextNewVal=b.trim();var j={alias:a.WBAccountControlService.alias.value,accountSource:a.WBAccountControlService.accountType.value,productCode:a.WBAccountControlService.productCode.value,aliasToken:a.WBAccountControlService.aliasToken.value,searchText:b.trim(),accountStatus:a.accountsFilter.accountStatus,limit:50,offset:0};a.WBAccountControlService.isDataLoaded=!0,c.getAccountControlAccountsDetails(j,"").then(function(b){var d=b.data;if(a.callFrom="searchBox",angular.isUndefined(d.error))if(0===d.data.length)a.allData=d.data;else{var i={};i.data=d;var j=[];a.allAccountsData=[],angular.extend(j,h(i.data.data)),angular.extend(a.allAccountsData,h(i.data.data)),a.allData=e("itemLoadedFilter")(j,a.selectedData,"accountNumber")}else d.error.code===a.aliasTokenExpireErrorCode?f(c.generateAliasToken(a.WBAccountControlService),"accountElasticSearchCall"):g.show("ERROR",d.error.description)}).catch(function(a){var b="";g.show("ERROR","An error occurred when contacting the backend service."+b)}).finally(function(){a.WBAccountControlService.isDataLoaded=!1})}}),a.tableRight=d.get({count:a.dataPerPage},{},!1,a.selectedData,null),a.$watch("filterR",function(b,c){b!==c&&(a.tableRight.setCurrentData(a.selectedData),a.tableRight.filter(a.filterR),a.tableRight.reload())}),a.move=function(b,c){var d="right"===b,e=d?a.allData:a.selectedData,f=d?a.selectedData:a.allData;c?(l(e,f,b),a.moveAll=c,a.moveDirection=b,a.tableLeft.refreshCurrentSet()):k(e,f,d),j(a.tableLeft,a.dataPerPage,a.allData),j(a.tableRight,a.dataPerPage,a.selectedData)}};return j.$inject=["$scope","ngTableParams","nxnNgTableParams","$filter"],{restrict:"E",link:h,controller:j,scope:{WBAccountControlService:"=wbAccountControlService",allData:"=nxnAllData",selectedData:"=nxnSelectedData",visibleFields:"&nxnVisibleFieldsInfo",leftMsg:"@nxnLeftMsg",rightMsg:"@nxnRightMsg",allowSortableHeader:"=nxnAllowHeaderSort",dataPerPage:"@nxnDataPerPage",filterL:"=nxnResetLeftSearchBox",filterR:"=nxnResetRightSearchBox",accountsFilter:"=nxnAccountsFilter"},templateUrl:"partials/wb-common/account-control/accumulator.html"}}]),angular.module("WBAccountControl").factory("WBAccountControlParams",function(){var a=function(a){this.accountType={},this.accountType.value=angular.isUndefined(a.accountType)?"":a.accountType,this.alias={},this.alias.value=angular.isUndefined(a.alias)?"":a.alias,this.aliasToken={},this.aliasToken.value=angular.isUndefined(a.aliasToken)?"":a.aliasToken,this.productCode={},this.productCode.value=angular.isUndefined(a.productCode)?"NXN_AC":a.productCode,this.showAccountGroup={},this.showAccountGroup.value=!angular.isUndefined(a.showAccountGroupEnabled)&&a.showAccountGroupEnabled,this.availableAccountTypes=["All Accounts","Specific Accounts","Specific Account Groups"],this.selectedAccountType={},this.selectedAccountType.name=this.availableAccountTypes[0],this.availableAccounts=[],this.selectedAccounts={},this.selectedAccountGroup={},this.selectedAccounts.value=[],this.selectedAccountGroup.value=[],this.parentSelectedAccounts=[],this.parentSelectedAccountGroups=[],this.accValidationMsg=!1,this.accGrpValidationMsg=!1,this.isDataLoaded=!1,this.isAccountGroupsLoaded=!1};return a.prototype.getAccountControlData=function(){return{selectedAccountType:this.selectedAccountType,selectedAccounts:this.selectedAccounts,selectedAccountGroups:this.selectedAccountGroup}},a.prototype.getSpecificAcctData=function(a){for(var b=new Array,c=0;c<a.length;c++)"IMMS"===this.accountType.value?b.push({accountNumber:a[c].accountNumber,accountName:a[c].accountName,accountSource:a[c].accountSource,accountType:a[c].accountType,itemMoved:!1,displayAccountNumber:a[c].displayAccountNumber}):b.push({accountNumber:a[c].accountNumber,accountName:a[c].accountName,accountSource:a[c].accountSource,itemMoved:!1,displayAccountNumber:a[c].displayAccountNumber});return b},a.prototype.getSpecificAcctGroupData=function(a){for(var b=new Array,c=0;c<a.length;c++)b.push({accountGroupName:a[c].accountGroupName,accountGroupId:a[c].accountGroupId});return b},a.prototype.setItemMovedData=function(a){for(var b=0;b<a.length;b++)a[b].itemMoved=!0;return a},a.prototype.setSelectedAccounts=function(a){this.selectedAccounts.value=a},a.prototype.resetAccountControl=function(){this.accountType.value="",this.alias.value="",this.aliasToken.value="",this.productCode.value="",this.showAccountGroup.value="",this.selectedAccountType.name=this.availableAccountTypes[0],this.availableAccounts=[],this.selectedAccounts.value=[],this.selectedAccountGroup.value=[],this.parentSelectedAccounts=[],this.parentSelectedAccountGroups=[],this.accValidationMsg=!1,this.accGrpValidationMsg=!1,this.isDataLoaded=!1,this.isAccountGroupsLoaded=!1},a}),angular.module("WBAccountControl").controller("NxnAccountsControlModalCtrl",["$scope","accountControl","ModalService","$modalInstance","nxnNgTableParams","ExportService","WBAccountControlDataRetrieval","nxnAlertService","$filter","WBAccountControlService",function(a,b,c,d,e,f,g,h,i,j){j.modalCtrlConstructor(a,b,d)}]),function(){"use strict";function a(){function a(a,b,c,d,e,f,g,h,i){function j(a,b){if(angular.isUndefined(a)||""===a)return b;var c=a.split(".")[1],d=c.replace("-","+").replace("_","/"),e=angular.fromJson(h.atob(d));return e.alias}function k(){return d.getCurrentUser().nxnUser}function l(){var a=angular.uppercase(g.getEnvironment());return f[a]}function m(a,b,c){var d={};d={"Content-Type":"application/json"},(angular.isUndefined(c)||null===c)&&(d["X-client-key"]=g.getClientKey()),angular.isUndefined(b)||null===b||""===b||(d["NEXEN-CIW-AliasToken"]=b);var e={headers:d,timeout:n,method:a};return e}var n=12e4;return{getAccountControlAccountsDetails:function(b,c){var d="",e=j(b.aliasToken,b.alias);return"entireAlias"===c?d="/accounts?alias="+e+"&productCode="+b.productCode+"&accountSources="+b.accountSource:"filter"===c?(d="/accounts?alias="+e+"&productCode="+b.productCode+"&accountSources="+b.accountSource,angular.isDefined(b.accountStatus)&&""!==b.accountStatus&&(d=d+"&accountStatus="+b.accountStatus)):d="accountList"===c?"/accounts?alias="+e+"&productCode="+b.productCode+"&accountGroupIds="+b.accountGroupId:angular.isDefined(b.accountStatus)&&""!==b.accountStatus?"/accounts?alias="+e+"&productCode="+b.productCode+"&accountSources="+b.accountSource+"&accountStatus="+b.accountStatus+"&searchText="+b.searchText+"&limit="+b.limit+"&offset="+b.offset:"/accounts?alias="+e+"&productCode="+b.productCode+"&accountSources="+b.accountSource+"&searchText="+b.searchText+"&limit="+b.limit+"&offset="+b.offset,a.get(l()+d,m("GET",b.aliasToken))},getAccountControlAccountGroupsDetails:function(b,c){var d="",e=j(b.aliasToken,b.alias);return d="entireAlias"===c?"/accountgroups?alias="+e+"&productCode="+b.productCode+"&accountGroupType=C/A":"filter"===c?"/accountgroups?alias="+e+"&productCode="+b.productCode+"&creatorId="+b.creatorId+"&accountGroupType=C/A":"/accountgroups?alias="+e+"&productCode="+b.productCode+"&searchText="+b.searchText+"&limit="+b.limit+"&offset="+b.offset+"&accountGroupType=C/A",a.get(l()+d,m("GET",b.aliasToken))},getAllAccountDetails:function(b,c){for(var d=e.defer(),f=[],g=[],h="",i=0,k="",n=j(c.aliasToken,c.alias),o=5e3;o<=b;o+=5e3)i++,h=angular.isDefined(c.accountStatus)&&""!==c.accountStatus?"/accounts?alias="+n+"&productCode="+c.productCode+"&accountSources="+c.accountSource+"&accountStatus="+c.accountStatus+"&limit=5000&offset="+o:"/accounts?alias="+n+"&productCode="+c.productCode+"&accountSources="+c.accountSource+"&limit=5000&offset="+o,k="page"+i,g.push(a.get(l()+h,m("GET",c.aliasToken)).then(function(a){f=f.concat(a.data.data)}));return e.all(g).then(function(a){d.resolve(f)}),d.promise},createAccountGroup:function(b,c){var d="/accountgroups";return b.alias=j(c,b.alias),a.post(l()+d,b,m("POST",c))},updateAccountGroup:function(b,c,d){var e="/accountgroups/"+c;return b.alias=j(d,b.alias),a.put(l()+e,b,m("PUT",d))},deleteAccountGroup:function(b,c){var d="/accountgroups/"+b.accountGroupId+"?alias="+j(c,b.alias)+"&productCode="+b.productCode;return a.delete(l()+d,m("DELETE",c))},getWBUserId:function(a){return k()},generateAliasToken:function(a){return"NXN_CA"===a.productCode.value?i.getAliasToken():i.getUserInfo()}}}return a.$inject=["nxn.Http","$http","nxnGuidFactory","NxnUser","$q","ACUrls","PageContext","$window","WBService"],{$get:a}}angular.module("WBAccountControl").value("ACUrls",{MOCK:"/aslookup/v1",LOCAL:"/aslookup/v1",DEV:"https://apigateway.dev.bnymellon.com/aslookup/v1",UAT:"https://apigateway.test.bnymellon.com/aslookup/v1",QA:"https://apigateway.test.bnymellon.com/aslookup/v1",XAT:"https://apigateway.qa.bnymellon.com/aslookup/v1",PRODUCTION:"https://apigateway.bnymellon.com/aslookup/v1"}).provider("WBAccountControlDataRetrieval",a)}(),angular.module("WBCommon",[]).directive("selectionPanel",["$compile",function(a){var b=function(a,b,c){},c=function(a,b){a.showFullText=!!a.showFullText,a.textWidthStyle={width:a.showFullText?"50%":"auto"},a.selectedIndex=angular.isUndefined(a.selectedIndex)?0:a.selectedIndex,a.showTooltipLength=angular.isUndefined(a.showTooltipLength)?0:a.showTooltipLength,a.showBadge=!angular.isUndefined(a.showBadge)&&a.showBadge,a.showValue=!angular.isUndefined(a.showValue)&&a.showValue,a.badge=a.showBadge===!0?"badge":"",a.changeBackground=function(b){a.selectedIndex=b},a.showFormattedText=function(b){return b.length>=a.showTooltipLength?b.substr(0,a.showTooltipLength)+"..":b}};return c.$inject=["$scope","$filter"],{restrict:"E",link:b,scope:{listData:"=nxnListData",selectedIndex:"=?nxnSelectionIndex",showTooltipLength:"=?nxnToolTipLength",showBadge:"=?nxnShowBadge",showValue:"=?nxnShowValue",showFullText:"=?nxnShowFullText",clickCallback:"&nxnSelectionClick"},controller:c,templateUrl:"partials/wb-common/selectionPanel.html"}}]).directive("whenScrolled",function(){return function(a,b,c){var d=b[0];b.bind("scroll",function(){d.scrollTop+d.offsetHeight>=d.scrollHeight&&a.$apply(c.whenScrolled)})}}),angular.module("WBCommon").filter("removeDuplicateFilter",function(){return function(a,b,c){if(b.length>0)for(var d=a.length-1;d>=0;d--)for(var e=0;e<b.length;e++)if(b[e][c]===a[d][c]){a.splice(d,1);break}return a}}).filter("checkAlreadyExists",function(){return function(a,b,c){if(a.length>0)for(var d=a.length-1;d>=0;d--)if(b[c]===a[d][c])return!0;return!1}}).filter("checkAlreadyExistsWithBranchCode",function(){return function(a,b,c){if(a.length>0)for(var d=a.length-1;d>=0;d--)if("IMMS"===b.accountSource.toUpperCase()){if(b[c]===a[d][c]&&b.accountType===a[d].accountType)return!0}else if(b[c]===a[d][c])return!0;return!1}}).filter("itemLoadedFilter",function(){return function(a,b,c){for(var d=a.length-1;d>=0;d--){a[d].itemMoved=!1;for(var e=0;e<b.length;e++)if(b[e][c].trim()===a[d][c].trim()){a[d].itemMoved=!0;break}}return a}}).filter("removeDuplicatesFromArrayFilter",function(){return function(a,b){for(var c,d=[],e=[],f=0;f<a.length;f++)c=a[f][b],e.indexOf(c)===-1&&(d.push(a[f]),e.push(c));return d}}).filter("convertDateTime",["nxn.moment.dateFormat",function(a){return function(b,c){if(angular.isDefined(b)&&null!==b&&b.indexOf(".")>-1){var d;return null===c||angular.isUndefined(c)?d="":null!==c&&""!==c?d=c:""===c&&(d="EST"),a.format(b.split(".")[0],"e","DD MMM YYYY hh:mm:ss A")+" "+d}return""}}]).filter("convertDate",["nxn.moment.dateFormat",function(a){return function(b){return null===b||""===b?"":a.format(b.split(".")[0],"e","MM/DD/YYYY")}}]).filter("convertTime",["nxn.formatData",function(a){return function(b){if(null!=b&&b.length>0&&"N/A"!==b){var c=a.formatValue(b.split(".")[0],"TimestampFormat",null);return c=c.substring(12,c.length)}return""}}]),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(a,b,d,f,g,h,i,m,o){var p=c.defer(),q=n(f,a,b,e.getClientKey(),g,o);return q.then(function(b){l(a,g,i,m),p.resolve(b)},function(c,e,l,n){i++,h>i?p.resolve(j(a,b,d,f,g,h,i,m,o)):p.resolve(k(a,b,d,f,g,i,m,o))}),p.promise}function k(a,b,d,e,f,g,h,i){l(a,f,g,h);var j=c.defer(),k=m();if(k!==d){var o=n(e,a,b,k,f,i);o.then(function(a){j.resolve(a)},function(a,b,c,d){j.resolve(p())})}else j.resolve(p());return j.promise}function l(a,b,c,f){var g={userId:d.getCurrentUser().nxnUser.toUpperCase(),serviceUrl:a,applicationName:f,noOfRetry:c};n("POST",o()+"/log",g,e.getClientKey(),b)}function m(){var a="",b=angular.uppercase(e.getEnvironment());return"XAT"===b?a="lT2rm1dsAecYOK0An_0tXCHUBeMa":"QA"===b?a="oqHssPTLOUGHQtkOxD2oDwlX7toa":"DEV"===b?a="hMRN28YRBUCfcyOrok3H5_McSeIa":"PRODUCTION"===b&&(a="l9vuOTI04uTtf_5LrjJaIIiD3JAa"),a}function n(b,c,d,e,f,g){var h;return"POST"===b.toUpperCase()?h=a.post(c,d,s("POST",e,f,g)):"GET"===b.toUpperCase()?h=a.get(c,s("GET",e,f,g)):"PUT"===b.toUpperCase()?h=a.put(c,d,s("PUT",e,f,g)):"DELETE"===b.toUpperCase()&&(h=a.delete(c,s("DELETE",e,f,g))),h}function o(){var a=angular.uppercase(e.getEnvironment());return i[a]}function p(){return{data:{metadata:{status:!1,responseId:"305b9b17-561f-4880-a595-67d854ba394f",description:"Internal Server Error",elapsedtime:0},error:{code:"CIW004",description:"Unable to process your request. Kindly try again or reach out to CSD/GCAS team for the support"}}}}function q(a){return"error"===a?"An error has occured in backend service fetching Alias":"emptyAlias"===a?"Alias is Invalid/ Empty, please contact administrator":void 0}function r(){var a=angular.uppercase(e.getEnvironment());return h[a]}function s(a,b,c,d){var e={};e={"Content-Type":"application/json"},!angular.isUndefined(b)&&b&&(e["X-client-key"]=b),!angular.isUndefined(c)&&c&&(e["NEXEN-CIW-AliasToken"]=c);var f={headers:e,timeout:t,method:a};return angular.isUndefined(d)||(f.responseType=d),f}var t=12e4;this.getUserInfo=function(){var b=g.serviceUrl[angular.uppercase(e.getEnvironment())],d=c.defer();return a.get(b+"/resolve-wbalias",s("GET")).then(function(a){null!==a.data.error&&""!==a.data.error?d.resolve({alias:"",isInternal:"",aliasToken:"",errorMessage:a.data.error}):null===a.data.data.workbenchAlias.currentAlias||"null"===a.data.data.workbenchAlias.currentAlias||""===a.data.data.workbenchAlias.currentAlias?d.resolve({alias:"",isInternal:"",aliasToken:"",errorMessage:q("emptyAlias")}):d.resolve({alias:a.data.data.workbenchAlias.currentAlias,isInternal:a.data.data.workbenchAlias.isInternalUser,aliasToken:a.data.data.workbenchAlias.aliasToken,errorMessage:""})},function(a,b,c,e){d.resolve({alias:"",isInternal:"",aliasToken:"",errorMessage:q("error")})}),d.promise},this.getAliasToken=function(){var b="/user-privileges",d=c.defer();return a.get(r()+b,s("GET")).then(function(a){angular.isUndefined(a.data.error)||null===a.data.error.errorMessage||""===a.data.error.errorMessage?d.resolve({viewAlias:a.data.data.privileges.viewAlias,viewAliasToken:a.data.data.privileges.viewAliasToken,isSupervisor:a.data.data.privileges.isSupervisor,instructionAliasToken:angular.isUndefined(a.data.data.privileges.instructionAliasToken)||null===a.data.data.privileges.instructionAliasToken?a.data.data.privileges.viewAliasToken:a.data.data.privileges.instructionAliasToken,errorMessage:""}):d.resolve({viewAlias:"",viewAliasToken:"",isSupervisor:!1,instructionAliasToken:"",errorMessage:a.data.error.errorCode+": "+a.data.error.errorMessage})}),d.promise},this.retryServiceCall=function(a){var b=c.defer();return b.resolve(j(a.serviceURL,a.requestPayload,a.xClientKey,a.methodType,a.aliasToken,a.noOfAttemptsToBeCalled,0,a.applicationName,a.responseType)),b.promise}}var b=angular.module("WBCommon");b.value("WBUrls",{MOCK:"ca-entitlements/v1",LOCAL:"ca-entitlements/v1",DEV:"https://apigateway.dev.bnymellon.com/ca-entitlements/v1",UAT:"https://apigateway.test.bnymellon.com/ca-entitlements/v1",QA:"https://apigateway.test.bnymellon.com/ca-entitlements/v1",XAT:"https://apigateway.qa.bnymellon.com/ca-entitlements/v1",PRODUCTION:"https://apigateway.bnymellon.com/ca-entitlements/v1"}).value("aslookupURLs",{MOCK:"/aslookup/v1",LOCAL:"/aslookup/v1",DEV:"https://apigateway.dev.bnymellon.com/aslookup/v1",UAT:"https://apigateway.test.bnymellon.com/aslookup/v1",QA:"https://apigateway.test.bnymellon.com/aslookup/v1",XAT:"https://apigateway.qa.bnymellon.com/aslookup/v1",PRODUCTION:"https://apigateway.bnymellon.com/aslookup/v1"}),b.filter("filterName",["$filter",function(a){return function(){return a("")}}]);var c=["XECCKW1","XBBLZSI","XBBJ6ND","XBBL0FU","XBBLSLM","XBBKFP5","XBBL95M","XBBLWQG","XBBLWDA","XBBL3KB","XBBL425","XBBKNW8","XBBLY57","XBBLZ95","XBBLTZ1","XBBKF3K","XBBLRPU","XBBJTTM","XBBL4WV","XECCPHY","XBBLRLI","XBBLW9D","XBBLXZG","XBBLZKI","XDBFWLH","XEAA06L","XBBLXBE","XBBJ9TZ","XBBLS66","XBBLXP8","XBBKD1U","XBBKJX8","XBBND7S","XBBJW6J","XBBLSTM"];a.$inject=["nxn.Http","nxnGuidFactory","$q","NxnUser","PageContext","WBCommonValues","userSettings.serviceUrls","WBUrls","aslookupURLs"],b.service("WBService",a),b.value("WBCommonValues",{userAlias:void 0,BXP3Users:c})}(),angular.module("web.workbench").controller("deliveryInstrCtrl",["$scope","$rootScope","WebWorkbench","$filter","getAccountList","getCountryList",function(a,b,c,d,e,f){a.countryList=[],a.country={},a.selectedAccounts={},a.summaries=[],a.showGrid=!1;var g=[],h=f;a.countryList=h,a.getImage=function(b){for(var c="",d=0;d<a.countryList.length;d++)"ALL"===a.countryList[d].code?c="img/countryFlags/flag_ALL MARKETS_thumb.gif":b===a.countryList[d].code&&(c="img/countryFlags/flag_"+a.countryList[d].flag+"_thumb.gif");return'<img src ="'+c+'">'},angular.isDefined(e.data)&&angular.isDefined(e.data.result)&&(g=e.data.result.availableAccounts),0===g.length?a.accountList=[{accountName:"ABVPS WEALTH APP STR-BRZ EX 100878",accountNumber:"100881",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"RBS CITIZENS N.A. BANK RHODE ISLAND",accountNumber:"101400",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"RBS CITIZENS N.A. GLB MANAGED USD",accountNumber:"101429",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF OMNIB-MULTIPLE CLTS NO TAX",accountNumber:"104020",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"NOMURA KAG",accountNumber:"104033",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF NOMURA ASIA PACIFIC",accountNumber:"104047",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF AC AGI PV1",accountNumber:"104074",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF A FT S-A A-EEE T BRZ EX104037",accountNumber:"104101",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF ALLIANZ VGI 1 FONDS",accountNumber:"104299",accountStatus:null,accountType:null,accountingStatus:null}]:a.accountList=g,a.selectedAccounts.value=[];var i={appList:"TAX,GMG,DI_BNYM",code:"ALL",codeBNY:"AR",flag:"ALL",fullname:"All",id:"all",name:"All Countries",title:"all countries"};a.countryList.splice(0,0,i),a.go=function(){a.isStartSpinner=!0;for(var b="ALL",d=a.selectedAccounts.value,e="",f=0;f<d.length;f++)e=0===f?"["+d[f].accountNumber+"|"+d[f].accountName+"]":e+",["+d[f].accountNumber+"|"+d[f].accountName+"]";c.getDILookup(b,e).then(function(b){a.isStartSpinner=!1,a.showGrid=!0,a.summaries=b.data.result})}}]),angular.module("web.workbench").directive("custodyOverview",["$controller","$http","QQMWorkbench","PageContext","ngTableParams","$filter",function(a,b,c,d,e,f){return{restrict:"AE",template:function(a,b){var c=Math.floor(1001*Math.random()),d='<div class=""><div class="nxn-min-height-50" nxn-spinner spinner-key="spinnerWires" start-spinner="showSpinner()" child-id="custodyOverviewPartial'+c+'"><h5 class="nxn-dashboard-title">Custody Accounts</h5><div id="custodyOverviewPartial'+c+'" ng-include="\'partials/qqm-workbench/custodyHoldingsDashboard.html\'"></div></div>';return d},scope:{},controller:["$scope",function(a){a.showSpinner=function(){return a.isDisplaySpinner},a.isDisplaySpinner=!0,a.date=moment().locale("e").format("YYYY-MM-DD HH:mm:ss"),c.getPostionSummary(d).then(function(b){for(var c=b.data,d=0;d<c.rows.length;d++){var g=c.rows[d].detailUri;if(!angular.isUndefined(g)&&g.length>0){c.rows[d].recordId=g.substring(g.lastIndexOf("=")+1,g.length);var h=g.substring(g.lastIndexOf("/")+1,g.length);null!=h&&(c.rows[d].positionId=h.substring(0,h.indexOf("?")))}}a.holdingTableParams?(a.gridData=a.posSummaryResponse.rows,a.holdingTableParams.reload()):(a.posSummaryResponse=c,a.gridData=a.posSummaryResponse.rows,a.holdingTableParams=new e({page:1,count:10},{counts:[],total:1,getData:function(b,c){var d=a.gridData,e=c.filter()?f("filter")(d,c.filter()):d,g=c.sorting()?f("orderBy")(e,c.orderBy()):d;c.total(g.length),b.resolve(g.slice((c.page()-1)*c.count(),c.page()*c.count()))}})),a.holdingTableShow=!0,a.isDisplaySpinner=!1,a.isDisplayData=!0},function(){a.holdingTableShow=!1,a.isDisplaySpinner=!1,a.isDisplayData=!1,a.errorMessage="Could not retrieve data at this time"})}]}}]),function(){"use strict";function a(a,b){function c(a,b,c,d,e,f){"boolean"==typeof b[c]?a[c]=b[c]:a[c]=e,angular.isString(b[d])?a[d]=b[d]:a[d]=f}function d(a,b,c,d){a[c]=angular.isString(b[c])?b[c]:d}function e(a,b,c){return angular.isString(a[b])?a[b]:c}function f(a,b,c,d){a[c]="boolean"==typeof b[c]?b[c]:d}function g(c){if(!angular.isString(c)||""===c.trim())return b.warn("url is not a string or empty"),c;if(!h(a.host()))return c;var d=j(c);return angular.isDefined(d)?d:c}function h(a){return a.indexOf(k)!==-1}function i(a){return angular.isString(a)&&""!==a.trim()?null!==a.match(l):(b.warn("url is not a string or empty"),!1)}function j(a){if(i(a))return a.replace(l,"$1accessportals.com")}var k="accessportals.com",l=/^(https:\/\/apigateway(\.(dev|qa|test))?\.)(bnymellon\.com)/i;return{setDisplayInfo:c,setStringResource:d,getStringResource:e,setBooleanResource:f,isAPIGatewayUrl:i,getWhiteLabelAPIGatewayUrl:g}}angular.module("nxn.whiteLabel").service("NxnWhiteLabelUtil",a),a.$inject=["$location","$log"]}(),function(){"use strict";function a(){function a(a){var c=this;c.modalInstance=null,c.showWhiteLabelUrls=function(){var d={headerText:"WhiteLabel Testing",bodyUrl:"partials/whiteLabel/whiteLabelTestModal.html",close:function(){c.modalInstance.close(),c.modalInstance=null}},e={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/common/modal.html",controller:b,resolve:{whiteLabelLinks:["$location","NxnWhiteLabelTestService",function(a,b){return b.getWhiteLabelTestUrls(a.host())}]}};c.modalInstance=a.showModal(e,d)}}function b(a,b,c,d,e){b.modalOptions=d,b.hasWhiteLabelLinks=angular.isArray(e)&&e.length>0,b.whiteLabelLinks=b.hasWhiteLabelLinks?c.modifyWhiteLabelTestUrls(a.host(),e):[],b.errorMessage=b.hasWhiteLabelLinks?"":"No White Label domains associated with this server."}var c={restrict:"E",replace:!0,template:'<a class="nxn-cursor-pointer" data-ng-click="whiteLabelTestModalCtrl.showWhiteLabelUrls()">WhiteLabel Testing</a>',controller:a,controllerAs:"whiteLabelTestModalCtrl"};return a.$inject=["ModalService"],b.$inject=["$location","$scope","NxnWhiteLabelTestService","tempModalOptions","whiteLabelLinks"],c}angular.module("nxn.whiteLabel").directive("whiteLabelTest",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"partials/whiteLabel/wlDefaultContent.html",link:function(a){a.model={selected:void 0},a.onSubmit=function(){a.model.selected.wlKey&&(c.location.href="/"+a.model.selected.wlKey)},a.onCancel=function(){d.logout().then(function(){c.location.href="/"})},a.isDisabled=function(){return!a.model.selected||!a.model.selected.plCode},a.displayWlContent=!f.isMainApp()&&h.isInternalUser()&&h.displayRootWLModal(),a.displayWlContent&&g.getUsersWLPLCodes().then(function(b){a.internalUserId=h.getUser(),a.wlList=b})}}}angular.module("nxn.content").directive("wlDefaultContent",a),a.$inject=["$location","$state","$window","LogoutService","NxnWhiteLabelTestService","NxnWhiteLabelService","NxnWLDefaultContentService","PageContext"]}();var qqm=angular.module("qqm.workbench"),properties={assetType:"assetType",transactionType:"transactionType",transactionStatus:"transactionStatus",accounts:"accounts",securityIdentifier:"securityIdentifier",staticLocation:"staticLocation",dateType:"dateType",dateRange:"dateRange",transactionRefNo:"transactionRefNo",clientRefNo:"clientRefNo",currency:"currency"};qqm.controller("CustodyHomeCtrl",["$scope","$state",function(a,b){a.$state=b,a.tabs=[],a.tabs.push({title:"HOLDING",sref:"custody.holdings",viewName:"holdingsTab",active:!1,isTabSpinner:!0}),a.tabs.push({title:"ACTIVITY",sref:"custody.activity",viewName:"activityTab",active:!1,isTabSpinner:!0}),a.setActiveTab=function(b){for(var c=0;c<a.tabs.length;c++)a.tabs[c].viewName===b?(a.tabs[c].active=!0,a.tabs[c].isTabSpinner=!1):a.tabs[c].active=!1}}]),qqm.controller("qqm.exportCtrl",["$scope","$filter","QQMWorkbench",function(a,b,c){a.exportPDForExcel=function(a,b,d){if(!angular.isUndefined(a)&&a.length>0&&!angular.isUndefined(d)){var e=a.substring(a.lastIndexOf("/")+1,a.length);"pdf"===b&&angular.isDefined(e)&&null!==e&&c.getExportPDF(e,d).then(function(a){}).catch(function(a){}),"excel"===b&&angular.isDefined(e)&&null!==e&&c.getExportExcel(e,d).then(function(a){}).catch(function(a){})}}}]);var specificSecurityValidator=function(a){var b="";if(checkForSpace(a))return b="Please enter Securities with no spaces";var c=splitString(a);b="The length of the specific Securities should be between 11-20";for(var d=0;d<c.length;d++)if(c[d].length<11||c[d].length>20)return b};qqm.controller("TypeaheadCtrl",["$scope","qqm.selectedAccounts",function(a,b){a.selectedAccounts={},a.accountsData=[{accountName:"ABVPS WEALTH APP STR-BRZ EX 100878",accountNumber:"100881",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"RBS CITIZENS N.A. BANK RHODE ISLAND",accountNumber:"101400",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"RBS CITIZENS N.A. GLB MANAGED USD",accountNumber:"101429",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF OMNIB-MULTIPLE CLTS NO TAX",accountNumber:"104020",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"NOMURA KAG",accountNumber:"104033",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF NOMURA ASIA PACIFIC",accountNumber:"104047",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF AC AGI PV1",accountNumber:"104074",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF A FT S-A A-EEE T BRZ EX104037",accountNumber:"104101",accountStatus:null,accountType:null,accountingStatus:null},{accountName:"BHF ALLIANZ VGI 1 FONDS",accountNumber:"104299",accountStatus:null,accountType:null,accountingStatus:null}],a.showAccounts=!1,a.accountTypes=[],a.accountTypes.push({name:"All Accounts"}),a.accountTypes.push({name:"Specific Accounts"}),a.selectedAccounts.value=[];var c=b.getSelectedAccounts();if("undefined"!=typeof c)for(var d=0;d<c.length;d++)for(var e=0;e<a.accountsData.length;e++)if(c[d].code===a.accountsData[e].accountNumber){a.selectedAccounts.value.push(a.accountsData[e]);break}a.selectedAccountType={},a.selectedAccountType.value=a.accountTypes[0],"undefined"!=typeof c&&(c.length>1||1===c.length&&!checkForAll(c.name))&&(a.selectedAccountType.value=a.accountTypes[1],a.showAccounts=!0),a.onAccountTypeSelectionChange=function(){"All Accounts"===a.selectedAccountType.value.name?a.showAccounts=!1:a.showAccounts=!0},a.change=function(){b.setSelectedAccounts(a.selectedAccounts.value)}}]),qqm.controller("CustodyAccountCtrl",["$scope","qqmService","promiseAccounts",function(a,b,c){a.qqmService=b,b.availableAccounts=c,a.setSelectedAccountType=function(){a.qqmService.setSelectedAccountType()}}]),qqm.controller("CustodyAccountsHoldingsCtrl",["qqmService","$scope","$rootScope","QQMWorkbench","ngTableParams","promisePositionPreferedConfig","promisePositionSummary","$filter","qqm.Holdings","$stickyState","$timeout","nxnUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){b.displaySearch=a.getSearch(),b.holdingTableShow=!1,b.setActiveTab("holdingsTab"),b.properties=i.getProperties(),b.locations=a.getStaticLocationsCopy(),b.all=a.getAvailableSearchCriteria("holdings"),b.otherLocation={};var m=b.locations;b.error={},"success"===g.promiseStatus?(b.posSummaryResponse=g.data,b.gridData=b.posSummaryResponse.rows,b.holdingTableParams=new e({page:1,count:10},{total:b.gridData.length,getData:function(a,c){var d=b.gridData,e=c.filter()?h("filter")(d,c.filter()):d,f=c.sorting()?h("orderBy")(e,c.orderBy()):d;c.total(f.length),a.resolve(f.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),b.holdingTableShow=!0):(b.gridData=[],b.holdingTableParams=new e({page:1,count:10},{total:0,getData:function(a,c){var d=b.gridData,e=c.filter()?h("filter")(d,c.filter()):d,f=c.sorting()?h("orderBy")(e,c.orderBy()):d;c.total(f.length),a.resolve(f.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),b.positionsummaryInfo="Service is Unavailable. Please contact NEXEN Administrator"),b.go=function(){if(b.filterHolding="",b.error=a.validate("holdings",b.selected),l.isEmptyObject(b.error)){b.isPositionSpinner=!0,b.holdingTableShow=!1,b.positionsummaryInfo=null;for(var c=0;c<m.length;c++)m[c].selected&&b.selected[b.properties.staticLocation.name].value.push({
name:m[c].name,code:m[c].name});if(!angular.isUndefined(a.getSelectedAccounts())){b.selected[b.properties.accounts.name].value=[];for(var e=0;e<a.getSelectedAccounts().length;e++)b.selected[b.properties.accounts.name].value.push({name:a.getSelectedAccounts()[e].accountName,code:a.getSelectedAccounts()[e].accountNumber})}var f={};angular.forEach(b.properties,function(a){var c=a.name;f[c]=b.selected[c].value});var g=null;d.postSetPreferredConfig(f,a).then(function(c){var e=c.data;g=e,null!=g&&(a.setHoldingsDataConfig(f),d.getPostionSummary(f,a).then(function(a){var c=a.data;b.posSummaryResponse=c,b.gridData=b.posSummaryResponse.rows,b.holdingTableParams.reload(),b.holdingTableShow=!0,b.isPositionSpinner=!1}).catch(function(a){var c=a.data;b.holdingTableShow=!1,b.isPositionSpinner=!1,500!==a.status?b.positionsummaryInfo="Service is Unavailable. Please contact NEXEN Administrator":angular.isUndefined(c.errors)||angular.isUndefined(c.errors.message)?b.positionsummaryInfo="Internal Error":b.positionsummaryInfo=c.errors.message}))}).catch(function(a){var c=a.data;b.holdingTableShow=!1,b.isPositionSpinner=!1,500!==a.status?b.positionsummaryInfo="Service is Unavailable. Please contact NEXEN Administrator":angular.isUndefined(c.errors)||angular.isUndefined(c.errors.message)?b.positionsummaryInfo="Internal Error":b.positionsummaryInfo=c.errors.message})}},b.check=function(a,b){"ALL"===a.name.toUpperCase()?(b.value=[],b.value.push(a)):b.value.length>0&&"ALL"===b.value[0].name.toUpperCase()?(b.value=[],b.value.push(a)):b.value.push(a)},b.reset=function(){n()},b.toggleOtherLocations=function(){b.showOtherLocation=!b.showOtherLocation};var n=function(){b.configLoaded=!1;var c=f.data;b.selected=a.getSelected("holdings",b.all,c),b.selected[b.properties.dynamicLocation.name].value.length>0&&(b.showOtherLocation=!0,b.otherLocation.selected=!0);for(var d=b.properties.staticLocation.name,e=b.selected[d].value,g=0;g<e.length;g++)for(var h=0;h<m.length;h++)if(e[g].code===m[h].code){m[h].selected=!0;break}if(b.selected[d].value=[],a.isAcccountConfigLoaded())b.configLoaded=!0;else{if(c.accounts.length>0)a.setSelectedAccountsFromConfig(c.accounts);else if(!angular.isUndefined(a.availableAccounts)){for(var i=[],j=0;j<a.availableAccounts.length;j++)i.push({name:a.availableAccounts[j].accountName,code:a.availableAccounts[j].accountNumber});a.setSelectedAccountsFromConfig(i)}b.configLoaded=!0}var k={};angular.forEach(b.properties,function(a){var c=a.name;k[c]=b.selected[c].value}),b.isPositionSpinner=!1};n(),c.$on("refreshHoldings",function(){b.go.apply()}),b.custodyPositionDataExportFunction=function(a,b){b.push(a.row.ACCOUNT_NUMBER),b.push(a.row.ACCOUNT_NAME),b.push(a.row.ISIN),b.push(a.row.SECURITY_NAME),b.push(a.row.REG),b.push(a.row.LOC),b.push(a.row.POSTED_UNITS),b.push(a.row.POSITION_STATUS)}}]),qqm.controller("CustodyAccountsActivityCtrl",["qqmService","$scope","$rootScope","QQMWorkbench","ngTableParams","$filter","promiseActivityPreferedConfig","promiseTransactionSummary","qqm.Activity","$stickyState","$timeout","nxnUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){b.displaySearch=a.getSearch(),b.setActiveTab("activityTab"),b.activityTableShow=!1,b.properties=i.getProperties(),b.locations=a.getStaticLocationsCopy(),b.all=a.getAvailableSearchCriteria("activity"),b.otherLocation={};var m=b.locations;b.error={},"success"===h.promiseStatus?(b.transSummaryResponse=h.data,b.gridData=b.transSummaryResponse.rows,b.activityTableParams=new e({page:1,count:10},{total:b.gridData.length,getData:function(a,c){var d=b.gridData,e=c.filter()?f("filter")(d,c.filter()):d,g=c.sorting()?f("orderBy")(e,c.orderBy()):d;c.total(g.length),a.resolve(g.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),b.activityTableShow=!0):(b.gridData=[],b.activityTableParams=new e({page:1,count:10},{total:0,getData:function(a,c){var d=b.gridData,e=c.filter()?f("filter")(d,c.filter()):d,g=c.sorting()?f("orderBy")(e,c.orderBy()):d;c.total(g.length),a.resolve(g.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),b.transactionSummaryInfo="Service is Unavailable. Please contact NEXEN Administrator"),b.go=function(){if(b.error=a.validate("activity",b.selected),l.isEmptyObject(b.error)){b.isActivitySpinner=!0,b.activityTableShow=!1,b.transactionSummaryInfo=null;for(var c=0;c<m.length;c++)m[c].selected&&b.selected[b.properties.staticLocation.name].value.push({name:m[c].name,code:m[c].name});if(!angular.isUndefined(a.getSelectedAccounts())){b.selected[b.properties.accounts.name].value=[];for(var e=0;e<a.getSelectedAccounts().length;e++)b.selected[b.properties.accounts.name].value.push({name:a.getSelectedAccounts()[e].accountName,code:a.getSelectedAccounts()[e].accountNumber})}var f={};angular.forEach(b.properties,function(c){var d=c.name;"specificToDateRange"===d||"specificFromDateRange"===d?b.showDates&&!angular.isUndefined(b.selected[d].value)&&(f[d]=a.formatDate(b.selected[d].value)):f[d]=b.selected[d].value}),b.transSummaryResponse=null;var g=null;d.setPreferredConfigTransaction(f,a).then(function(c){g=c.data,angular.isDefined(g)&&null!==g&&(a.setActivityDataConfig(f),d.getTransactionSummary(f,a).then(function(a){b.transSummaryResponse=a.data,b.gridData=b.transSummaryResponse.rows,b.activityTableParams.reload(),b.isActivitySpinner=!1,b.activityTableShow=!0}).catch(function(a){var c=a.data;b.isActivitySpinner=!1,b.activityTableShow=!1,500!==a.status?b.transactionSummaryInfo="Service is Unavailable. Please contact NEXEN Administrator":angular.isUndefined(c.errors)||angular.isUndefined(c.errors.message)?b.transactionSummaryInfo="Internal Error":b.transactionSummaryInfo=c.errors.message}))}).catch(function(a){var c=a.data;b.isActivitySpinner=!1,b.activityTableShow=!1,500!==a.status?b.transactionSummaryInfo="Service is Unavailable. Please contact NEXEN Administrator":angular.isUndefined(c.errors)||angular.isUndefined(c.errors.message)?b.transactionSummaryInfo="Internal Error":b.transactionSummaryInfo=c.errors.message})}},b.check=function(a,b){"ALL"===a.name.toUpperCase()?(b.value=[],b.value.push(a)):"ALL"===b.value[0].name.toUpperCase()?(b.value=[],b.value.push(a)):b.value.push(a)},b.onDateRangeSelect=function(){if(angular.isUndefined(b.properties.dateRange.name))b.showDates=!1;else{var a=b.properties.dateRange.name,c=b.selected[a].value;!angular.isDefined(c)||null===c||"R"!==c.code&&"S"!==c.code?b.showDates=!1:b.showDates=!0}},b.reset=function(){n()},b.toggleOtherLocations=function(){b.showOtherLocation=!b.showOtherLocation},b.clear=function(){b.fromDate.value=null,b.toDate.value=null},b.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())},b.toggleMin=function(){b.minDate=b.minDate?null:new Date},b.toggleMin(),b.openedFrom={},b.openedTo={},b.openFrom=function(a){a.preventDefault(),a.stopPropagation(),b.openedFrom.value=!0},b.openTo=function(a){a.preventDefault(),a.stopPropagation(),b.openedTo.value=!0},b.dateOptions={formatYear:"yy",startingDay:1},b.format="dd-MMMM-yyyy";var n=function(){b.configLoaded=!1;var c=g.data;b.selected=a.getSelected("activity",b.all,c),b.selected[b.properties.dynamicLocation.name].value.length>0&&(b.showOtherLocation=!0,b.otherLocation.selected=!0);var d=b.properties.specificFromDateRange.name,e=b.properties.specificToDateRange.name;if(null==c[d]||angular.isUndefined(c[d]))b.selected[d].value=new Date;else{var f=new Date(c[d]);b.selected[d].value=f}if(null==c[e]||angular.isUndefined(c[e]))b.selected[e].value=new Date;else{var h=new Date(c[e]);b.selected[e].value=h}for(var i=b.properties.staticLocation.name,j=b.selected[i].value,k=0;k<j.length;k++)for(var l=0;l<m.length;l++)if(j[k].code===m[l].code){m[l].selected=!0;break}b.selected[i].value=[];var n=b.properties.dateRange.name,o=b.selected[n].value;if(!angular.isDefined(o)||null===o||"R"!==o.code&&"S"!==o.code||(b.showDates=!0),a.isAcccountConfigLoaded())b.configLoaded=!0;else{if(c.accounts.length>0)a.setSelectedAccountsFromConfig(c.accounts);else if(!angular.isUndefined(a.availableAccounts)){for(var p=[],q=0;q<a.availableAccounts.length;q++)p.push({name:a.availableAccounts[q].accountName,code:a.availableAccounts[q].accountNumber});a.setSelectedAccountsFromConfig(p)}b.configLoaded=!0}var r={};angular.forEach(b.properties,function(c){var d=c.name;"specificToDateRange"===d||"specificFromDateRange"===d?b.showDates&&!angular.isUndefined(b.selected[d].value)&&(r[d]=a.formatDate(b.selected[d].value)):r[d]=b.selected[d].value})};n(),c.$on("refreshActivity",function(){b.go.apply()}),b.custodyTransactionDataExportFunction=function(b,c){c.push(b.row.ACCOUNT_NUMBER),c.push(b.row.ACCOUNT_NAME),c.push(b.row.TRANS),c.push(b.row.ISIN),c.push(b.row.SECURITY_NAME),c.push(b.row.STATUS),c.push(a.formatDate(b.row.CREATE_DATE)),c.push(a.formatDate(b.row.SETTLE_DATE))}}]),qqm.controller("custodyHoldingsDetailCtrl",["$scope","$stateParams","QQMWorkbench","nxn.moment.dateFormat",function(a,b,c,d){a.isHoldingsDetailSpinner=!0,a.positionDetail=null;var e=b.positionId,f=b.recordId;c.getPositionDetail(e,f).then(function(b){var c=b.data;a.positionDetail=c.row,a.positionExport=c.export,a.isHoldingsDetailSpinner=!1}).catch(function(b){console.error("error in  getting positionDetail",b.data),a.isHoldingsDetailSpinner=!1}),a.formatDate=function(a,b){return angular.isDefined(a)&&null!==a&&a.length>0?d.format(a,"e",b):"-"}}]),qqm.controller("custodyActivityDetailCtrl",["$scope","$stateParams","QQMWorkbench","nxn.moment.dateFormat",function(a,b,c,d){a.isActivityDetailSpinner=!0,a.activityDetail=null;var e=b.transactionId,f=b.recordId;c.getTransactionDetail(e,f).then(function(b){var c=b.data;a.activityDetail=c.row,a.activityExport=c.export,a.isActivityDetailSpinner=!1}).catch(function(b){a.isActivityDetailSpinner=!1}),a.formatDate=function(a,b){return angular.isDefined(a)&&null!==a&&a.length>0?d.format(a,"e",b):"-"}}]),angular.module("qqm.workbench").run(function(){}),angular.module("nxnSelect",["ngSanitize","ui.select","ui.bootstrap"]),angular.module("nxnSelect").directive("tabControl",function(){return function(a,b){angular.element(b).find(".selectbox").change(function(a){var c=angular.element(a.currentTarget).find("option:selected").index();angular.element(b).find(".tab-content > div").removeClass("active"),angular.element(b).find(".tab-content > div").eq(c).toggleClass("active")})}}).run(["$rootScope",function(a){}]).controller("selectDropDown",["$scope",function(a){a.onDetailList="empty",a.updateDetails=function(b,c){a.onDetailList=b.name},a.currency=[{name:"Rupees"},{name:"USD"},{name:"Dollar"},{name:"Pound"}],a.dateRange=[{name:"Previous Day"},{name:"Today+1 Weekday"},{name:"Today+2 Weekdays"},{name:"Today+3 Weekdays"},{name:"Today+4 Weekdays"},{name:"Today+5 Weekdays"},{name:"Today+6 Weekdays"}],a.display=[{name:"Summary"},{name:"Detail"}],a.status=[{name:"Settled"},{name:"Pending"},{name:"Failed"},{name:"Cancelled"}],a.transaction=[{name:"Buy"},{name:"Sell"},{name:"Capital Stock"},{name:"Income and Corporate Actions"},{name:"Cash Deposit / Withdrawal and FX"}],angular.element(".nav.nav-tabs").addClass("hidden-xs hidden-sm")}]).controller("holdingAcctCtrl",["$scope",function(a){a.assetType=[{name:"All"},{name:"CONTRACTS"},{name:"DEBT"},{name:"DEBT TBA  ANNOUNCEMENTS"},{name:"DEBT US TREASURES"},{name:"DEBT US AGENCY"},{name:"DEBT US AGENCY"},{name:"DEBT US PASS-THROUGH MBS"},{name:"EQUITIES"},{name:"MISCELLANEOUS"},{name:"MISCELLANEOUS DEBT"},{name:"MONEY MARKET INSTRUMENTS"}],a.transType=[{name:"Buy"},{name:"Cash Deposit"},{name:"Cash Withdrawal"},{name:"corporate stack"},{name:"Capital Actions"},{name:"Divedend"},{name:"Foreign Exchange"},{name:"DEBT US PASS-THROUGH MBS"},{name:"EQUITIES"},{name:"MISCELLANEOUS"},{name:"MISCELLANEOUS DEBT"},{name:"MONEY MARKET INSTRUMENTS"}],a.showDateChooser=function(a){angular.element(a.currentTarget).datepicker({changeMonth:!0,changeYear:!0}).focus()}}]).controller("ngtableForCashAcc",["$scope","$filter","ngTableParams",function(a,b,c){var d=[{accNo:"3566175600 - ASIA PACIFIC FUND",currency:"USD10",openingBal:"500,000,00.00",sTotal:"-",pTotal:"-",pClose:"0.00",aTotal:"0.00",aBal:"0.00",fTotal:"0.00",cancelled:"0.00"},{accNo:"3566175600 - ASIA PACIFIC FUND",currency:"USD10",openingBal:"500,000,00.00",sTotal:"-",pTotal:"-",pClose:"0.00",aTotal:"0.00",aBal:"0.00",fTotal:"0.00",cancelled:"0.00"},{accNo:"3566175600 - ASIA PACIFIC FUND",currency:"USD10",openingBal:"500,000,00.00",sTotal:"-",pTotal:"-",pClose:"0.00",aTotal:"0.00",aBal:"0.00",fTotal:"0.00",cancelled:"0.00"}];a.tableParams=new c({page:1,count:10,sorting:{name:"asc"}},{total:d.length,getData:function(a,c){var e=c.sorting()?b("orderBy")(d,c.orderBy()):d;a.resolve(e.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),a.showDateChooser=function(a){angular.element(a.currentTarget).datepicker({changeMonth:!0,changeYear:!0,dateFormat:"d M y"}).focus()}}]).controller("ngTableControllerDelivery",["$scope","ngTableParams","$sce",function(a,b,c){var d=[{acctNum:"101400",acctName:"RBS CITIZENS N.A. BANK RHODE ISLAND",countName:"Australia",locCode:"NAB",subCustName:"NATL AUSTRALIA BK LTD",swiftBic:"000000005951",secSubAcct:"REG OMNIBUS ACT",subAcctName:"08/21/2014",localMarketId:""},{acctNum:"101400",acctName:"RBS CITIZENS N.A. BANK RHODE ISLAND",countName:"Canada",locCode:"HBH",subCustName:"Depositary information",swiftBic:"001797240500",secSubAcct:"08/21/2014",subAcctName:"-",localMarketId:""},{acctNum:"101400",acctName:"RBS CITIZENS N.A. BANK RHODE ISLAND",countName:"China",locCode:"HBH",subCustName:"HSBC SHANGHAI",swiftBic:"002414394503",secSubAcct:"08/21/2014",subAcctName:"REG SEG ACCOUNT",localMarketId:""},{acctNum:"101400",acctName:"RBS CITIZENS N.A. BANK RHODE ISLAND",countName:"Hong Kong",locCode:"HKK",subCustName:"HKK SHANGHAI BANK",swiftBic:"97816",secSubAcct:"08/21/2014",subAcctName:"MAIN ACCT NETWORK",localMarketId:""}];a.tableParams=new b({page:1,count:5,acctNum:{fundName:"asc"}},{total:d.length,getData:function(a,b){a.resolve(d.slice((b.page()-1)*b.count(),b.page()*b.count()))}})}]),window.DEFAULT_SYSTEM_JS_CONFIG={baseURL:"modules",map:{},meta:{"*":{authorization:!0}},packages:{".":{defaultExtension:"js"}}};
//# sourceMappingURL=nxn-app.js.map